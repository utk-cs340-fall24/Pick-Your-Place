a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) GPL Cooperation Commitment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) Version 1.0
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4) Before filing or continuing to prosecute any legal proceeding or claim
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5) (other than a Defensive Action) arising from termination of a Covered
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6) License, we commit to extend to the person or entity ('you') accused
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) of violating the Covered License the following provisions regarding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) cure and reinstatement, taken from GPL version 3. As used here, the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) term 'this License' refers to the specific Covered License being
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) enforced.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12)     However, if you cease all violation of this License, then your
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13)     license from a particular copyright holder is reinstated (a)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14)     provisionally, unless and until the copyright holder explicitly
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15)     and finally terminates your license, and (b) permanently, if the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16)     copyright holder fails to notify you of the violation by some
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17)     reasonable means prior to 60 days after the cessation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19)     Moreover, your license from a particular copyright holder is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20)     reinstated permanently if the copyright holder notifies you of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21)     violation by some reasonable means, this is the first time you
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22)     have received notice of violation of this License (for any work)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23)     from that copyright holder, and you cure the violation prior to 30
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24)     days after your receipt of the notice.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) We intend this Commitment to be irrevocable, and binding and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) enforceable against us and assignees of or successors to our
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) copyrights.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) Definitions
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) 'Covered License' means the GNU General Public License, version 2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) (GPLv2), the GNU Lesser General Public License, version 2.1
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) (LGPLv2.1), or the GNU Library General Public License, version 2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) (LGPLv2), all as published by the Free Software Foundation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 37) 'Defensive Action' means a legal proceeding or claim that We bring
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 38) against you in response to a prior proceeding or claim initiated by
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 39) you or your affiliate.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 40) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 41) 'We' means each contributor to this repository as of the date of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 42) inclusion of this file, including subsidiaries of a corporate
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 43) contributor.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 44) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 45) This work is available under a Creative Commons Attribution-ShareAlike
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 46) 4.0 International license (https://creativecommons.org/licenses/by-sa/4.0/).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2)     "name": "phpmailer/phpmailer",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3)     "type": "library",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)     "description": "PHPMailer is a full-featured email creation and transfer class for PHP",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)     "authors": [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)         {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)             "name": "Marcus Bointon",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)             "email": "phpmailer@synchromedia.co.uk"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)         },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10)         {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11)             "name": "Jim Jagielski",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12)             "email": "jimjag@gmail.com"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13)         },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14)         {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15)             "name": "Andy Prevost",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16)             "email": "codeworxtech@users.sourceforge.net"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17)         },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18)         {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19)             "name": "Brent R. Matzelle"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21)     ],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22)     "funding": [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23)         {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24)             "url": "https://github.com/Synchro",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25)             "type": "github"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27)     ],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28)     "config": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29)         "allow-plugins": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30)             "dealerdirect/phpcodesniffer-composer-installer": true
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31)         },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32)         "lock": false
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33)     },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34)     "require": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35)         "php": ">=5.5.0",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36)         "ext-ctype": "*",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 37)         "ext-filter": "*",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 38)         "ext-hash": "*"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 39)     },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 40)     "require-dev": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 41)         "dealerdirect/phpcodesniffer-composer-installer": "^1.0",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 42)         "doctrine/annotations": "^1.2.6 || ^1.13.3",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 43)         "php-parallel-lint/php-console-highlighter": "^1.0.0",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 44)         "php-parallel-lint/php-parallel-lint": "^1.3.2",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 45)         "phpcompatibility/php-compatibility": "^9.3.5",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 46)         "roave/security-advisories": "dev-latest",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 47)         "squizlabs/php_codesniffer": "^3.7.2",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 48)         "yoast/phpunit-polyfills": "^1.0.4"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 49)     },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 50)     "suggest": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 51)         "decomplexity/SendOauth2": "Adapter for using XOAUTH2 authentication",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 52)         "ext-mbstring": "Needed to send email in multibyte encoding charset or decode encoded addresses",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 53)         "ext-openssl": "Needed for secure SMTP sending and DKIM signing",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 54)         "greew/oauth2-azure-provider": "Needed for Microsoft Azure XOAUTH2 authentication",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 55)         "hayageek/oauth2-yahoo": "Needed for Yahoo XOAUTH2 authentication",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 56)         "league/oauth2-google": "Needed for Google XOAUTH2 authentication",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 57)         "psr/log": "For optional PSR-3 debug logging",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 58)         "thenetworg/oauth2-azure": "Needed for Microsoft XOAUTH2 authentication",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 59)         "symfony/polyfill-mbstring": "To support UTF-8 if the Mbstring PHP extension is not enabled (^1.2)"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 60)     },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 61)     "autoload": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 62)         "psr-4": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 63)             "PHPMailer\\PHPMailer\\": "src/"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 64)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 65)     },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 66)     "autoload-dev": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 67)         "psr-4": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 68)             "PHPMailer\\Test\\": "test/"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 69)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 70)     },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 71)     "license": "LGPL-2.1-only",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 72)     "scripts": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 73)         "check": "./vendor/bin/phpcs",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 74)         "test": "./vendor/bin/phpunit --no-coverage",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 75)         "coverage": "./vendor/bin/phpunit",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 76)         "lint": [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 77)             "@php ./vendor/php-parallel-lint/php-parallel-lint/parallel-lint . --show-deprecated -e php,phps --exclude vendor --exclude .git --exclude build"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 78)         ]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 79)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 80) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) root = true
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) [*]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4) charset = utf-8
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5) indent_size = 4
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6) indent_style = space
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) end_of_line = lf
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) insert_final_newline = true
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) trim_trailing_whitespace = true
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) [*.md]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) trim_trailing_whitespace = false
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) [*.{yml,yaml}]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) indent_size = 2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   4)  * PHPMailer - PHP email creation and transport class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   5)  * PHP Version 5.5
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   6)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   7)  * @see https://github.com/PHPMailer/PHPMailer/ The PHPMailer GitHub project
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   8)  * @author Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   9)  * @author Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  10)  * @author Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  11)  * @author Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  12)  * @copyright 2012 - 2020 Marcus Bointon
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  13)  * @copyright 2010 - 2012 Jim Jagielski
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  14)  * @copyright 2004 - 2009 Andy Prevost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  15)  * @license https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html GNU Lesser General Public License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  16)  * @note This program is distributed in the hope that it will be useful - WITHOUT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  17)  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  18)  * FITNESS FOR A PARTICULAR PURPOSE.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  19)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  20) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  21) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  22)  * Get an OAuth2 token from an OAuth2 provider.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  23)  * * Install this script on your server so that it's accessible
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  24)  * as [https/http]://<yourdomain>/<folder>/get_oauth_token.php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  25)  * e.g.: http://localhost/phpmailer/get_oauth_token.php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  26)  * * Ensure dependencies are installed with 'composer install'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  27)  * * Set up an app in your Google/Yahoo/Microsoft account
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  28)  * * Set the script address as the app's redirect URL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  29)  * If no refresh token is obtained when running this file,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  30)  * revoke access to your app and run the script again.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  31)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  32) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  33) namespace PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  34) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  35) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  36)  * Aliases for League Provider Classes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  37)  * Make sure you have added these to your composer.json and run `composer install`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  38)  * Plenty to choose from here:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  39)  * @see https://oauth2-client.thephpleague.com/providers/thirdparty/
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  40)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  41) //@see https://github.com/thephpleague/oauth2-google
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  42) use League\OAuth2\Client\Provider\Google;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  43) //@see https://packagist.org/packages/hayageek/oauth2-yahoo
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  44) use Hayageek\OAuth2\Client\Provider\Yahoo;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  45) //@see https://github.com/stevenmaguire/oauth2-microsoft
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  46) use Stevenmaguire\OAuth2\Client\Provider\Microsoft;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  47) //@see https://github.com/greew/oauth2-azure-provider
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  48) use Greew\OAuth2\Client\Provider\Azure;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  49) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  50) if (!isset($_GET['code']) && !isset($_POST['provider'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  51)     ?>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  52) <html>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  53) <body>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  54) <form method="post">
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  55)     <h1>Select Provider</h1>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  56)     <input type="radio" name="provider" value="Google" id="providerGoogle">
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  57)     <label for="providerGoogle">Google</label><br>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  58)     <input type="radio" name="provider" value="Yahoo" id="providerYahoo">
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  59)     <label for="providerYahoo">Yahoo</label><br>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  60)     <input type="radio" name="provider" value="Microsoft" id="providerMicrosoft">
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  61)     <label for="providerMicrosoft">Microsoft</label><br>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  62)     <input type="radio" name="provider" value="Azure" id="providerAzure">
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  63)     <label for="providerAzure">Azure</label><br>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  64)     <h1>Enter id and secret</h1>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  65)     <p>These details are obtained by setting up an app in your provider's developer console.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  66)     </p>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  67)     <p>ClientId: <input type="text" name="clientId"><p>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  68)     <p>ClientSecret: <input type="text" name="clientSecret"></p>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  69)     <p>TenantID (only relevant for Azure): <input type="text" name="tenantId"></p>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  70)     <input type="submit" value="Continue">
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  71) </form>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  72) </body>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  73) </html>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  74)     <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  75)     exit;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  76) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  77) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  78) require 'vendor/autoload.php';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  79) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  80) session_start();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  81) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  82) $providerName = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  83) $clientId = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  84) $clientSecret = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  85) $tenantId = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  86) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  87) if (array_key_exists('provider', $_POST)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  88)     $providerName = $_POST['provider'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  89)     $clientId = $_POST['clientId'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  90)     $clientSecret = $_POST['clientSecret'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  91)     $tenantId = $_POST['tenantId'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  92)     $_SESSION['provider'] = $providerName;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  93)     $_SESSION['clientId'] = $clientId;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  94)     $_SESSION['clientSecret'] = $clientSecret;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  95)     $_SESSION['tenantId'] = $tenantId;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  96) } elseif (array_key_exists('provider', $_SESSION)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  97)     $providerName = $_SESSION['provider'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  98)     $clientId = $_SESSION['clientId'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  99)     $clientSecret = $_SESSION['clientSecret'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 100)     $tenantId = $_SESSION['tenantId'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 101) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 102) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 103) //If you don't want to use the built-in form, set your client id and secret here
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 104) //$clientId = 'RANDOMCHARS-----duv1n2.apps.googleusercontent.com';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 105) //$clientSecret = 'RANDOMCHARS-----lGyjPcRtvP';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 106) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 107) //If this automatic URL doesn't work, set it yourself manually to the URL of this script
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 108) $redirectUri = (isset($_SERVER['HTTPS']) ? 'https://' : 'http://') . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 109) //$redirectUri = 'http://localhost/PHPMailer/redirect';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 110) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 111) $params = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 112)     'clientId' => $clientId,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 113)     'clientSecret' => $clientSecret,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 114)     'redirectUri' => $redirectUri,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 115)     'accessType' => 'offline'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 116) ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 117) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 118) $options = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 119) $provider = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 120) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 121) switch ($providerName) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 122)     case 'Google':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 123)         $provider = new Google($params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 124)         $options = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 125)             'scope' => [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 126)                 'https://mail.google.com/'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 127)             ]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 128)         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 129)         break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 130)     case 'Yahoo':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 131)         $provider = new Yahoo($params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 132)         break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 133)     case 'Microsoft':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 134)         $provider = new Microsoft($params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 135)         $options = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 136)             'scope' => [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 137)                 'wl.imap',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 138)                 'wl.offline_access'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 139)             ]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 140)         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 141)         break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 142)     case 'Azure':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 143)         $params['tenantId'] = $tenantId;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 144) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 145)         $provider = new Azure($params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 146)         $options = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 147)             'scope' => [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 148)                 'https://outlook.office.com/SMTP.Send',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 149)                 'offline_access'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 150)             ]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 151)         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 152)         break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 153) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 154) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 155) if (null === $provider) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 156)     exit('Provider missing');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 157) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 158) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 159) if (!isset($_GET['code'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 160)     //If we don't have an authorization code then get one
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 161)     $authUrl = $provider->getAuthorizationUrl($options);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 162)     $_SESSION['oauth2state'] = $provider->getState();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 163)     header('Location: ' . $authUrl);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 164)     exit;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 165)     //Check given state against previously stored one to mitigate CSRF attack
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 166) } elseif (empty($_GET['state']) || ($_GET['state'] !== $_SESSION['oauth2state'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 167)     unset($_SESSION['oauth2state']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 168)     unset($_SESSION['provider']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 169)     exit('Invalid state');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 170) } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 171)     unset($_SESSION['provider']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 172)     //Try to get an access token (using the authorization code grant)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 173)     $token = $provider->getAccessToken(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 174)         'authorization_code',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 175)         [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 176)             'code' => $_GET['code']
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 177)         ]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 178)     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 179)     //Use this to interact with an API on the users behalf
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 180)     //Use this to get a new access token if the old one expires
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 181)     echo 'Refresh Token: ', htmlspecialchars($token->getRefreshToken());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 182) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Afrikaans PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) $PHPMAILER_LANG['authenticate']         = 'SMTP-fout: kon nie geverifieer word nie.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['connect_host']         = 'SMTP-fout: kon nie aan SMTP-verbind nie.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP-fout: data nie aanvaar nie.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['empty_message']        = 'Boodskapliggaam leeg.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['encoding']             = 'Onbekende kodering: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['execute']              = 'Kon nie uitvoer nie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['file_access']          = 'Kon nie lêer oopmaak nie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_open']            = 'Lêerfout: Kon nie lêer oopmaak nie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['from_failed']          = 'Die volgende Van adres misluk: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['instantiate']          = 'Kon nie posfunksie instansieer nie.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['invalid_address']      = 'Ongeldige adres: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer word nie ondersteun nie.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['provide_address']      = 'U moet ten minste een ontvanger e-pos adres verskaf.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['recipients_failed']    = 'SMTP-fout: Die volgende ontvangers het misluk: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['signing']              = 'Ondertekening Fout: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP-verbinding () misluk.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_error']           = 'SMTP-bediener fout: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['variable_set']         = 'Kan nie veranderlike instel of herstel nie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['extension_missing']    = 'Uitbreiding ontbreek: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Arabic PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author bahjat al mostafa <bahjat983@hotmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'خطأ SMTP : لا يمكن تأكيد الهوية.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'خطأ SMTP: لا يمكن الاتصال بالخادم SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'خطأ SMTP: لم يتم قبول المعلومات .';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'نص الرسالة فارغ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'ترميز غير معروف: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'لا يمكن تنفيذ : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'لا يمكن الوصول للملف: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'خطأ في الملف: لا يمكن فتحه: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'خطأ على مستوى عنوان المرسل : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'لا يمكن توفير خدمة البريد.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'الإرسال غير ممكن لأن عنوان البريد الإلكتروني غير صالح: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' برنامج الإرسال غير مدعوم.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'يجب توفير عنوان البريد الإلكتروني لمستلم واحد على الأقل.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'خطأ SMTP: الأخطاء التالية فشل في الارسال لكل من : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'خطأ في التوقيع: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() غير ممكن.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'خطأ على مستوى الخادم SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'لا يمكن تعيين أو إعادة تعيين متغير: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'الإضافة غير موجودة: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Assamese PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Manish Sarkar <manish.n.manish@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP ত্ৰুটি: প্ৰমাণীকৰণ কৰিব নোৱাৰি';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['buggy_php']            = 'আপোনাৰ PHP সংস্কৰণ এটা বাগৰ দ্বাৰা প্ৰভাৱিত হয় যাৰ ফলত নষ্ট বাৰ্তা হব পাৰে । ইয়াক সমাধান কৰিবলে, প্ৰেৰণ কৰিবলে SMTP ব্যৱহাৰ কৰক, আপোনাৰ php.ini ত mail.add_x_header বিকল্প নিষ্ক্ৰিয় কৰক, MacOS বা Linux লৈ সলনি কৰক, বা আপোনাৰ PHP সংস্কৰণ 7.0.17+ বা 7.1.3+ লৈ সলনি কৰক ।';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP ত্ৰুটি: SMTP চাৰ্ভাৰৰ সৈতে সংযোগ কৰিবলে অক্ষম';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP ত্ৰুটি: তথ্য গ্ৰহণ কৰা হোৱা নাই';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'বাৰ্তাৰ মূখ্য অংশ খালী।';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'অজ্ঞাত এনকোডিং: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'এক্সিকিউট কৰিব নোৱাৰি: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['extension_missing']    = 'সম্প্ৰসাৰণ নোহোৱা হৈছে: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_access']          = 'ফাইল অভিগম কৰিবলে অক্ষম: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['file_open']            = 'ফাইল ত্ৰুটি: ফাইল খোলিবলৈ অক্ষম: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['from_failed']          = 'নিম্নলিখিত প্ৰেৰকৰ ঠিকনা(সমূহ) ব্যৰ্থ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['instantiate']          = 'মেইল ফাংচনৰ এটা উদাহৰণ সৃষ্টি কৰিবলে অক্ষম';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_address']      = 'প্ৰেৰণ কৰিব নোৱাৰি: অবৈধ ইমেইল ঠিকনা: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_header']       = 'অবৈধ হেডাৰৰ নাম বা মান';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_hostentry']    = 'অবৈধ হোষ্টেন্ট্ৰি: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_host']         = 'অবৈধ হস্ট:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['mailer_not_supported'] = 'মেইলাৰ সমৰ্থিত নহয়।';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['provide_address']      = 'আপুনি অন্ততঃ এটা গন্তব্য ইমেইল ঠিকনা দিব লাগিব';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['recipients_failed']    = 'SMTP ত্ৰুটি: নিম্নলিখিত গন্তব্যস্থানসমূহ ব্যৰ্থ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['signing']              = 'স্বাক্ষৰ কৰাত ব্যৰ্থ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_code']            = 'SMTP কড: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['smtp_code_ex']         = 'অতিৰিক্ত SMTP তথ্য: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_detail']          = 'বিৱৰণ:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP সংযোগ() ব্যৰ্থ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_error']           = 'SMTP চাৰ্ভাৰৰ ত্ৰুটি: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['variable_set']         = 'চলক নিৰ্ধাৰণ কৰিব পৰা নগল: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['extension_missing']    = 'অনুপস্থিত সম্প্ৰসাৰণ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Azerbaijani PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author @mirjalal
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP xətası: Giriş uğursuz oldu.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP xətası: SMTP serverinə qoşulma uğursuz oldu.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP xətası: Verilənlər qəbul edilməyib.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Boş mesaj göndərilə bilməz.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Qeyri-müəyyən kodlaşdırma: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Əmr yerinə yetirilmədi: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Fayla giriş yoxdur: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Fayl xətası: Fayl açıla bilmədi: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Göstərilən poçtlara göndərmə uğursuz oldu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Mail funksiyası işə salına bilmədi.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Düzgün olmayan e-mail adresi: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' - e-mail kitabxanası dəstəklənmir.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Ən azı bir e-mail adresi daxil edilməlidir.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP xətası: Aşağıdakı ünvanlar üzrə alıcılara göndərmə uğursuzdur: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'İmzalama xətası: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP serverinə qoşulma uğursuz oldu.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP serveri xətası: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Dəyişənin quraşdırılması uğursuz oldu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Bosnian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Ermin Islamagić <ermin@islamagic.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP Greška: Neuspjela prijava.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP Greška: Nije moguće spojiti se sa SMTP serverom.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP Greška: Podatci nisu prihvaćeni.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Sadržaj poruke je prazan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Nepoznata kriptografija: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Nije moguće izvršiti naredbu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Nije moguće pristupiti datoteci: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Nije moguće otvoriti datoteku: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'SMTP Greška: Slanje sa navedenih e-mail adresa nije uspjelo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Greška: Slanje na navedene e-mail adrese nije uspjelo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'Ne mogu pokrenuti mail funkcionalnost.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'E-mail nije poslan. Neispravna e-mail adresa: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer nije podržan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['provide_address']      = 'Definišite barem jednu adresu primaoca.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Greška prilikom prijave: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'Spajanje na SMTP server nije uspjelo.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP greška: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Nije moguće postaviti varijablu ili je vratiti nazad: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Nedostaje ekstenzija: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Belarusian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Aleksander Maksymiuk <info@setpro.pl>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'Памылка SMTP: памылка ідэнтыфікацыі.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Памылка SMTP: нельга ўстанавіць сувязь з SMTP-серверам.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Памылка SMTP: звесткі непрынятыя.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Пустое паведамленне.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Невядомая кадыроўка тэксту: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Нельга выканаць каманду: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Няма доступу да файла: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Нельга адкрыць файл: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Няправільны адрас адпраўніка: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Нельга прымяніць функцыю mail().';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Нельга даслаць паведамленне, няправільны email атрымальніка: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['provide_address']      = 'Запоўніце, калі ласка, правільны email атрымальніка.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['mailer_not_supported'] = ' - паштовы сервер не падтрымліваецца.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'Памылка SMTP: няправільныя атрымальнікі: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Памылка подпісу паведамлення: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'Памылка сувязі з SMTP-серверам.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'Памылка SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Нельга ўстанавіць або перамяніць значэнне пераменнай: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Bulgarian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Mikhail Kyosev <mialygk@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP грешка: Не може да се удостовери пред сървъра.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP грешка: Не може да се свърже с SMTP хоста.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP грешка: данните не са приети.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Съдържанието на съобщението е празно';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Неизвестно кодиране: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Не може да се изпълни: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Няма достъп до файл: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Файлова грешка: Не може да се отвори файл: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Следните адреси за подател са невалидни: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Не може да се инстанцира функцията mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Невалиден адрес: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' - пощенски сървър не се поддържа.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Трябва да предоставите поне един email адрес за получател.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP грешка: Следните адреси за Получател са невалидни: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Грешка при подписване: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP провален connect().';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP сървърна грешка: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Не може да се установи или възстанови променлива: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Липсва разширение: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Bengali PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Manish Sarkar <manish.n.manish@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP ত্রুটি: প্রমাণীকরণ করতে অক্ষম৷';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['buggy_php']            = 'আপনার PHP সংস্করণ একটি বাগ দ্বারা প্রভাবিত হয় যার ফলে দূষিত বার্তা হতে পারে। এটি ঠিক করতে, পাঠাতে SMTP ব্যবহার করুন, আপনার php.ini এ mail.add_x_header বিকল্পটি নিষ্ক্রিয় করুন, MacOS বা Linux-এ স্যুইচ করুন, অথবা আপনার PHP সংস্করণকে 7.0.17+ বা 7.1.3+ এ পরিবর্তন করুন।';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP ত্রুটি: SMTP সার্ভারের সাথে সংযোগ করতে অক্ষম৷';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP ত্রুটি: ডেটা গ্রহণ করা হয়নি৷';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'বার্তার অংশটি খালি।';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'অজানা এনকোডিং: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'নির্বাহ করতে অক্ষম: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['extension_missing']    = 'এক্সটেনশন অনুপস্থিত:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_access']          = 'ফাইল অ্যাক্সেস করতে অক্ষম: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['file_open']            = 'ফাইল ত্রুটি: ফাইল খুলতে অক্ষম: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['from_failed']          = 'নিম্নলিখিত প্রেরকের ঠিকানা(গুলি) ব্যর্থ হয়েছে: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['instantiate']          = 'মেল ফাংশনের একটি উদাহরণ তৈরি করতে অক্ষম৷';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_address']      = 'পাঠাতে অক্ষম: অবৈধ ইমেল ঠিকানা: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_header']       = 'অবৈধ হেডার নাম বা মান';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_hostentry']    = 'অবৈধ হোস্টেন্ট্রি: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_host']         = 'অবৈধ হোস্ট:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['mailer_not_supported'] = 'মেইলার সমর্থিত নয়।';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['provide_address']      = 'আপনাকে অবশ্যই অন্তত একটি গন্তব্য ইমেল ঠিকানা প্রদান করতে হবে৷';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['recipients_failed']    = 'SMTP ত্রুটি: নিম্নলিখিত গন্তব্যগুলি ব্যর্থ হয়েছে: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['signing']              = 'স্বাক্ষর করতে ব্যর্থ হয়েছে: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_code']            = 'SMTP কোড: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['smtp_code_ex']         = 'অতিরিক্ত SMTP তথ্য:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_detail']          = 'বর্ণনা: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP সংযোগ() ব্যর্থ হয়েছে৷';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_error']           = 'SMTP সার্ভার ত্রুটি: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['variable_set']         = 'পরিবর্তনশীল সেট করা যায়নি: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['extension_missing']    = 'অনুপস্থিত এক্সটেনশন: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Catalan PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Ivan <web AT microstudi DOT com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'Error SMTP: No s’ha pogut autenticar.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Error SMTP: No es pot connectar al servidor SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Error SMTP: Dades no acceptades.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'El cos del missatge està buit.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Codificació desconeguda: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'No es pot executar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'No es pot accedir a l’arxiu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Error d’Arxiu: No es pot obrir l’arxiu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'La(s) següent(s) adreces de remitent han fallat: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'No s’ha pogut crear una instància de la funció Mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Adreça d’email invalida: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer no està suportat';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'S’ha de proveir almenys una adreça d’email com a destinatari.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'Error SMTP: Els següents destinataris han fallat: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Error al signar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'Ha fallat el SMTP Connect().';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'Error del servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'No s’ha pogut establir o restablir la variable: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Czech PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) $PHPMAILER_LANG['authenticate']         = 'Chyba SMTP: Autentizace selhala.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['connect_host']         = 'Chyba SMTP: Nelze navázat spojení se SMTP serverem.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['data_not_accepted']    = 'Chyba SMTP: Data nebyla přijata.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['empty_message']        = 'Prázdné tělo zprávy';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['encoding']             = 'Neznámé kódování: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['execute']              = 'Nelze provést: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['file_access']          = 'Nelze získat přístup k souboru: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_open']            = 'Chyba souboru: Nelze otevřít soubor pro čtení: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['from_failed']          = 'Následující adresa odesílatele je nesprávná: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['instantiate']          = 'Nelze vytvořit instanci emailové funkce.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['invalid_address']      = 'Neplatná adresa: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_hostentry']    = 'Záznam hostitele je nesprávný: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_host']         = 'Hostitel je nesprávný: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer není podporován.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['provide_address']      = 'Musíte zadat alespoň jednu emailovou adresu příjemce.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['recipients_failed']    = 'Chyba SMTP: Následující adresy příjemců nejsou správně: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['signing']              = 'Chyba přihlašování: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() selhal.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'Chyba SMTP serveru: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'Nelze nastavit nebo změnit proměnnou: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'Chybí rozšíření: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Danish PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author John Sebastian <jms@iwb.dk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * Rewrite and extension of the work by Mikael Stokkebro <info@stokkebro.dk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['authenticate']         = 'SMTP fejl: Login mislykkedes.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['buggy_php']            = 'Din version af PHP er berørt af en fejl, som gør at dine beskeder muligvis vises forkert. For at rette dette kan du skifte til SMTP, slå mail.add_x_header headeren i din php.ini fil fra, skifte til MacOS eller Linux eller opgradere din version af PHP til 7.0.17+ eller 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['connect_host']         = 'SMTP fejl: Forbindelse til SMTP serveren kunne ikke oprettes.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP fejl: Data blev ikke accepteret.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['empty_message']        = 'Meddelelsen er uden indhold';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['encoding']             = 'Ukendt encode-format: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['execute']              = 'Kunne ikke afvikle: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['extension_missing']    = 'Udvidelse mangler: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['file_access']          = 'Kunne ikke tilgå filen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['file_open']            = 'Fil fejl: Kunne ikke åbne filen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['from_failed']          = 'Følgende afsenderadresse er forkert: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['instantiate']          = 'Email funktionen kunne ikke initialiseres.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_address']      = 'Udgyldig adresse: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_header']       = 'Ugyldig header navn eller værdi';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_hostentry']    = 'Ugyldig hostentry: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['invalid_host']         = 'Ugyldig vært: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer understøttes ikke.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['provide_address']      = 'Indtast mindst en modtagers email adresse.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['recipients_failed']    = 'SMTP fejl: Følgende modtagere fejlede: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['signing']              = 'Signeringsfejl: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_code']            = 'SMTP kode: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_code_ex']         = 'Yderligere SMTP info: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() fejlede.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_detail']          = 'Detalje: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_error']           = 'SMTP server fejl: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['variable_set']         = 'Kunne ikke definere eller nulstille variablen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * German PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) $PHPMAILER_LANG['authenticate']         = 'SMTP-Fehler: Authentifizierung fehlgeschlagen.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['connect_host']         = 'SMTP-Fehler: Konnte keine Verbindung zum SMTP-Host herstellen.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP-Fehler: Daten werden nicht akzeptiert.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['empty_message']        = 'E-Mail-Inhalt ist leer.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['encoding']             = 'Unbekannte Kodierung: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['execute']              = 'Konnte folgenden Befehl nicht ausführen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['file_access']          = 'Zugriff auf folgende Datei fehlgeschlagen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_open']            = 'Dateifehler: Konnte folgende Datei nicht öffnen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['from_failed']          = 'Die folgende Absenderadresse ist nicht korrekt: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['instantiate']          = 'Mail-Funktion konnte nicht initialisiert werden.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['invalid_address']      = 'Die Adresse ist ungültig: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_hostentry']    = 'Ungültiger Hosteintrag: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_host']         = 'Ungültiger Host: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer wird nicht unterstützt.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['provide_address']      = 'Bitte geben Sie mindestens eine Empfängeradresse an.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['recipients_failed']    = 'SMTP-Fehler: Die folgenden Empfänger sind nicht korrekt: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['signing']              = 'Fehler beim Signieren: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'Verbindung zum SMTP-Server fehlgeschlagen.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'Fehler vom SMTP-Server: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'Kann Variable nicht setzen oder zurücksetzen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'Fehlende Erweiterung: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Greek PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) $PHPMAILER_LANG['authenticate']         = 'Σφάλμα SMTP: Αδυναμία πιστοποίησης.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['buggy_php']            = 'Η έκδοση PHP που χρησιμοποιείτε παρουσιάζει σφάλμα που μπορεί να έχει ως αποτέλεσμα κατεστραμένα μηνύματα. Για να το διορθώσετε, αλλάξτε τον τρόπο αποστολής σε SMTP, απενεργοποιήστε την επιλογή mail.add_x_header στο αρχείο php.ini, αλλάξτε λειτουργικό σε MacOS ή Linux ή αναβαθμίστε την PHP σε έκδοση 7.0.17+ ή 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Σφάλμα SMTP: Αδυναμία σύνδεσης με τον φιλοξενητή SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Σφάλμα SMTP: Μη αποδεκτά δεδομένα.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Η ηλεκτρονική επιστολή δεν έχει περιεχόμενο.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Άγνωστη μορφή κωδικοποίησης: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Αδυναμία εκτέλεσης: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['extension_missing']    = 'Απουσία επέκτασης: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Αδυναμία πρόσβασης στο αρχείο: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'Σφάλμα Αρχείου: Αδυναμία ανοίγματος αρχείου: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'Η ακόλουθη διεύθυνση αποστολέα δεν είναι σωστή: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'Αδυναμία εκκίνησης συνάρτησης Mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'Μη έγκυρη διεύθυνση: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_header']       = 'Μη έγκυρο όνομα κεφαλίδας ή τιμή';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_hostentry']    = 'Μη έγκυρη εισαγωγή φιλοξενητή: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_host']         = 'Μη έγκυρος φιλοξενητής: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer δεν υποστηρίζεται.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['provide_address']      = 'Δώστε τουλάχιστον μια ηλεκτρονική διεύθυνση παραλήπτη.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['recipients_failed']    = 'Σφάλμα SMTP: Οι παρακάτω διευθύνσεις παραλήπτη δεν είναι έγκυρες: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['signing']              = 'Σφάλμα υπογραφής: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['smtp_code']            = 'Κώδικάς SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_code_ex']         = 'Πρόσθετες πληροφορίες SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['smtp_connect_failed']  = 'Αποτυχία σύνδεσης SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_detail']          = 'Λεπτομέρεια: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_error']           = 'Σφάλμα με τον διακομιστή SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['variable_set']         = 'Αδυναμία ορισμού ή επαναφοράς μεταβλητής: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Esperanto PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) $PHPMAILER_LANG['authenticate']         = 'Eraro de servilo SMTP : aŭtentigo malsukcesis.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['connect_host']         = 'Eraro de servilo SMTP : konektado al servilo malsukcesis.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['data_not_accepted']    = 'Eraro de servilo SMTP : neĝustaj datumoj.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['empty_message']        = 'Teksto de mesaĝo mankas.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['encoding']             = 'Nekonata kodoprezento: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['execute']              = 'Lanĉi rulumadon ne eblis: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['file_access']          = 'Aliro al dosiero ne sukcesis: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_open']            = 'Eraro de dosiero: malfermo neeblas: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['from_failed']          = 'Jena adreso de sendinto malsukcesis: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['instantiate']          = 'Genero de retmesaĝa funkcio neeblis.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['invalid_address']      = 'Retadreso ne validas: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['mailer_not_supported'] = ' mesaĝilo ne subtenata.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['provide_address']      = 'Vi devas tajpi almenaŭ unu recevontan retadreson.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['recipients_failed']    = 'Eraro de servilo SMTP : la jenaj poŝtrecivuloj kaŭzis eraron: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['signing']              = 'Eraro de subskribo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP konektado malsukcesis.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_error']           = 'Eraro de servilo SMTP : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['variable_set']         = 'Variablo ne pravalorizeblas aŭ ne repravalorizeblas: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['extension_missing']    = 'Mankas etendo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Spanish PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Matt Sturdy <matt.sturdy@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Crystopher Glodzienski Cardoso <crystopher.glodzienski@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author Daniel Cruz <danicruz0415@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['authenticate']         = 'Error SMTP: Imposible autentificar.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['buggy_php']            = 'Tu versión de PHP está afectada por un bug que puede resultar en mensajes corruptos. Para arreglarlo, cambia a enviar usando SMTP, deshabilita la opción mail.add_x_header en tu php.ini, cambia a MacOS o Linux, o actualiza tu PHP a la versión 7.0.17+ o 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['connect_host']         = 'Error SMTP: Imposible conectar al servidor SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['data_not_accepted']    = 'Error SMTP: Datos no aceptados.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['empty_message']        = 'El cuerpo del mensaje está vacío.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['encoding']             = 'Codificación desconocida: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['execute']              = 'Imposible ejecutar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['extension_missing']    = 'Extensión faltante: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['file_access']          = 'Imposible acceder al archivo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['file_open']            = 'Error de Archivo: Imposible abrir el archivo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['from_failed']          = 'La(s) siguiente(s) direcciones de remitente fallaron: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['instantiate']          = 'Imposible crear una instancia de la función Mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_address']      = 'Imposible enviar: dirección de email inválido: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_header']       = 'Nombre o valor de encabezado no válido';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_hostentry']    = 'Hostentry inválido: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['invalid_host']         = 'Host inválido: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer no está soportado.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['provide_address']      = 'Debe proporcionar al menos una dirección de email de destino.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['recipients_failed']    = 'Error SMTP: Los siguientes destinos fallaron: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['signing']              = 'Error al firmar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_code']            = 'Código del servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_code_ex']         = 'Información adicional del servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() falló.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_detail']          = 'Detalle: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_error']           = 'Error del servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['variable_set']         = 'No se pudo configurar la variable: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Estonian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Indrek Päri
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Elan Ruusamäe <glen@delfi.ee>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'SMTP Viga: Autoriseerimise viga.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP Viga: Ei õnnestunud luua ühendust SMTP serveriga.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP Viga: Vigased andmed.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'Tühi kirja sisu';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG["encoding"]             = 'Tundmatu kodeering: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'Tegevus ebaõnnestus: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Pole piisavalt õiguseid järgneva faili avamiseks: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'Faili Viga: Faili avamine ebaõnnestus: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'Järgnev saatja e-posti aadress on vigane: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'mail funktiooni käivitamine ebaõnnestus.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'Saatmine peatatud, e-posti address vigane: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Te peate määrama vähemalt ühe saaja e-posti aadressi.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['mailer_not_supported'] = ' maileri tugi puudub.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Viga: Järgnevate saajate e-posti aadressid on vigased: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG["signing"]              = 'Viga allkirjastamisel: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() ebaõnnestus.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'SMTP serveri viga: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'Ei õnnestunud määrata või lähtestada muutujat: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'Nõutud laiendus on puudu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Persian/Farsi PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Ali Jazayeri <jaza.ali@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Mohammad Hossein Mojtahedi <mhm5000@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'خطای SMTP: احراز هویت با شکست مواجه شد.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'خطای SMTP: اتصال به سرور SMTP برقرار نشد.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'خطای SMTP: داده‌ها نا‌درست هستند.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'بخش متن پیام خالی است.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'کد‌گذاری نا‌شناخته: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'امکان اجرا وجود ندارد: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'امکان دسترسی به فایل وجود ندارد: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'خطای File: امکان بازکردن فایل وجود ندارد: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'آدرس فرستنده اشتباه است: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'امکان معرفی تابع ایمیل وجود ندارد.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'آدرس ایمیل معتبر نیست: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer پشتیبانی نمی‌شود.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['provide_address']      = 'باید حداقل یک آدرس گیرنده وارد کنید.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['recipients_failed']    = 'خطای SMTP: ارسال به آدرس گیرنده با خطا مواجه شد: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['signing']              = 'خطا در امضا: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'خطا در اتصال به SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'خطا در SMTP Server: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'امکان ارسال یا ارسال مجدد متغیر‌ها وجود ندارد: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'افزونه موجود نیست: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Finnish PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Jyry Kuukanen
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP-virhe: käyttäjätunnistus epäonnistui.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP-virhe: yhteys palvelimeen ei onnistu.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP-virhe: data on virheellinen.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) //$PHPMAILER_LANG['empty_message']        = 'Message body empty';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Tuntematon koodaustyyppi: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Suoritus epäonnistui: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Seuraavaan tiedostoon ei ole oikeuksia: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Tiedostovirhe: Ei voida avata tiedostoa: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Seuraava lähettäjän osoite on virheellinen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'mail-funktion luonti epäonnistui.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) //$PHPMAILER_LANG['invalid_address']      = 'Invalid address: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = 'postivälitintyyppiä ei tueta.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Aseta vähintään yksi vastaanottajan sähk&ouml;postiosoite.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP-virhe: seuraava vastaanottaja osoite on virheellinen.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) //$PHPMAILER_LANG['signing']              = 'Signing Error: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) //$PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() failed.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) //$PHPMAILER_LANG['smtp_error']           = 'SMTP server error: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) //$PHPMAILER_LANG['variable_set']         = 'Cannot set or reset variable: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Faroese PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Dávur Sørensen <http://www.profo-webdesign.dk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP feilur: Kundi ikki góðkenna.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP feilur: Kundi ikki knýta samband við SMTP vert.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP feilur: Data ikki góðkent.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) //$PHPMAILER_LANG['empty_message']        = 'Message body empty';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Ókend encoding: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Kundi ikki útføra: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Kundi ikki tilganga fílu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Fílu feilur: Kundi ikki opna fílu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'fylgjandi Frá/From adressa miseydnaðist: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Kuni ikki instantiera mail funktión.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) //$PHPMAILER_LANG['invalid_address']      = 'Invalid address: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' er ikki supporterað.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Tú skal uppgeva minst móttakara-emailadressu(r).';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Feilur: Fylgjandi móttakarar miseydnaðust: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) //$PHPMAILER_LANG['signing']              = 'Signing Error: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) //$PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() failed.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) //$PHPMAILER_LANG['smtp_error']           = 'SMTP server error: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) //$PHPMAILER_LANG['variable_set']         = 'Cannot set or reset variable: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * French PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * Some French punctuation requires a thin non-breaking space (U+202F) character before it,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * for example before a colon or exclamation mark.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * There is one of these characters between these quotes: " "
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['authenticate']         = 'Erreur SMTP : échec de l’authentification.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['buggy_php']            = 'Votre version de PHP est affectée par un bug qui peut entraîner des messages corrompus. Pour résoudre ce problème, passez à l’envoi par SMTP, désactivez l’option mail.add_x_header dans le fichier php.ini, passez à MacOS ou Linux, ou passez PHP à la version 7.0.17+ ou 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['connect_host']         = 'Erreur SMTP : impossible de se connecter au serveur SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['data_not_accepted']    = 'Erreur SMTP : données incorrectes.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['empty_message']        = 'Corps du message vide.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['encoding']             = 'Encodage inconnu : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['execute']              = 'Impossible de lancer l’exécution : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['extension_missing']    = 'Extension manquante : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['file_access']          = 'Impossible d’accéder au fichier : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['file_open']            = 'Ouverture du fichier impossible : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['from_failed']          = 'L’adresse d’expéditeur suivante a échoué : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['instantiate']          = 'Impossible d’instancier la fonction mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_address']      = 'Adresse courriel non valide : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_header']       = 'Nom ou valeur de l’en-tête non valide';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_hostentry']    = 'Entrée d’hôte non valide : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['invalid_host']         = 'Hôte non valide : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['mailer_not_supported'] = ' client de messagerie non supporté.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['provide_address']      = 'Vous devez fournir au moins une adresse de destinataire.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['recipients_failed']    = 'Erreur SMTP : les destinataires suivants ont échoué : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['signing']              = 'Erreur de signature : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_code']            = 'Code SMTP : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_code_ex']         = 'Informations supplémentaires SMTP : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_connect_failed']  = 'La fonction SMTP connect() a échoué.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_detail']          = 'Détails : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_error']           = 'Erreur du serveur SMTP : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['variable_set']         = 'Impossible d’initialiser ou de réinitialiser une variable : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Galician PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author by Donato Rouco <donatorouco@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'Erro SMTP: Non puido ser autentificado.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Erro SMTP: Non puido conectar co servidor SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Erro SMTP: Datos non aceptados.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Corpo da mensaxe vacía';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Codificación descoñecida: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Non puido ser executado: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Nob puido acceder ó arquivo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Erro de Arquivo: No puido abrir o arquivo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'A(s) seguinte(s) dirección(s) de remitente(s) deron erro: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Non puido crear unha instancia da función Mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Non puido envia-lo correo: dirección de email inválida: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer non está soportado.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Debe engadir polo menos unha dirección de email coma destino.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'Erro SMTP: Os seguintes destinos fallaron: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Erro ó firmar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() fallou.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'Erro do servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Non puidemos axustar ou reaxustar a variábel: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Hebrew PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Ronny Sherer <ronny@hoojima.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'שגיאת SMTP: פעולת האימות נכשלה.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'שגיאת SMTP: לא הצלחתי להתחבר לשרת SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'שגיאת SMTP: מידע לא התקבל.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'גוף ההודעה ריק';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['invalid_address']      = 'כתובת שגויה: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'קידוד לא מוכר: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'לא הצלחתי להפעיל את: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'לא ניתן לגשת לקובץ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'שגיאת קובץ: לא ניתן לגשת לקובץ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'כתובות הנמענים הבאות נכשלו: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'לא הצלחתי להפעיל את פונקציית המייל.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' אינה נתמכת.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'חובה לספק לפחות כתובת אחת של מקבל המייל.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'שגיאת SMTP: הנמענים הבאים נכשלו: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'שגיאת חתימה: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() failed.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'שגיאת שרת SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'לא ניתן לקבוע או לשנות את המשתנה: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Hindi PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Yash Karanke <mr.karanke@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * Rewrite and extension of the work by Jayanti Suthar <suthar.jayanti93@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'SMTP त्रुटि: प्रामाणिकता की जांच नहीं हो सका। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['buggy_php']            = 'PHP का आपका संस्करण एक बग से प्रभावित है जिसके परिणामस्वरूप संदेश दूषित हो सकते हैं. इसे ठीक करने हेतु, भेजने के लिए SMTP का उपयोग करे, अपने php.ini में mail.add_x_header विकल्प को अक्षम करें, MacOS या Linux पर जाए, या अपने PHP संस्करण को 7.0.17+ या 7.1.3+ बदले.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['connect_host']         = 'SMTP त्रुटि: SMTP सर्वर से कनेक्ट नहीं हो सका। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP त्रुटि: डेटा स्वीकार नहीं किया जाता है। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['empty_message']        = 'संदेश खाली है। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['encoding']             = 'अज्ञात एन्कोडिंग प्रकार। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['execute']              = 'आदेश को निष्पादित करने में विफल। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['extension_missing']    = 'एक्सटेन्षन गायब है: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['file_access']          = 'फ़ाइल उपलब्ध नहीं है। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['file_open']            = 'फ़ाइल त्रुटि: फाइल को खोला नहीं जा सका। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['from_failed']          = 'प्रेषक का पता गलत है। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['instantiate']          = 'मेल फ़ंक्शन कॉल नहीं कर सकता है।';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_address']      = 'पता गलत है। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_header']       = 'अमान्य हेडर नाम या मान';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_hostentry']    = 'अमान्य hostentry: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_host']         = 'अमान्य होस्ट: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['mailer_not_supported'] = 'मेल सर्वर के साथ काम नहीं करता है। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['provide_address']      = 'आपको कम से कम एक प्राप्तकर्ता का ई-मेल पता प्रदान करना होगा।';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['recipients_failed']    = 'SMTP त्रुटि: निम्न प्राप्तकर्ताओं को पते भेजने में विफल। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['signing']              = 'साइनअप त्रुटि: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['smtp_code']            = 'SMTP कोड: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_code_ex']         = 'अतिरिक्त SMTP जानकारी: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP का connect () फ़ंक्शन विफल हुआ। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_detail']          = 'विवरण: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_error']           = 'SMTP सर्वर त्रुटि। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['variable_set']         = 'चर को बना या संशोधित नहीं किया जा सकता। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Croatian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Hrvoj3e <hrvoj3e@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP Greška: Neuspjela autentikacija.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP Greška: Ne mogu se spojiti na SMTP poslužitelj.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP Greška: Podatci nisu prihvaćeni.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Sadržaj poruke je prazan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Nepoznati encoding: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Nije moguće izvršiti naredbu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Nije moguće pristupiti datoteci: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Nije moguće otvoriti datoteku: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'SMTP Greška: Slanje s navedenih e-mail adresa nije uspjelo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Greška: Slanje na navedenih e-mail adresa nije uspjelo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'Ne mogu pokrenuti mail funkcionalnost.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'E-mail nije poslan. Neispravna e-mail adresa: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer nije podržan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['provide_address']      = 'Definirajte barem jednu adresu primatelja.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Greška prilikom prijave: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'Spajanje na SMTP poslužitelj nije uspjelo.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'Greška SMTP poslužitelja: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Ne mogu postaviti varijablu niti ju vratiti nazad: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Nedostaje proširenje: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Hungarian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author @dominicus-75
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP hiba: az azonosítás sikertelen.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP hiba: nem lehet kapcsolódni az SMTP-szerverhez.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP hiba: adatok visszautasítva.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Üres az üzenettörzs.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Ismeretlen kódolás: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Nem lehet végrehajtani: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'A következő fájl nem elérhető: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Fájl hiba: a következő fájlt nem lehet megnyitni: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'A feladóként megadott következő cím hibás: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'A PHP mail() függvényt nem sikerült végrehajtani.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Érvénytelen cím: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' a mailer-osztály nem támogatott.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Legalább egy címzettet fel kell tüntetni.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP hiba: a címzettként megadott következő címek hibásak: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Hibás aláírás: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'Hiba az SMTP-kapcsolatban.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP-szerver hiba: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'A következő változók beállítása nem sikerült: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Bővítmény hiányzik: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Armenian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Hrayr Grigoryan <hrayr@bits.am>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP -ի սխալ: չհաջողվեց ստուգել իսկությունը.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP -ի սխալ: չհաջողվեց կապ հաստատել SMTP սերվերի հետ.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP -ի սխալ: տվյալները ընդունված չեն.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Հաղորդագրությունը դատարկ է';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Կոդավորման անհայտ տեսակ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Չհաջողվեց իրականացնել հրամանը: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Ֆայլը հասանելի չէ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Ֆայլի սխալ: ֆայլը չհաջողվեց բացել: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Ուղարկողի հետևյալ հասցեն սխալ է: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Հնարավոր չէ կանչել mail ֆունկցիան.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Հասցեն սխալ է: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' փոստային սերվերի հետ չի աշխատում.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Անհրաժեշտ է տրամադրել գոնե մեկ ստացողի e-mail հասցե.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP -ի սխալ: չի հաջողվել ուղարկել հետևյալ ստացողների հասցեներին: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Ստորագրման սխալ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP -ի connect() ֆունկցիան չի հաջողվել';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP սերվերի սխալ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Չի հաջողվում ստեղծել կամ վերափոխել փոփոխականը: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Հավելվածը բացակայում է: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Indonesian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Cecep Prawiro <cecep.prawiro@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author @januridp
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author Ian Mustafa <mail@ianmustafa.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['authenticate']         = 'Kesalahan SMTP: Tidak dapat mengotentikasi.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['connect_host']         = 'Kesalahan SMTP: Tidak dapat terhubung ke host SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['data_not_accepted']    = 'Kesalahan SMTP: Data tidak diterima.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['empty_message']        = 'Isi pesan kosong';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['encoding']             = 'Pengkodean karakter tidak dikenali: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['execute']              = 'Tidak dapat menjalankan proses: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_access']          = 'Tidak dapat mengakses berkas: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['file_open']            = 'Kesalahan Berkas: Berkas tidak dapat dibuka: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['from_failed']          = 'Alamat pengirim berikut mengakibatkan kesalahan: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['instantiate']          = 'Tidak dapat menginisialisasi fungsi surel.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_address']      = 'Gagal terkirim, alamat surel tidak sesuai: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_hostentry']    = 'Gagal terkirim, entri host tidak sesuai: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_host']         = 'Gagal terkirim, host tidak sesuai: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['provide_address']      = 'Harus tersedia minimal satu alamat tujuan';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer tidak didukung';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['recipients_failed']    = 'Kesalahan SMTP: Alamat tujuan berikut menyebabkan kesalahan: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['signing']              = 'Kesalahan dalam penandatangan SSL: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() gagal.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_error']           = 'Kesalahan pada pelayan SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['variable_set']         = 'Tidak dapat mengatur atau mengatur ulang variabel: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['extension_missing']    = 'Ekstensi PHP tidak tersedia: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Italian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Ilias Bartolini <brain79@inwind.it>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Stefano Sabatini <sabas88@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'SMTP Error: Impossibile autenticarsi.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP Error: Impossibile connettersi all\'host SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP Error: Dati non accettati dal server.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'Il corpo del messaggio è vuoto';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'Codifica dei caratteri sconosciuta: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'Impossibile eseguire l\'operazione: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Impossibile accedere al file: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'File Error: Impossibile aprire il file: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'I seguenti indirizzi mittenti hanno generato errore: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'Impossibile istanziare la funzione mail';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'Impossibile inviare, l\'indirizzo email non è valido: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Deve essere fornito almeno un indirizzo ricevente';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['mailer_not_supported'] = 'Mailer non supportato';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Error: I seguenti indirizzi destinatari hanno generato un errore: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['signing']              = 'Errore nella firma: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() fallita.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'Errore del server SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'Impossibile impostare o resettare la variabile: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'Estensione mancante: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Japanese PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Mitsuhiro Yoshida <https://mitstek.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Yoshi Sakai <http://bluemooninc.jp/>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author Arisophy <https://github.com/arisophy/>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  * @author ARAKI Musashi <https://github.com/arakim/>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['authenticate']         = 'SMTPエラー: 認証できませんでした。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['buggy_php']            = 'ご利用のバージョンのPHPには不具合があり、メッセージが破損するおそれがあります。問題の解決は以下のいずれかを行ってください。SMTPでの送信に切り替える。php.iniのmail.add_x_headerをoffにする。MacOSまたはLinuxに切り替える。PHPバージョン7.0.17以降または7.1.3以降にアップグレードする。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['connect_host']         = 'SMTPエラー: SMTPホストに接続できませんでした。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['data_not_accepted']    = 'SMTPエラー: データが受け付けられませんでした。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['empty_message']        = 'メール本文が空です。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['encoding']             = '不明なエンコーディング: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['execute']              = '実行できませんでした: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['extension_missing']    = '拡張機能が見つかりません: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['file_access']          = 'ファイルにアクセスできません: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['file_open']            = 'ファイルエラー: ファイルを開けません: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['from_failed']          = 'Fromアドレスを登録する際にエラーが発生しました: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['instantiate']          = 'メール関数が正常に動作しませんでした。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_address']      = '不正なメールアドレス: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_header']       = '不正なヘッダー名またはその内容';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['invalid_hostentry']    = '不正なホストエントリー: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['invalid_host']         = '不正なホスト: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['mailer_not_supported'] = ' メーラーがサポートされていません。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['provide_address']      = '少なくとも1つメールアドレスを 指定する必要があります。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['recipients_failed']    = 'SMTPエラー: 次の受信者アドレスに 間違いがあります: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['signing']              = '署名エラー: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_code']            = 'SMTPコード: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_code_ex']         = 'SMTP追加情報: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP接続に失敗しました。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_detail']          = '詳細: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['smtp_error']           = 'SMTPサーバーエラー: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 37) $PHPMAILER_LANG['variable_set']         = '変数が存在しません: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Georgian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Avtandil Kikabidze aka LONGMAN <akalongman@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP შეცდომა: ავტორიზაცია შეუძლებელია.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP შეცდომა: SMTP სერვერთან დაკავშირება შეუძლებელია.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP შეცდომა: მონაცემები არ იქნა მიღებული.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['encoding']             = 'კოდირების უცნობი ტიპი: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['execute']              = 'შეუძლებელია შემდეგი ბრძანების შესრულება: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['file_access']          = 'შეუძლებელია წვდომა ფაილთან: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_open']            = 'ფაილური სისტემის შეცდომა: არ იხსნება ფაილი: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['from_failed']          = 'გამგზავნის არასწორი მისამართი: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['instantiate']          = 'mail ფუნქციის გაშვება ვერ ხერხდება.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['provide_address']      = 'გთხოვთ მიუთითოთ ერთი ადრესატის e-mail მისამართი მაინც.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['mailer_not_supported'] = ' - საფოსტო სერვერის მხარდაჭერა არ არის.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['recipients_failed']    = 'SMTP შეცდომა: შემდეგ მისამართებზე გაგზავნა ვერ მოხერხდა: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['empty_message']        = 'შეტყობინება ცარიელია';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_address']      = 'არ გაიგზავნა, e-mail მისამართის არასწორი ფორმატი: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'ხელმოწერის შეცდომა: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'შეცდომა SMTP სერვერთან დაკავშირებისას';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP სერვერის შეცდომა: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'შეუძლებელია შემდეგი ცვლადის შექმნა ან შეცვლა: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'ბიბლიოთეკა არ არსებობს: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Korean PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author ChalkPE <amato0617@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP 오류: 인증할 수 없습니다.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP 오류: SMTP 호스트에 접속할 수 없습니다.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP 오류: 데이터가 받아들여지지 않았습니다.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = '메세지 내용이 없습니다';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = '알 수 없는 인코딩: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = '실행 불가: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = '파일 접근 불가: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = '파일 오류: 파일을 열 수 없습니다: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = '다음 From 주소에서 오류가 발생했습니다: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'mail 함수를 인스턴스화할 수 없습니다';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = '잘못된 주소: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' 메일러는 지원되지 않습니다.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = '적어도 한 개 이상의 수신자 메일 주소를 제공해야 합니다.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP 오류: 다음 수신자에서 오류가 발생했습니다: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = '서명 오류: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP 연결을 실패하였습니다.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP 서버 오류: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = '변수 설정 및 초기화 불가: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = '확장자 없음: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Kurdish (Sorani) PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Halo Salman <halo@home4t.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'هەڵەی SMTP : نەتوانرا کۆدەکە پشتڕاست بکرێتەوە ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'هەڵەی SMTP: نەتوانرا پەیوەندی بە سێرڤەرەوە بکات SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'هەڵەی SMTP: ئەو زانیاریانە قبوڵ نەکرا.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'پەیامەکە بەتاڵە';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'کۆدکردنی نەزانراو : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'ناتوانرێت جێبەجێ بکرێت: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'ناتوانرێت دەستت بگات بە فایلەکە: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'هەڵەی پەڕگە(فایل): ناتوانرێت بکرێتەوە: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'هەڵە لە ئاستی ناونیشانی نێرەر: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'ناتوانرێت خزمەتگوزاری پۆستە پێشکەش بکرێت.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'نەتوانرا بنێردرێت ، چونکە ناونیشانی ئیمەیڵەکە نادروستە: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' مەیلەر پشتگیری ناکات';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'دەبێت ناونیشانی ئیمەیڵی لانیکەم یەک وەرگر دابین بکرێت.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = ' هەڵەی SMTP: ئەم هەڵانەی خوارەوەشکستی هێنا لە ناردن بۆ هەردووکیان: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'هەڵەی واژۆ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect()پەیوەندی شکستی هێنا .';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'هەڵەی ئاستی سێرڤەری SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'ناتوانرێت بیگۆڕیت یان دوبارە بینێریتەوە: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'درێژکراوە نەماوە: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Lithuanian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Dainius Kaupaitis <dk@sum.lt>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP klaida: autentifikacija nepavyko.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP klaida: nepavyksta prisijungti prie SMTP stoties.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP klaida: duomenys nepriimti.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Laiško turinys tuščias';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Neatpažinta koduotė: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Nepavyko įvykdyti komandos: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Byla nepasiekiama: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Bylos klaida: Nepavyksta atidaryti: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Neteisingas siuntėjo adresas: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Nepavyko paleisti mail funkcijos.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Neteisingas adresas: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' pašto stotis nepalaikoma.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Nurodykite bent vieną gavėjo adresą.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP klaida: nepavyko išsiųsti šiems gavėjams: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Prisijungimo klaida: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP susijungimo klaida';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP stoties klaida: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Nepavyko priskirti reikšmės kintamajam: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Latvian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Eduards M. <e@npd.lv>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP kļūda: Autorizācija neizdevās.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP Kļūda: Nevar izveidot savienojumu ar SMTP serveri.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP Kļūda: Nepieņem informāciju.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Ziņojuma teksts ir tukšs';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Neatpazīts kodējums: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Neizdevās izpildīt komandu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Fails nav pieejams: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Faila kļūda: Nevar atvērt failu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Nepareiza sūtītāja adrese: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Nevar palaist sūtīšanas funkciju.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Nepareiza adrese: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' sūtītājs netiek atbalstīts.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Lūdzu, norādiet vismaz vienu adresātu.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP kļūda: neizdevās nosūtīt šādiem saņēmējiem: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Autorizācijas kļūda: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP savienojuma kļūda';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP servera kļūda: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Nevar piešķirt mainīgā vērtību: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Malagasy PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Hackinet <piyushjha8164@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'Hadisoana SMTP: Tsy nahomby ny fanamarinana.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP Error: Tsy afaka mampifandray amin\'ny mpampiantrano SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP diso: tsy voarakitra ny angona.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Tsy misy ny votoaty mailaka.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Tsy fantatra encoding: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Tsy afaka manatanteraka ity baiko manaraka ity: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Tsy nahomby ny fidirana amin\'ity rakitra ity: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Hadisoana diso: Tsy afaka nanokatra ity file manaraka ity: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Ny adiresy iraka manaraka dia diso: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Tsy afaka nanomboka ny hetsika mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Tsy mety ny adiresy: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer tsy manohana.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Alefaso azafady iray adiresy iray farafahakeliny.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Error: Tsy mety ireo mpanaraka ireto: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Error nandritra ny sonia:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'Tsy nahomby ny fifandraisana tamin\'ny server SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'Fahadisoana tamin\'ny server SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Tsy azo atao ny mametraka na mamerina ny variable: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Tsy hita ny ampahany: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Mongolian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author @wispas
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'Алдаа SMTP: Холбогдож чадсангүй.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Алдаа SMTP: SMTP- сервертэй холбогдож болохгүй байна.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Алдаа SMTP: зөвшөөрөгдсөнгүй.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['encoding']             = 'Тодорхойгүй кодчилол: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['execute']              = 'Коммандыг гүйцэтгэх боломжгүй байна: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['file_access']          = 'Файлд хандах боломжгүй байна: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_open']            = 'Файлын алдаа: файлыг нээх боломжгүй байна: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['from_failed']          = 'Илгээгчийн хаяг буруу байна: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['instantiate']          = 'Mail () функцийг ажиллуулах боломжгүй байна.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['provide_address']      = 'Хүлээн авагчийн имэйл хаягийг оруулна уу.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['mailer_not_supported'] = ' — мэйл серверийг дэмжсэнгүй.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['recipients_failed']    = 'Алдаа SMTP: ийм хаягийг илгээж чадсангүй: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['empty_message']        = 'Хоосон мессэж';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_address']      = 'И-Мэйл буруу форматтай тул илгээх боломжгүй: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Гарын үсгийн алдаа: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP сервертэй холбогдоход алдаа гарлаа';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP серверийн алдаа: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Хувьсагчийг тохируулах эсвэл дахин тохируулах боломжгүй байна: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Өргөтгөл байхгүй: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Malaysian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Nawawi Jamili <nawawi@rutweb.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'Ralat SMTP: Tidak dapat pengesahan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Ralat SMTP: Tidak dapat menghubungi hos pelayan SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Ralat SMTP: Data tidak diterima oleh pelayan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Tiada isi untuk mesej';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Pengekodan tidak diketahui: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Tidak dapat melaksanakan: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Tidak dapat mengakses fail: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Ralat Fail: Tidak dapat membuka fail: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Berikut merupakan ralat dari alamat e-mel: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Tidak dapat memberi contoh fungsi e-mel.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Alamat emel tidak sah: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' jenis penghantar emel tidak disokong.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Anda perlu menyediakan sekurang-kurangnya satu alamat e-mel penerima.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'Ralat SMTP: Penerima e-mel berikut telah gagal: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Ralat pada tanda tangan: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() telah gagal.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'Ralat pada pelayan SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Tidak boleh menetapkan atau menetapkan semula pembolehubah: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Sambungan hilang: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Norwegian Bokmål PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  $PHPMAILER_LANG['authenticate']         = 'SMTP-feil: Kunne ikke autentiseres.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  $PHPMAILER_LANG['buggy_php']            = 'Din versjon av PHP er berørt av en feil som kan føre til ødelagte meldinger. For å løse problemet kan du bytte til SMTP, deaktivere alternativet mail.add_x_header i php.ini, bytte til MacOS eller Linux eller oppgradere PHP til versjon 7.0.17+ eller 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10)  $PHPMAILER_LANG['connect_host']         = 'SMTP-feil: Kunne ikke koble til SMTP-vert.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11)  $PHPMAILER_LANG['data_not_accepted']    = 'SMTP-feil: data ikke akseptert.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12)  $PHPMAILER_LANG['empty_message']        = 'Meldingstekst mangler';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13)  $PHPMAILER_LANG['encoding']             = 'Ukjent koding: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14)  $PHPMAILER_LANG['execute']              = 'Kunne ikke utføres: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15)  $PHPMAILER_LANG['extension_missing']    = 'Utvidelse mangler: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16)  $PHPMAILER_LANG['file_access']          = 'Kunne ikke få tilgang til filen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17)  $PHPMAILER_LANG['file_open']            = 'Feil i fil: Kunne ikke åpne filen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18)  $PHPMAILER_LANG['from_failed']          = 'Følgende Fra-adresse mislyktes: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19)  $PHPMAILER_LANG['instantiate']          = 'Kunne ikke instansiere e-postfunksjonen.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20)  $PHPMAILER_LANG['invalid_address']      = 'Ugyldig adresse: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21)  $PHPMAILER_LANG['invalid_header']       = 'Ugyldig headernavn eller verdi';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22)  $PHPMAILER_LANG['invalid_hostentry']    = 'Ugyldig vertsinngang: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23)  $PHPMAILER_LANG['invalid_host']         = 'Ugyldig vert: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24)  $PHPMAILER_LANG['mailer_not_supported'] = ' sender er ikke støttet.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25)  $PHPMAILER_LANG['provide_address']      = 'Du må oppgi minst én mottaker-e-postadresse.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26)  $PHPMAILER_LANG['recipients_failed']    = 'SMTP Feil: Følgende mottakeradresse feilet: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27)  $PHPMAILER_LANG['signing']              = 'Signeringsfeil: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28)  $PHPMAILER_LANG['smtp_code']            = 'SMTP-kode: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29)  $PHPMAILER_LANG['smtp_code_ex']         = 'Ytterligere SMTP-info: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30)  $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP connect() mislyktes.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31)  $PHPMAILER_LANG['smtp_detail']          = 'Detaljer: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32)  $PHPMAILER_LANG['smtp_error']           = 'SMTP-serverfeil: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33)  $PHPMAILER_LANG['variable_set']         = 'Kan ikke angi eller tilbakestille variabel: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Dutch PHPMailer language file: refer to PHPMailer.php for definitive list.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Tuxion <team@tuxion.nl>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP-fout: authenticatie mislukt.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['buggy_php']            = 'PHP versie gededecteerd die onderhavig is aan een bug die kan resulteren in gecorrumpeerde berichten. Om dit te voorkomen, gebruik SMTP voor het verzenden van berichten, zet de mail.add_x_header optie in uw php.ini file uit, gebruik MacOS of Linux, of pas de gebruikte PHP versie aan naar versie 7.0.17+ or 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP-fout: kon niet verbinden met SMTP-host.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP-fout: data niet geaccepteerd.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'Berichttekst is leeg';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'Onbekende codering: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'Kon niet uitvoeren: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['extension_missing']    = 'Extensie afwezig: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_access']          = 'Kreeg geen toegang tot bestand: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['file_open']            = 'Bestandsfout: kon bestand niet openen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['from_failed']          = 'Het volgende afzendersadres is mislukt: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['instantiate']          = 'Kon mailfunctie niet initialiseren.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_address']      = 'Ongeldig adres: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_header']       = 'Ongeldige header naam of waarde';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_hostentry']    = 'Ongeldige hostentry: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_host']         = 'Ongeldige host: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer wordt niet ondersteund.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['provide_address']      = 'Er moet minstens één ontvanger worden opgegeven.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['recipients_failed']    = 'SMTP-fout: de volgende ontvangers zijn mislukt: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['signing']              = 'Signeerfout: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_code']            = 'SMTP code: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['smtp_code_ex']         = 'Aanvullende SMTP informatie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Verbinding mislukt.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_detail']          = 'Detail: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_error']           = 'SMTP-serverfout: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['variable_set']         = 'Kan de volgende variabele niet instellen of resetten: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Polish PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) $PHPMAILER_LANG['authenticate']         = 'Błąd SMTP: Nie można przeprowadzić uwierzytelnienia.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['buggy_php']            = 'Twoja wersja PHP zawiera błąd, który może powodować uszkodzenie wiadomości. Aby go naprawić, przełącz się na wysyłanie za pomocą SMTP, wyłącz opcję mail.add_x_header w php.ini, przełącz się na MacOS lub Linux lub zaktualizuj PHP do wersji 7.0.17+ lub 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Błąd SMTP: Nie można połączyć się z wybranym hostem.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Błąd SMTP: Dane nie zostały przyjęte.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Wiadomość jest pusta.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Błędny sposób kodowania znaków: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Nie można uruchomić: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['extension_missing']    = 'Brakujące rozszerzenie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Brak dostępu do pliku: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'Nie można otworzyć pliku: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'Następujący adres nadawcy jest nieprawidłowy lub nie istnieje: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'Nie można wywołać funkcji mail(). Sprawdź konfigurację serwera.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'Nie można wysłać wiadomości, ' . 'następujący adres odbiorcy jest nieprawidłowy lub nie istnieje: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_header']       = 'Nieprawidłowa nazwa lub wartość nagłówka';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_hostentry']    = 'Nieprawidłowy wpis hosta: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_host']         = 'Nieprawidłowy host: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['provide_address']      = 'Należy podać prawidłowy adres email odbiorcy.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['mailer_not_supported'] = 'Wybrana metoda wysyłki wiadomości nie jest obsługiwana.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['recipients_failed']    = 'Błąd SMTP: Następujący odbiorcy są nieprawidłowi lub nie istnieją: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['signing']              = 'Błąd podpisywania wiadomości: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['smtp_code']            = 'Kod SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_code_ex']         = 'Dodatkowe informacje SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['smtp_connect_failed']  = 'Wywołanie funkcji SMTP Connect() zostało zakończone niepowodzeniem.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_detail']          = 'Szczegóły: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_error']           = 'Błąd SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['variable_set']         = 'Nie można ustawić lub zmodyfikować zmiennej: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Brazilian Portuguese PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Paulo Henrique Garcia <paulo@controllerweb.com.br>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Lucas Guimarães <lucas@lucasguimaraes.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author Phelipe Alves <phelipealvesdesouza@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  * @author Fabio Beneditto <fabiobeneditto@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10)  * @author Geidson Benício Coelho <geidsonc@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['authenticate']         = 'Erro de SMTP: Não foi possível autenticar.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['buggy_php']            = 'Sua versão do PHP é afetada por um bug que por resultar em messagens corrompidas. Para corrigir, mude para enviar usando SMTP, desative a opção mail.add_x_header em seu php.ini, mude para MacOS ou Linux, ou atualize seu PHP para versão 7.0.17+ ou 7.1.3+ ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['connect_host']         = 'Erro de SMTP: Não foi possível conectar ao servidor SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['data_not_accepted']    = 'Erro de SMTP: Dados rejeitados.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['empty_message']        = 'Mensagem vazia';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['encoding']             = 'Codificação desconhecida: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['execute']              = 'Não foi possível executar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['extension_missing']    = 'Extensão não existe: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['file_access']          = 'Não foi possível acessar o arquivo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['file_open']            = 'Erro de Arquivo: Não foi possível abrir o arquivo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['from_failed']          = 'Os seguintes remetentes falharam: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['instantiate']          = 'Não foi possível instanciar a função mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_address']      = 'Endereço de e-mail inválido: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['invalid_header']       = 'Nome ou valor de cabeçalho inválido';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['invalid_hostentry']    = 'hostentry inválido: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['invalid_host']         = 'host inválido: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer não é suportado.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['provide_address']      = 'Você deve informar pelo menos um destinatário.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['recipients_failed']    = 'Erro de SMTP: Os seguintes destinatários falharam: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['signing']              = 'Erro de Assinatura: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() falhou.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_code']            = 'Código do servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_error']           = 'Erro de servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['smtp_code_ex']         = 'Informações adicionais do servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 37) $PHPMAILER_LANG['smtp_detail']          = 'Detalhes do servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 38) $PHPMAILER_LANG['variable_set']         = 'Não foi possível definir ou redefinir a variável: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Portuguese (European) PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Jonadabe <jonadabe@hotmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'Erro do SMTP: Não foi possível realizar a autenticação.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Erro do SMTP: Não foi possível realizar ligação com o servidor SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Erro do SMTP: Os dados foram rejeitados.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'A mensagem no e-mail está vazia.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Codificação desconhecida: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Não foi possível executar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Não foi possível aceder o ficheiro: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Abertura do ficheiro: Não foi possível abrir o ficheiro: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Ocorreram falhas nos endereços dos seguintes remententes: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Não foi possível iniciar uma instância da função mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Não foi enviado nenhum e-mail para o endereço de e-mail inválido: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer não é suportado.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Tem de fornecer pelo menos um endereço como destinatário do e-mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'Erro do SMTP: O endereço do seguinte destinatário falhou: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Erro ao assinar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() falhou.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'Erro de servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Não foi possível definir ou redefinir a variável: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Extensão em falta: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Romanian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) $PHPMAILER_LANG['authenticate']         = 'Eroare SMTP: Autentificarea a eșuat.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['buggy_php']            = 'Versiunea instalată de PHP este afectată de o problemă care poate duce la coruperea mesajelor Pentru a preveni această problemă, folosiți SMTP, dezactivați opțiunea mail.add_x_header din php.ini, folosiți MacOS/Linux sau actualizați versiunea de PHP la 7.0.17+ sau 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Eroare SMTP: Conectarea la serverul SMTP a eșuat.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Eroare SMTP: Datele nu au fost acceptate.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Mesajul este gol.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Encodare necunoscută: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Nu se poate executa următoarea comandă:  ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['extension_missing']    = 'Lipsește extensia: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Nu se poate accesa următorul fișier: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'Eroare fișier: Nu se poate deschide următorul fișier: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'Următoarele adrese From au dat eroare: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'Funcția mail nu a putut fi inițializată.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'Adresa de email nu este validă: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_header']       = 'Numele sau valoarea header-ului nu este validă: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_hostentry']    = 'Hostentry invalid: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_host']         = 'Host invalid: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer nu este suportat.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['provide_address']      = 'Trebuie să adăugați cel puțin o adresă de email.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['recipients_failed']    = 'Eroare SMTP: Următoarele adrese de email au eșuat: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['signing']              = 'A aparut o problemă la semnarea emailului. ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['smtp_code']            = 'Cod SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_code_ex']         = 'Informații SMTP adiționale: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['smtp_connect_failed']  = 'Conectarea la serverul SMTP a eșuat.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_detail']          = 'Detalii SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_error']           = 'Eroare server SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['variable_set']         = 'Nu se poate seta/reseta variabila. ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Russian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Alexey Chumakov <alex@chumakov.ru>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Foster Snowhill <i18n@forstwoof.ru>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author ProjectSoft <projectsoft2009@yandex.ru>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['authenticate']         = 'Ошибка SMTP: не удалось пройти аутентификацию.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['buggy_php']            = 'В вашей версии PHP есть ошибка, которая может привести к повреждению сообщений. Чтобы исправить, переключитесь на отправку по SMTP, отключите опцию mail.add_x_header в ваш php.ini, переключитесь на MacOS или Linux или обновите PHP до версии 7.0.17+ или 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['connect_host']         = 'Ошибка SMTP: не удается подключиться к SMTP-серверу.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['data_not_accepted']    = 'Ошибка SMTP: данные не приняты.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['empty_message']        = 'Пустое сообщение';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['encoding']             = 'Неизвестная кодировка: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['execute']              = 'Невозможно выполнить команду: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['extension_missing']    = 'Расширение отсутствует: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['file_access']          = 'Нет доступа к файлу: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['file_open']            = 'Файловая ошибка: не удаётся открыть файл: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['from_failed']          = 'Неверный адрес отправителя: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['instantiate']          = 'Невозможно запустить функцию mail().';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_address']      = 'Не отправлено из-за неправильного формата email-адреса: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_header']       = 'Неверное имя или значение заголовка';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_hostentry']    = 'Неверная запись хоста: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['invalid_host']         = 'Неверный хост: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['mailer_not_supported'] = ' — почтовый сервер не поддерживается.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['provide_address']      = 'Вы должны указать хотя бы один адрес электронной почты получателя.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['recipients_failed']    = 'Ошибка SMTP: Ошибка следующих получателей: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['signing']              = 'Ошибка подписи: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_code']            = 'Код SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_code_ex']         = 'Дополнительная информация SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_connect_failed']  = 'Ошибка соединения с SMTP-сервером.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_detail']          = 'Детали: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_error']           = 'Ошибка SMTP-сервера: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['variable_set']         = 'Невозможно установить или сбросить переменную: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Sinhalese PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Ayesh Karunaratne <ayesh@aye.sh>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP දෝෂය: සත්‍යාපනය අසාර්ථක විය.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['buggy_php']            = 'ඔබගේ PHP version එකෙහි පවතින දෝෂයක් නිසා email පණිවිඩ දෝෂ සහගත වීමේ හැකියාවක් ඇත. මෙය විසදීම සදහා SMTP භාවිතා කිරීම, mail.add_x_header INI setting එක අක්‍රීය කිරීම, MacOS හෝ Linux වලට මාරු වීම, හෝ ඔබගේ PHP version එක 7.0.17+ හෝ 7.1.3+ වලට අලුත් කිරීම කරගන්න.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP දෝෂය: සම්බන්ධ වීමට නොහැකි විය.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP දෝෂය: දත්ත පිළිගනු නොලැබේ.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'පණිවිඩ අන්තර්ගතය හිස්';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'නොදන්නා කේතනය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'ක්‍රියාත්මක කළ නොහැකි විය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['extension_missing']    = 'Extension එක නොමැත: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_access']          = 'File එකට ප්‍රවේශ විය නොහැකි විය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['file_open']            = 'File දෝෂය: File එක විවෘත කළ නොහැක: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['from_failed']          = 'පහත From ලිපිනයන් අසාර්ථක විය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['instantiate']          = 'mail function එක ක්‍රියාත්මක කළ නොහැක.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_address']      = 'වලංගු නොවන ලිපිනය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_header']       = 'වලංගු නොවන header නාමයක් හෝ අගයක්';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_hostentry']    = 'වලංගු නොවන hostentry එකක්: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_host']         = 'වලංගු නොවන host එකක්: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer සහාය නොදක්වයි.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['provide_address']      = 'ඔබ අවම වශයෙන් එක් ලබන්නෙකුගේ ඊමේල් ලිපිනයක් සැපයිය යුතුය.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['recipients_failed']    = 'SMTP දෝෂය: පහත ලබන්නන් අසමත් විය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['signing']              = 'Sign කිරීමේ දෝෂය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_code']            = 'SMTP කේතය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['smtp_code_ex']         = 'අමතර SMTP තොරතුරු: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP සම්බන්ධය අසාර්ථක විය.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_detail']          = 'තොරතුරු: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_error']           = 'SMTP දෝෂය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['variable_set']         = 'Variable එක සැකසීමට හෝ නැවත සැකසීමට නොහැක: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Slovak PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Michal Tinka <michaltinka@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Peter Orlický <pcmanik91@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'SMTP Error: Chyba autentifikácie.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP Error: Nebolo možné nadviazať spojenie so SMTP serverom.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP Error: Dáta neboli prijaté';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'Prázdne telo správy.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'Neznáme kódovanie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'Nedá sa vykonať: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Súbor nebol nájdený: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'File Error: Súbor sa otvoriť pre čítanie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'Následujúca adresa From je nesprávna: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'Nedá sa vytvoriť inštancia emailovej funkcie.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'Neodoslané, emailová adresa je nesprávna: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_hostentry']    = 'Záznam hostiteľa je nesprávny: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_host']         = 'Hostiteľ je nesprávny: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['mailer_not_supported'] = ' emailový klient nieje podporovaný.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['provide_address']      = 'Musíte zadať aspoň jednu emailovú adresu príjemcu.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Error: Adresy príjemcov niesu správne ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['signing']              = 'Chyba prihlasovania: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() zlyhalo.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['smtp_error']           = 'SMTP chyba serveru: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['variable_set']         = 'Nemožno nastaviť alebo resetovať premennú: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['extension_missing']    = 'Chýba rozšírenie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Slovene PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Klemen Tušar <techouse@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Filip Š <projects@filips.si>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author Blaž Oražem <blaz@orazem.si>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['authenticate']         = 'SMTP napaka: Avtentikacija ni uspela.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['buggy_php']            = 'Na vašo PHP različico vpliva napaka, ki lahko povzroči poškodovana sporočila. Če želite težavo odpraviti, preklopite na pošiljanje prek SMTP, onemogočite možnost mail.add_x_header v vaši php.ini datoteki, preklopite na MacOS ali Linux, ali nadgradite vašo PHP zaličico na 7.0.17+ ali 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['connect_host']         = 'SMTP napaka: Vzpostavljanje povezave s SMTP gostiteljem ni uspelo.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP napaka: Strežnik zavrača podatke.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['empty_message']        = 'E-poštno sporočilo nima vsebine.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['encoding']             = 'Nepoznan tip kodiranja: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['execute']              = 'Operacija ni uspela: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['extension_missing']    = 'Manjkajoča razširitev: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['file_access']          = 'Nimam dostopa do datoteke: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['file_open']            = 'Ne morem odpreti datoteke: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['from_failed']          = 'Neveljaven e-naslov pošiljatelja: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['instantiate']          = 'Ne morem inicializirati mail funkcije.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_address']      = 'E-poštno sporočilo ni bilo poslano. E-naslov je neveljaven: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_header']       = 'Neveljavno ime ali vrednost glave';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_hostentry']    = 'Neveljaven vnos gostitelja: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['invalid_host']         = 'Neveljaven gostitelj: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer ni podprt.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['provide_address']      = 'Prosimo, vnesite vsaj enega naslovnika.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['recipients_failed']    = 'SMTP napaka: Sledeči naslovniki so neveljavni: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['signing']              = 'Napaka pri podpisovanju: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_code']            = 'SMTP koda: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_code_ex']         = 'Dodatne informacije o SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_connect_failed']  = 'Ne morem vzpostaviti povezave s SMTP strežnikom.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_detail']          = 'Podrobnosti: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_error']           = 'Napaka SMTP strežnika: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['variable_set']         = 'Ne morem nastaviti oz. ponastaviti spremenljivke: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Serbian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Александар Јевремовић <ajevremovic@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Miloš Milanović <mmilanovic016@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'SMTP greška: autentifikacija nije uspela.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP greška: povezivanje sa SMTP serverom nije uspelo.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP greška: podaci nisu prihvaćeni.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'Sadržaj poruke je prazan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'Nepoznato kodiranje: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'Nije moguće izvršiti naredbu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Nije moguće pristupiti datoteci: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'Nije moguće otvoriti datoteku: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'SMTP greška: slanje sa sledećih adresa nije uspelo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['recipients_failed']    = 'SMTP greška: slanje na sledeće adrese nije uspelo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['instantiate']          = 'Nije moguće pokrenuti mail funkciju.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_address']      = 'Poruka nije poslata. Neispravna adresa: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['mailer_not_supported'] = ' majler nije podržan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['provide_address']      = 'Definišite bar jednu adresu primaoca.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['signing']              = 'Greška prilikom prijave: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'Povezivanje sa SMTP serverom nije uspelo.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'Greška SMTP servera: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'Nije moguće zadati niti resetovati promenljivu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'Nedostaje proširenje: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Serbian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Александар Јевремовић <ajevremovic@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Miloš Milanović <mmilanovic016@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'SMTP грешка: аутентификација није успела.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP грешка: повезивање са SMTP сервером није успело.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP грешка: подаци нису прихваћени.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'Садржај поруке је празан.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'Непознато кодирање: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'Није могуће извршити наредбу: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Није могуће приступити датотеци: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'Није могуће отворити датотеку: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'SMTP грешка: слање са следећих адреса није успело: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['recipients_failed']    = 'SMTP грешка: слање на следеће адресе није успело: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['instantiate']          = 'Није могуће покренути mail функцију.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_address']      = 'Порука није послата. Неисправна адреса: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['mailer_not_supported'] = ' мејлер није подржан.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['provide_address']      = 'Дефинишите бар једну адресу примаоца.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['signing']              = 'Грешка приликом пријаве: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'Повезивање са SMTP сервером није успело.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'Грешка SMTP сервера: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'Није могуће задати нити ресетовати променљиву: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'Недостаје проширење: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Swedish PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Johan Linnér <johan@linner.biz>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP fel: Kunde inte autentisera.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP fel: Kunde inte ansluta till SMTP-server.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP fel: Data accepterades inte.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) //$PHPMAILER_LANG['empty_message']        = 'Message body empty';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Okänt encode-format: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Kunde inte köra: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Ingen åtkomst till fil: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Fil fel: Kunde inte öppna fil: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Följande avsändaradress är felaktig: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Kunde inte initiera e-postfunktion.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Felaktig adress: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['provide_address']      = 'Du måste ange minst en mottagares e-postadress.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer stöds inte.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP fel: Följande mottagare är felaktig: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Signeringsfel: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() misslyckades.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP serverfel: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Kunde inte definiera eller återställa variabel: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Tillägg ej tillgängligt: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Tagalog PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  *   @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  *   @author Adriane Justine Tan <eidoriantan@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'SMTP Error: Hindi mapatotohanan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP Error: Hindi makakonekta sa SMTP host.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP Error: Ang datos ay hindi naitanggap.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'Walang laman ang mensahe';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'Hindi alam ang encoding: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'Hindi maisasagawa: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Hindi ma-access ang file: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'File Error: Hindi mabuksan ang file: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'Ang sumusunod na address ay nabigo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'Hindi maisimulan ang instance ng mail function.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'Hindi wasto ang address na naibigay: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['mailer_not_supported'] = 'Ang mailer ay hindi suportado.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['provide_address']      = 'Kailangan mong magbigay ng kahit isang email address na tatanggap.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Error: Ang mga sumusunod na tatanggap ay nabigo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['signing']              = 'Hindi ma-sign: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'Ang SMTP connect() ay nabigo.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'Ang server ng SMTP ay nabigo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'Hindi matatakda o ma-reset ang mga variables: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'Nawawala ang extension: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Turkish PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Elçin Özel
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Can Yılmaz
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author Mehmet Benlioğlu
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  * @author @yasinaydin
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10)  * @author Ogün Karakuş
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['authenticate']         = 'SMTP Hatası: Oturum açılamadı.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['buggy_php']            = 'PHP sürümünüz iletilerin bozulmasına neden olabilecek bir hatadan etkileniyor. Bunu düzeltmek için, SMTP kullanarak göndermeye geçin, mail.add_x_header seçeneğini devre dışı bırakın php.ini dosyanızdaki mail.add_x_header seçeneğini devre dışı bırakın, MacOS veya Linux geçin veya PHP sürümünü 7.0.17+ veya 7.1.3+ sürümüne yükseltin,';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['connect_host']         = 'SMTP Hatası: SMTP sunucusuna bağlanılamadı.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP Hatası: Veri kabul edilmedi.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['empty_message']        = 'Mesajın içeriği boş';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['encoding']             = 'Bilinmeyen karakter kodlama: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['execute']              = 'Çalıştırılamadı: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['extension_missing']    = 'Eklenti bulunamadı: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['file_access']          = 'Dosyaya erişilemedi: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['file_open']            = 'Dosya Hatası: Dosya açılamadı: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['from_failed']          = 'Belirtilen adreslere gönderme başarısız: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['instantiate']          = 'Örnek e-posta fonksiyonu oluşturulamadı.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_address']      = 'Geçersiz e-posta adresi: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['invalid_header']       = 'Geçersiz başlık adı veya değeri: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['invalid_hostentry']    = 'Geçersiz ana bilgisayar girişi: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['invalid_host']         = 'Geçersiz ana bilgisayar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['mailer_not_supported'] = ' e-posta kütüphanesi desteklenmiyor.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['provide_address']      = 'En az bir alıcı e-posta adresi belirtmelisiniz.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Hatası: Belirtilen alıcılara ulaşılamadı: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['signing']              = 'İmzalama hatası: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_code']            = 'SMTP kodu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_code_ex']         = 'ek SMTP bilgileri: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP connect() fonksiyonu başarısız.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['smtp_detail']          = 'SMTP SMTP Detayı: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 37) $PHPMAILER_LANG['smtp_error']           = 'SMTP sunucu hatası: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 38) $PHPMAILER_LANG['variable_set']         = 'Değişken ayarlanamadı ya da sıfırlanamadı: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Ukrainian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Yuriy Rudyy <yrudyy@prs.net.ua>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @fixed by Boris Yurchenko <boris@yurchenko.pp.ua>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'Помилка SMTP: помилка авторизації.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'Помилка SMTP: не вдається під\'єднатися до SMTP-серверу.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'Помилка SMTP: дані не прийнято.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Невідоме кодування: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Неможливо виконати команду: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Немає доступу до файлу: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Помилка файлової системи: не вдається відкрити файл: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Невірна адреса відправника: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Неможливо запустити функцію mail().';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['provide_address']      = 'Будь ласка, введіть хоча б одну email-адресу отримувача.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' - поштовий сервер не підтримується.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['recipients_failed']    = 'Помилка SMTP: не вдалося відправлення для таких отримувачів: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['empty_message']        = 'Пусте повідомлення';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_address']      = 'Не відправлено через неправильний формат email-адреси: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['signing']              = 'Помилка підпису: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'Помилка з\'єднання з SMTP-сервером';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'Помилка SMTP-сервера: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'Неможливо встановити або скинути змінну: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'Розширення відсутнє: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Urdu PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Saqib Ali Siddiqui <saqibsra@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP خرابی: تصدیق کرنے سے قاصر۔';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP خرابی: سرور سے منسلک ہونے سے قاصر۔';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP خرابی: ڈیٹا قبول نہیں کیا گیا۔';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'پیغام کی باڈی خالی ہے۔';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'نامعلوم انکوڈنگ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'عمل کرنے کے قابل نہیں ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'فائل تک رسائی سے قاصر:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'فائل کی خرابی: فائل کو کھولنے سے قاصر:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'درج ذیل بھیجنے والے کا پتہ ناکام ہو گیا:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'میل فنکشن کی مثال بنانے سے قاصر۔';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'بھیجنے سے قاصر: غلط ای میل پتہ:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' میلر تعاون یافتہ نہیں ہے۔';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'آپ کو کم از کم ایک منزل کا ای میل پتہ فراہم کرنا چاہیے۔';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP خرابی: درج ذیل پتہ پر نہیں بھیجا جاسکا: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'دستخط کی خرابی: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP ملنا ناکام ہوا';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP سرور کی خرابی: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'متغیر سیٹ نہیں کیا جا سکا: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'ایکٹینشن موجود نہیں ہے۔ ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['smtp_code']            = 'SMTP سرور کوڈ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_code_ex']         = 'اضافی SMTP سرور کی معلومات:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['invalid_header']       = 'غلط ہیڈر کا نام یا قدر';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Vietnamese (Tiếng Việt) PHPMailer language file: refer to English translation for definitive list.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author VINADES.,JSC <contact@vinades.vn>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'Lỗi SMTP: Không thể xác thực.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Lỗi SMTP: Không thể kết nối máy chủ SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Lỗi SMTP: Dữ liệu không được chấp nhận.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Không có nội dung';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Mã hóa không xác định: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Không thực hiện được: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Không thể truy cập tệp tin ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Lỗi Tập tin: Không thể mở tệp tin: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Lỗi địa chỉ gửi đi: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Không dùng được các hàm gửi thư.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Đại chỉ emai không đúng: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' trình gửi thư không được hỗ trợ.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Bạn phải cung cấp ít nhất một địa chỉ người nhận.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'Lỗi SMTP: lỗi địa chỉ người nhận: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Lỗi đăng nhập: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'Lỗi kết nối với SMTP';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'Lỗi máy chủ smtp ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Không thể thiết lập hoặc thiết lập lại biến: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Simplified Chinese PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author liqwei <liqwei@liqwei.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author young <masxy@foxmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author Teddysun <i@teddysun.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['authenticate']         = 'SMTP 错误：登录失败。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['buggy_php']            = '您的 PHP 版本存在漏洞，可能会导致消息损坏。为修复此问题，请切换到使用 SMTP 发送，在您的 php.ini 中禁用 mail.add_x_header 选项。切换到 MacOS 或 Linux，或将您的 PHP 升级到 7.0.17+ 或 7.1.3+ 版本。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['connect_host']         = 'SMTP 错误：无法连接到 SMTP 主机。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP 错误：数据不被接受。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['empty_message']        = '邮件正文为空。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['encoding']             = '未知编码：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['execute']              = '无法执行：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['extension_missing']    = '缺少扩展名：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['file_access']          = '无法访问文件：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['file_open']            = '文件错误：无法打开文件：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['from_failed']          = '发送地址错误：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['instantiate']          = '未知函数调用。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_address']      = '发送失败，电子邮箱地址是无效的：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['mailer_not_supported'] = '发信客户端不被支持。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['provide_address']      = '必须提供至少一个收件人地址。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['recipients_failed']    = 'SMTP 错误：收件人地址错误：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP服务器连接失败。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['smtp_error']           = 'SMTP服务器出错：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['variable_set']         = '无法设置或重置变量：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['invalid_header']       = '无效的标题名称或值';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['invalid_hostentry']    = '无效的hostentry： ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['invalid_host']         = '无效的主机：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['signing']              = '签名错误：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_code']            = 'SMTP代码： ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_code_ex']         = '附加SMTP信息： ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['smtp_detail']          = '详情:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Traditional Chinese PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author liqwei <liqwei@liqwei.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Peter Dave Hello <@PeterDaveHello/>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author Jason Chiang <xcojad@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['authenticate']         = 'SMTP 錯誤：登入失敗。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['connect_host']         = 'SMTP 錯誤：無法連線到 SMTP 主機。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP 錯誤：無法接受的資料。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['empty_message']        = '郵件內容為空';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['encoding']             = '未知編碼: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['execute']              = '無法執行：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_access']          = '無法存取檔案：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['file_open']            = '檔案錯誤：無法開啟檔案：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['from_failed']          = '發送地址錯誤：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['instantiate']          = '未知函數呼叫。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_address']      = '因為電子郵件地址無效，無法傳送: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['mailer_not_supported'] = '不支援的發信客戶端。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['provide_address']      = '必須提供至少一個收件人地址。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['recipients_failed']    = 'SMTP 錯誤：以下收件人地址錯誤：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['signing']              = '電子簽章錯誤: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP 連線失敗';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['smtp_error']           = 'SMTP 伺服器錯誤: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['variable_set']         = '無法設定或重設變數: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['extension_missing']    = '遺失模組 Extension: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   1)                   GNU LESSER GENERAL PUBLIC LICENSE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   2)                        Version 2.1, February 1999
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   3) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   4)  Copyright (C) 1991, 1999 Free Software Foundation, Inc.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   5)  51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   6)  Everyone is permitted to copy and distribute verbatim copies
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   7)  of this license document, but changing it is not allowed.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   9) [This is the first released version of the Lesser GPL.  It also counts
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  10)  as the successor of the GNU Library Public License, version 2, hence
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  11)  the version number 2.1.]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  12) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  13)                             Preamble
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  14) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  15)   The licenses for most software are designed to take away your
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  16) freedom to share and change it.  By contrast, the GNU General Public
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  17) Licenses are intended to guarantee your freedom to share and change
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  18) free software--to make sure the software is free for all its users.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  19) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  20)   This license, the Lesser General Public License, applies to some
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  21) specially designated software packages--typically libraries--of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  22) Free Software Foundation and other authors who decide to use it.  You
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  23) can use it too, but we suggest you first think carefully about whether
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  24) this license or the ordinary General Public License is the better
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  25) strategy to use in any particular case, based on the explanations below.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  26) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  27)   When we speak of free software, we are referring to freedom of use,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  28) not price.  Our General Public Licenses are designed to make sure that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  29) you have the freedom to distribute copies of free software (and charge
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  30) for this service if you wish); that you receive source code or can get
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  31) it if you want it; that you can change the software and use pieces of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  32) it in new free programs; and that you are informed that you can do
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  33) these things.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  34) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  35)   To protect your rights, we need to make restrictions that forbid
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  36) distributors to deny you these rights or to ask you to surrender these
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  37) rights.  These restrictions translate to certain responsibilities for
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  38) you if you distribute copies of the library or if you modify it.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  39) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  40)   For example, if you distribute copies of the library, whether gratis
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  41) or for a fee, you must give the recipients all the rights that we gave
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  42) you.  You must make sure that they, too, receive or can get the source
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  43) code.  If you link other code with the library, you must provide
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  44) complete object files to the recipients, so that they can relink them
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  45) with the library after making changes to the library and recompiling
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  46) it.  And you must show them these terms so they know their rights.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  47) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  48)   We protect your rights with a two-step method: (1) we copyright the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  49) library, and (2) we offer you this license, which gives you legal
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  50) permission to copy, distribute and/or modify the library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  51) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  52)   To protect each distributor, we want to make it very clear that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  53) there is no warranty for the free library.  Also, if the library is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  54) modified by someone else and passed on, the recipients should know
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  55) that what they have is not the original version, so that the original
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  56) author's reputation will not be affected by problems that might be
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  57) introduced by others.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  58) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  59)   Finally, software patents pose a constant threat to the existence of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  60) any free program.  We wish to make sure that a company cannot
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  61) effectively restrict the users of a free program by obtaining a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  62) restrictive license from a patent holder.  Therefore, we insist that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  63) any patent license obtained for a version of the library must be
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  64) consistent with the full freedom of use specified in this license.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  65) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  66)   Most GNU software, including some libraries, is covered by the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  67) ordinary GNU General Public License.  This license, the GNU Lesser
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  68) General Public License, applies to certain designated libraries, and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  69) is quite different from the ordinary General Public License.  We use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  70) this license for certain libraries in order to permit linking those
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  71) libraries into non-free programs.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  72) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  73)   When a program is linked with a library, whether statically or using
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  74) a shared library, the combination of the two is legally speaking a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  75) combined work, a derivative of the original library.  The ordinary
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  76) General Public License therefore permits such linking only if the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  77) entire combination fits its criteria of freedom.  The Lesser General
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  78) Public License permits more lax criteria for linking other code with
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  79) the library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  80) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  81)   We call this license the "Lesser" General Public License because it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  82) does Less to protect the user's freedom than the ordinary General
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  83) Public License.  It also provides other free software developers Less
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  84) of an advantage over competing non-free programs.  These disadvantages
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  85) are the reason we use the ordinary General Public License for many
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  86) libraries.  However, the Lesser license provides advantages in certain
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  87) special circumstances.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  88) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  89)   For example, on rare occasions, there may be a special need to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  90) encourage the widest possible use of a certain library, so that it becomes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  91) a de-facto standard.  To achieve this, non-free programs must be
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  92) allowed to use the library.  A more frequent case is that a free
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  93) library does the same job as widely used non-free libraries.  In this
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  94) case, there is little to gain by limiting the free library to free
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  95) software only, so we use the Lesser General Public License.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  96) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  97)   In other cases, permission to use a particular library in non-free
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  98) programs enables a greater number of people to use a large body of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  99) free software.  For example, permission to use the GNU C Library in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 100) non-free programs enables many more people to use the whole GNU
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 101) operating system, as well as its variant, the GNU/Linux operating
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 102) system.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 103) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 104)   Although the Lesser General Public License is Less protective of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 105) users' freedom, it does ensure that the user of a program that is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 106) linked with the Library has the freedom and the wherewithal to run
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 107) that program using a modified version of the Library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 108) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 109)   The precise terms and conditions for copying, distribution and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 110) modification follow.  Pay close attention to the difference between a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 111) "work based on the library" and a "work that uses the library".  The
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 112) former contains code derived from the library, whereas the latter must
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 113) be combined with the library in order to run.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 114) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 115)                   GNU LESSER GENERAL PUBLIC LICENSE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 116)    TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 117) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 118)   0. This License Agreement applies to any software library or other
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 119) program which contains a notice placed by the copyright holder or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 120) other authorized party saying it may be distributed under the terms of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 121) this Lesser General Public License (also called "this License").
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 122) Each licensee is addressed as "you".
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 123) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 124)   A "library" means a collection of software functions and/or data
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 125) prepared so as to be conveniently linked with application programs
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 126) (which use some of those functions and data) to form executables.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 127) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 128)   The "Library", below, refers to any such software library or work
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 129) which has been distributed under these terms.  A "work based on the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 130) Library" means either the Library or any derivative work under
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 131) copyright law: that is to say, a work containing the Library or a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 132) portion of it, either verbatim or with modifications and/or translated
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 133) straightforwardly into another language.  (Hereinafter, translation is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 134) included without limitation in the term "modification".)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 135) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 136)   "Source code" for a work means the preferred form of the work for
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 137) making modifications to it.  For a library, complete source code means
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 138) all the source code for all modules it contains, plus any associated
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 139) interface definition files, plus the scripts used to control compilation
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 140) and installation of the library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 141) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 142)   Activities other than copying, distribution and modification are not
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 143) covered by this License; they are outside its scope.  The act of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 144) running a program using the Library is not restricted, and output from
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 145) such a program is covered only if its contents constitute a work based
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 146) on the Library (independent of the use of the Library in a tool for
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 147) writing it).  Whether that is true depends on what the Library does
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 148) and what the program that uses the Library does.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 149) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 150)   1. You may copy and distribute verbatim copies of the Library's
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 151) complete source code as you receive it, in any medium, provided that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 152) you conspicuously and appropriately publish on each copy an
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 153) appropriate copyright notice and disclaimer of warranty; keep intact
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 154) all the notices that refer to this License and to the absence of any
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 155) warranty; and distribute a copy of this License along with the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 156) Library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 157) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 158)   You may charge a fee for the physical act of transferring a copy,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 159) and you may at your option offer warranty protection in exchange for a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 160) fee.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 161) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 162)   2. You may modify your copy or copies of the Library or any portion
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 163) of it, thus forming a work based on the Library, and copy and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 164) distribute such modifications or work under the terms of Section 1
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 165) above, provided that you also meet all of these conditions:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 166) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 167)     a) The modified work must itself be a software library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 168) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 169)     b) You must cause the files modified to carry prominent notices
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 170)     stating that you changed the files and the date of any change.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 171) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 172)     c) You must cause the whole of the work to be licensed at no
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 173)     charge to all third parties under the terms of this License.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 174) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 175)     d) If a facility in the modified Library refers to a function or a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 176)     table of data to be supplied by an application program that uses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 177)     the facility, other than as an argument passed when the facility
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 178)     is invoked, then you must make a good faith effort to ensure that,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 179)     in the event an application does not supply such function or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 180)     table, the facility still operates, and performs whatever part of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 181)     its purpose remains meaningful.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 182) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 183)     (For example, a function in a library to compute square roots has
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 184)     a purpose that is entirely well-defined independent of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 185)     application.  Therefore, Subsection 2d requires that any
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 186)     application-supplied function or table used by this function must
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 187)     be optional: if the application does not supply it, the square
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 188)     root function must still compute square roots.)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 189) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 190) These requirements apply to the modified work as a whole.  If
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 191) identifiable sections of that work are not derived from the Library,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 192) and can be reasonably considered independent and separate works in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 193) themselves, then this License, and its terms, do not apply to those
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 194) sections when you distribute them as separate works.  But when you
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 195) distribute the same sections as part of a whole which is a work based
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 196) on the Library, the distribution of the whole must be on the terms of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 197) this License, whose permissions for other licensees extend to the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 198) entire whole, and thus to each and every part regardless of who wrote
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 199) it.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 200) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 201) Thus, it is not the intent of this section to claim rights or contest
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 202) your rights to work written entirely by you; rather, the intent is to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 203) exercise the right to control the distribution of derivative or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 204) collective works based on the Library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 205) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 206) In addition, mere aggregation of another work not based on the Library
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 207) with the Library (or with a work based on the Library) on a volume of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 208) a storage or distribution medium does not bring the other work under
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 209) the scope of this License.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 210) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 211)   3. You may opt to apply the terms of the ordinary GNU General Public
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 212) License instead of this License to a given copy of the Library.  To do
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 213) this, you must alter all the notices that refer to this License, so
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 214) that they refer to the ordinary GNU General Public License, version 2,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 215) instead of to this License.  (If a newer version than version 2 of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 216) ordinary GNU General Public License has appeared, then you can specify
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 217) that version instead if you wish.)  Do not make any other change in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 218) these notices.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 219) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 220)   Once this change is made in a given copy, it is irreversible for
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 221) that copy, so the ordinary GNU General Public License applies to all
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 222) subsequent copies and derivative works made from that copy.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 223) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 224)   This option is useful when you wish to copy part of the code of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 225) the Library into a program that is not a library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 226) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 227)   4. You may copy and distribute the Library (or a portion or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 228) derivative of it, under Section 2) in object code or executable form
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 229) under the terms of Sections 1 and 2 above provided that you accompany
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 230) it with the complete corresponding machine-readable source code, which
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 231) must be distributed under the terms of Sections 1 and 2 above on a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 232) medium customarily used for software interchange.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 233) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 234)   If distribution of object code is made by offering access to copy
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 235) from a designated place, then offering equivalent access to copy the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 236) source code from the same place satisfies the requirement to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 237) distribute the source code, even though third parties are not
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 238) compelled to copy the source along with the object code.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 239) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 240)   5. A program that contains no derivative of any portion of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 241) Library, but is designed to work with the Library by being compiled or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 242) linked with it, is called a "work that uses the Library".  Such a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 243) work, in isolation, is not a derivative work of the Library, and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 244) therefore falls outside the scope of this License.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 245) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 246)   However, linking a "work that uses the Library" with the Library
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 247) creates an executable that is a derivative of the Library (because it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 248) contains portions of the Library), rather than a "work that uses the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 249) library".  The executable is therefore covered by this License.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 250) Section 6 states terms for distribution of such executables.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 251) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 252)   When a "work that uses the Library" uses material from a header file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 253) that is part of the Library, the object code for the work may be a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 254) derivative work of the Library even though the source code is not.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 255) Whether this is true is especially significant if the work can be
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 256) linked without the Library, or if the work is itself a library.  The
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 257) threshold for this to be true is not precisely defined by law.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 258) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 259)   If such an object file uses only numerical parameters, data
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 260) structure layouts and accessors, and small macros and small inline
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 261) functions (ten lines or less in length), then the use of the object
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 262) file is unrestricted, regardless of whether it is legally a derivative
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 263) work.  (Executables containing this object code plus portions of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 264) Library will still fall under Section 6.)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 265) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 266)   Otherwise, if the work is a derivative of the Library, you may
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 267) distribute the object code for the work under the terms of Section 6.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 268) Any executables containing that work also fall under Section 6,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 269) whether or not they are linked directly with the Library itself.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 270) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 271)   6. As an exception to the Sections above, you may also combine or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 272) link a "work that uses the Library" with the Library to produce a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 273) work containing portions of the Library, and distribute that work
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 274) under terms of your choice, provided that the terms permit
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 275) modification of the work for the customer's own use and reverse
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 276) engineering for debugging such modifications.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 277) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 278)   You must give prominent notice with each copy of the work that the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 279) Library is used in it and that the Library and its use are covered by
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 280) this License.  You must supply a copy of this License.  If the work
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 281) during execution displays copyright notices, you must include the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 282) copyright notice for the Library among them, as well as a reference
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 283) directing the user to the copy of this License.  Also, you must do one
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 284) of these things:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 285) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 286)     a) Accompany the work with the complete corresponding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 287)     machine-readable source code for the Library including whatever
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 288)     changes were used in the work (which must be distributed under
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 289)     Sections 1 and 2 above); and, if the work is an executable linked
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 290)     with the Library, with the complete machine-readable "work that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 291)     uses the Library", as object code and/or source code, so that the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 292)     user can modify the Library and then relink to produce a modified
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 293)     executable containing the modified Library.  (It is understood
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 294)     that the user who changes the contents of definitions files in the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 295)     Library will not necessarily be able to recompile the application
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 296)     to use the modified definitions.)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 297) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 298)     b) Use a suitable shared library mechanism for linking with the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 299)     Library.  A suitable mechanism is one that (1) uses at run time a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 300)     copy of the library already present on the user's computer system,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 301)     rather than copying library functions into the executable, and (2)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 302)     will operate properly with a modified version of the library, if
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 303)     the user installs one, as long as the modified version is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 304)     interface-compatible with the version that the work was made with.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 305) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 306)     c) Accompany the work with a written offer, valid for at
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 307)     least three years, to give the same user the materials
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 308)     specified in Subsection 6a, above, for a charge no more
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 309)     than the cost of performing this distribution.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 310) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 311)     d) If distribution of the work is made by offering access to copy
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 312)     from a designated place, offer equivalent access to copy the above
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 313)     specified materials from the same place.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 314) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 315)     e) Verify that the user has already received a copy of these
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 316)     materials or that you have already sent this user a copy.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 317) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 318)   For an executable, the required form of the "work that uses the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 319) Library" must include any data and utility programs needed for
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 320) reproducing the executable from it.  However, as a special exception,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 321) the materials to be distributed need not include anything that is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 322) normally distributed (in either source or binary form) with the major
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 323) components (compiler, kernel, and so on) of the operating system on
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 324) which the executable runs, unless that component itself accompanies
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 325) the executable.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 326) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 327)   It may happen that this requirement contradicts the license
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 328) restrictions of other proprietary libraries that do not normally
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 329) accompany the operating system.  Such a contradiction means you cannot
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 330) use both them and the Library together in an executable that you
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 331) distribute.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 332) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 333)   7. You may place library facilities that are a work based on the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 334) Library side-by-side in a single library together with other library
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 335) facilities not covered by this License, and distribute such a combined
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 336) library, provided that the separate distribution of the work based on
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 337) the Library and of the other library facilities is otherwise
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 338) permitted, and provided that you do these two things:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 339) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 340)     a) Accompany the combined library with a copy of the same work
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 341)     based on the Library, uncombined with any other library
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 342)     facilities.  This must be distributed under the terms of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 343)     Sections above.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 344) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 345)     b) Give prominent notice with the combined library of the fact
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 346)     that part of it is a work based on the Library, and explaining
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 347)     where to find the accompanying uncombined form of the same work.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 348) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 349)   8. You may not copy, modify, sublicense, link with, or distribute
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 350) the Library except as expressly provided under this License.  Any
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 351) attempt otherwise to copy, modify, sublicense, link with, or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 352) distribute the Library is void, and will automatically terminate your
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 353) rights under this License.  However, parties who have received copies,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 354) or rights, from you under this License will not have their licenses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 355) terminated so long as such parties remain in full compliance.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 356) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 357)   9. You are not required to accept this License, since you have not
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 358) signed it.  However, nothing else grants you permission to modify or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 359) distribute the Library or its derivative works.  These actions are
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 360) prohibited by law if you do not accept this License.  Therefore, by
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 361) modifying or distributing the Library (or any work based on the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 362) Library), you indicate your acceptance of this License to do so, and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 363) all its terms and conditions for copying, distributing or modifying
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 364) the Library or works based on it.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 365) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 366)   10. Each time you redistribute the Library (or any work based on the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 367) Library), the recipient automatically receives a license from the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 368) original licensor to copy, distribute, link with or modify the Library
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 369) subject to these terms and conditions.  You may not impose any further
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 370) restrictions on the recipients' exercise of the rights granted herein.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 371) You are not responsible for enforcing compliance by third parties with
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 372) this License.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 373) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 374)   11. If, as a consequence of a court judgment or allegation of patent
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 375) infringement or for any other reason (not limited to patent issues),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 376) conditions are imposed on you (whether by court order, agreement or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 377) otherwise) that contradict the conditions of this License, they do not
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 378) excuse you from the conditions of this License.  If you cannot
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 379) distribute so as to satisfy simultaneously your obligations under this
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 380) License and any other pertinent obligations, then as a consequence you
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 381) may not distribute the Library at all.  For example, if a patent
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 382) license would not permit royalty-free redistribution of the Library by
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 383) all those who receive copies directly or indirectly through you, then
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 384) the only way you could satisfy both it and this License would be to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 385) refrain entirely from distribution of the Library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 386) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 387) If any portion of this section is held invalid or unenforceable under any
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 388) particular circumstance, the balance of the section is intended to apply,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 389) and the section as a whole is intended to apply in other circumstances.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 390) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 391) It is not the purpose of this section to induce you to infringe any
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 392) patents or other property right claims or to contest validity of any
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 393) such claims; this section has the sole purpose of protecting the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 394) integrity of the free software distribution system which is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 395) implemented by public license practices.  Many people have made
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 396) generous contributions to the wide range of software distributed
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 397) through that system in reliance on consistent application of that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 398) system; it is up to the author/donor to decide if he or she is willing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 399) to distribute software through any other system and a licensee cannot
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 400) impose that choice.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 401) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 402) This section is intended to make thoroughly clear what is believed to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 403) be a consequence of the rest of this License.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 404) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 405)   12. If the distribution and/or use of the Library is restricted in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 406) certain countries either by patents or by copyrighted interfaces, the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 407) original copyright holder who places the Library under this License may add
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 408) an explicit geographical distribution limitation excluding those countries,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 409) so that distribution is permitted only in or among countries not thus
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 410) excluded.  In such case, this License incorporates the limitation as if
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 411) written in the body of this License.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 412) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 413)   13. The Free Software Foundation may publish revised and/or new
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 414) versions of the Lesser General Public License from time to time.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 415) Such new versions will be similar in spirit to the present version,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 416) but may differ in detail to address new problems or concerns.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 417) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 418) Each version is given a distinguishing version number.  If the Library
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 419) specifies a version number of this License which applies to it and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 420) "any later version", you have the option of following the terms and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 421) conditions either of that version or of any later version published by
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 422) the Free Software Foundation.  If the Library does not specify a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 423) license version number, you may choose any version ever published by
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 424) the Free Software Foundation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 425) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 426)   14. If you wish to incorporate parts of the Library into other free
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 427) programs whose distribution conditions are incompatible with these,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 428) write to the author to ask for permission.  For software which is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 429) copyrighted by the Free Software Foundation, write to the Free
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 430) Software Foundation; we sometimes make exceptions for this.  Our
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 431) decision will be guided by the two goals of preserving the free status
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 432) of all derivatives of our free software and of promoting the sharing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 433) and reuse of software generally.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 434) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 435)                             NO WARRANTY
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 436) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 437)   15. BECAUSE THE LIBRARY IS LICENSED FREE OF CHARGE, THERE IS NO
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 438) WARRANTY FOR THE LIBRARY, TO THE EXTENT PERMITTED BY APPLICABLE LAW.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 439) EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 440) OTHER PARTIES PROVIDE THE LIBRARY "AS IS" WITHOUT WARRANTY OF ANY
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 441) KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 442) IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 443) PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 444) LIBRARY IS WITH YOU.  SHOULD THE LIBRARY PROVE DEFECTIVE, YOU ASSUME
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 445) THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 446) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 447)   16. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 448) WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 449) AND/OR REDISTRIBUTE THE LIBRARY AS PERMITTED ABOVE, BE LIABLE TO YOU
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 450) FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 451) CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 452) LIBRARY (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 453) RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 454) FAILURE OF THE LIBRARY TO OPERATE WITH ANY OTHER SOFTWARE), EVEN IF
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 455) SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 456) DAMAGES.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 457) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 458)                      END OF TERMS AND CONDITIONS
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 459) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 460)            How to Apply These Terms to Your New Libraries
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 461) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 462)   If you develop a new library, and you want it to be of the greatest
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 463) possible use to the public, we recommend making it free software that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 464) everyone can redistribute and change.  You can do so by permitting
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 465) redistribution under these terms (or, alternatively, under the terms of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 466) ordinary General Public License).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 467) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 468)   To apply these terms, attach the following notices to the library.  It is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 469) safest to attach them to the start of each source file to most effectively
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 470) convey the exclusion of warranty; and each file should have at least the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 471) "copyright" line and a pointer to where the full notice is found.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 472) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 473)     <one line to give the library's name and a brief idea of what it does.>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 474)     Copyright (C) <year>  <name of author>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 475) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 476)     This library is free software; you can redistribute it and/or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 477)     modify it under the terms of the GNU Lesser General Public
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 478)     License as published by the Free Software Foundation; either
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 479)     version 2.1 of the License, or (at your option) any later version.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 480) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 481)     This library is distributed in the hope that it will be useful,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 482)     but WITHOUT ANY WARRANTY; without even the implied warranty of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 483)     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 484)     Lesser General Public License for more details.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 485) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 486)     You should have received a copy of the GNU Lesser General Public
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 487)     License along with this library; if not, write to the Free Software
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 488)     Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 489) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 490) Also add information on how to contact you by electronic and paper mail.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 491) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 492) You should also get your employer (if you work as a programmer) or your
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 493) school, if any, to sign a "copyright disclaimer" for the library, if
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 494) necessary.  Here is a sample; alter the names:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 495) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 496)   Yoyodyne, Inc., hereby disclaims all copyright interest in the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 497)   library `Frob' (a library for tweaking knobs) written by James Random Hacker.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 498) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 499)   <signature of Ty Coon>, 1 April 1990
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 500)   Ty Coon, President of Vice
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 501) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 502) That's all there is to it!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   1) [![SWUbanner](https://raw.githubusercontent.com/vshymanskyy/StandWithUkraine/main/banner2-direct.svg)](https://supportukrainenow.org/)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   3) ![PHPMailer](https://raw.github.com/PHPMailer/PHPMailer/master/examples/images/phpmailer.png)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   4) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   5) # PHPMailer – A full-featured email creation and transfer class for PHP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   6) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   7) [![Test status](https://github.com/PHPMailer/PHPMailer/workflows/Tests/badge.svg)](https://github.com/PHPMailer/PHPMailer/actions)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   8) [![codecov.io](https://codecov.io/gh/PHPMailer/PHPMailer/branch/master/graph/badge.svg?token=iORZpwmYmM)](https://codecov.io/gh/PHPMailer/PHPMailer)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   9) [![Latest Stable Version](https://poser.pugx.org/phpmailer/phpmailer/v/stable.svg)](https://packagist.org/packages/phpmailer/phpmailer)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  10) [![Total Downloads](https://poser.pugx.org/phpmailer/phpmailer/downloads)](https://packagist.org/packages/phpmailer/phpmailer)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  11) [![License](https://poser.pugx.org/phpmailer/phpmailer/license.svg)](https://packagist.org/packages/phpmailer/phpmailer)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  12) [![API Docs](https://github.com/phpmailer/phpmailer/workflows/Docs/badge.svg)](https://phpmailer.github.io/PHPMailer/)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  13) [![OpenSSF Scorecard](https://api.securityscorecards.dev/projects/github.com/PHPMailer/PHPMailer/badge)](https://api.securityscorecards.dev/projects/github.com/PHPMailer/PHPMailer)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  14) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  15) ## Features
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  16) - Probably the world's most popular code for sending email from PHP!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  17) - Used by many open-source projects: WordPress, Drupal, 1CRM, SugarCRM, Yii, Joomla! and many more
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  18) - Integrated SMTP support – send without a local mail server
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  19) - Send emails with multiple To, CC, BCC, and Reply-to addresses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  20) - Multipart/alternative emails for mail clients that do not read HTML email
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  21) - Add attachments, including inline
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  22) - Support for UTF-8 content and 8bit, base64, binary, and quoted-printable encodings
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  23) - SMTP authentication with LOGIN, PLAIN, CRAM-MD5, and XOAUTH2 mechanisms over SMTPS and SMTP+STARTTLS transports
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  24) - Validates email addresses automatically
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  25) - Protects against header injection attacks
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  26) - Error messages in over 50 languages!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  27) - DKIM and S/MIME signing support
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  28) - Compatible with PHP 5.5 and later, including PHP 8.2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  29) - Namespaced to prevent name clashes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  30) - Much more!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  31) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  32) ## Why you might need it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  33) Many PHP developers need to send email from their code. The only PHP function that supports this directly is [`mail()`](https://www.php.net/manual/en/function.mail.php). However, it does not provide any assistance for making use of popular features such as encryption, authentication, HTML messages, and attachments.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  34) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  35) Formatting email correctly is surprisingly difficult. There are myriad overlapping (and conflicting) standards, requiring tight adherence to horribly complicated formatting and encoding rules – the vast majority of code that you'll find online that uses the `mail()` function directly is just plain wrong, if not unsafe!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  36) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  37) The PHP `mail()` function usually sends via a local mail server, typically fronted by a `sendmail` binary on Linux, BSD, and macOS platforms, however, Windows usually doesn't include a local mail server; PHPMailer's integrated SMTP client allows email sending on all platforms without needing a local mail server. Be aware though, that the `mail()` function should be avoided when possible; it's both faster and [safer](https://exploitbox.io/paper/Pwning-PHP-Mail-Function-For-Fun-And-RCE.html) to use SMTP to localhost.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  38) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  39) *Please* don't be tempted to do it yourself – if you don't use PHPMailer, there are many other excellent libraries that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  40) you should look at before rolling your own. Try [SwiftMailer](https://swiftmailer.symfony.com/)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  41) , [Laminas/Mail](https://docs.laminas.dev/laminas-mail/), [ZetaComponents](https://github.com/zetacomponents/Mail), etc.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  42) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  43) ## License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  44) This software is distributed under the [LGPL 2.1](https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html) license, along with the [GPL Cooperation Commitment](https://gplcc.github.io/gplcc/). Please read [LICENSE](https://github.com/PHPMailer/PHPMailer/blob/master/LICENSE) for information on the software availability and distribution.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  45) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  46) ## Installation & loading
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  47) PHPMailer is available on [Packagist](https://packagist.org/packages/phpmailer/phpmailer) (using semantic versioning), and installation via [Composer](https://getcomposer.org) is the recommended way to install PHPMailer. Just add this line to your `composer.json` file:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  48) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  49) ```json
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  50) "phpmailer/phpmailer": "^6.9.2"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  51) ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  52) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  53) or run
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  54) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  55) ```sh
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  56) composer require phpmailer/phpmailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  57) ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  58) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  59) Note that the `vendor` folder and the `vendor/autoload.php` script are generated by Composer; they are not part of PHPMailer.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  60) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  61) If you want to use XOAUTH2 authentication, you will also need to add a dependency on the `league/oauth2-client` and appropriate service adapters package in your `composer.json`, or take a look at
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  62) by @decomplexity's [SendOauth2 wrapper](https://github.com/decomplexity/SendOauth2), especially if you're using Microsoft services.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  63) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  64) Alternatively, if you're not using Composer, you
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  65) can [download PHPMailer as a zip file](https://github.com/PHPMailer/PHPMailer/archive/master.zip), (note that docs and examples are not included in the zip file), then copy the contents of the PHPMailer folder into one of the `include_path` directories specified in your PHP configuration and load each class file manually:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  66) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  67) ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  68) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  69) use PHPMailer\PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  70) use PHPMailer\PHPMailer\Exception;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  71) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  72) require 'path/to/PHPMailer/src/Exception.php';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  73) require 'path/to/PHPMailer/src/PHPMailer.php';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  74) require 'path/to/PHPMailer/src/SMTP.php';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  75) ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  76) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  77) If you're not using the `SMTP` class explicitly (you're probably not), you don't need a `use` line for the SMTP class. Even if you're not using exceptions, you do still need to load the `Exception` class as it is used internally.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  78) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  79) ## Legacy versions
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  80) PHPMailer 5.2 (which is compatible with PHP 5.0 — 7.0) is no longer supported, even for security updates. You will find the latest version of 5.2 in the [5.2-stable branch](https://github.com/PHPMailer/PHPMailer/tree/5.2-stable). If you're using PHP 5.5 or later (which you should be), switch to the 6.x releases.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  81) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  82) ### Upgrading from 5.2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  83) The biggest changes are that source files are now in the `src/` folder, and PHPMailer now declares the namespace `PHPMailer\PHPMailer`. This has several important effects – [read the upgrade guide](https://github.com/PHPMailer/PHPMailer/tree/master/UPGRADING.md) for more details.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  84) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  85) ### Minimal installation
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  86) While installing the entire package manually or with Composer is simple, convenient, and reliable, you may want to include only vital files in your project. At the very least you will need [src/PHPMailer.php](https://github.com/PHPMailer/PHPMailer/tree/master/src/PHPMailer.php). If you're using SMTP, you'll need [src/SMTP.php](https://github.com/PHPMailer/PHPMailer/tree/master/src/SMTP.php), and if you're using POP-before SMTP (*very* unlikely!), you'll need [src/POP3.php](https://github.com/PHPMailer/PHPMailer/tree/master/src/POP3.php). You can skip the [language](https://github.com/PHPMailer/PHPMailer/tree/master/language/) folder if you're not showing errors to users and can make do with English-only errors. If you're using XOAUTH2 you will need [src/OAuth.php](https://github.com/PHPMailer/PHPMailer/tree/master/src/OAuth.php) as well as the Composer dependencies for the services you wish to authenticate with. Really, it's much easier to use Composer!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  87) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  88) ## A Simple Example
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  89) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  90) ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  91) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  92) //Import PHPMailer classes into the global namespace
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  93) //These must be at the top of your script, not inside a function
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  94) use PHPMailer\PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  95) use PHPMailer\PHPMailer\SMTP;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  96) use PHPMailer\PHPMailer\Exception;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  97) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  98) //Load Composer's autoloader
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  99) require 'vendor/autoload.php';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 100) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 101) //Create an instance; passing `true` enables exceptions
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 102) $mail = new PHPMailer(true);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 103) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 104) try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 105)     //Server settings
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 106)     $mail->SMTPDebug = SMTP::DEBUG_SERVER;                      //Enable verbose debug output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 107)     $mail->isSMTP();                                            //Send using SMTP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 108)     $mail->Host       = 'smtp.example.com';                     //Set the SMTP server to send through
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 109)     $mail->SMTPAuth   = true;                                   //Enable SMTP authentication
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 110)     $mail->Username   = 'user@example.com';                     //SMTP username
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 111)     $mail->Password   = 'secret';                               //SMTP password
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 112)     $mail->SMTPSecure = PHPMailer::ENCRYPTION_SMTPS;            //Enable implicit TLS encryption
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 113)     $mail->Port       = 465;                                    //TCP port to connect to; use 587 if you have set `SMTPSecure = PHPMailer::ENCRYPTION_STARTTLS`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 114) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 115)     //Recipients
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 116)     $mail->setFrom('from@example.com', 'Mailer');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 117)     $mail->addAddress('joe@example.net', 'Joe User');     //Add a recipient
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 118)     $mail->addAddress('ellen@example.com');               //Name is optional
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 119)     $mail->addReplyTo('info@example.com', 'Information');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 120)     $mail->addCC('cc@example.com');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 121)     $mail->addBCC('bcc@example.com');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 122) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 123)     //Attachments
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 124)     $mail->addAttachment('/var/tmp/file.tar.gz');         //Add attachments
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 125)     $mail->addAttachment('/tmp/image.jpg', 'new.jpg');    //Optional name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 126) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 127)     //Content
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 128)     $mail->isHTML(true);                                  //Set email format to HTML
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 129)     $mail->Subject = 'Here is the subject';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 130)     $mail->Body    = 'This is the HTML message body <b>in bold!</b>';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 131)     $mail->AltBody = 'This is the body in plain text for non-HTML mail clients';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 132) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 133)     $mail->send();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 134)     echo 'Message has been sent';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 135) } catch (Exception $e) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 136)     echo "Message could not be sent. Mailer Error: {$mail->ErrorInfo}";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 137) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 138) ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 139) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 140) You'll find plenty to play with in the [examples](https://github.com/PHPMailer/PHPMailer/tree/master/examples) folder, which covers many common scenarios including sending through Gmail, building contact forms, sending to mailing lists, and more.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 141) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 142) If you are re-using the instance (e.g. when sending to a mailing list), you may need to clear the recipient list to avoid sending duplicate messages. See [the mailing list example](https://github.com/PHPMailer/PHPMailer/blob/master/examples/mailing_list.phps) for further guidance.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 143) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 144) That's it. You should now be ready to use PHPMailer!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 145) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 146) ## Localization
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 147) PHPMailer defaults to English, but in the [language](https://github.com/PHPMailer/PHPMailer/tree/master/language/) folder, you'll find many translations for PHPMailer error messages that you may encounter. Their filenames contain [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) language code for the translations, for example `fr` for French. To specify a language, you need to tell PHPMailer which one to use, like this:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 148) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 149) ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 150) //To load the French version
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 151) $mail->setLanguage('fr', '/optional/path/to/language/directory/');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 152) ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 153) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 154) We welcome corrections and new languages – if you're looking for corrections, run the [Language/TranslationCompletenessTest.php](https://github.com/PHPMailer/PHPMailer/blob/master/test/Language/TranslationCompletenessTest.php) script in the tests folder and it will show any missing translations.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 155) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 156) ## Documentation
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 157) Start reading at the [GitHub wiki](https://github.com/PHPMailer/PHPMailer/wiki). If you're having trouble, head for [the troubleshooting guide](https://github.com/PHPMailer/PHPMailer/wiki/Troubleshooting) as it's frequently updated.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 158) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 159) Examples of how to use PHPMailer for common scenarios can be found in the [examples](https://github.com/PHPMailer/PHPMailer/tree/master/examples) folder. If you're looking for a good starting point, we recommend you start with [the Gmail example](https://github.com/PHPMailer/PHPMailer/tree/master/examples/gmail.phps).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 160) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 161) To reduce PHPMailer's deployed code footprint, examples are not included if you load PHPMailer via Composer or via [GitHub's zip file download](https://github.com/PHPMailer/PHPMailer/archive/master.zip), so you'll need to either clone the git repository or use the above links to get to the examples directly.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 162) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 163) Complete generated API documentation is [available online](https://phpmailer.github.io/PHPMailer/).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 164) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 165) You can generate complete API-level documentation by running `phpdoc` in the top-level folder, and documentation will appear in the `docs` folder, though you'll need to have [PHPDocumentor](https://www.phpdoc.org) installed. You may find [the unit tests](https://github.com/PHPMailer/PHPMailer/blob/master/test/PHPMailerTest.php) a good reference for how to do various operations such as encryption.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 166) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 167) If the documentation doesn't cover what you need, search the [many questions on Stack Overflow](https://stackoverflow.com/questions/tagged/phpmailer), and before you ask a question about "SMTP Error: Could not connect to SMTP host.", [read the troubleshooting guide](https://github.com/PHPMailer/PHPMailer/wiki/Troubleshooting).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 168) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 169) ## Tests
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 170) [PHPMailer tests](https://github.com/PHPMailer/PHPMailer/tree/master/test/) use PHPUnit 9, with [a polyfill](https://github.com/Yoast/PHPUnit-Polyfills) to let 9-style tests run on older PHPUnit and PHP versions.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 171) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 172) [![Test status](https://github.com/PHPMailer/PHPMailer/workflows/Tests/badge.svg)](https://github.com/PHPMailer/PHPMailer/actions)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 173) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 174) If this isn't passing, is there something you can do to help?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 175) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 176) ## Security
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 177) Please disclose any vulnerabilities found responsibly – report security issues to the maintainers privately.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 178) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 179) See [SECURITY](https://github.com/PHPMailer/PHPMailer/tree/master/SECURITY.md) and [PHPMailer's security advisories on GitHub](https://github.com/PHPMailer/PHPMailer/security). 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 180) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 181) ## Contributing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 182) Please submit bug reports, suggestions, and pull requests to the [GitHub issue tracker](https://github.com/PHPMailer/PHPMailer/issues).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 183) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 184) We're particularly interested in fixing edge cases, expanding test coverage, and updating translations.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 185) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 186) If you found a mistake in the docs, or want to add something, go ahead and amend the wiki – anyone can edit it.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 187) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 188) If you have git clones from prior to the move to the PHPMailer GitHub organisation, you'll need to update any remote URLs referencing the old GitHub location with a command like this from within your clone:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 189) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 190) ```sh
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 191) git remote set-url upstream https://github.com/PHPMailer/PHPMailer.git
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 192) ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 193) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 194) Please *don't* use the SourceForge or Google Code projects any more; they are obsolete and no longer maintained.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 195) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 196) ## Sponsorship
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 197) Development time and resources for PHPMailer are provided by [Smartmessages.net](https://info.smartmessages.net/), the world's only privacy-first email marketing system.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 198) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 199) <a href="https://info.smartmessages.net/"><img src="https://www.smartmessages.net/img/smartmessages-logo.svg" width="550" alt="Smartmessages.net privacy-first email marketing logo"></a>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 200) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 201) Donations are very welcome, whether in beer 🍺, T-shirts 👕, or cold, hard cash 💰. Sponsorship through GitHub is a simple and convenient way to say "thank you" to PHPMailer's maintainers and contributors – just click the "Sponsor" button [on the project page](https://github.com/PHPMailer/PHPMailer). If your company uses PHPMailer, consider taking part in Tidelift's enterprise support programme.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 202) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 203) ## PHPMailer For Enterprise
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 204) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 205) Available as part of the Tidelift Subscription.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 206) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 207) The maintainers of PHPMailer and thousands of other packages are working with Tidelift to deliver commercial
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 208) support and maintenance for the open-source packages you use to build your applications. Save time, reduce risk, and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 209) improve code health, while paying the maintainers of the exact packages you
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 210) use. [Learn more.](https://tidelift.com/subscription/pkg/packagist-phpmailer-phpmailer?utm_source=packagist-phpmailer-phpmailer&utm_medium=referral&utm_campaign=enterprise&utm_term=repo)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 211) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 212) ## Changelog
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 213) See [changelog](changelog.md).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 214) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 215) ## History
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 216) - PHPMailer was originally written in 2001 by Brent R. Matzelle as a [SourceForge project](https://sourceforge.net/projects/phpmailer/).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 217) - [Marcus Bointon](https://github.com/Synchro) (`coolbru` on SF) and Andy Prevost (`codeworxtech`) took over the project in 2004.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 218) - Became an Apache incubator project on Google Code in 2010, managed by Jim Jagielski.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 219) - Marcus created [his fork on GitHub](https://github.com/Synchro/PHPMailer) in 2008.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 220) - Jim and Marcus decide to join forces and use GitHub as the canonical and official repo for PHPMailer in 2013.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 221) - PHPMailer moves to [the PHPMailer organisation](https://github.com/PHPMailer) on GitHub in 2013.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 222) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 223) ### What's changed since moving from SourceForge?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 224) - Official successor to the SourceForge and Google Code projects.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 225) - Test suite.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 226) - Continuous integration with GitHub Actions.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 227) - Composer support.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 228) - Public development.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 229) - Additional languages and language strings.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 230) - CRAM-MD5 authentication support.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 231) - Preserves full repo history of authors, commits, and branches from the original SourceForge project.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) # Security notices relating to PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) Please disclose any security issues or vulnerabilities found through [Tidelift's coordinated disclosure system](https://tidelift.com/security) or to the maintainers privately.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5) PHPMailer 6.4.1 and earlier contain a vulnerability that can result in untrusted code being called (if such code is injected into the host project's scope by other means). If the `$patternselect` parameter to `validateAddress()` is set to `'php'` (the default, defined by `PHPMailer::$validator`), and the global namespace contains a function called `php`, it will be called in preference to the built-in validator of the same name. Mitigated in PHPMailer 6.5.0 by denying the use of simple strings as validator function names. Recorded as [CVE-2021-3603](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2021-3603). Reported by [Vikrant Singh Chauhan](mailto:vi@hackberry.xyz) via [huntr.dev](https://www.huntr.dev/).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) PHPMailer versions 6.4.1 and earlier contain a possible remote code execution vulnerability through the `$lang_path` parameter of the `setLanguage()` method. If the `$lang_path` parameter is passed unfiltered from user input, it can be set to [a UNC path](https://docs.microsoft.com/en-us/dotnet/standard/io/file-path-formats#unc-paths), and if an attacker is also able to persuade the server to load a file from that UNC path, a script file under their control may be executed. This vulnerability only applies to systems that resolve UNC paths, typically only Microsoft Windows.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) PHPMailer 6.5.0 mitigates this by no longer treating translation files as PHP code, but by parsing their text content directly. This approach avoids the possibility of executing unknown code while retaining backward compatibility. This isn't ideal, so the current translation format is deprecated and will be replaced in the next major release. Recorded as [CVE-2021-34551](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2021-34551). Reported by [Jilin Diting Information Technology Co., Ltd](https://listensec.com) via Tidelift.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) PHPMailer versions between 6.1.8 and 6.4.0 contain a regression of the earlier CVE-2018-19296 object injection vulnerability as a result of [a fix for Windows UNC paths in 6.1.8](https://github.com/PHPMailer/PHPMailer/commit/e2e07a355ee8ff36aba21d0242c5950c56e4c6f9). Recorded as [CVE-2020-36326](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2020-36326). Reported by Fariskhi Vidyan via Tidelift. 6.4.1 fixes this issue, and also enforces stricter checks for URL schemes in local path contexts.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) PHPMailer versions 6.1.5 and earlier contain an output escaping bug that occurs in `Content-Type` and `Content-Disposition` when filenames passed into `addAttachment` and other methods that accept attachment names contain double quote characters, in contravention of RFC822 3.4.1. No specific vulnerability has been found relating to this, but it could allow file attachments to bypass attachment filters that are based on matching filename extensions. Recorded as [CVE-2020-13625](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2020-13625). Reported by Elar Lang of Clarified Security.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) PHPMailer versions prior to 6.0.6 and 5.2.27 are vulnerable to an object injection attack by passing `phar://` paths into `addAttachment()` and other functions that may receive unfiltered local paths, possibly leading to RCE. Recorded as [CVE-2018-19296](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2018-19296). See [this article](https://knasmueller.net/5-answers-about-php-phar-exploitation) for more info on this type of vulnerability. Mitigated by blocking the use of paths containing URL-protocol style prefixes such as `phar://`. Reported by Sehun Oh of cyberone.kr.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) PHPMailer versions prior to 5.2.24 (released July 26th 2017) have an XSS vulnerability in one of the code examples, [CVE-2017-11503](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2017-11503). The `code_generator.phps` example did not filter user input prior to output. This file is distributed with a `.phps` extension, so it is not normally executable unless it is explicitly renamed, and the file is not included when PHPMailer is loaded through composer, so it is safe by default. There was also an undisclosed potential XSS vulnerability in the default exception handler (unused by default). Patches for both issues kindly provided by Patrick Monnerat of the Fedora Project.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) PHPMailer versions prior to 5.2.22 (released January 9th 2017) have a local file disclosure vulnerability, [CVE-2017-5223](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2017-5223). If content passed into `msgHTML()` is sourced from unfiltered user input, relative paths can map to absolute local file paths and added as attachments. Also note that `addAttachment` (just like `file_get_contents`, `passthru`, `unlink`, etc) should not be passed user-sourced params either! Reported by Yongxiang Li of Asiasecurity.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) PHPMailer versions prior to 5.2.20 (released December 28th 2016) are vulnerable to [CVE-2016-10045](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2016-10045) a remote code execution vulnerability, responsibly reported by [Dawid Golunski](https://legalhackers.com/advisories/PHPMailer-Exploit-Remote-Code-Exec-CVE-2016-10045-Vuln-Patch-Bypass.html), and patched by Paul Buonopane (@Zenexer).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) PHPMailer versions prior to 5.2.18 (released December 2016) are vulnerable to [CVE-2016-10033](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2016-10033) a remote code execution vulnerability, responsibly reported by [Dawid Golunski](https://legalhackers.com/advisories/PHPMailer-Exploit-Remote-Code-Exec-CVE-2016-10033-Vuln.html).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) PHPMailer versions prior to 5.2.14 (released November 2015) are vulnerable to [CVE-2015-8476](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2015-8476) an SMTP CRLF injection bug permitting arbitrary message sending.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) PHPMailer versions prior to 5.2.10 (released May 2015) are vulnerable to [CVE-2008-5619](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2008-5619), a remote code execution vulnerability in the bundled html2text library. This file was removed in 5.2.10, so if you are using a version prior to that and make use of the html2text function, it's vitally important that you upgrade and remove this file.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) PHPMailer versions prior to 2.0.7 and 2.2.1 are vulnerable to [CVE-2012-0796](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2012-0796), an email header injection attack.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) Joomla 1.6.0 uses PHPMailer in an unsafe way, allowing it to reveal local file paths, reported in [CVE-2011-3747](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2011-3747).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) PHPMailer didn't sanitise the `$lang_path` parameter in `SetLanguage`. This wasn't a problem in itself, but some apps (PHPClassifieds, ATutor) also failed to sanitise user-provided parameters passed to it, permitting semi-arbitrary local file inclusion, reported in [CVE-2010-4914](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2010-4914), [CVE-2007-2021](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2007-2021) and [CVE-2006-5734](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2006-5734).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) PHPMailer 1.7.2 and earlier contained a possible DDoS vulnerability reported in [CVE-2005-1807](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2005-1807).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) PHPMailer 1.7 and earlier (June 2003) have a possible vulnerability in the `SendmailSend` method where shell commands may not be sanitised. Reported in [CVE-2007-3215](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2007-3215).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 37) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   4)  * PHPMailer - PHP email creation and transport class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   5)  * PHP Version 5.5.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   6)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   7)  * @see https://github.com/PHPMailer/PHPMailer/ The PHPMailer GitHub project
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   8)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   9)  * @author    Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  10)  * @author    Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  11)  * @author    Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  12)  * @author    Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  13)  * @copyright 2012 - 2023 Marcus Bointon
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  14)  * @copyright 2010 - 2012 Jim Jagielski
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  15)  * @copyright 2004 - 2009 Andy Prevost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  16)  * @license   https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html GNU Lesser General Public License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  17)  * @note      This program is distributed in the hope that it will be useful - WITHOUT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  18)  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  19)  * FITNESS FOR A PARTICULAR PURPOSE.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  20)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  21) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  22) namespace PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  23) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  24) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  25)  * Configure PHPMailer with DSN string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  26)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  27)  * @see https://en.wikipedia.org/wiki/Data_source_name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  28)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  29)  * @author Oleg Voronkovich <oleg-voronkovich@yandex.ru>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  30)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  31) class DSNConfigurator
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  32) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  33)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  34)      * Create new PHPMailer instance configured by DSN.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  35)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  36)      * @param string $dsn        DSN
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  37)      * @param bool   $exceptions Should we throw external exceptions?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  38)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  39)      * @return PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  40)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  41)     public static function mailer($dsn, $exceptions = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  42)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  43)         static $configurator = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  44) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  45)         if (null === $configurator) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  46)             $configurator = new DSNConfigurator();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  47)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  48) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  49)         return $configurator->configure(new PHPMailer($exceptions), $dsn);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  50)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  51) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  52)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  53)      * Configure PHPMailer instance with DSN string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  54)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  55)      * @param PHPMailer $mailer PHPMailer instance
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  56)      * @param string    $dsn    DSN
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  57)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  58)      * @return PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  59)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  60)     public function configure(PHPMailer $mailer, $dsn)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  61)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  62)         $config = $this->parseDSN($dsn);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  63) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  64)         $this->applyConfig($mailer, $config);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  65) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  66)         return $mailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  67)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  68) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  69)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  70)      * Parse DSN string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  71)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  72)      * @param string $dsn DSN
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  73)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  74)      * @throws Exception If DSN is malformed
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  75)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  76)      * @return array Configuration
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  77)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  78)     private function parseDSN($dsn)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  79)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  80)         $config = $this->parseUrl($dsn);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  81) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  82)         if (false === $config || !isset($config['scheme']) || !isset($config['host'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  83)             throw new Exception('Malformed DSN');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  84)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  85) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  86)         if (isset($config['query'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  87)             parse_str($config['query'], $config['query']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  88)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  89) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  90)         return $config;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  91)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  92) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  93)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  94)      * Apply configuration to mailer.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  95)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  96)      * @param PHPMailer $mailer PHPMailer instance
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  97)      * @param array     $config Configuration
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  98)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  99)      * @throws Exception If scheme is invalid
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 100)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 101)     private function applyConfig(PHPMailer $mailer, $config)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 102)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 103)         switch ($config['scheme']) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 104)             case 'mail':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 105)                 $mailer->isMail();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 106)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 107)             case 'sendmail':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 108)                 $mailer->isSendmail();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 109)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 110)             case 'qmail':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 111)                 $mailer->isQmail();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 112)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 113)             case 'smtp':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 114)             case 'smtps':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 115)                 $mailer->isSMTP();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 116)                 $this->configureSMTP($mailer, $config);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 117)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 118)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 119)                 throw new Exception(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 120)                     sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 121)                         'Invalid scheme: "%s". Allowed values: "mail", "sendmail", "qmail", "smtp", "smtps".',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 122)                         $config['scheme']
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 123)                     )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 124)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 125)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 126) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 127)         if (isset($config['query'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 128)             $this->configureOptions($mailer, $config['query']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 129)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 130)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 131) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 132)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 133)      * Configure SMTP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 134)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 135)      * @param PHPMailer $mailer PHPMailer instance
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 136)      * @param array     $config Configuration
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 137)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 138)     private function configureSMTP($mailer, $config)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 139)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 140)         $isSMTPS = 'smtps' === $config['scheme'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 141) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 142)         if ($isSMTPS) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 143)             $mailer->SMTPSecure = PHPMailer::ENCRYPTION_STARTTLS;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 144)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 145) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 146)         $mailer->Host = $config['host'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 147) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 148)         if (isset($config['port'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 149)             $mailer->Port = $config['port'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 150)         } elseif ($isSMTPS) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 151)             $mailer->Port = SMTP::DEFAULT_SECURE_PORT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 152)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 153) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 154)         $mailer->SMTPAuth = isset($config['user']) || isset($config['pass']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 155) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 156)         if (isset($config['user'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 157)             $mailer->Username = $config['user'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 158)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 159) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 160)         if (isset($config['pass'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 161)             $mailer->Password = $config['pass'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 162)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 163)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 164) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 165)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 166)      * Configure options.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 167)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 168)      * @param PHPMailer $mailer  PHPMailer instance
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 169)      * @param array     $options Options
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 170)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 171)      * @throws Exception If option is unknown
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 172)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 173)     private function configureOptions(PHPMailer $mailer, $options)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 174)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 175)         $allowedOptions = get_object_vars($mailer);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 176) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 177)         unset($allowedOptions['Mailer']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 178)         unset($allowedOptions['SMTPAuth']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 179)         unset($allowedOptions['Username']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 180)         unset($allowedOptions['Password']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 181)         unset($allowedOptions['Hostname']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 182)         unset($allowedOptions['Port']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 183)         unset($allowedOptions['ErrorInfo']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 184) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 185)         $allowedOptions = \array_keys($allowedOptions);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 186) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 187)         foreach ($options as $key => $value) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 188)             if (!in_array($key, $allowedOptions)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 189)                 throw new Exception(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 190)                     sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 191)                         'Unknown option: "%s". Allowed values: "%s"',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 192)                         $key,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 193)                         implode('", "', $allowedOptions)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 194)                     )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 195)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 196)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 197) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 198)             switch ($key) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 199)                 case 'AllowEmpty':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 200)                 case 'SMTPAutoTLS':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 201)                 case 'SMTPKeepAlive':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 202)                 case 'SingleTo':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 203)                 case 'UseSendmailOptions':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 204)                 case 'do_verp':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 205)                 case 'DKIM_copyHeaderFields':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 206)                     $mailer->$key = (bool) $value;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 207)                     break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 208)                 case 'Priority':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 209)                 case 'SMTPDebug':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 210)                 case 'WordWrap':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 211)                     $mailer->$key = (int) $value;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 212)                     break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 213)                 default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 214)                     $mailer->$key = $value;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 215)                     break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 216)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 217)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 218)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 219) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 220)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 221)      * Parse a URL.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 222)      * Wrapper for the built-in parse_url function to work around a bug in PHP 5.5.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 223)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 224)      * @param string $url URL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 225)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 226)      * @return array|false
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 227)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 228)     protected function parseUrl($url)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 229)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 230)         if (\PHP_VERSION_ID >= 50600 || false === strpos($url, '?')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 231)             return parse_url($url);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 232)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 233) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 234)         $chunks = explode('?', $url);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 235)         if (is_array($chunks)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 236)             $result = parse_url($chunks[0]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 237)             if (is_array($result)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 238)                 $result['query'] = $chunks[1];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 239)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 240)             return $result;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 241)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 242) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 243)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 244)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 245) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * PHPMailer Exception class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * PHP Version 5.5.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @see       https://github.com/PHPMailer/PHPMailer/ The PHPMailer GitHub project
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  * @author    Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10)  * @author    Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11)  * @author    Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12)  * @author    Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13)  * @copyright 2012 - 2020 Marcus Bointon
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14)  * @copyright 2010 - 2012 Jim Jagielski
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15)  * @copyright 2004 - 2009 Andy Prevost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16)  * @license   https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html GNU Lesser General Public License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17)  * @note      This program is distributed in the hope that it will be useful - WITHOUT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18)  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19)  * FITNESS FOR A PARTICULAR PURPOSE.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) namespace PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25)  * PHPMailer exception handler.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27)  * @author Marcus Bointon <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) class Exception extends \Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32)      * Prettify error message output.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36)     public function errorMessage()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 37)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 38)         return '<strong>' . htmlspecialchars($this->getMessage(), ENT_COMPAT | ENT_HTML401) . "</strong><br />\n";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 39)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 40) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   4)  * PHPMailer - PHP email creation and transport class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   5)  * PHP Version 5.5.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   6)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   7)  * @see       https://github.com/PHPMailer/PHPMailer/ The PHPMailer GitHub project
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   8)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   9)  * @author    Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  10)  * @author    Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  11)  * @author    Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  12)  * @author    Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  13)  * @copyright 2012 - 2020 Marcus Bointon
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  14)  * @copyright 2010 - 2012 Jim Jagielski
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  15)  * @copyright 2004 - 2009 Andy Prevost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  16)  * @license   https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html GNU Lesser General Public License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  17)  * @note      This program is distributed in the hope that it will be useful - WITHOUT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  18)  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  19)  * FITNESS FOR A PARTICULAR PURPOSE.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  20)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  21) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  22) namespace PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  23) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  24) use League\OAuth2\Client\Grant\RefreshToken;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  25) use League\OAuth2\Client\Provider\AbstractProvider;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  26) use League\OAuth2\Client\Token\AccessToken;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  27) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  28) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  29)  * OAuth - OAuth2 authentication wrapper class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  30)  * Uses the oauth2-client package from the League of Extraordinary Packages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  31)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  32)  * @see     https://oauth2-client.thephpleague.com
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  33)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  34)  * @author  Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  35)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  36) class OAuth implements OAuthTokenProvider
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  37) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  38)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  39)      * An instance of the League OAuth Client Provider.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  40)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  41)      * @var AbstractProvider
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  42)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  43)     protected $provider;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  44) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  45)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  46)      * The current OAuth access token.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  47)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  48)      * @var AccessToken
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  49)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  50)     protected $oauthToken;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  51) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  52)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  53)      * The user's email address, usually used as the login ID
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  54)      * and also the from address when sending email.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  55)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  56)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  57)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  58)     protected $oauthUserEmail = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  59) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  60)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  61)      * The client secret, generated in the app definition of the service you're connecting to.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  62)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  63)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  64)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  65)     protected $oauthClientSecret = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  66) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  67)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  68)      * The client ID, generated in the app definition of the service you're connecting to.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  69)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  70)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  71)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  72)     protected $oauthClientId = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  73) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  74)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  75)      * The refresh token, used to obtain new AccessTokens.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  76)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  77)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  78)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  79)     protected $oauthRefreshToken = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  80) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  81)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  82)      * OAuth constructor.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  83)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  84)      * @param array $options Associative array containing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  85)      *                       `provider`, `userName`, `clientSecret`, `clientId` and `refreshToken` elements
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  86)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  87)     public function __construct($options)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  88)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  89)         $this->provider = $options['provider'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  90)         $this->oauthUserEmail = $options['userName'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  91)         $this->oauthClientSecret = $options['clientSecret'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  92)         $this->oauthClientId = $options['clientId'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  93)         $this->oauthRefreshToken = $options['refreshToken'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  94)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  95) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  96)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  97)      * Get a new RefreshToken.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  98)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  99)      * @return RefreshToken
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 100)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 101)     protected function getGrant()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 102)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 103)         return new RefreshToken();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 104)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 105) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 106)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 107)      * Get a new AccessToken.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 108)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 109)      * @return AccessToken
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 110)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 111)     protected function getToken()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 112)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 113)         return $this->provider->getAccessToken(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 114)             $this->getGrant(),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 115)             ['refresh_token' => $this->oauthRefreshToken]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 116)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 117)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 118) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 119)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 120)      * Generate a base64-encoded OAuth token.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 121)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 122)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 123)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 124)     public function getOauth64()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 125)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 126)         //Get a new token if it's not available or has expired
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 127)         if (null === $this->oauthToken || $this->oauthToken->hasExpired()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 128)             $this->oauthToken = $this->getToken();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 129)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 130) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 131)         return base64_encode(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 132)             'user=' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 133)             $this->oauthUserEmail .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 134)             "\001auth=Bearer " .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 135)             $this->oauthToken .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 136)             "\001\001"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 137)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 138)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 139) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * PHPMailer - PHP email creation and transport class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * PHP Version 5.5.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @see https://github.com/PHPMailer/PHPMailer/ The PHPMailer GitHub project
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  * @author    Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10)  * @author    Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11)  * @author    Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12)  * @author    Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13)  * @copyright 2012 - 2020 Marcus Bointon
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14)  * @copyright 2010 - 2012 Jim Jagielski
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15)  * @copyright 2004 - 2009 Andy Prevost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16)  * @license   https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html GNU Lesser General Public License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17)  * @note      This program is distributed in the hope that it will be useful - WITHOUT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18)  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19)  * FITNESS FOR A PARTICULAR PURPOSE.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) namespace PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25)  * OAuthTokenProvider - OAuth2 token provider interface.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26)  * Provides base64 encoded OAuth2 auth strings for SMTP authentication.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28)  * @see     OAuth
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29)  * @see     SMTP::authenticate()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31)  * @author  Peter Scopes (pdscopes)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32)  * @author  Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) interface OAuthTokenProvider
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 37)      * Generate a base64-encoded OAuth token ensuring that the access token has not expired.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 38)      * The string to be base 64 encoded should be in the form:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 39)      * "user=<user_email_address>\001auth=Bearer <access_token>\001\001"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 40)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 41)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 42)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 43)     public function getOauth64();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 44) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    4)  * PHPMailer - PHP email creation and transport class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    5)  * PHP Version 5.5.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    6)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    7)  * @see https://github.com/PHPMailer/PHPMailer/ The PHPMailer GitHub project
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    8)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    9)  * @author    Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   10)  * @author    Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   11)  * @author    Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   12)  * @author    Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   13)  * @copyright 2012 - 2020 Marcus Bointon
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   14)  * @copyright 2010 - 2012 Jim Jagielski
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   15)  * @copyright 2004 - 2009 Andy Prevost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   16)  * @license   https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html GNU Lesser General Public License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   17)  * @note      This program is distributed in the hope that it will be useful - WITHOUT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   18)  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   19)  * FITNESS FOR A PARTICULAR PURPOSE.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   20)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   21) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   22) namespace PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   23) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   24) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   25)  * PHPMailer - PHP email creation and transport class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   26)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   27)  * @author Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   28)  * @author Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   29)  * @author Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   30)  * @author Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   31)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   32) class PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   33) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   34)     const CHARSET_ASCII = 'us-ascii';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   35)     const CHARSET_ISO88591 = 'iso-8859-1';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   36)     const CHARSET_UTF8 = 'utf-8';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   37) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   38)     const CONTENT_TYPE_PLAINTEXT = 'text/plain';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   39)     const CONTENT_TYPE_TEXT_CALENDAR = 'text/calendar';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   40)     const CONTENT_TYPE_TEXT_HTML = 'text/html';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   41)     const CONTENT_TYPE_MULTIPART_ALTERNATIVE = 'multipart/alternative';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   42)     const CONTENT_TYPE_MULTIPART_MIXED = 'multipart/mixed';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   43)     const CONTENT_TYPE_MULTIPART_RELATED = 'multipart/related';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   44) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   45)     const ENCODING_7BIT = '7bit';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   46)     const ENCODING_8BIT = '8bit';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   47)     const ENCODING_BASE64 = 'base64';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   48)     const ENCODING_BINARY = 'binary';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   49)     const ENCODING_QUOTED_PRINTABLE = 'quoted-printable';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   50) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   51)     const ENCRYPTION_STARTTLS = 'tls';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   52)     const ENCRYPTION_SMTPS = 'ssl';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   53) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   54)     const ICAL_METHOD_REQUEST = 'REQUEST';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   55)     const ICAL_METHOD_PUBLISH = 'PUBLISH';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   56)     const ICAL_METHOD_REPLY = 'REPLY';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   57)     const ICAL_METHOD_ADD = 'ADD';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   58)     const ICAL_METHOD_CANCEL = 'CANCEL';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   59)     const ICAL_METHOD_REFRESH = 'REFRESH';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   60)     const ICAL_METHOD_COUNTER = 'COUNTER';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   61)     const ICAL_METHOD_DECLINECOUNTER = 'DECLINECOUNTER';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   62) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   63)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   64)      * Email priority.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   65)      * Options: null (default), 1 = High, 3 = Normal, 5 = low.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   66)      * When null, the header is not set at all.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   67)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   68)      * @var int|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   69)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   70)     public $Priority;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   71) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   72)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   73)      * The character set of the message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   74)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   75)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   76)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   77)     public $CharSet = self::CHARSET_ISO88591;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   78) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   79)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   80)      * The MIME Content-type of the message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   81)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   82)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   83)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   84)     public $ContentType = self::CONTENT_TYPE_PLAINTEXT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   85) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   86)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   87)      * The message encoding.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   88)      * Options: "8bit", "7bit", "binary", "base64", and "quoted-printable".
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   89)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   90)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   91)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   92)     public $Encoding = self::ENCODING_8BIT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   93) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   94)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   95)      * Holds the most recent mailer error message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   96)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   97)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   98)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   99)     public $ErrorInfo = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  100) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  101)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  102)      * The From email address for the message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  103)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  104)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  105)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  106)     public $From = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  107) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  108)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  109)      * The From name of the message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  110)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  111)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  112)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  113)     public $FromName = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  114) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  115)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  116)      * The envelope sender of the message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  117)      * This will usually be turned into a Return-Path header by the receiver,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  118)      * and is the address that bounces will be sent to.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  119)      * If not empty, will be passed via `-f` to sendmail or as the 'MAIL FROM' value over SMTP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  120)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  121)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  122)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  123)     public $Sender = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  124) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  125)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  126)      * The Subject of the message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  127)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  128)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  129)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  130)     public $Subject = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  131) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  132)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  133)      * An HTML or plain text message body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  134)      * If HTML then call isHTML(true).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  135)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  136)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  137)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  138)     public $Body = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  139) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  140)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  141)      * The plain-text message body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  142)      * This body can be read by mail clients that do not have HTML email
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  143)      * capability such as mutt & Eudora.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  144)      * Clients that can read HTML will view the normal Body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  145)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  146)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  147)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  148)     public $AltBody = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  149) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  150)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  151)      * An iCal message part body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  152)      * Only supported in simple alt or alt_inline message types
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  153)      * To generate iCal event structures, use classes like EasyPeasyICS or iCalcreator.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  154)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  155)      * @see https://kigkonsult.se/iCalcreator/
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  156)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  157)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  158)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  159)     public $Ical = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  160) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  161)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  162)      * Value-array of "method" in Contenttype header "text/calendar"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  163)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  164)      * @var string[]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  165)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  166)     protected static $IcalMethods = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  167)         self::ICAL_METHOD_REQUEST,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  168)         self::ICAL_METHOD_PUBLISH,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  169)         self::ICAL_METHOD_REPLY,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  170)         self::ICAL_METHOD_ADD,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  171)         self::ICAL_METHOD_CANCEL,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  172)         self::ICAL_METHOD_REFRESH,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  173)         self::ICAL_METHOD_COUNTER,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  174)         self::ICAL_METHOD_DECLINECOUNTER,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  175)     ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  176) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  177)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  178)      * The complete compiled MIME message body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  179)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  180)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  181)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  182)     protected $MIMEBody = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  183) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  184)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  185)      * The complete compiled MIME message headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  186)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  187)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  188)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  189)     protected $MIMEHeader = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  190) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  191)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  192)      * Extra headers that createHeader() doesn't fold in.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  193)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  194)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  195)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  196)     protected $mailHeader = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  197) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  198)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  199)      * Word-wrap the message body to this number of chars.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  200)      * Set to 0 to not wrap. A useful value here is 78, for RFC2822 section 2.1.1 compliance.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  201)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  202)      * @see static::STD_LINE_LENGTH
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  203)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  204)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  205)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  206)     public $WordWrap = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  207) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  208)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  209)      * Which method to use to send mail.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  210)      * Options: "mail", "sendmail", or "smtp".
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  211)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  212)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  213)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  214)     public $Mailer = 'mail';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  215) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  216)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  217)      * The path to the sendmail program.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  218)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  219)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  220)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  221)     public $Sendmail = '/usr/sbin/sendmail';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  222) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  223)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  224)      * Whether mail() uses a fully sendmail-compatible MTA.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  225)      * One which supports sendmail's "-oi -f" options.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  226)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  227)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  228)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  229)     public $UseSendmailOptions = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  230) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  231)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  232)      * The email address that a reading confirmation should be sent to, also known as read receipt.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  233)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  234)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  235)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  236)     public $ConfirmReadingTo = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  237) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  238)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  239)      * The hostname to use in the Message-ID header and as default HELO string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  240)      * If empty, PHPMailer attempts to find one with, in order,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  241)      * $_SERVER['SERVER_NAME'], gethostname(), php_uname('n'), or the value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  242)      * 'localhost.localdomain'.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  243)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  244)      * @see PHPMailer::$Helo
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  245)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  246)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  247)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  248)     public $Hostname = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  249) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  250)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  251)      * An ID to be used in the Message-ID header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  252)      * If empty, a unique id will be generated.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  253)      * You can set your own, but it must be in the format "<id@domain>",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  254)      * as defined in RFC5322 section 3.6.4 or it will be ignored.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  255)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  256)      * @see https://tools.ietf.org/html/rfc5322#section-3.6.4
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  257)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  258)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  259)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  260)     public $MessageID = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  261) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  262)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  263)      * The message Date to be used in the Date header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  264)      * If empty, the current date will be added.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  265)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  266)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  267)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  268)     public $MessageDate = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  269) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  270)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  271)      * SMTP hosts.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  272)      * Either a single hostname or multiple semicolon-delimited hostnames.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  273)      * You can also specify a different port
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  274)      * for each host by using this format: [hostname:port]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  275)      * (e.g. "smtp1.example.com:25;smtp2.example.com").
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  276)      * You can also specify encryption type, for example:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  277)      * (e.g. "tls://smtp1.example.com:587;ssl://smtp2.example.com:465").
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  278)      * Hosts will be tried in order.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  279)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  280)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  281)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  282)     public $Host = 'localhost';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  283) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  284)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  285)      * The default SMTP server port.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  286)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  287)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  288)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  289)     public $Port = 25;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  290) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  291)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  292)      * The SMTP HELO/EHLO name used for the SMTP connection.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  293)      * Default is $Hostname. If $Hostname is empty, PHPMailer attempts to find
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  294)      * one with the same method described above for $Hostname.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  295)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  296)      * @see PHPMailer::$Hostname
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  297)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  298)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  299)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  300)     public $Helo = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  301) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  302)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  303)      * What kind of encryption to use on the SMTP connection.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  304)      * Options: '', static::ENCRYPTION_STARTTLS, or static::ENCRYPTION_SMTPS.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  305)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  306)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  307)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  308)     public $SMTPSecure = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  309) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  310)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  311)      * Whether to enable TLS encryption automatically if a server supports it,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  312)      * even if `SMTPSecure` is not set to 'tls'.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  313)      * Be aware that in PHP >= 5.6 this requires that the server's certificates are valid.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  314)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  315)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  316)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  317)     public $SMTPAutoTLS = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  318) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  319)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  320)      * Whether to use SMTP authentication.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  321)      * Uses the Username and Password properties.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  322)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  323)      * @see PHPMailer::$Username
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  324)      * @see PHPMailer::$Password
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  325)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  326)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  327)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  328)     public $SMTPAuth = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  329) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  330)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  331)      * Options array passed to stream_context_create when connecting via SMTP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  332)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  333)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  334)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  335)     public $SMTPOptions = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  336) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  337)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  338)      * SMTP username.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  339)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  340)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  341)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  342)     public $Username = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  343) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  344)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  345)      * SMTP password.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  346)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  347)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  348)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  349)     public $Password = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  350) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  351)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  352)      * SMTP authentication type. Options are CRAM-MD5, LOGIN, PLAIN, XOAUTH2.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  353)      * If not specified, the first one from that list that the server supports will be selected.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  354)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  355)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  356)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  357)     public $AuthType = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  358) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  359)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  360)      * SMTP SMTPXClient command attributes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  361)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  362)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  363)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  364)     protected $SMTPXClient = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  365) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  366)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  367)      * An implementation of the PHPMailer OAuthTokenProvider interface.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  368)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  369)      * @var OAuthTokenProvider
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  370)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  371)     protected $oauth;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  372) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  373)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  374)      * The SMTP server timeout in seconds.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  375)      * Default of 5 minutes (300sec) is from RFC2821 section 4.5.3.2.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  376)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  377)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  378)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  379)     public $Timeout = 300;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  380) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  381)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  382)      * Comma separated list of DSN notifications
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  383)      * 'NEVER' under no circumstances a DSN must be returned to the sender.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  384)      *         If you use NEVER all other notifications will be ignored.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  385)      * 'SUCCESS' will notify you when your mail has arrived at its destination.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  386)      * 'FAILURE' will arrive if an error occurred during delivery.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  387)      * 'DELAY'   will notify you if there is an unusual delay in delivery, but the actual
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  388)      *           delivery's outcome (success or failure) is not yet decided.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  389)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  390)      * @see https://tools.ietf.org/html/rfc3461 See section 4.1 for more information about NOTIFY
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  391)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  392)     public $dsn = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  393) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  394)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  395)      * SMTP class debug output mode.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  396)      * Debug output level.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  397)      * Options:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  398)      * @see SMTP::DEBUG_OFF: No output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  399)      * @see SMTP::DEBUG_CLIENT: Client messages
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  400)      * @see SMTP::DEBUG_SERVER: Client and server messages
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  401)      * @see SMTP::DEBUG_CONNECTION: As SERVER plus connection status
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  402)      * @see SMTP::DEBUG_LOWLEVEL: Noisy, low-level data output, rarely needed
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  403)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  404)      * @see SMTP::$do_debug
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  405)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  406)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  407)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  408)     public $SMTPDebug = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  409) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  410)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  411)      * How to handle debug output.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  412)      * Options:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  413)      * * `echo` Output plain-text as-is, appropriate for CLI
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  414)      * * `html` Output escaped, line breaks converted to `<br>`, appropriate for browser output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  415)      * * `error_log` Output to error log as configured in php.ini
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  416)      * By default PHPMailer will use `echo` if run from a `cli` or `cli-server` SAPI, `html` otherwise.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  417)      * Alternatively, you can provide a callable expecting two params: a message string and the debug level:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  418)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  419)      * ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  420)      * $mail->Debugoutput = function($str, $level) {echo "debug level $level; message: $str";};
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  421)      * ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  422)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  423)      * Alternatively, you can pass in an instance of a PSR-3 compatible logger, though only `debug`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  424)      * level output is used:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  425)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  426)      * ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  427)      * $mail->Debugoutput = new myPsr3Logger;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  428)      * ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  429)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  430)      * @see SMTP::$Debugoutput
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  431)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  432)      * @var string|callable|\Psr\Log\LoggerInterface
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  433)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  434)     public $Debugoutput = 'echo';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  435) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  436)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  437)      * Whether to keep the SMTP connection open after each message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  438)      * If this is set to true then the connection will remain open after a send,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  439)      * and closing the connection will require an explicit call to smtpClose().
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  440)      * It's a good idea to use this if you are sending multiple messages as it reduces overhead.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  441)      * See the mailing list example for how to use it.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  442)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  443)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  444)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  445)     public $SMTPKeepAlive = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  446) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  447)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  448)      * Whether to split multiple to addresses into multiple messages
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  449)      * or send them all in one message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  450)      * Only supported in `mail` and `sendmail` transports, not in SMTP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  451)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  452)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  453)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  454)      * @deprecated 6.0.0 PHPMailer isn't a mailing list manager!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  455)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  456)     public $SingleTo = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  457) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  458)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  459)      * Storage for addresses when SingleTo is enabled.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  460)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  461)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  462)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  463)     protected $SingleToArray = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  464) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  465)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  466)      * Whether to generate VERP addresses on send.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  467)      * Only applicable when sending via SMTP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  468)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  469)      * @see https://en.wikipedia.org/wiki/Variable_envelope_return_path
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  470)      * @see https://www.postfix.org/VERP_README.html Postfix VERP info
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  471)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  472)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  473)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  474)     public $do_verp = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  475) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  476)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  477)      * Whether to allow sending messages with an empty body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  478)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  479)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  480)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  481)     public $AllowEmpty = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  482) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  483)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  484)      * DKIM selector.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  485)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  486)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  487)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  488)     public $DKIM_selector = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  489) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  490)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  491)      * DKIM Identity.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  492)      * Usually the email address used as the source of the email.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  493)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  494)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  495)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  496)     public $DKIM_identity = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  497) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  498)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  499)      * DKIM passphrase.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  500)      * Used if your key is encrypted.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  501)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  502)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  503)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  504)     public $DKIM_passphrase = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  505) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  506)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  507)      * DKIM signing domain name.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  508)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  509)      * @example 'example.com'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  510)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  511)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  512)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  513)     public $DKIM_domain = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  514) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  515)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  516)      * DKIM Copy header field values for diagnostic use.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  517)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  518)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  519)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  520)     public $DKIM_copyHeaderFields = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  521) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  522)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  523)      * DKIM Extra signing headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  524)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  525)      * @example ['List-Unsubscribe', 'List-Help']
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  526)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  527)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  528)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  529)     public $DKIM_extraHeaders = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  530) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  531)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  532)      * DKIM private key file path.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  533)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  534)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  535)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  536)     public $DKIM_private = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  537) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  538)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  539)      * DKIM private key string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  540)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  541)      * If set, takes precedence over `$DKIM_private`.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  542)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  543)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  544)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  545)     public $DKIM_private_string = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  546) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  547)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  548)      * Callback Action function name.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  549)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  550)      * The function that handles the result of the send email action.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  551)      * It is called out by send() for each email sent.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  552)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  553)      * Value can be any php callable: https://www.php.net/is_callable
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  554)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  555)      * Parameters:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  556)      *   bool $result           result of the send action
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  557)      *   array   $to            email addresses of the recipients
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  558)      *   array   $cc            cc email addresses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  559)      *   array   $bcc           bcc email addresses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  560)      *   string  $subject       the subject
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  561)      *   string  $body          the email body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  562)      *   string  $from          email address of sender
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  563)      *   string  $extra         extra information of possible use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  564)      *                          "smtp_transaction_id' => last smtp transaction id
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  565)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  566)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  567)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  568)     public $action_function = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  569) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  570)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  571)      * What to put in the X-Mailer header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  572)      * Options: An empty string for PHPMailer default, whitespace/null for none, or a string to use.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  573)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  574)      * @var string|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  575)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  576)     public $XMailer = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  577) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  578)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  579)      * Which validator to use by default when validating email addresses.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  580)      * May be a callable to inject your own validator, but there are several built-in validators.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  581)      * The default validator uses PHP's FILTER_VALIDATE_EMAIL filter_var option.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  582)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  583)      * @see PHPMailer::validateAddress()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  584)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  585)      * @var string|callable
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  586)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  587)     public static $validator = 'php';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  588) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  589)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  590)      * An instance of the SMTP sender class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  591)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  592)      * @var SMTP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  593)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  594)     protected $smtp;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  595) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  596)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  597)      * The array of 'to' names and addresses.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  598)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  599)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  600)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  601)     protected $to = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  602) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  603)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  604)      * The array of 'cc' names and addresses.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  605)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  606)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  607)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  608)     protected $cc = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  609) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  610)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  611)      * The array of 'bcc' names and addresses.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  612)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  613)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  614)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  615)     protected $bcc = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  616) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  617)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  618)      * The array of reply-to names and addresses.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  619)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  620)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  621)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  622)     protected $ReplyTo = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  623) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  624)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  625)      * An array of all kinds of addresses.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  626)      * Includes all of $to, $cc, $bcc.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  627)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  628)      * @see PHPMailer::$to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  629)      * @see PHPMailer::$cc
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  630)      * @see PHPMailer::$bcc
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  631)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  632)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  633)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  634)     protected $all_recipients = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  635) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  636)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  637)      * An array of names and addresses queued for validation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  638)      * In send(), valid and non duplicate entries are moved to $all_recipients
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  639)      * and one of $to, $cc, or $bcc.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  640)      * This array is used only for addresses with IDN.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  641)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  642)      * @see PHPMailer::$to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  643)      * @see PHPMailer::$cc
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  644)      * @see PHPMailer::$bcc
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  645)      * @see PHPMailer::$all_recipients
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  646)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  647)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  648)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  649)     protected $RecipientsQueue = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  650) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  651)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  652)      * An array of reply-to names and addresses queued for validation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  653)      * In send(), valid and non duplicate entries are moved to $ReplyTo.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  654)      * This array is used only for addresses with IDN.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  655)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  656)      * @see PHPMailer::$ReplyTo
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  657)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  658)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  659)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  660)     protected $ReplyToQueue = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  661) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  662)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  663)      * The array of attachments.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  664)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  665)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  666)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  667)     protected $attachment = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  668) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  669)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  670)      * The array of custom headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  671)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  672)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  673)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  674)     protected $CustomHeader = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  675) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  676)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  677)      * The most recent Message-ID (including angular brackets).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  678)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  679)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  680)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  681)     protected $lastMessageID = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  682) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  683)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  684)      * The message's MIME type.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  685)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  686)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  687)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  688)     protected $message_type = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  689) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  690)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  691)      * The array of MIME boundary strings.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  692)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  693)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  694)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  695)     protected $boundary = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  696) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  697)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  698)      * The array of available text strings for the current language.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  699)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  700)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  701)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  702)     protected $language = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  703) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  704)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  705)      * The number of errors encountered.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  706)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  707)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  708)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  709)     protected $error_count = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  710) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  711)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  712)      * The S/MIME certificate file path.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  713)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  714)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  715)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  716)     protected $sign_cert_file = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  717) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  718)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  719)      * The S/MIME key file path.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  720)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  721)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  722)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  723)     protected $sign_key_file = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  724) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  725)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  726)      * The optional S/MIME extra certificates ("CA Chain") file path.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  727)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  728)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  729)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  730)     protected $sign_extracerts_file = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  731) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  732)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  733)      * The S/MIME password for the key.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  734)      * Used only if the key is encrypted.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  735)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  736)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  737)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  738)     protected $sign_key_pass = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  739) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  740)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  741)      * Whether to throw exceptions for errors.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  742)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  743)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  744)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  745)     protected $exceptions = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  746) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  747)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  748)      * Unique ID used for message ID and boundaries.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  749)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  750)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  751)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  752)     protected $uniqueid = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  753) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  754)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  755)      * The PHPMailer Version number.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  756)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  757)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  758)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  759)     const VERSION = '6.9.2';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  760) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  761)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  762)      * Error severity: message only, continue processing.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  763)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  764)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  765)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  766)     const STOP_MESSAGE = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  767) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  768)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  769)      * Error severity: message, likely ok to continue processing.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  770)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  771)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  772)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  773)     const STOP_CONTINUE = 1;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  774) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  775)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  776)      * Error severity: message, plus full stop, critical error reached.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  777)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  778)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  779)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  780)     const STOP_CRITICAL = 2;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  781) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  782)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  783)      * The SMTP standard CRLF line break.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  784)      * If you want to change line break format, change static::$LE, not this.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  785)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  786)     const CRLF = "\r\n";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  787) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  788)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  789)      * "Folding White Space" a white space string used for line folding.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  790)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  791)     const FWS = ' ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  792) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  793)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  794)      * SMTP RFC standard line ending; Carriage Return, Line Feed.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  795)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  796)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  797)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  798)     protected static $LE = self::CRLF;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  799) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  800)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  801)      * The maximum line length supported by mail().
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  802)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  803)      * Background: mail() will sometimes corrupt messages
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  804)      * with headers longer than 65 chars, see #818.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  805)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  806)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  807)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  808)     const MAIL_MAX_LINE_LENGTH = 63;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  809) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  810)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  811)      * The maximum line length allowed by RFC 2822 section 2.1.1.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  812)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  813)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  814)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  815)     const MAX_LINE_LENGTH = 998;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  816) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  817)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  818)      * The lower maximum line length allowed by RFC 2822 section 2.1.1.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  819)      * This length does NOT include the line break
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  820)      * 76 means that lines will be 77 or 78 chars depending on whether
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  821)      * the line break format is LF or CRLF; both are valid.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  822)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  823)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  824)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  825)     const STD_LINE_LENGTH = 76;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  826) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  827)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  828)      * Constructor.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  829)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  830)      * @param bool $exceptions Should we throw external exceptions?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  831)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  832)     public function __construct($exceptions = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  833)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  834)         if (null !== $exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  835)             $this->exceptions = (bool) $exceptions;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  836)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  837)         //Pick an appropriate debug output format automatically
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  838)         $this->Debugoutput = (strpos(PHP_SAPI, 'cli') !== false ? 'echo' : 'html');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  839)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  840) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  841)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  842)      * Destructor.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  843)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  844)     public function __destruct()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  845)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  846)         //Close any open SMTP connection nicely
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  847)         $this->smtpClose();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  848)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  849) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  850)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  851)      * Call mail() in a safe_mode-aware fashion.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  852)      * Also, unless sendmail_path points to sendmail (or something that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  853)      * claims to be sendmail), don't pass params (not a perfect fix,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  854)      * but it will do).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  855)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  856)      * @param string      $to      To
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  857)      * @param string      $subject Subject
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  858)      * @param string      $body    Message Body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  859)      * @param string      $header  Additional Header(s)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  860)      * @param string|null $params  Params
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  861)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  862)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  863)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  864)     private function mailPassthru($to, $subject, $body, $header, $params)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  865)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  866)         //Check overloading of mail function to avoid double-encoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  867)         if ((int)ini_get('mbstring.func_overload') & 1) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  868)             $subject = $this->secureHeader($subject);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  869)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  870)             $subject = $this->encodeHeader($this->secureHeader($subject));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  871)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  872)         //Calling mail() with null params breaks
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  873)         $this->edebug('Sending with mail()');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  874)         $this->edebug('Sendmail path: ' . ini_get('sendmail_path'));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  875)         $this->edebug("Envelope sender: {$this->Sender}");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  876)         $this->edebug("To: {$to}");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  877)         $this->edebug("Subject: {$subject}");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  878)         $this->edebug("Headers: {$header}");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  879)         if (!$this->UseSendmailOptions || null === $params) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  880)             $result = @mail($to, $subject, $body, $header);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  881)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  882)             $this->edebug("Additional params: {$params}");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  883)             $result = @mail($to, $subject, $body, $header, $params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  884)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  885)         $this->edebug('Result: ' . ($result ? 'true' : 'false'));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  886)         return $result;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  887)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  888) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  889)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  890)      * Output debugging info via a user-defined method.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  891)      * Only generates output if debug output is enabled.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  892)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  893)      * @see PHPMailer::$Debugoutput
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  894)      * @see PHPMailer::$SMTPDebug
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  895)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  896)      * @param string $str
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  897)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  898)     protected function edebug($str)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  899)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  900)         if ($this->SMTPDebug <= 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  901)             return;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  902)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  903)         //Is this a PSR-3 logger?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  904)         if ($this->Debugoutput instanceof \Psr\Log\LoggerInterface) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  905)             $this->Debugoutput->debug(rtrim($str, "\r\n"));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  906) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  907)             return;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  908)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  909)         //Avoid clash with built-in function names
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  910)         if (is_callable($this->Debugoutput) && !in_array($this->Debugoutput, ['error_log', 'html', 'echo'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  911)             call_user_func($this->Debugoutput, $str, $this->SMTPDebug);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  912) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  913)             return;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  914)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  915)         switch ($this->Debugoutput) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  916)             case 'error_log':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  917)                 //Don't output, just log
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  918)                 /** @noinspection ForgottenDebugOutputInspection */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  919)                 error_log($str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  920)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  921)             case 'html':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  922)                 //Cleans up output a bit for a better looking, HTML-safe output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  923)                 echo htmlentities(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  924)                     preg_replace('/[\r\n]+/', '', $str),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  925)                     ENT_QUOTES,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  926)                     'UTF-8'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  927)                 ), "<br>\n";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  928)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  929)             case 'echo':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  930)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  931)                 //Normalize line breaks
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  932)                 $str = preg_replace('/\r\n|\r/m', "\n", $str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  933)                 echo gmdate('Y-m-d H:i:s'),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  934)                 "\t",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  935)                     //Trim trailing space
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  936)                 trim(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  937)                     //Indent for readability, except for trailing break
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  938)                     str_replace(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  939)                         "\n",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  940)                         "\n                   \t                  ",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  941)                         trim($str)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  942)                     )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  943)                 ),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  944)                 "\n";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  945)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  946)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  947) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  948)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  949)      * Sets message type to HTML or plain.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  950)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  951)      * @param bool $isHtml True for HTML mode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  952)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  953)     public function isHTML($isHtml = true)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  954)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  955)         if ($isHtml) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  956)             $this->ContentType = static::CONTENT_TYPE_TEXT_HTML;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  957)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  958)             $this->ContentType = static::CONTENT_TYPE_PLAINTEXT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  959)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  960)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  961) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  962)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  963)      * Send messages using SMTP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  964)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  965)     public function isSMTP()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  966)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  967)         $this->Mailer = 'smtp';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  968)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  969) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  970)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  971)      * Send messages using PHP's mail() function.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  972)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  973)     public function isMail()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  974)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  975)         $this->Mailer = 'mail';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  976)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  977) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  978)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  979)      * Send messages using $Sendmail.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  980)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  981)     public function isSendmail()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  982)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  983)         $ini_sendmail_path = ini_get('sendmail_path');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  984) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  985)         if (false === stripos($ini_sendmail_path, 'sendmail')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  986)             $this->Sendmail = '/usr/sbin/sendmail';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  987)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  988)             $this->Sendmail = $ini_sendmail_path;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  989)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  990)         $this->Mailer = 'sendmail';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  991)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  992) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  993)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  994)      * Send messages using qmail.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  995)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  996)     public function isQmail()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  997)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  998)         $ini_sendmail_path = ini_get('sendmail_path');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  999) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1000)         if (false === stripos($ini_sendmail_path, 'qmail')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1001)             $this->Sendmail = '/var/qmail/bin/qmail-inject';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1002)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1003)             $this->Sendmail = $ini_sendmail_path;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1004)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1005)         $this->Mailer = 'qmail';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1006)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1007) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1008)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1009)      * Add a "To" address.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1010)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1011)      * @param string $address The email address to send to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1012)      * @param string $name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1013)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1014)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1015)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1016)      * @return bool true on success, false if address already used or invalid in some way
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1017)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1018)     public function addAddress($address, $name = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1019)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1020)         return $this->addOrEnqueueAnAddress('to', $address, $name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1021)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1022) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1023)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1024)      * Add a "CC" address.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1025)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1026)      * @param string $address The email address to send to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1027)      * @param string $name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1028)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1029)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1030)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1031)      * @return bool true on success, false if address already used or invalid in some way
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1032)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1033)     public function addCC($address, $name = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1034)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1035)         return $this->addOrEnqueueAnAddress('cc', $address, $name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1036)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1037) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1038)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1039)      * Add a "BCC" address.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1040)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1041)      * @param string $address The email address to send to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1042)      * @param string $name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1043)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1044)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1045)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1046)      * @return bool true on success, false if address already used or invalid in some way
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1047)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1048)     public function addBCC($address, $name = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1049)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1050)         return $this->addOrEnqueueAnAddress('bcc', $address, $name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1051)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1052) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1053)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1054)      * Add a "Reply-To" address.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1055)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1056)      * @param string $address The email address to reply to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1057)      * @param string $name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1058)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1059)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1060)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1061)      * @return bool true on success, false if address already used or invalid in some way
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1062)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1063)     public function addReplyTo($address, $name = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1064)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1065)         return $this->addOrEnqueueAnAddress('Reply-To', $address, $name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1066)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1067) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1068)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1069)      * Add an address to one of the recipient arrays or to the ReplyTo array. Because PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1070)      * can't validate addresses with an IDN without knowing the PHPMailer::$CharSet (that can still
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1071)      * be modified after calling this function), addition of such addresses is delayed until send().
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1072)      * Addresses that have been added already return false, but do not throw exceptions.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1073)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1074)      * @param string $kind    One of 'to', 'cc', 'bcc', or 'Reply-To'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1075)      * @param string $address The email address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1076)      * @param string $name    An optional username associated with the address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1077)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1078)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1079)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1080)      * @return bool true on success, false if address already used or invalid in some way
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1081)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1082)     protected function addOrEnqueueAnAddress($kind, $address, $name)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1083)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1084)         $pos = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1085)         if ($address !== null) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1086)             $address = trim($address);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1087)             $pos = strrpos($address, '@');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1088)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1089)         if (false === $pos) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1090)             //At-sign is missing.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1091)             $error_message = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1092)                 '%s (%s): %s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1093)                 $this->lang('invalid_address'),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1094)                 $kind,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1095)                 $address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1096)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1097)             $this->setError($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1098)             $this->edebug($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1099)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1100)                 throw new Exception($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1101)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1102) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1103)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1104)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1105)         if ($name !== null && is_string($name)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1106)             $name = trim(preg_replace('/[\r\n]+/', '', $name)); //Strip breaks and trim
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1107)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1108)             $name = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1109)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1110)         $params = [$kind, $address, $name];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1111)         //Enqueue addresses with IDN until we know the PHPMailer::$CharSet.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1112)         //Domain is assumed to be whatever is after the last @ symbol in the address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1113)         if (static::idnSupported() && $this->has8bitChars(substr($address, ++$pos))) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1114)             if ('Reply-To' !== $kind) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1115)                 if (!array_key_exists($address, $this->RecipientsQueue)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1116)                     $this->RecipientsQueue[$address] = $params;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1117) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1118)                     return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1119)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1120)             } elseif (!array_key_exists($address, $this->ReplyToQueue)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1121)                 $this->ReplyToQueue[$address] = $params;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1122) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1123)                 return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1124)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1125) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1126)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1127)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1128) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1129)         //Immediately add standard addresses without IDN.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1130)         return call_user_func_array([$this, 'addAnAddress'], $params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1131)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1132) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1133)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1134)      * Set the boundaries to use for delimiting MIME parts.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1135)      * If you override this, ensure you set all 3 boundaries to unique values.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1136)      * The default boundaries include a "=_" sequence which cannot occur in quoted-printable bodies,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1137)      * as suggested by https://www.rfc-editor.org/rfc/rfc2045#section-6.7
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1138)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1139)      * @return void
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1140)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1141)     public function setBoundaries()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1142)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1143)         $this->uniqueid = $this->generateId();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1144)         $this->boundary[1] = 'b1=_' . $this->uniqueid;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1145)         $this->boundary[2] = 'b2=_' . $this->uniqueid;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1146)         $this->boundary[3] = 'b3=_' . $this->uniqueid;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1147)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1148) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1149)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1150)      * Add an address to one of the recipient arrays or to the ReplyTo array.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1151)      * Addresses that have been added already return false, but do not throw exceptions.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1152)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1153)      * @param string $kind    One of 'to', 'cc', 'bcc', or 'ReplyTo'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1154)      * @param string $address The email address to send, resp. to reply to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1155)      * @param string $name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1156)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1157)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1158)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1159)      * @return bool true on success, false if address already used or invalid in some way
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1160)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1161)     protected function addAnAddress($kind, $address, $name = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1162)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1163)         if (!in_array($kind, ['to', 'cc', 'bcc', 'Reply-To'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1164)             $error_message = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1165)                 '%s: %s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1166)                 $this->lang('Invalid recipient kind'),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1167)                 $kind
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1168)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1169)             $this->setError($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1170)             $this->edebug($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1171)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1172)                 throw new Exception($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1173)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1174) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1175)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1176)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1177)         if (!static::validateAddress($address)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1178)             $error_message = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1179)                 '%s (%s): %s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1180)                 $this->lang('invalid_address'),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1181)                 $kind,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1182)                 $address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1183)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1184)             $this->setError($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1185)             $this->edebug($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1186)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1187)                 throw new Exception($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1188)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1189) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1190)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1191)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1192)         if ('Reply-To' !== $kind) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1193)             if (!array_key_exists(strtolower($address), $this->all_recipients)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1194)                 $this->{$kind}[] = [$address, $name];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1195)                 $this->all_recipients[strtolower($address)] = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1196) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1197)                 return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1198)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1199)         } elseif (!array_key_exists(strtolower($address), $this->ReplyTo)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1200)             $this->ReplyTo[strtolower($address)] = [$address, $name];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1201) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1202)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1203)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1204) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1205)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1206)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1207) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1208)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1209)      * Parse and validate a string containing one or more RFC822-style comma-separated email addresses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1210)      * of the form "display name <address>" into an array of name/address pairs.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1211)      * Uses the imap_rfc822_parse_adrlist function if the IMAP extension is available.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1212)      * Note that quotes in the name part are removed.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1213)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1214)      * @see https://www.andrew.cmu.edu/user/agreen1/testing/mrbs/web/Mail/RFC822.php A more careful implementation
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1215)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1216)      * @param string $addrstr The address list string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1217)      * @param bool   $useimap Whether to use the IMAP extension to parse the list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1218)      * @param string $charset The charset to use when decoding the address list string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1219)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1220)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1221)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1222)     public static function parseAddresses($addrstr, $useimap = true, $charset = self::CHARSET_ISO88591)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1223)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1224)         $addresses = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1225)         if ($useimap && function_exists('imap_rfc822_parse_adrlist')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1226)             //Use this built-in parser if it's available
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1227)             $list = imap_rfc822_parse_adrlist($addrstr, '');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1228)             // Clear any potential IMAP errors to get rid of notices being thrown at end of script.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1229)             imap_errors();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1230)             foreach ($list as $address) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1231)                 if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1232)                     '.SYNTAX-ERROR.' !== $address->host &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1233)                     static::validateAddress($address->mailbox . '@' . $address->host)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1234)                 ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1235)                     //Decode the name part if it's present and encoded
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1236)                     if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1237)                         property_exists($address, 'personal') &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1238)                         //Check for a Mbstring constant rather than using extension_loaded, which is sometimes disabled
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1239)                         defined('MB_CASE_UPPER') &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1240)                         preg_match('/^=\?.*\?=$/s', $address->personal)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1241)                     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1242)                         $origCharset = mb_internal_encoding();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1243)                         mb_internal_encoding($charset);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1244)                         //Undo any RFC2047-encoded spaces-as-underscores
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1245)                         $address->personal = str_replace('_', '=20', $address->personal);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1246)                         //Decode the name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1247)                         $address->personal = mb_decode_mimeheader($address->personal);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1248)                         mb_internal_encoding($origCharset);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1249)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1250) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1251)                     $addresses[] = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1252)                         'name' => (property_exists($address, 'personal') ? $address->personal : ''),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1253)                         'address' => $address->mailbox . '@' . $address->host,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1254)                     ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1255)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1256)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1257)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1258)             //Use this simpler parser
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1259)             $list = explode(',', $addrstr);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1260)             foreach ($list as $address) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1261)                 $address = trim($address);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1262)                 //Is there a separate name part?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1263)                 if (strpos($address, '<') === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1264)                     //No separate name, just use the whole thing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1265)                     if (static::validateAddress($address)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1266)                         $addresses[] = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1267)                             'name' => '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1268)                             'address' => $address,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1269)                         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1270)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1271)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1272)                     list($name, $email) = explode('<', $address);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1273)                     $email = trim(str_replace('>', '', $email));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1274)                     $name = trim($name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1275)                     if (static::validateAddress($email)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1276)                         //Check for a Mbstring constant rather than using extension_loaded, which is sometimes disabled
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1277)                         //If this name is encoded, decode it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1278)                         if (defined('MB_CASE_UPPER') && preg_match('/^=\?.*\?=$/s', $name)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1279)                             $origCharset = mb_internal_encoding();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1280)                             mb_internal_encoding($charset);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1281)                             //Undo any RFC2047-encoded spaces-as-underscores
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1282)                             $name = str_replace('_', '=20', $name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1283)                             //Decode the name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1284)                             $name = mb_decode_mimeheader($name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1285)                             mb_internal_encoding($origCharset);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1286)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1287)                         $addresses[] = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1288)                             //Remove any surrounding quotes and spaces from the name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1289)                             'name' => trim($name, '\'" '),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1290)                             'address' => $email,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1291)                         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1292)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1293)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1294)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1295)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1296) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1297)         return $addresses;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1298)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1299) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1300)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1301)      * Set the From and FromName properties.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1302)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1303)      * @param string $address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1304)      * @param string $name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1305)      * @param bool   $auto    Whether to also set the Sender address, defaults to true
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1306)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1307)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1308)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1309)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1310)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1311)     public function setFrom($address, $name = '', $auto = true)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1312)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1313)         $address = trim((string)$address);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1314)         $name = trim(preg_replace('/[\r\n]+/', '', $name)); //Strip breaks and trim
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1315)         //Don't validate now addresses with IDN. Will be done in send().
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1316)         $pos = strrpos($address, '@');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1317)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1318)             (false === $pos)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1319)             || ((!$this->has8bitChars(substr($address, ++$pos)) || !static::idnSupported())
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1320)             && !static::validateAddress($address))
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1321)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1322)             $error_message = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1323)                 '%s (From): %s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1324)                 $this->lang('invalid_address'),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1325)                 $address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1326)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1327)             $this->setError($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1328)             $this->edebug($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1329)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1330)                 throw new Exception($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1331)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1332) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1333)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1334)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1335)         $this->From = $address;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1336)         $this->FromName = $name;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1337)         if ($auto && empty($this->Sender)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1338)             $this->Sender = $address;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1339)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1340) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1341)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1342)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1343) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1344)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1345)      * Return the Message-ID header of the last email.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1346)      * Technically this is the value from the last time the headers were created,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1347)      * but it's also the message ID of the last sent message except in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1348)      * pathological cases.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1349)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1350)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1351)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1352)     public function getLastMessageID()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1353)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1354)         return $this->lastMessageID;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1355)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1356) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1357)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1358)      * Check that a string looks like an email address.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1359)      * Validation patterns supported:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1360)      * * `auto` Pick best pattern automatically;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1361)      * * `pcre8` Use the squiloople.com pattern, requires PCRE > 8.0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1362)      * * `pcre` Use old PCRE implementation;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1363)      * * `php` Use PHP built-in FILTER_VALIDATE_EMAIL;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1364)      * * `html5` Use the pattern given by the HTML5 spec for 'email' type form input elements.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1365)      * * `noregex` Don't use a regex: super fast, really dumb.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1366)      * Alternatively you may pass in a callable to inject your own validator, for example:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1367)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1368)      * ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1369)      * PHPMailer::validateAddress('user@example.com', function($address) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1370)      *     return (strpos($address, '@') !== false);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1371)      * });
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1372)      * ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1373)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1374)      * You can also set the PHPMailer::$validator static to a callable, allowing built-in methods to use your validator.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1375)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1376)      * @param string          $address       The email address to check
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1377)      * @param string|callable $patternselect Which pattern to use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1378)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1379)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1380)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1381)     public static function validateAddress($address, $patternselect = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1382)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1383)         if (null === $patternselect) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1384)             $patternselect = static::$validator;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1385)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1386)         //Don't allow strings as callables, see SECURITY.md and CVE-2021-3603
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1387)         if (is_callable($patternselect) && !is_string($patternselect)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1388)             return call_user_func($patternselect, $address);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1389)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1390)         //Reject line breaks in addresses; it's valid RFC5322, but not RFC5321
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1391)         if (strpos($address, "\n") !== false || strpos($address, "\r") !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1392)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1393)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1394)         switch ($patternselect) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1395)             case 'pcre': //Kept for BC
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1396)             case 'pcre8':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1397)                 /*
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1398)                  * A more complex and more permissive version of the RFC5322 regex on which FILTER_VALIDATE_EMAIL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1399)                  * is based.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1400)                  * In addition to the addresses allowed by filter_var, also permits:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1401)                  *  * dotless domains: `a@b`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1402)                  *  * comments: `1234 @ local(blah) .machine .example`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1403)                  *  * quoted elements: `'"test blah"@example.org'`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1404)                  *  * numeric TLDs: `a@b.123`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1405)                  *  * unbracketed IPv4 literals: `a@192.168.0.1`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1406)                  *  * IPv6 literals: 'first.last@[IPv6:a1::]'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1407)                  * Not all of these will necessarily work for sending!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1408)                  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1409)                  * @copyright 2009-2010 Michael Rushton
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1410)                  * Feel free to use and redistribute this code. But please keep this copyright notice.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1411)                  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1412)                 return (bool) preg_match(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1413)                     '/^(?!(?>(?1)"?(?>\\\[ -~]|[^"])"?(?1)){255,})(?!(?>(?1)"?(?>\\\[ -~]|[^"])"?(?1)){65,}@)' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1414)                     '((?>(?>(?>((?>(?>(?>\x0D\x0A)?[\t ])+|(?>[\t ]*\x0D\x0A)?[\t ]+)?)(\((?>(?2)' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1415)                     '(?>[\x01-\x08\x0B\x0C\x0E-\'*-\[\]-\x7F]|\\\[\x00-\x7F]|(?3)))*(?2)\)))+(?2))|(?2))?)' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1416)                     '([!#-\'*+\/-9=?^-~-]+|"(?>(?2)(?>[\x01-\x08\x0B\x0C\x0E-!#-\[\]-\x7F]|\\\[\x00-\x7F]))*' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1417)                     '(?2)")(?>(?1)\.(?1)(?4))*(?1)@(?!(?1)[a-z0-9-]{64,})(?1)(?>([a-z0-9](?>[a-z0-9-]*[a-z0-9])?)' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1418)                     '(?>(?1)\.(?!(?1)[a-z0-9-]{64,})(?1)(?5)){0,126}|\[(?:(?>IPv6:(?>([a-f0-9]{1,4})(?>:(?6)){7}' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1419)                     '|(?!(?:.*[a-f0-9][:\]]){8,})((?6)(?>:(?6)){0,6})?::(?7)?))|(?>(?>IPv6:(?>(?6)(?>:(?6)){5}:' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1420)                     '|(?!(?:.*[a-f0-9]:){6,})(?8)?::(?>((?6)(?>:(?6)){0,4}):)?))?(25[0-5]|2[0-4][0-9]|1[0-9]{2}' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1421)                     '|[1-9]?[0-9])(?>\.(?9)){3}))\])(?1)$/isD',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1422)                     $address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1423)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1424)             case 'html5':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1425)                 /*
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1426)                  * This is the pattern used in the HTML5 spec for validation of 'email' type form input elements.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1427)                  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1428)                  * @see https://html.spec.whatwg.org/#e-mail-state-(type=email)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1429)                  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1430)                 return (bool) preg_match(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1431)                     '/^[a-zA-Z0-9.!#$%&\'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1432)                     '[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/sD',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1433)                     $address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1434)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1435)             case 'php':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1436)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1437)                 return filter_var($address, FILTER_VALIDATE_EMAIL) !== false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1438)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1439)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1440) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1441)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1442)      * Tells whether IDNs (Internationalized Domain Names) are supported or not. This requires the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1443)      * `intl` and `mbstring` PHP extensions.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1444)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1445)      * @return bool `true` if required functions for IDN support are present
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1446)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1447)     public static function idnSupported()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1448)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1449)         return function_exists('idn_to_ascii') && function_exists('mb_convert_encoding');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1450)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1451) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1452)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1453)      * Converts IDN in given email address to its ASCII form, also known as punycode, if possible.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1454)      * Important: Address must be passed in same encoding as currently set in PHPMailer::$CharSet.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1455)      * This function silently returns unmodified address if:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1456)      * - No conversion is necessary (i.e. domain name is not an IDN, or is already in ASCII form)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1457)      * - Conversion to punycode is impossible (e.g. required PHP functions are not available)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1458)      *   or fails for any reason (e.g. domain contains characters not allowed in an IDN).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1459)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1460)      * @see PHPMailer::$CharSet
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1461)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1462)      * @param string $address The email address to convert
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1463)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1464)      * @return string The encoded address in ASCII form
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1465)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1466)     public function punyencodeAddress($address)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1467)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1468)         //Verify we have required functions, CharSet, and at-sign.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1469)         $pos = strrpos($address, '@');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1470)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1471)             !empty($this->CharSet) &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1472)             false !== $pos &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1473)             static::idnSupported()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1474)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1475)             $domain = substr($address, ++$pos);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1476)             //Verify CharSet string is a valid one, and domain properly encoded in this CharSet.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1477)             if ($this->has8bitChars($domain) && @mb_check_encoding($domain, $this->CharSet)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1478)                 //Convert the domain from whatever charset it's in to UTF-8
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1479)                 $domain = mb_convert_encoding($domain, self::CHARSET_UTF8, $this->CharSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1480)                 //Ignore IDE complaints about this line - method signature changed in PHP 5.4
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1481)                 $errorcode = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1482)                 if (defined('INTL_IDNA_VARIANT_UTS46')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1483)                     //Use the current punycode standard (appeared in PHP 7.2)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1484)                     $punycode = idn_to_ascii(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1485)                         $domain,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1486)                         \IDNA_DEFAULT | \IDNA_USE_STD3_RULES | \IDNA_CHECK_BIDI |
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1487)                             \IDNA_CHECK_CONTEXTJ | \IDNA_NONTRANSITIONAL_TO_ASCII,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1488)                         \INTL_IDNA_VARIANT_UTS46
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1489)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1490)                 } elseif (defined('INTL_IDNA_VARIANT_2003')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1491)                     //Fall back to this old, deprecated/removed encoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1492)                     $punycode = idn_to_ascii($domain, $errorcode, \INTL_IDNA_VARIANT_2003);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1493)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1494)                     //Fall back to a default we don't know about
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1495)                     $punycode = idn_to_ascii($domain, $errorcode);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1496)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1497)                 if (false !== $punycode) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1498)                     return substr($address, 0, $pos) . $punycode;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1499)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1500)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1501)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1502) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1503)         return $address;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1504)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1505) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1506)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1507)      * Create a message and send it.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1508)      * Uses the sending method specified by $Mailer.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1509)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1510)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1511)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1512)      * @return bool false on error - See the ErrorInfo property for details of the error
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1513)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1514)     public function send()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1515)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1516)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1517)             if (!$this->preSend()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1518)                 return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1519)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1520) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1521)             return $this->postSend();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1522)         } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1523)             $this->mailHeader = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1524)             $this->setError($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1525)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1526)                 throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1527)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1528) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1529)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1530)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1531)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1532) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1533)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1534)      * Prepare a message for sending.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1535)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1536)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1537)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1538)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1539)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1540)     public function preSend()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1541)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1542)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1543)             'smtp' === $this->Mailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1544)             || ('mail' === $this->Mailer && (\PHP_VERSION_ID >= 80000 || stripos(PHP_OS, 'WIN') === 0))
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1545)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1546)             //SMTP mandates RFC-compliant line endings
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1547)             //and it's also used with mail() on Windows
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1548)             static::setLE(self::CRLF);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1549)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1550)             //Maintain backward compatibility with legacy Linux command line mailers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1551)             static::setLE(PHP_EOL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1552)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1553)         //Check for buggy PHP versions that add a header with an incorrect line break
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1554)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1555)             'mail' === $this->Mailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1556)             && ((\PHP_VERSION_ID >= 70000 && \PHP_VERSION_ID < 70017)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1557)                 || (\PHP_VERSION_ID >= 70100 && \PHP_VERSION_ID < 70103))
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1558)             && ini_get('mail.add_x_header') === '1'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1559)             && stripos(PHP_OS, 'WIN') === 0
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1560)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1561)             trigger_error($this->lang('buggy_php'), E_USER_WARNING);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1562)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1563) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1564)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1565)             $this->error_count = 0; //Reset errors
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1566)             $this->mailHeader = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1567) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1568)             //Dequeue recipient and Reply-To addresses with IDN
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1569)             foreach (array_merge($this->RecipientsQueue, $this->ReplyToQueue) as $params) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1570)                 $params[1] = $this->punyencodeAddress($params[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1571)                 call_user_func_array([$this, 'addAnAddress'], $params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1572)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1573)             if (count($this->to) + count($this->cc) + count($this->bcc) < 1) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1574)                 throw new Exception($this->lang('provide_address'), self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1575)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1576) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1577)             //Validate From, Sender, and ConfirmReadingTo addresses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1578)             foreach (['From', 'Sender', 'ConfirmReadingTo'] as $address_kind) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1579)                 if ($this->{$address_kind} === null) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1580)                     $this->{$address_kind} = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1581)                     continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1582)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1583)                 $this->{$address_kind} = trim($this->{$address_kind});
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1584)                 if (empty($this->{$address_kind})) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1585)                     continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1586)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1587)                 $this->{$address_kind} = $this->punyencodeAddress($this->{$address_kind});
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1588)                 if (!static::validateAddress($this->{$address_kind})) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1589)                     $error_message = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1590)                         '%s (%s): %s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1591)                         $this->lang('invalid_address'),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1592)                         $address_kind,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1593)                         $this->{$address_kind}
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1594)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1595)                     $this->setError($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1596)                     $this->edebug($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1597)                     if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1598)                         throw new Exception($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1599)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1600) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1601)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1602)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1603)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1604) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1605)             //Set whether the message is multipart/alternative
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1606)             if ($this->alternativeExists()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1607)                 $this->ContentType = static::CONTENT_TYPE_MULTIPART_ALTERNATIVE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1608)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1609) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1610)             $this->setMessageType();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1611)             //Refuse to send an empty message unless we are specifically allowing it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1612)             if (!$this->AllowEmpty && empty($this->Body)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1613)                 throw new Exception($this->lang('empty_message'), self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1614)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1615) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1616)             //Trim subject consistently
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1617)             $this->Subject = trim($this->Subject);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1618)             //Create body before headers in case body makes changes to headers (e.g. altering transfer encoding)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1619)             $this->MIMEHeader = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1620)             $this->MIMEBody = $this->createBody();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1621)             //createBody may have added some headers, so retain them
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1622)             $tempheaders = $this->MIMEHeader;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1623)             $this->MIMEHeader = $this->createHeader();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1624)             $this->MIMEHeader .= $tempheaders;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1625) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1626)             //To capture the complete message when using mail(), create
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1627)             //an extra header list which createHeader() doesn't fold in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1628)             if ('mail' === $this->Mailer) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1629)                 if (count($this->to) > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1630)                     $this->mailHeader .= $this->addrAppend('To', $this->to);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1631)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1632)                     $this->mailHeader .= $this->headerLine('To', 'undisclosed-recipients:;');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1633)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1634)                 $this->mailHeader .= $this->headerLine(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1635)                     'Subject',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1636)                     $this->encodeHeader($this->secureHeader($this->Subject))
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1637)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1638)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1639) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1640)             //Sign with DKIM if enabled
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1641)             if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1642)                 !empty($this->DKIM_domain)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1643)                 && !empty($this->DKIM_selector)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1644)                 && (!empty($this->DKIM_private_string)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1645)                     || (!empty($this->DKIM_private)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1646)                         && static::isPermittedPath($this->DKIM_private)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1647)                         && file_exists($this->DKIM_private)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1648)                     )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1649)                 )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1650)             ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1651)                 $header_dkim = $this->DKIM_Add(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1652)                     $this->MIMEHeader . $this->mailHeader,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1653)                     $this->encodeHeader($this->secureHeader($this->Subject)),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1654)                     $this->MIMEBody
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1655)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1656)                 $this->MIMEHeader = static::stripTrailingWSP($this->MIMEHeader) . static::$LE .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1657)                     static::normalizeBreaks($header_dkim) . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1658)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1659) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1660)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1661)         } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1662)             $this->setError($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1663)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1664)                 throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1665)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1666) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1667)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1668)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1669)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1670) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1671)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1672)      * Actually send a message via the selected mechanism.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1673)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1674)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1675)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1676)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1677)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1678)     public function postSend()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1679)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1680)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1681)             //Choose the mailer and send through it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1682)             switch ($this->Mailer) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1683)                 case 'sendmail':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1684)                 case 'qmail':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1685)                     return $this->sendmailSend($this->MIMEHeader, $this->MIMEBody);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1686)                 case 'smtp':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1687)                     return $this->smtpSend($this->MIMEHeader, $this->MIMEBody);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1688)                 case 'mail':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1689)                     return $this->mailSend($this->MIMEHeader, $this->MIMEBody);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1690)                 default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1691)                     $sendMethod = $this->Mailer . 'Send';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1692)                     if (method_exists($this, $sendMethod)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1693)                         return $this->{$sendMethod}($this->MIMEHeader, $this->MIMEBody);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1694)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1695) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1696)                     return $this->mailSend($this->MIMEHeader, $this->MIMEBody);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1697)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1698)         } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1699)             $this->setError($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1700)             $this->edebug($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1701)             if ($this->Mailer === 'smtp' && $this->SMTPKeepAlive == true && $this->smtp->connected()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1702)                 $this->smtp->reset();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1703)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1704)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1705)                 throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1706)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1707)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1708) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1709)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1710)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1711) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1712)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1713)      * Send mail using the $Sendmail program.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1714)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1715)      * @see PHPMailer::$Sendmail
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1716)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1717)      * @param string $header The message headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1718)      * @param string $body   The message body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1719)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1720)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1721)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1722)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1723)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1724)     protected function sendmailSend($header, $body)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1725)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1726)         if ($this->Mailer === 'qmail') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1727)             $this->edebug('Sending with qmail');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1728)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1729)             $this->edebug('Sending with sendmail');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1730)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1731)         $header = static::stripTrailingWSP($header) . static::$LE . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1732)         //This sets the SMTP envelope sender which gets turned into a return-path header by the receiver
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1733)         //A space after `-f` is optional, but there is a long history of its presence
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1734)         //causing problems, so we don't use one
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1735)         //Exim docs: https://www.exim.org/exim-html-current/doc/html/spec_html/ch-the_exim_command_line.html
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1736)         //Sendmail docs: https://www.sendmail.org/~ca/email/man/sendmail.html
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1737)         //Example problem: https://www.drupal.org/node/1057954
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1738) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1739)         //PHP 5.6 workaround
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1740)         $sendmail_from_value = ini_get('sendmail_from');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1741)         if (empty($this->Sender) && !empty($sendmail_from_value)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1742)             //PHP config has a sender address we can use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1743)             $this->Sender = ini_get('sendmail_from');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1744)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1745)         //CVE-2016-10033, CVE-2016-10045: Don't pass -f if characters will be escaped.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1746)         if (!empty($this->Sender) && static::validateAddress($this->Sender) && self::isShellSafe($this->Sender)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1747)             if ($this->Mailer === 'qmail') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1748)                 $sendmailFmt = '%s -f%s';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1749)             } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1750)                 $sendmailFmt = '%s -oi -f%s -t';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1751)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1752)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1753)             //allow sendmail to choose a default envelope sender. It may
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1754)             //seem preferable to force it to use the From header as with
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1755)             //SMTP, but that introduces new problems (see
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1756)             //<https://github.com/PHPMailer/PHPMailer/issues/2298>), and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1757)             //it has historically worked this way.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1758)             $sendmailFmt = '%s -oi -t';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1759)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1760) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1761)         $sendmail = sprintf($sendmailFmt, escapeshellcmd($this->Sendmail), $this->Sender);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1762)         $this->edebug('Sendmail path: ' . $this->Sendmail);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1763)         $this->edebug('Sendmail command: ' . $sendmail);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1764)         $this->edebug('Envelope sender: ' . $this->Sender);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1765)         $this->edebug("Headers: {$header}");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1766) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1767)         if ($this->SingleTo) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1768)             foreach ($this->SingleToArray as $toAddr) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1769)                 $mail = @popen($sendmail, 'w');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1770)                 if (!$mail) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1771)                     throw new Exception($this->lang('execute') . $this->Sendmail, self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1772)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1773)                 $this->edebug("To: {$toAddr}");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1774)                 fwrite($mail, 'To: ' . $toAddr . "\n");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1775)                 fwrite($mail, $header);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1776)                 fwrite($mail, $body);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1777)                 $result = pclose($mail);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1778)                 $addrinfo = static::parseAddresses($toAddr, true, $this->CharSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1779)                 $this->doCallback(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1780)                     ($result === 0),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1781)                     [[$addrinfo['address'], $addrinfo['name']]],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1782)                     $this->cc,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1783)                     $this->bcc,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1784)                     $this->Subject,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1785)                     $body,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1786)                     $this->From,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1787)                     []
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1788)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1789)                 $this->edebug("Result: " . ($result === 0 ? 'true' : 'false'));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1790)                 if (0 !== $result) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1791)                     throw new Exception($this->lang('execute') . $this->Sendmail, self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1792)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1793)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1794)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1795)             $mail = @popen($sendmail, 'w');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1796)             if (!$mail) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1797)                 throw new Exception($this->lang('execute') . $this->Sendmail, self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1798)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1799)             fwrite($mail, $header);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1800)             fwrite($mail, $body);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1801)             $result = pclose($mail);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1802)             $this->doCallback(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1803)                 ($result === 0),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1804)                 $this->to,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1805)                 $this->cc,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1806)                 $this->bcc,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1807)                 $this->Subject,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1808)                 $body,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1809)                 $this->From,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1810)                 []
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1811)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1812)             $this->edebug("Result: " . ($result === 0 ? 'true' : 'false'));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1813)             if (0 !== $result) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1814)                 throw new Exception($this->lang('execute') . $this->Sendmail, self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1815)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1816)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1817) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1818)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1819)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1820) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1821)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1822)      * Fix CVE-2016-10033 and CVE-2016-10045 by disallowing potentially unsafe shell characters.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1823)      * Note that escapeshellarg and escapeshellcmd are inadequate for our purposes, especially on Windows.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1824)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1825)      * @see https://github.com/PHPMailer/PHPMailer/issues/924 CVE-2016-10045 bug report
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1826)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1827)      * @param string $string The string to be validated
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1828)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1829)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1830)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1831)     protected static function isShellSafe($string)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1832)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1833)         //It's not possible to use shell commands safely (which includes the mail() function) without escapeshellarg,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1834)         //but some hosting providers disable it, creating a security problem that we don't want to have to deal with,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1835)         //so we don't.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1836)         if (!function_exists('escapeshellarg') || !function_exists('escapeshellcmd')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1837)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1838)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1839) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1840)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1841)             escapeshellcmd($string) !== $string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1842)             || !in_array(escapeshellarg($string), ["'$string'", "\"$string\""])
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1843)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1844)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1845)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1846) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1847)         $length = strlen($string);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1848) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1849)         for ($i = 0; $i < $length; ++$i) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1850)             $c = $string[$i];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1851) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1852)             //All other characters have a special meaning in at least one common shell, including = and +.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1853)             //Full stop (.) has a special meaning in cmd.exe, but its impact should be negligible here.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1854)             //Note that this does permit non-Latin alphanumeric characters based on the current locale.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1855)             if (!ctype_alnum($c) && strpos('@_-.', $c) === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1856)                 return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1857)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1858)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1859) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1860)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1861)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1862) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1863)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1864)      * Check whether a file path is of a permitted type.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1865)      * Used to reject URLs and phar files from functions that access local file paths,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1866)      * such as addAttachment.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1867)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1868)      * @param string $path A relative or absolute path to a file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1869)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1870)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1871)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1872)     protected static function isPermittedPath($path)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1873)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1874)         //Matches scheme definition from https://tools.ietf.org/html/rfc3986#section-3.1
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1875)         return !preg_match('#^[a-z][a-z\d+.-]*://#i', $path);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1876)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1877) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1878)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1879)      * Check whether a file path is safe, accessible, and readable.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1880)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1881)      * @param string $path A relative or absolute path to a file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1882)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1883)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1884)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1885)     protected static function fileIsAccessible($path)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1886)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1887)         if (!static::isPermittedPath($path)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1888)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1889)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1890)         $readable = is_file($path);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1891)         //If not a UNC path (expected to start with \\), check read permission, see #2069
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1892)         if (strpos($path, '\\\\') !== 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1893)             $readable = $readable && is_readable($path);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1894)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1895)         return  $readable;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1896)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1897) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1898)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1899)      * Send mail using the PHP mail() function.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1900)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1901)      * @see https://www.php.net/manual/en/book.mail.php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1902)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1903)      * @param string $header The message headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1904)      * @param string $body   The message body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1905)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1906)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1907)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1908)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1909)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1910)     protected function mailSend($header, $body)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1911)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1912)         $header = static::stripTrailingWSP($header) . static::$LE . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1913) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1914)         $toArr = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1915)         foreach ($this->to as $toaddr) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1916)             $toArr[] = $this->addrFormat($toaddr);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1917)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1918)         $to = trim(implode(', ', $toArr));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1919) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1920)         //If there are no To-addresses (e.g. when sending only to BCC-addresses)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1921)         //the following should be added to get a correct DKIM-signature.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1922)         //Compare with $this->preSend()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1923)         if ($to === '') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1924)             $to = 'undisclosed-recipients:;';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1925)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1926) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1927)         $params = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1928)         //This sets the SMTP envelope sender which gets turned into a return-path header by the receiver
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1929)         //A space after `-f` is optional, but there is a long history of its presence
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1930)         //causing problems, so we don't use one
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1931)         //Exim docs: https://www.exim.org/exim-html-current/doc/html/spec_html/ch-the_exim_command_line.html
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1932)         //Sendmail docs: https://www.sendmail.org/~ca/email/man/sendmail.html
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1933)         //Example problem: https://www.drupal.org/node/1057954
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1934)         //CVE-2016-10033, CVE-2016-10045: Don't pass -f if characters will be escaped.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1935) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1936)         //PHP 5.6 workaround
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1937)         $sendmail_from_value = ini_get('sendmail_from');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1938)         if (empty($this->Sender) && !empty($sendmail_from_value)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1939)             //PHP config has a sender address we can use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1940)             $this->Sender = ini_get('sendmail_from');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1941)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1942)         if (!empty($this->Sender) && static::validateAddress($this->Sender)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1943)             if (self::isShellSafe($this->Sender)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1944)                 $params = sprintf('-f%s', $this->Sender);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1945)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1946)             $old_from = ini_get('sendmail_from');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1947)             ini_set('sendmail_from', $this->Sender);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1948)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1949)         $result = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1950)         if ($this->SingleTo && count($toArr) > 1) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1951)             foreach ($toArr as $toAddr) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1952)                 $result = $this->mailPassthru($toAddr, $this->Subject, $body, $header, $params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1953)                 $addrinfo = static::parseAddresses($toAddr, true, $this->CharSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1954)                 $this->doCallback(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1955)                     $result,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1956)                     [[$addrinfo['address'], $addrinfo['name']]],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1957)                     $this->cc,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1958)                     $this->bcc,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1959)                     $this->Subject,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1960)                     $body,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1961)                     $this->From,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1962)                     []
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1963)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1964)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1965)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1966)             $result = $this->mailPassthru($to, $this->Subject, $body, $header, $params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1967)             $this->doCallback($result, $this->to, $this->cc, $this->bcc, $this->Subject, $body, $this->From, []);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1968)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1969)         if (isset($old_from)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1970)             ini_set('sendmail_from', $old_from);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1971)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1972)         if (!$result) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1973)             throw new Exception($this->lang('instantiate'), self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1974)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1975) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1976)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1977)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1978) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1979)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1980)      * Get an instance to use for SMTP operations.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1981)      * Override this function to load your own SMTP implementation,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1982)      * or set one with setSMTPInstance.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1983)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1984)      * @return SMTP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1985)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1986)     public function getSMTPInstance()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1987)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1988)         if (!is_object($this->smtp)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1989)             $this->smtp = new SMTP();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1990)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1991) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1992)         return $this->smtp;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1993)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1994) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1995)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1996)      * Provide an instance to use for SMTP operations.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1997)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1998)      * @return SMTP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1999)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2000)     public function setSMTPInstance(SMTP $smtp)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2001)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2002)         $this->smtp = $smtp;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2003) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2004)         return $this->smtp;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2005)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2006) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2007)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2008)      * Provide SMTP XCLIENT attributes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2009)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2010)      * @param string $name  Attribute name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2011)      * @param ?string $value Attribute value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2012)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2013)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2014)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2015)     public function setSMTPXclientAttribute($name, $value)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2016)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2017)         if (!in_array($name, SMTP::$xclient_allowed_attributes)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2018)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2019)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2020)         if (isset($this->SMTPXClient[$name]) && $value === null) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2021)             unset($this->SMTPXClient[$name]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2022)         } elseif ($value !== null) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2023)             $this->SMTPXClient[$name] = $value;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2024)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2025) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2026)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2027)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2028) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2029)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2030)      * Get SMTP XCLIENT attributes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2031)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2032)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2033)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2034)     public function getSMTPXclientAttributes()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2035)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2036)         return $this->SMTPXClient;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2037)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2038) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2039)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2040)      * Send mail via SMTP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2041)      * Returns false if there is a bad MAIL FROM, RCPT, or DATA input.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2042)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2043)      * @see PHPMailer::setSMTPInstance() to use a different class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2044)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2045)      * @uses \PHPMailer\PHPMailer\SMTP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2046)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2047)      * @param string $header The message headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2048)      * @param string $body   The message body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2049)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2050)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2051)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2052)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2053)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2054)     protected function smtpSend($header, $body)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2055)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2056)         $header = static::stripTrailingWSP($header) . static::$LE . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2057)         $bad_rcpt = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2058)         if (!$this->smtpConnect($this->SMTPOptions)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2059)             throw new Exception($this->lang('smtp_connect_failed'), self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2060)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2061)         //Sender already validated in preSend()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2062)         if ('' === $this->Sender) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2063)             $smtp_from = $this->From;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2064)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2065)             $smtp_from = $this->Sender;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2066)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2067)         if (count($this->SMTPXClient)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2068)             $this->smtp->xclient($this->SMTPXClient);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2069)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2070)         if (!$this->smtp->mail($smtp_from)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2071)             $this->setError($this->lang('from_failed') . $smtp_from . ' : ' . implode(',', $this->smtp->getError()));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2072)             throw new Exception($this->ErrorInfo, self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2073)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2074) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2075)         $callbacks = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2076)         //Attempt to send to all recipients
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2077)         foreach ([$this->to, $this->cc, $this->bcc] as $togroup) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2078)             foreach ($togroup as $to) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2079)                 if (!$this->smtp->recipient($to[0], $this->dsn)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2080)                     $error = $this->smtp->getError();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2081)                     $bad_rcpt[] = ['to' => $to[0], 'error' => $error['detail']];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2082)                     $isSent = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2083)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2084)                     $isSent = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2085)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2086) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2087)                 $callbacks[] = ['issent' => $isSent, 'to' => $to[0], 'name' => $to[1]];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2088)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2089)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2090) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2091)         //Only send the DATA command if we have viable recipients
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2092)         if ((count($this->all_recipients) > count($bad_rcpt)) && !$this->smtp->data($header . $body)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2093)             throw new Exception($this->lang('data_not_accepted'), self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2094)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2095) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2096)         $smtp_transaction_id = $this->smtp->getLastTransactionID();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2097) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2098)         if ($this->SMTPKeepAlive) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2099)             $this->smtp->reset();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2100)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2101)             $this->smtp->quit();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2102)             $this->smtp->close();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2103)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2104) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2105)         foreach ($callbacks as $cb) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2106)             $this->doCallback(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2107)                 $cb['issent'],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2108)                 [[$cb['to'], $cb['name']]],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2109)                 [],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2110)                 [],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2111)                 $this->Subject,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2112)                 $body,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2113)                 $this->From,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2114)                 ['smtp_transaction_id' => $smtp_transaction_id]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2115)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2116)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2117) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2118)         //Create error message for any bad addresses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2119)         if (count($bad_rcpt) > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2120)             $errstr = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2121)             foreach ($bad_rcpt as $bad) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2122)                 $errstr .= $bad['to'] . ': ' . $bad['error'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2123)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2124)             throw new Exception($this->lang('recipients_failed') . $errstr, self::STOP_CONTINUE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2125)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2126) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2127)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2128)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2129) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2130)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2131)      * Initiate a connection to an SMTP server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2132)      * Returns false if the operation failed.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2133)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2134)      * @param array $options An array of options compatible with stream_context_create()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2135)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2136)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2137)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2138)      * @uses \PHPMailer\PHPMailer\SMTP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2139)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2140)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2141)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2142)     public function smtpConnect($options = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2143)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2144)         if (null === $this->smtp) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2145)             $this->smtp = $this->getSMTPInstance();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2146)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2147) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2148)         //If no options are provided, use whatever is set in the instance
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2149)         if (null === $options) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2150)             $options = $this->SMTPOptions;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2151)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2152) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2153)         //Already connected?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2154)         if ($this->smtp->connected()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2155)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2156)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2157) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2158)         $this->smtp->setTimeout($this->Timeout);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2159)         $this->smtp->setDebugLevel($this->SMTPDebug);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2160)         $this->smtp->setDebugOutput($this->Debugoutput);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2161)         $this->smtp->setVerp($this->do_verp);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2162)         if ($this->Host === null) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2163)             $this->Host = 'localhost';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2164)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2165)         $hosts = explode(';', $this->Host);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2166)         $lastexception = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2167) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2168)         foreach ($hosts as $hostentry) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2169)             $hostinfo = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2170)             if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2171)                 !preg_match(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2172)                     '/^(?:(ssl|tls):\/\/)?(.+?)(?::(\d+))?$/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2173)                     trim($hostentry),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2174)                     $hostinfo
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2175)                 )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2176)             ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2177)                 $this->edebug($this->lang('invalid_hostentry') . ' ' . trim($hostentry));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2178)                 //Not a valid host entry
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2179)                 continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2180)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2181)             //$hostinfo[1]: optional ssl or tls prefix
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2182)             //$hostinfo[2]: the hostname
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2183)             //$hostinfo[3]: optional port number
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2184)             //The host string prefix can temporarily override the current setting for SMTPSecure
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2185)             //If it's not specified, the default value is used
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2186) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2187)             //Check the host name is a valid name or IP address before trying to use it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2188)             if (!static::isValidHost($hostinfo[2])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2189)                 $this->edebug($this->lang('invalid_host') . ' ' . $hostinfo[2]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2190)                 continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2191)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2192)             $prefix = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2193)             $secure = $this->SMTPSecure;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2194)             $tls = (static::ENCRYPTION_STARTTLS === $this->SMTPSecure);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2195)             if ('ssl' === $hostinfo[1] || ('' === $hostinfo[1] && static::ENCRYPTION_SMTPS === $this->SMTPSecure)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2196)                 $prefix = 'ssl://';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2197)                 $tls = false; //Can't have SSL and TLS at the same time
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2198)                 $secure = static::ENCRYPTION_SMTPS;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2199)             } elseif ('tls' === $hostinfo[1]) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2200)                 $tls = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2201)                 //TLS doesn't use a prefix
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2202)                 $secure = static::ENCRYPTION_STARTTLS;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2203)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2204)             //Do we need the OpenSSL extension?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2205)             $sslext = defined('OPENSSL_ALGO_SHA256');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2206)             if (static::ENCRYPTION_STARTTLS === $secure || static::ENCRYPTION_SMTPS === $secure) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2207)                 //Check for an OpenSSL constant rather than using extension_loaded, which is sometimes disabled
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2208)                 if (!$sslext) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2209)                     throw new Exception($this->lang('extension_missing') . 'openssl', self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2210)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2211)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2212)             $host = $hostinfo[2];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2213)             $port = $this->Port;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2214)             if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2215)                 array_key_exists(3, $hostinfo) &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2216)                 is_numeric($hostinfo[3]) &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2217)                 $hostinfo[3] > 0 &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2218)                 $hostinfo[3] < 65536
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2219)             ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2220)                 $port = (int) $hostinfo[3];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2221)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2222)             if ($this->smtp->connect($prefix . $host, $port, $this->Timeout, $options)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2223)                 try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2224)                     if ($this->Helo) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2225)                         $hello = $this->Helo;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2226)                     } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2227)                         $hello = $this->serverHostname();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2228)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2229)                     $this->smtp->hello($hello);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2230)                     //Automatically enable TLS encryption if:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2231)                     //* it's not disabled
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2232)                     //* we are not connecting to localhost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2233)                     //* we have openssl extension
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2234)                     //* we are not already using SSL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2235)                     //* the server offers STARTTLS
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2236)                     if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2237)                         $this->SMTPAutoTLS &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2238)                         $this->Host !== 'localhost' &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2239)                         $sslext &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2240)                         $secure !== 'ssl' &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2241)                         $this->smtp->getServerExt('STARTTLS')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2242)                     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2243)                         $tls = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2244)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2245)                     if ($tls) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2246)                         if (!$this->smtp->startTLS()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2247)                             $message = $this->getSmtpErrorMessage('connect_host');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2248)                             throw new Exception($message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2249)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2250)                         //We must resend EHLO after TLS negotiation
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2251)                         $this->smtp->hello($hello);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2252)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2253)                     if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2254)                         $this->SMTPAuth && !$this->smtp->authenticate(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2255)                             $this->Username,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2256)                             $this->Password,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2257)                             $this->AuthType,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2258)                             $this->oauth
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2259)                         )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2260)                     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2261)                         throw new Exception($this->lang('authenticate'));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2262)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2263) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2264)                     return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2265)                 } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2266)                     $lastexception = $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2267)                     $this->edebug($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2268)                     //We must have connected, but then failed TLS or Auth, so close connection nicely
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2269)                     $this->smtp->quit();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2270)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2271)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2272)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2273)         //If we get here, all connection attempts have failed, so close connection hard
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2274)         $this->smtp->close();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2275)         //As we've caught all exceptions, just report whatever the last one was
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2276)         if ($this->exceptions && null !== $lastexception) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2277)             throw $lastexception;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2278)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2279)         if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2280)             // no exception was thrown, likely $this->smtp->connect() failed
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2281)             $message = $this->getSmtpErrorMessage('connect_host');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2282)             throw new Exception($message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2283)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2284) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2285)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2286)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2287) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2288)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2289)      * Close the active SMTP session if one exists.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2290)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2291)     public function smtpClose()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2292)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2293)         if ((null !== $this->smtp) && $this->smtp->connected()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2294)             $this->smtp->quit();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2295)             $this->smtp->close();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2296)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2297)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2298) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2299)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2300)      * Set the language for error messages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2301)      * The default language is English.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2302)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2303)      * @param string $langcode  ISO 639-1 2-character language code (e.g. French is "fr")
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2304)      *                          Optionally, the language code can be enhanced with a 4-character
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2305)      *                          script annotation and/or a 2-character country annotation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2306)      * @param string $lang_path Path to the language file directory, with trailing separator (slash)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2307)      *                          Do not set this from user input!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2308)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2309)      * @return bool Returns true if the requested language was loaded, false otherwise.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2310)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2311)     public function setLanguage($langcode = 'en', $lang_path = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2312)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2313)         //Backwards compatibility for renamed language codes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2314)         $renamed_langcodes = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2315)             'br' => 'pt_br',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2316)             'cz' => 'cs',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2317)             'dk' => 'da',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2318)             'no' => 'nb',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2319)             'se' => 'sv',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2320)             'rs' => 'sr',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2321)             'tg' => 'tl',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2322)             'am' => 'hy',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2323)         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2324) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2325)         if (array_key_exists($langcode, $renamed_langcodes)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2326)             $langcode = $renamed_langcodes[$langcode];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2327)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2328) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2329)         //Define full set of translatable strings in English
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2330)         $PHPMAILER_LANG = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2331)             'authenticate' => 'SMTP Error: Could not authenticate.',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2332)             'buggy_php' => 'Your version of PHP is affected by a bug that may result in corrupted messages.' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2333)                 ' To fix it, switch to sending using SMTP, disable the mail.add_x_header option in' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2334)                 ' your php.ini, switch to MacOS or Linux, or upgrade your PHP to version 7.0.17+ or 7.1.3+.',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2335)             'connect_host' => 'SMTP Error: Could not connect to SMTP host.',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2336)             'data_not_accepted' => 'SMTP Error: data not accepted.',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2337)             'empty_message' => 'Message body empty',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2338)             'encoding' => 'Unknown encoding: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2339)             'execute' => 'Could not execute: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2340)             'extension_missing' => 'Extension missing: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2341)             'file_access' => 'Could not access file: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2342)             'file_open' => 'File Error: Could not open file: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2343)             'from_failed' => 'The following From address failed: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2344)             'instantiate' => 'Could not instantiate mail function.',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2345)             'invalid_address' => 'Invalid address: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2346)             'invalid_header' => 'Invalid header name or value',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2347)             'invalid_hostentry' => 'Invalid hostentry: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2348)             'invalid_host' => 'Invalid host: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2349)             'mailer_not_supported' => ' mailer is not supported.',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2350)             'provide_address' => 'You must provide at least one recipient email address.',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2351)             'recipients_failed' => 'SMTP Error: The following recipients failed: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2352)             'signing' => 'Signing Error: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2353)             'smtp_code' => 'SMTP code: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2354)             'smtp_code_ex' => 'Additional SMTP info: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2355)             'smtp_connect_failed' => 'SMTP connect() failed.',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2356)             'smtp_detail' => 'Detail: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2357)             'smtp_error' => 'SMTP server error: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2358)             'variable_set' => 'Cannot set or reset variable: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2359)         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2360)         if (empty($lang_path)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2361)             //Calculate an absolute path so it can work if CWD is not here
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2362)             $lang_path = dirname(__DIR__) . DIRECTORY_SEPARATOR . 'language' . DIRECTORY_SEPARATOR;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2363)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2364) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2365)         //Validate $langcode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2366)         $foundlang = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2367)         $langcode  = strtolower($langcode);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2368)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2369)             !preg_match('/^(?P<lang>[a-z]{2})(?P<script>_[a-z]{4})?(?P<country>_[a-z]{2})?$/', $langcode, $matches)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2370)             && $langcode !== 'en'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2371)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2372)             $foundlang = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2373)             $langcode = 'en';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2374)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2375) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2376)         //There is no English translation file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2377)         if ('en' !== $langcode) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2378)             $langcodes = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2379)             if (!empty($matches['script']) && !empty($matches['country'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2380)                 $langcodes[] = $matches['lang'] . $matches['script'] . $matches['country'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2381)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2382)             if (!empty($matches['country'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2383)                 $langcodes[] = $matches['lang'] . $matches['country'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2384)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2385)             if (!empty($matches['script'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2386)                 $langcodes[] = $matches['lang'] . $matches['script'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2387)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2388)             $langcodes[] = $matches['lang'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2389) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2390)             //Try and find a readable language file for the requested language.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2391)             $foundFile = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2392)             foreach ($langcodes as $code) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2393)                 $lang_file = $lang_path . 'phpmailer.lang-' . $code . '.php';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2394)                 if (static::fileIsAccessible($lang_file)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2395)                     $foundFile = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2396)                     break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2397)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2398)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2399) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2400)             if ($foundFile === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2401)                 $foundlang = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2402)             } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2403)                 $lines = file($lang_file);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2404)                 foreach ($lines as $line) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2405)                     //Translation file lines look like this:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2406)                     //$PHPMAILER_LANG['authenticate'] = 'SMTP-Fehler: Authentifizierung fehlgeschlagen.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2407)                     //These files are parsed as text and not PHP so as to avoid the possibility of code injection
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2408)                     //See https://blog.stevenlevithan.com/archives/match-quoted-string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2409)                     $matches = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2410)                     if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2411)                         preg_match(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2412)                             '/^\$PHPMAILER_LANG\[\'([a-z\d_]+)\'\]\s*=\s*(["\'])(.+)*?\2;/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2413)                             $line,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2414)                             $matches
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2415)                         ) &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2416)                         //Ignore unknown translation keys
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2417)                         array_key_exists($matches[1], $PHPMAILER_LANG)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2418)                     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2419)                         //Overwrite language-specific strings so we'll never have missing translation keys.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2420)                         $PHPMAILER_LANG[$matches[1]] = (string)$matches[3];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2421)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2422)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2423)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2424)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2425)         $this->language = $PHPMAILER_LANG;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2426) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2427)         return $foundlang; //Returns false if language not found
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2428)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2429) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2430)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2431)      * Get the array of strings for the current language.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2432)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2433)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2434)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2435)     public function getTranslations()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2436)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2437)         if (empty($this->language)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2438)             $this->setLanguage(); // Set the default language.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2439)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2440) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2441)         return $this->language;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2442)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2443) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2444)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2445)      * Create recipient headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2446)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2447)      * @param string $type
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2448)      * @param array  $addr An array of recipients,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2449)      *                     where each recipient is a 2-element indexed array with element 0 containing an address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2450)      *                     and element 1 containing a name, like:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2451)      *                     [['joe@example.com', 'Joe User'], ['zoe@example.com', 'Zoe User']]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2452)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2453)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2454)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2455)     public function addrAppend($type, $addr)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2456)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2457)         $addresses = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2458)         foreach ($addr as $address) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2459)             $addresses[] = $this->addrFormat($address);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2460)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2461) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2462)         return $type . ': ' . implode(', ', $addresses) . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2463)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2464) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2465)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2466)      * Format an address for use in a message header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2467)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2468)      * @param array $addr A 2-element indexed array, element 0 containing an address, element 1 containing a name like
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2469)      *                    ['joe@example.com', 'Joe User']
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2470)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2471)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2472)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2473)     public function addrFormat($addr)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2474)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2475)         if (!isset($addr[1]) || ($addr[1] === '')) { //No name provided
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2476)             return $this->secureHeader($addr[0]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2477)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2478) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2479)         return $this->encodeHeader($this->secureHeader($addr[1]), 'phrase') .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2480)             ' <' . $this->secureHeader($addr[0]) . '>';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2481)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2482) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2483)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2484)      * Word-wrap message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2485)      * For use with mailers that do not automatically perform wrapping
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2486)      * and for quoted-printable encoded messages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2487)      * Original written by philippe.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2488)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2489)      * @param string $message The message to wrap
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2490)      * @param int    $length  The line length to wrap to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2491)      * @param bool   $qp_mode Whether to run in Quoted-Printable mode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2492)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2493)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2494)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2495)     public function wrapText($message, $length, $qp_mode = false)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2496)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2497)         if ($qp_mode) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2498)             $soft_break = sprintf(' =%s', static::$LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2499)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2500)             $soft_break = static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2501)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2502)         //If utf-8 encoding is used, we will need to make sure we don't
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2503)         //split multibyte characters when we wrap
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2504)         $is_utf8 = static::CHARSET_UTF8 === strtolower($this->CharSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2505)         $lelen = strlen(static::$LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2506)         $crlflen = strlen(static::$LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2507) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2508)         $message = static::normalizeBreaks($message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2509)         //Remove a trailing line break
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2510)         if (substr($message, -$lelen) === static::$LE) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2511)             $message = substr($message, 0, -$lelen);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2512)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2513) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2514)         //Split message into lines
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2515)         $lines = explode(static::$LE, $message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2516)         //Message will be rebuilt in here
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2517)         $message = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2518)         foreach ($lines as $line) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2519)             $words = explode(' ', $line);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2520)             $buf = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2521)             $firstword = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2522)             foreach ($words as $word) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2523)                 if ($qp_mode && (strlen($word) > $length)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2524)                     $space_left = $length - strlen($buf) - $crlflen;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2525)                     if (!$firstword) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2526)                         if ($space_left > 20) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2527)                             $len = $space_left;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2528)                             if ($is_utf8) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2529)                                 $len = $this->utf8CharBoundary($word, $len);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2530)                             } elseif ('=' === substr($word, $len - 1, 1)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2531)                                 --$len;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2532)                             } elseif ('=' === substr($word, $len - 2, 1)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2533)                                 $len -= 2;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2534)                             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2535)                             $part = substr($word, 0, $len);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2536)                             $word = substr($word, $len);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2537)                             $buf .= ' ' . $part;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2538)                             $message .= $buf . sprintf('=%s', static::$LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2539)                         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2540)                             $message .= $buf . $soft_break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2541)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2542)                         $buf = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2543)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2544)                     while ($word !== '') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2545)                         if ($length <= 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2546)                             break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2547)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2548)                         $len = $length;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2549)                         if ($is_utf8) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2550)                             $len = $this->utf8CharBoundary($word, $len);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2551)                         } elseif ('=' === substr($word, $len - 1, 1)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2552)                             --$len;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2553)                         } elseif ('=' === substr($word, $len - 2, 1)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2554)                             $len -= 2;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2555)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2556)                         $part = substr($word, 0, $len);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2557)                         $word = (string) substr($word, $len);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2558) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2559)                         if ($word !== '') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2560)                             $message .= $part . sprintf('=%s', static::$LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2561)                         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2562)                             $buf = $part;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2563)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2564)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2565)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2566)                     $buf_o = $buf;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2567)                     if (!$firstword) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2568)                         $buf .= ' ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2569)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2570)                     $buf .= $word;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2571) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2572)                     if ('' !== $buf_o && strlen($buf) > $length) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2573)                         $message .= $buf_o . $soft_break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2574)                         $buf = $word;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2575)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2576)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2577)                 $firstword = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2578)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2579)             $message .= $buf . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2580)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2581) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2582)         return $message;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2583)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2584) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2585)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2586)      * Find the last character boundary prior to $maxLength in a utf-8
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2587)      * quoted-printable encoded string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2588)      * Original written by Colin Brown.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2589)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2590)      * @param string $encodedText utf-8 QP text
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2591)      * @param int    $maxLength   Find the last character boundary prior to this length
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2592)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2593)      * @return int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2594)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2595)     public function utf8CharBoundary($encodedText, $maxLength)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2596)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2597)         $foundSplitPos = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2598)         $lookBack = 3;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2599)         while (!$foundSplitPos) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2600)             $lastChunk = substr($encodedText, $maxLength - $lookBack, $lookBack);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2601)             $encodedCharPos = strpos($lastChunk, '=');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2602)             if (false !== $encodedCharPos) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2603)                 //Found start of encoded character byte within $lookBack block.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2604)                 //Check the encoded byte value (the 2 chars after the '=')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2605)                 $hex = substr($encodedText, $maxLength - $lookBack + $encodedCharPos + 1, 2);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2606)                 $dec = hexdec($hex);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2607)                 if ($dec < 128) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2608)                     //Single byte character.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2609)                     //If the encoded char was found at pos 0, it will fit
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2610)                     //otherwise reduce maxLength to start of the encoded char
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2611)                     if ($encodedCharPos > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2612)                         $maxLength -= $lookBack - $encodedCharPos;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2613)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2614)                     $foundSplitPos = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2615)                 } elseif ($dec >= 192) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2616)                     //First byte of a multi byte character
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2617)                     //Reduce maxLength to split at start of character
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2618)                     $maxLength -= $lookBack - $encodedCharPos;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2619)                     $foundSplitPos = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2620)                 } elseif ($dec < 192) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2621)                     //Middle byte of a multi byte character, look further back
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2622)                     $lookBack += 3;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2623)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2624)             } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2625)                 //No encoded character found
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2626)                 $foundSplitPos = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2627)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2628)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2629) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2630)         return $maxLength;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2631)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2632) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2633)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2634)      * Apply word wrapping to the message body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2635)      * Wraps the message body to the number of chars set in the WordWrap property.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2636)      * You should only do this to plain-text bodies as wrapping HTML tags may break them.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2637)      * This is called automatically by createBody(), so you don't need to call it yourself.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2638)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2639)     public function setWordWrap()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2640)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2641)         if ($this->WordWrap < 1) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2642)             return;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2643)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2644) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2645)         switch ($this->message_type) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2646)             case 'alt':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2647)             case 'alt_inline':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2648)             case 'alt_attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2649)             case 'alt_inline_attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2650)                 $this->AltBody = $this->wrapText($this->AltBody, $this->WordWrap);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2651)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2652)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2653)                 $this->Body = $this->wrapText($this->Body, $this->WordWrap);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2654)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2655)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2656)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2657) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2658)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2659)      * Assemble message headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2660)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2661)      * @return string The assembled headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2662)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2663)     public function createHeader()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2664)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2665)         $result = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2666) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2667)         $result .= $this->headerLine('Date', '' === $this->MessageDate ? self::rfcDate() : $this->MessageDate);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2668) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2669)         //The To header is created automatically by mail(), so needs to be omitted here
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2670)         if ('mail' !== $this->Mailer) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2671)             if ($this->SingleTo) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2672)                 foreach ($this->to as $toaddr) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2673)                     $this->SingleToArray[] = $this->addrFormat($toaddr);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2674)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2675)             } elseif (count($this->to) > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2676)                 $result .= $this->addrAppend('To', $this->to);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2677)             } elseif (count($this->cc) === 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2678)                 $result .= $this->headerLine('To', 'undisclosed-recipients:;');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2679)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2680)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2681)         $result .= $this->addrAppend('From', [[trim($this->From), $this->FromName]]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2682) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2683)         //sendmail and mail() extract Cc from the header before sending
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2684)         if (count($this->cc) > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2685)             $result .= $this->addrAppend('Cc', $this->cc);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2686)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2687) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2688)         //sendmail and mail() extract Bcc from the header before sending
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2689)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2690)             (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2691)                 'sendmail' === $this->Mailer || 'qmail' === $this->Mailer || 'mail' === $this->Mailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2692)             )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2693)             && count($this->bcc) > 0
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2694)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2695)             $result .= $this->addrAppend('Bcc', $this->bcc);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2696)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2697) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2698)         if (count($this->ReplyTo) > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2699)             $result .= $this->addrAppend('Reply-To', $this->ReplyTo);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2700)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2701) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2702)         //mail() sets the subject itself
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2703)         if ('mail' !== $this->Mailer) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2704)             $result .= $this->headerLine('Subject', $this->encodeHeader($this->secureHeader($this->Subject)));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2705)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2706) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2707)         //Only allow a custom message ID if it conforms to RFC 5322 section 3.6.4
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2708)         //https://tools.ietf.org/html/rfc5322#section-3.6.4
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2709)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2710)             '' !== $this->MessageID &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2711)             preg_match(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2712)                 '/^<((([a-z\d!#$%&\'*+\/=?^_`{|}~-]+(\.[a-z\d!#$%&\'*+\/=?^_`{|}~-]+)*)' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2713)                 '|("(([\x01-\x08\x0B\x0C\x0E-\x1F\x7F]|[\x21\x23-\x5B\x5D-\x7E])' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2714)                 '|(\\[\x01-\x09\x0B\x0C\x0E-\x7F]))*"))@(([a-z\d!#$%&\'*+\/=?^_`{|}~-]+' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2715)                 '(\.[a-z\d!#$%&\'*+\/=?^_`{|}~-]+)*)|(\[(([\x01-\x08\x0B\x0C\x0E-\x1F\x7F]' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2716)                 '|[\x21-\x5A\x5E-\x7E])|(\\[\x01-\x09\x0B\x0C\x0E-\x7F]))*\])))>$/Di',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2717)                 $this->MessageID
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2718)             )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2719)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2720)             $this->lastMessageID = $this->MessageID;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2721)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2722)             $this->lastMessageID = sprintf('<%s@%s>', $this->uniqueid, $this->serverHostname());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2723)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2724)         $result .= $this->headerLine('Message-ID', $this->lastMessageID);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2725)         if (null !== $this->Priority) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2726)             $result .= $this->headerLine('X-Priority', $this->Priority);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2727)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2728)         if ('' === $this->XMailer) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2729)             //Empty string for default X-Mailer header
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2730)             $result .= $this->headerLine(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2731)                 'X-Mailer',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2732)                 'PHPMailer ' . self::VERSION . ' (https://github.com/PHPMailer/PHPMailer)'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2733)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2734)         } elseif (is_string($this->XMailer) && trim($this->XMailer) !== '') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2735)             //Some string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2736)             $result .= $this->headerLine('X-Mailer', trim($this->XMailer));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2737)         } //Other values result in no X-Mailer header
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2738) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2739)         if ('' !== $this->ConfirmReadingTo) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2740)             $result .= $this->headerLine('Disposition-Notification-To', '<' . $this->ConfirmReadingTo . '>');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2741)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2742) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2743)         //Add custom headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2744)         foreach ($this->CustomHeader as $header) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2745)             $result .= $this->headerLine(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2746)                 trim($header[0]),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2747)                 $this->encodeHeader(trim($header[1]))
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2748)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2749)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2750)         if (!$this->sign_key_file) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2751)             $result .= $this->headerLine('MIME-Version', '1.0');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2752)             $result .= $this->getMailMIME();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2753)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2754) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2755)         return $result;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2756)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2757) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2758)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2759)      * Get the message MIME type headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2760)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2761)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2762)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2763)     public function getMailMIME()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2764)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2765)         $result = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2766)         $ismultipart = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2767)         switch ($this->message_type) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2768)             case 'inline':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2769)                 $result .= $this->headerLine('Content-Type', static::CONTENT_TYPE_MULTIPART_RELATED . ';');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2770)                 $result .= $this->textLine(' boundary="' . $this->boundary[1] . '"');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2771)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2772)             case 'attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2773)             case 'inline_attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2774)             case 'alt_attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2775)             case 'alt_inline_attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2776)                 $result .= $this->headerLine('Content-Type', static::CONTENT_TYPE_MULTIPART_MIXED . ';');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2777)                 $result .= $this->textLine(' boundary="' . $this->boundary[1] . '"');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2778)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2779)             case 'alt':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2780)             case 'alt_inline':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2781)                 $result .= $this->headerLine('Content-Type', static::CONTENT_TYPE_MULTIPART_ALTERNATIVE . ';');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2782)                 $result .= $this->textLine(' boundary="' . $this->boundary[1] . '"');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2783)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2784)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2785)                 //Catches case 'plain': and case '':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2786)                 $result .= $this->textLine('Content-Type: ' . $this->ContentType . '; charset=' . $this->CharSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2787)                 $ismultipart = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2788)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2789)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2790)         //RFC1341 part 5 says 7bit is assumed if not specified
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2791)         if (static::ENCODING_7BIT !== $this->Encoding) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2792)             //RFC 2045 section 6.4 says multipart MIME parts may only use 7bit, 8bit or binary CTE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2793)             if ($ismultipart) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2794)                 if (static::ENCODING_8BIT === $this->Encoding) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2795)                     $result .= $this->headerLine('Content-Transfer-Encoding', static::ENCODING_8BIT);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2796)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2797)                 //The only remaining alternatives are quoted-printable and base64, which are both 7bit compatible
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2798)             } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2799)                 $result .= $this->headerLine('Content-Transfer-Encoding', $this->Encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2800)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2801)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2802) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2803)         return $result;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2804)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2805) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2806)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2807)      * Returns the whole MIME message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2808)      * Includes complete headers and body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2809)      * Only valid post preSend().
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2810)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2811)      * @see PHPMailer::preSend()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2812)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2813)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2814)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2815)     public function getSentMIMEMessage()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2816)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2817)         return static::stripTrailingWSP($this->MIMEHeader . $this->mailHeader) .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2818)             static::$LE . static::$LE . $this->MIMEBody;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2819)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2820) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2821)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2822)      * Create a unique ID to use for boundaries.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2823)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2824)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2825)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2826)     protected function generateId()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2827)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2828)         $len = 32; //32 bytes = 256 bits
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2829)         $bytes = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2830)         if (function_exists('random_bytes')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2831)             try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2832)                 $bytes = random_bytes($len);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2833)             } catch (\Exception $e) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2834)                 //Do nothing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2835)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2836)         } elseif (function_exists('openssl_random_pseudo_bytes')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2837)             /** @noinspection CryptographicallySecureRandomnessInspection */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2838)             $bytes = openssl_random_pseudo_bytes($len);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2839)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2840)         if ($bytes === '') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2841)             //We failed to produce a proper random string, so make do.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2842)             //Use a hash to force the length to the same as the other methods
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2843)             $bytes = hash('sha256', uniqid((string) mt_rand(), true), true);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2844)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2845) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2846)         //We don't care about messing up base64 format here, just want a random string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2847)         return str_replace(['=', '+', '/'], '', base64_encode(hash('sha256', $bytes, true)));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2848)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2849) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2850)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2851)      * Assemble the message body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2852)      * Returns an empty string on failure.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2853)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2854)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2855)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2856)      * @return string The assembled message body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2857)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2858)     public function createBody()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2859)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2860)         $body = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2861)         //Create unique IDs and preset boundaries
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2862)         $this->setBoundaries();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2863) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2864)         if ($this->sign_key_file) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2865)             $body .= $this->getMailMIME() . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2866)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2867) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2868)         $this->setWordWrap();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2869) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2870)         $bodyEncoding = $this->Encoding;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2871)         $bodyCharSet = $this->CharSet;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2872)         //Can we do a 7-bit downgrade?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2873)         if (static::ENCODING_8BIT === $bodyEncoding && !$this->has8bitChars($this->Body)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2874)             $bodyEncoding = static::ENCODING_7BIT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2875)             //All ISO 8859, Windows codepage and UTF-8 charsets are ascii compatible up to 7-bit
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2876)             $bodyCharSet = static::CHARSET_ASCII;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2877)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2878)         //If lines are too long, and we're not already using an encoding that will shorten them,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2879)         //change to quoted-printable transfer encoding for the body part only
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2880)         if (static::ENCODING_BASE64 !== $this->Encoding && static::hasLineLongerThanMax($this->Body)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2881)             $bodyEncoding = static::ENCODING_QUOTED_PRINTABLE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2882)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2883) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2884)         $altBodyEncoding = $this->Encoding;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2885)         $altBodyCharSet = $this->CharSet;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2886)         //Can we do a 7-bit downgrade?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2887)         if (static::ENCODING_8BIT === $altBodyEncoding && !$this->has8bitChars($this->AltBody)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2888)             $altBodyEncoding = static::ENCODING_7BIT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2889)             //All ISO 8859, Windows codepage and UTF-8 charsets are ascii compatible up to 7-bit
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2890)             $altBodyCharSet = static::CHARSET_ASCII;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2891)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2892)         //If lines are too long, and we're not already using an encoding that will shorten them,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2893)         //change to quoted-printable transfer encoding for the alt body part only
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2894)         if (static::ENCODING_BASE64 !== $altBodyEncoding && static::hasLineLongerThanMax($this->AltBody)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2895)             $altBodyEncoding = static::ENCODING_QUOTED_PRINTABLE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2896)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2897)         //Use this as a preamble in all multipart message types
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2898)         $mimepre = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2899)         switch ($this->message_type) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2900)             case 'inline':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2901)                 $body .= $mimepre;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2902)                 $body .= $this->getBoundary($this->boundary[1], $bodyCharSet, '', $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2903)                 $body .= $this->encodeString($this->Body, $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2904)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2905)                 $body .= $this->attachAll('inline', $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2906)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2907)             case 'attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2908)                 $body .= $mimepre;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2909)                 $body .= $this->getBoundary($this->boundary[1], $bodyCharSet, '', $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2910)                 $body .= $this->encodeString($this->Body, $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2911)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2912)                 $body .= $this->attachAll('attachment', $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2913)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2914)             case 'inline_attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2915)                 $body .= $mimepre;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2916)                 $body .= $this->textLine('--' . $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2917)                 $body .= $this->headerLine('Content-Type', static::CONTENT_TYPE_MULTIPART_RELATED . ';');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2918)                 $body .= $this->textLine(' boundary="' . $this->boundary[2] . '";');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2919)                 $body .= $this->textLine(' type="' . static::CONTENT_TYPE_TEXT_HTML . '"');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2920)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2921)                 $body .= $this->getBoundary($this->boundary[2], $bodyCharSet, '', $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2922)                 $body .= $this->encodeString($this->Body, $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2923)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2924)                 $body .= $this->attachAll('inline', $this->boundary[2]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2925)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2926)                 $body .= $this->attachAll('attachment', $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2927)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2928)             case 'alt':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2929)                 $body .= $mimepre;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2930)                 $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2931)                     $this->boundary[1],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2932)                     $altBodyCharSet,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2933)                     static::CONTENT_TYPE_PLAINTEXT,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2934)                     $altBodyEncoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2935)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2936)                 $body .= $this->encodeString($this->AltBody, $altBodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2937)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2938)                 $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2939)                     $this->boundary[1],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2940)                     $bodyCharSet,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2941)                     static::CONTENT_TYPE_TEXT_HTML,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2942)                     $bodyEncoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2943)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2944)                 $body .= $this->encodeString($this->Body, $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2945)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2946)                 if (!empty($this->Ical)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2947)                     $method = static::ICAL_METHOD_REQUEST;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2948)                     foreach (static::$IcalMethods as $imethod) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2949)                         if (stripos($this->Ical, 'METHOD:' . $imethod) !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2950)                             $method = $imethod;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2951)                             break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2952)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2953)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2954)                     $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2955)                         $this->boundary[1],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2956)                         '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2957)                         static::CONTENT_TYPE_TEXT_CALENDAR . '; method=' . $method,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2958)                         ''
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2959)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2960)                     $body .= $this->encodeString($this->Ical, $this->Encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2961)                     $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2962)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2963)                 $body .= $this->endBoundary($this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2964)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2965)             case 'alt_inline':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2966)                 $body .= $mimepre;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2967)                 $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2968)                     $this->boundary[1],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2969)                     $altBodyCharSet,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2970)                     static::CONTENT_TYPE_PLAINTEXT,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2971)                     $altBodyEncoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2972)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2973)                 $body .= $this->encodeString($this->AltBody, $altBodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2974)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2975)                 $body .= $this->textLine('--' . $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2976)                 $body .= $this->headerLine('Content-Type', static::CONTENT_TYPE_MULTIPART_RELATED . ';');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2977)                 $body .= $this->textLine(' boundary="' . $this->boundary[2] . '";');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2978)                 $body .= $this->textLine(' type="' . static::CONTENT_TYPE_TEXT_HTML . '"');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2979)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2980)                 $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2981)                     $this->boundary[2],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2982)                     $bodyCharSet,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2983)                     static::CONTENT_TYPE_TEXT_HTML,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2984)                     $bodyEncoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2985)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2986)                 $body .= $this->encodeString($this->Body, $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2987)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2988)                 $body .= $this->attachAll('inline', $this->boundary[2]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2989)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2990)                 $body .= $this->endBoundary($this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2991)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2992)             case 'alt_attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2993)                 $body .= $mimepre;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2994)                 $body .= $this->textLine('--' . $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2995)                 $body .= $this->headerLine('Content-Type', static::CONTENT_TYPE_MULTIPART_ALTERNATIVE . ';');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2996)                 $body .= $this->textLine(' boundary="' . $this->boundary[2] . '"');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2997)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2998)                 $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2999)                     $this->boundary[2],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3000)                     $altBodyCharSet,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3001)                     static::CONTENT_TYPE_PLAINTEXT,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3002)                     $altBodyEncoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3003)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3004)                 $body .= $this->encodeString($this->AltBody, $altBodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3005)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3006)                 $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3007)                     $this->boundary[2],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3008)                     $bodyCharSet,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3009)                     static::CONTENT_TYPE_TEXT_HTML,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3010)                     $bodyEncoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3011)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3012)                 $body .= $this->encodeString($this->Body, $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3013)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3014)                 if (!empty($this->Ical)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3015)                     $method = static::ICAL_METHOD_REQUEST;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3016)                     foreach (static::$IcalMethods as $imethod) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3017)                         if (stripos($this->Ical, 'METHOD:' . $imethod) !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3018)                             $method = $imethod;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3019)                             break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3020)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3021)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3022)                     $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3023)                         $this->boundary[2],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3024)                         '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3025)                         static::CONTENT_TYPE_TEXT_CALENDAR . '; method=' . $method,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3026)                         ''
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3027)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3028)                     $body .= $this->encodeString($this->Ical, $this->Encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3029)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3030)                 $body .= $this->endBoundary($this->boundary[2]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3031)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3032)                 $body .= $this->attachAll('attachment', $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3033)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3034)             case 'alt_inline_attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3035)                 $body .= $mimepre;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3036)                 $body .= $this->textLine('--' . $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3037)                 $body .= $this->headerLine('Content-Type', static::CONTENT_TYPE_MULTIPART_ALTERNATIVE . ';');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3038)                 $body .= $this->textLine(' boundary="' . $this->boundary[2] . '"');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3039)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3040)                 $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3041)                     $this->boundary[2],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3042)                     $altBodyCharSet,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3043)                     static::CONTENT_TYPE_PLAINTEXT,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3044)                     $altBodyEncoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3045)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3046)                 $body .= $this->encodeString($this->AltBody, $altBodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3047)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3048)                 $body .= $this->textLine('--' . $this->boundary[2]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3049)                 $body .= $this->headerLine('Content-Type', static::CONTENT_TYPE_MULTIPART_RELATED . ';');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3050)                 $body .= $this->textLine(' boundary="' . $this->boundary[3] . '";');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3051)                 $body .= $this->textLine(' type="' . static::CONTENT_TYPE_TEXT_HTML . '"');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3052)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3053)                 $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3054)                     $this->boundary[3],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3055)                     $bodyCharSet,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3056)                     static::CONTENT_TYPE_TEXT_HTML,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3057)                     $bodyEncoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3058)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3059)                 $body .= $this->encodeString($this->Body, $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3060)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3061)                 $body .= $this->attachAll('inline', $this->boundary[3]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3062)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3063)                 $body .= $this->endBoundary($this->boundary[2]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3064)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3065)                 $body .= $this->attachAll('attachment', $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3066)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3067)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3068)                 //Catch case 'plain' and case '', applies to simple `text/plain` and `text/html` body content types
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3069)                 //Reset the `Encoding` property in case we changed it for line length reasons
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3070)                 $this->Encoding = $bodyEncoding;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3071)                 $body .= $this->encodeString($this->Body, $this->Encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3072)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3073)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3074) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3075)         if ($this->isError()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3076)             $body = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3077)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3078)                 throw new Exception($this->lang('empty_message'), self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3079)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3080)         } elseif ($this->sign_key_file) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3081)             try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3082)                 if (!defined('PKCS7_TEXT')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3083)                     throw new Exception($this->lang('extension_missing') . 'openssl');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3084)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3085) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3086)                 $file = tempnam(sys_get_temp_dir(), 'srcsign');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3087)                 $signed = tempnam(sys_get_temp_dir(), 'mailsign');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3088)                 file_put_contents($file, $body);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3089) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3090)                 //Workaround for PHP bug https://bugs.php.net/bug.php?id=69197
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3091)                 if (empty($this->sign_extracerts_file)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3092)                     $sign = @openssl_pkcs7_sign(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3093)                         $file,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3094)                         $signed,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3095)                         'file://' . realpath($this->sign_cert_file),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3096)                         ['file://' . realpath($this->sign_key_file), $this->sign_key_pass],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3097)                         []
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3098)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3099)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3100)                     $sign = @openssl_pkcs7_sign(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3101)                         $file,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3102)                         $signed,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3103)                         'file://' . realpath($this->sign_cert_file),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3104)                         ['file://' . realpath($this->sign_key_file), $this->sign_key_pass],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3105)                         [],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3106)                         PKCS7_DETACHED,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3107)                         $this->sign_extracerts_file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3108)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3109)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3110) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3111)                 @unlink($file);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3112)                 if ($sign) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3113)                     $body = file_get_contents($signed);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3114)                     @unlink($signed);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3115)                     //The message returned by openssl contains both headers and body, so need to split them up
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3116)                     $parts = explode("\n\n", $body, 2);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3117)                     $this->MIMEHeader .= $parts[0] . static::$LE . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3118)                     $body = $parts[1];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3119)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3120)                     @unlink($signed);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3121)                     throw new Exception($this->lang('signing') . openssl_error_string());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3122)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3123)             } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3124)                 $body = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3125)                 if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3126)                     throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3127)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3128)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3129)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3130) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3131)         return $body;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3132)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3133) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3134)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3135)      * Get the boundaries that this message will use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3136)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3137)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3138)     public function getBoundaries()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3139)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3140)         if (empty($this->boundary)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3141)             $this->setBoundaries();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3142)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3143)         return $this->boundary;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3144)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3145) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3146)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3147)      * Return the start of a message boundary.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3148)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3149)      * @param string $boundary
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3150)      * @param string $charSet
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3151)      * @param string $contentType
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3152)      * @param string $encoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3153)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3154)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3155)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3156)     protected function getBoundary($boundary, $charSet, $contentType, $encoding)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3157)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3158)         $result = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3159)         if ('' === $charSet) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3160)             $charSet = $this->CharSet;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3161)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3162)         if ('' === $contentType) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3163)             $contentType = $this->ContentType;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3164)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3165)         if ('' === $encoding) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3166)             $encoding = $this->Encoding;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3167)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3168)         $result .= $this->textLine('--' . $boundary);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3169)         $result .= sprintf('Content-Type: %s; charset=%s', $contentType, $charSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3170)         $result .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3171)         //RFC1341 part 5 says 7bit is assumed if not specified
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3172)         if (static::ENCODING_7BIT !== $encoding) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3173)             $result .= $this->headerLine('Content-Transfer-Encoding', $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3174)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3175)         $result .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3176) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3177)         return $result;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3178)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3179) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3180)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3181)      * Return the end of a message boundary.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3182)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3183)      * @param string $boundary
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3184)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3185)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3186)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3187)     protected function endBoundary($boundary)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3188)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3189)         return static::$LE . '--' . $boundary . '--' . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3190)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3191) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3192)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3193)      * Set the message type.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3194)      * PHPMailer only supports some preset message types, not arbitrary MIME structures.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3195)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3196)     protected function setMessageType()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3197)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3198)         $type = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3199)         if ($this->alternativeExists()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3200)             $type[] = 'alt';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3201)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3202)         if ($this->inlineImageExists()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3203)             $type[] = 'inline';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3204)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3205)         if ($this->attachmentExists()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3206)             $type[] = 'attach';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3207)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3208)         $this->message_type = implode('_', $type);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3209)         if ('' === $this->message_type) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3210)             //The 'plain' message_type refers to the message having a single body element, not that it is plain-text
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3211)             $this->message_type = 'plain';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3212)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3213)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3214) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3215)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3216)      * Format a header line.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3217)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3218)      * @param string     $name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3219)      * @param string|int $value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3220)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3221)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3222)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3223)     public function headerLine($name, $value)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3224)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3225)         return $name . ': ' . $value . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3226)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3227) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3228)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3229)      * Return a formatted mail line.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3230)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3231)      * @param string $value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3232)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3233)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3234)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3235)     public function textLine($value)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3236)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3237)         return $value . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3238)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3239) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3240)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3241)      * Add an attachment from a path on the filesystem.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3242)      * Never use a user-supplied path to a file!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3243)      * Returns false if the file could not be found or read.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3244)      * Explicitly *does not* support passing URLs; PHPMailer is not an HTTP client.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3245)      * If you need to do that, fetch the resource yourself and pass it in via a local file or string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3246)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3247)      * @param string $path        Path to the attachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3248)      * @param string $name        Overrides the attachment name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3249)      * @param string $encoding    File encoding (see $Encoding)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3250)      * @param string $type        MIME type, e.g. `image/jpeg`; determined automatically from $path if not specified
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3251)      * @param string $disposition Disposition to use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3252)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3253)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3254)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3255)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3256)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3257)     public function addAttachment(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3258)         $path,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3259)         $name = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3260)         $encoding = self::ENCODING_BASE64,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3261)         $type = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3262)         $disposition = 'attachment'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3263)     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3264)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3265)             if (!static::fileIsAccessible($path)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3266)                 throw new Exception($this->lang('file_access') . $path, self::STOP_CONTINUE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3267)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3268) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3269)             //If a MIME type is not specified, try to work it out from the file name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3270)             if ('' === $type) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3271)                 $type = static::filenameToType($path);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3272)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3273) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3274)             $filename = (string) static::mb_pathinfo($path, PATHINFO_BASENAME);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3275)             if ('' === $name) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3276)                 $name = $filename;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3277)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3278)             if (!$this->validateEncoding($encoding)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3279)                 throw new Exception($this->lang('encoding') . $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3280)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3281) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3282)             $this->attachment[] = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3283)                 0 => $path,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3284)                 1 => $filename,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3285)                 2 => $name,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3286)                 3 => $encoding,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3287)                 4 => $type,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3288)                 5 => false, //isStringAttachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3289)                 6 => $disposition,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3290)                 7 => $name,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3291)             ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3292)         } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3293)             $this->setError($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3294)             $this->edebug($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3295)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3296)                 throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3297)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3298) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3299)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3300)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3301) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3302)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3303)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3304) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3305)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3306)      * Return the array of attachments.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3307)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3308)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3309)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3310)     public function getAttachments()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3311)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3312)         return $this->attachment;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3313)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3314) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3315)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3316)      * Attach all file, string, and binary attachments to the message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3317)      * Returns an empty string on failure.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3318)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3319)      * @param string $disposition_type
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3320)      * @param string $boundary
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3321)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3322)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3323)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3324)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3325)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3326)     protected function attachAll($disposition_type, $boundary)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3327)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3328)         //Return text of body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3329)         $mime = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3330)         $cidUniq = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3331)         $incl = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3332) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3333)         //Add all attachments
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3334)         foreach ($this->attachment as $attachment) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3335)             //Check if it is a valid disposition_filter
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3336)             if ($attachment[6] === $disposition_type) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3337)                 //Check for string attachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3338)                 $string = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3339)                 $path = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3340)                 $bString = $attachment[5];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3341)                 if ($bString) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3342)                     $string = $attachment[0];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3343)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3344)                     $path = $attachment[0];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3345)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3346) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3347)                 $inclhash = hash('sha256', serialize($attachment));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3348)                 if (in_array($inclhash, $incl, true)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3349)                     continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3350)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3351)                 $incl[] = $inclhash;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3352)                 $name = $attachment[2];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3353)                 $encoding = $attachment[3];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3354)                 $type = $attachment[4];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3355)                 $disposition = $attachment[6];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3356)                 $cid = $attachment[7];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3357)                 if ('inline' === $disposition && array_key_exists($cid, $cidUniq)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3358)                     continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3359)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3360)                 $cidUniq[$cid] = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3361) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3362)                 $mime[] = sprintf('--%s%s', $boundary, static::$LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3363)                 //Only include a filename property if we have one
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3364)                 if (!empty($name)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3365)                     $mime[] = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3366)                         'Content-Type: %s; name=%s%s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3367)                         $type,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3368)                         static::quotedString($this->encodeHeader($this->secureHeader($name))),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3369)                         static::$LE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3370)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3371)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3372)                     $mime[] = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3373)                         'Content-Type: %s%s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3374)                         $type,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3375)                         static::$LE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3376)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3377)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3378)                 //RFC1341 part 5 says 7bit is assumed if not specified
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3379)                 if (static::ENCODING_7BIT !== $encoding) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3380)                     $mime[] = sprintf('Content-Transfer-Encoding: %s%s', $encoding, static::$LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3381)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3382) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3383)                 //Only set Content-IDs on inline attachments
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3384)                 if ((string) $cid !== '' && $disposition === 'inline') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3385)                     $mime[] = 'Content-ID: <' . $this->encodeHeader($this->secureHeader($cid)) . '>' . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3386)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3387) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3388)                 //Allow for bypassing the Content-Disposition header
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3389)                 if (!empty($disposition)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3390)                     $encoded_name = $this->encodeHeader($this->secureHeader($name));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3391)                     if (!empty($encoded_name)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3392)                         $mime[] = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3393)                             'Content-Disposition: %s; filename=%s%s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3394)                             $disposition,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3395)                             static::quotedString($encoded_name),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3396)                             static::$LE . static::$LE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3397)                         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3398)                     } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3399)                         $mime[] = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3400)                             'Content-Disposition: %s%s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3401)                             $disposition,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3402)                             static::$LE . static::$LE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3403)                         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3404)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3405)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3406)                     $mime[] = static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3407)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3408) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3409)                 //Encode as string attachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3410)                 if ($bString) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3411)                     $mime[] = $this->encodeString($string, $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3412)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3413)                     $mime[] = $this->encodeFile($path, $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3414)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3415)                 if ($this->isError()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3416)                     return '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3417)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3418)                 $mime[] = static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3419)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3420)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3421) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3422)         $mime[] = sprintf('--%s--%s', $boundary, static::$LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3423) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3424)         return implode('', $mime);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3425)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3426) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3427)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3428)      * Encode a file attachment in requested format.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3429)      * Returns an empty string on failure.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3430)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3431)      * @param string $path     The full path to the file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3432)      * @param string $encoding The encoding to use; one of 'base64', '7bit', '8bit', 'binary', 'quoted-printable'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3433)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3434)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3435)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3436)     protected function encodeFile($path, $encoding = self::ENCODING_BASE64)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3437)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3438)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3439)             if (!static::fileIsAccessible($path)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3440)                 throw new Exception($this->lang('file_open') . $path, self::STOP_CONTINUE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3441)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3442)             $file_buffer = file_get_contents($path);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3443)             if (false === $file_buffer) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3444)                 throw new Exception($this->lang('file_open') . $path, self::STOP_CONTINUE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3445)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3446)             $file_buffer = $this->encodeString($file_buffer, $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3447) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3448)             return $file_buffer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3449)         } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3450)             $this->setError($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3451)             $this->edebug($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3452)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3453)                 throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3454)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3455) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3456)             return '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3457)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3458)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3459) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3460)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3461)      * Encode a string in requested format.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3462)      * Returns an empty string on failure.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3463)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3464)      * @param string $str      The text to encode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3465)      * @param string $encoding The encoding to use; one of 'base64', '7bit', '8bit', 'binary', 'quoted-printable'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3466)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3467)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3468)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3469)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3470)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3471)     public function encodeString($str, $encoding = self::ENCODING_BASE64)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3472)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3473)         $encoded = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3474)         switch (strtolower($encoding)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3475)             case static::ENCODING_BASE64:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3476)                 $encoded = chunk_split(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3477)                     base64_encode($str),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3478)                     static::STD_LINE_LENGTH,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3479)                     static::$LE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3480)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3481)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3482)             case static::ENCODING_7BIT:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3483)             case static::ENCODING_8BIT:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3484)                 $encoded = static::normalizeBreaks($str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3485)                 //Make sure it ends with a line break
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3486)                 if (substr($encoded, -(strlen(static::$LE))) !== static::$LE) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3487)                     $encoded .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3488)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3489)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3490)             case static::ENCODING_BINARY:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3491)                 $encoded = $str;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3492)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3493)             case static::ENCODING_QUOTED_PRINTABLE:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3494)                 $encoded = $this->encodeQP($str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3495)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3496)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3497)                 $this->setError($this->lang('encoding') . $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3498)                 if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3499)                     throw new Exception($this->lang('encoding') . $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3500)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3501)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3502)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3503) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3504)         return $encoded;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3505)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3506) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3507)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3508)      * Encode a header value (not including its label) optimally.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3509)      * Picks shortest of Q, B, or none. Result includes folding if needed.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3510)      * See RFC822 definitions for phrase, comment and text positions.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3511)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3512)      * @param string $str      The header value to encode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3513)      * @param string $position What context the string will be used in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3514)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3515)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3516)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3517)     public function encodeHeader($str, $position = 'text')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3518)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3519)         $matchcount = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3520)         switch (strtolower($position)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3521)             case 'phrase':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3522)                 if (!preg_match('/[\200-\377]/', $str)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3523)                     //Can't use addslashes as we don't know the value of magic_quotes_sybase
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3524)                     $encoded = addcslashes($str, "\0..\37\177\\\"");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3525)                     if (($str === $encoded) && !preg_match('/[^A-Za-z0-9!#$%&\'*+\/=?^_`{|}~ -]/', $str)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3526)                         return $encoded;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3527)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3528) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3529)                     return "\"$encoded\"";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3530)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3531)                 $matchcount = preg_match_all('/[^\040\041\043-\133\135-\176]/', $str, $matches);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3532)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3533)             /* @noinspection PhpMissingBreakStatementInspection */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3534)             case 'comment':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3535)                 $matchcount = preg_match_all('/[()"]/', $str, $matches);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3536)             //fallthrough
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3537)             case 'text':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3538)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3539)                 $matchcount += preg_match_all('/[\000-\010\013\014\016-\037\177-\377]/', $str, $matches);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3540)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3541)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3542) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3543)         if ($this->has8bitChars($str)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3544)             $charset = $this->CharSet;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3545)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3546)             $charset = static::CHARSET_ASCII;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3547)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3548) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3549)         //Q/B encoding adds 8 chars and the charset ("` =?<charset>?[QB]?<content>?=`").
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3550)         $overhead = 8 + strlen($charset);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3551) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3552)         if ('mail' === $this->Mailer) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3553)             $maxlen = static::MAIL_MAX_LINE_LENGTH - $overhead;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3554)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3555)             $maxlen = static::MAX_LINE_LENGTH - $overhead;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3556)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3557) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3558)         //Select the encoding that produces the shortest output and/or prevents corruption.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3559)         if ($matchcount > strlen($str) / 3) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3560)             //More than 1/3 of the content needs encoding, use B-encode.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3561)             $encoding = 'B';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3562)         } elseif ($matchcount > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3563)             //Less than 1/3 of the content needs encoding, use Q-encode.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3564)             $encoding = 'Q';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3565)         } elseif (strlen($str) > $maxlen) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3566)             //No encoding needed, but value exceeds max line length, use Q-encode to prevent corruption.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3567)             $encoding = 'Q';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3568)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3569)             //No reformatting needed
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3570)             $encoding = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3571)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3572) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3573)         switch ($encoding) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3574)             case 'B':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3575)                 if ($this->hasMultiBytes($str)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3576)                     //Use a custom function which correctly encodes and wraps long
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3577)                     //multibyte strings without breaking lines within a character
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3578)                     $encoded = $this->base64EncodeWrapMB($str, "\n");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3579)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3580)                     $encoded = base64_encode($str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3581)                     $maxlen -= $maxlen % 4;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3582)                     $encoded = trim(chunk_split($encoded, $maxlen, "\n"));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3583)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3584)                 $encoded = preg_replace('/^(.*)$/m', ' =?' . $charset . "?$encoding?\\1?=", $encoded);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3585)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3586)             case 'Q':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3587)                 $encoded = $this->encodeQ($str, $position);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3588)                 $encoded = $this->wrapText($encoded, $maxlen, true);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3589)                 $encoded = str_replace('=' . static::$LE, "\n", trim($encoded));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3590)                 $encoded = preg_replace('/^(.*)$/m', ' =?' . $charset . "?$encoding?\\1?=", $encoded);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3591)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3592)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3593)                 return $str;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3594)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3595) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3596)         return trim(static::normalizeBreaks($encoded));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3597)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3598) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3599)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3600)      * Check if a string contains multi-byte characters.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3601)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3602)      * @param string $str multi-byte text to wrap encode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3603)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3604)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3605)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3606)     public function hasMultiBytes($str)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3607)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3608)         if (function_exists('mb_strlen')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3609)             return strlen($str) > mb_strlen($str, $this->CharSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3610)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3611) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3612)         //Assume no multibytes (we can't handle without mbstring functions anyway)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3613)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3614)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3615) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3616)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3617)      * Does a string contain any 8-bit chars (in any charset)?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3618)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3619)      * @param string $text
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3620)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3621)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3622)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3623)     public function has8bitChars($text)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3624)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3625)         return (bool) preg_match('/[\x80-\xFF]/', $text);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3626)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3627) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3628)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3629)      * Encode and wrap long multibyte strings for mail headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3630)      * without breaking lines within a character.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3631)      * Adapted from a function by paravoid.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3632)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3633)      * @see https://www.php.net/manual/en/function.mb-encode-mimeheader.php#60283
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3634)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3635)      * @param string $str       multi-byte text to wrap encode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3636)      * @param string $linebreak string to use as linefeed/end-of-line
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3637)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3638)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3639)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3640)     public function base64EncodeWrapMB($str, $linebreak = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3641)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3642)         $start = '=?' . $this->CharSet . '?B?';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3643)         $end = '?=';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3644)         $encoded = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3645)         if (null === $linebreak) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3646)             $linebreak = static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3647)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3648) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3649)         $mb_length = mb_strlen($str, $this->CharSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3650)         //Each line must have length <= 75, including $start and $end
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3651)         $length = 75 - strlen($start) - strlen($end);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3652)         //Average multi-byte ratio
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3653)         $ratio = $mb_length / strlen($str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3654)         //Base64 has a 4:3 ratio
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3655)         $avgLength = floor($length * $ratio * .75);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3656) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3657)         $offset = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3658)         for ($i = 0; $i < $mb_length; $i += $offset) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3659)             $lookBack = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3660)             do {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3661)                 $offset = $avgLength - $lookBack;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3662)                 $chunk = mb_substr($str, $i, $offset, $this->CharSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3663)                 $chunk = base64_encode($chunk);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3664)                 ++$lookBack;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3665)             } while (strlen($chunk) > $length);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3666)             $encoded .= $chunk . $linebreak;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3667)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3668) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3669)         //Chomp the last linefeed
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3670)         return substr($encoded, 0, -strlen($linebreak));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3671)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3672) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3673)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3674)      * Encode a string in quoted-printable format.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3675)      * According to RFC2045 section 6.7.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3676)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3677)      * @param string $string The text to encode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3678)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3679)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3680)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3681)     public function encodeQP($string)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3682)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3683)         return static::normalizeBreaks(quoted_printable_encode($string));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3684)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3685) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3686)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3687)      * Encode a string using Q encoding.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3688)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3689)      * @see https://www.rfc-editor.org/rfc/rfc2047#section-4.2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3690)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3691)      * @param string $str      the text to encode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3692)      * @param string $position Where the text is going to be used, see the RFC for what that means
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3693)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3694)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3695)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3696)     public function encodeQ($str, $position = 'text')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3697)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3698)         //There should not be any EOL in the string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3699)         $pattern = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3700)         $encoded = str_replace(["\r", "\n"], '', $str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3701)         switch (strtolower($position)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3702)             case 'phrase':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3703)                 //RFC 2047 section 5.3
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3704)                 $pattern = '^A-Za-z0-9!*+\/ -';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3705)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3706)             /*
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3707)              * RFC 2047 section 5.2.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3708)              * Build $pattern without including delimiters and []
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3709)              */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3710)             /* @noinspection PhpMissingBreakStatementInspection */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3711)             case 'comment':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3712)                 $pattern = '\(\)"';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3713)             /* Intentional fall through */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3714)             case 'text':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3715)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3716)                 //RFC 2047 section 5.1
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3717)                 //Replace every high ascii, control, =, ? and _ characters
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3718)                 $pattern = '\000-\011\013\014\016-\037\075\077\137\177-\377' . $pattern;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3719)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3720)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3721)         $matches = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3722)         if (preg_match_all("/[{$pattern}]/", $encoded, $matches)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3723)             //If the string contains an '=', make sure it's the first thing we replace
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3724)             //so as to avoid double-encoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3725)             $eqkey = array_search('=', $matches[0], true);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3726)             if (false !== $eqkey) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3727)                 unset($matches[0][$eqkey]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3728)                 array_unshift($matches[0], '=');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3729)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3730)             foreach (array_unique($matches[0]) as $char) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3731)                 $encoded = str_replace($char, '=' . sprintf('%02X', ord($char)), $encoded);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3732)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3733)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3734)         //Replace spaces with _ (more readable than =20)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3735)         //RFC 2047 section 4.2(2)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3736)         return str_replace(' ', '_', $encoded);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3737)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3738) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3739)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3740)      * Add a string or binary attachment (non-filesystem).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3741)      * This method can be used to attach ascii or binary data,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3742)      * such as a BLOB record from a database.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3743)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3744)      * @param string $string      String attachment data
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3745)      * @param string $filename    Name of the attachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3746)      * @param string $encoding    File encoding (see $Encoding)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3747)      * @param string $type        File extension (MIME) type
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3748)      * @param string $disposition Disposition to use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3749)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3750)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3751)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3752)      * @return bool True on successfully adding an attachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3753)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3754)     public function addStringAttachment(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3755)         $string,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3756)         $filename,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3757)         $encoding = self::ENCODING_BASE64,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3758)         $type = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3759)         $disposition = 'attachment'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3760)     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3761)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3762)             //If a MIME type is not specified, try to work it out from the file name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3763)             if ('' === $type) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3764)                 $type = static::filenameToType($filename);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3765)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3766) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3767)             if (!$this->validateEncoding($encoding)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3768)                 throw new Exception($this->lang('encoding') . $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3769)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3770) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3771)             //Append to $attachment array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3772)             $this->attachment[] = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3773)                 0 => $string,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3774)                 1 => $filename,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3775)                 2 => static::mb_pathinfo($filename, PATHINFO_BASENAME),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3776)                 3 => $encoding,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3777)                 4 => $type,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3778)                 5 => true, //isStringAttachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3779)                 6 => $disposition,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3780)                 7 => 0,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3781)             ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3782)         } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3783)             $this->setError($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3784)             $this->edebug($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3785)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3786)                 throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3787)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3788) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3789)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3790)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3791) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3792)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3793)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3794) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3795)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3796)      * Add an embedded (inline) attachment from a file.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3797)      * This can include images, sounds, and just about any other document type.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3798)      * These differ from 'regular' attachments in that they are intended to be
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3799)      * displayed inline with the message, not just attached for download.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3800)      * This is used in HTML messages that embed the images
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3801)      * the HTML refers to using the `$cid` value in `img` tags, for example `<img src="cid:mylogo">`.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3802)      * Never use a user-supplied path to a file!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3803)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3804)      * @param string $path        Path to the attachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3805)      * @param string $cid         Content ID of the attachment; Use this to reference
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3806)      *                            the content when using an embedded image in HTML
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3807)      * @param string $name        Overrides the attachment filename
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3808)      * @param string $encoding    File encoding (see $Encoding) defaults to `base64`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3809)      * @param string $type        File MIME type (by default mapped from the `$path` filename's extension)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3810)      * @param string $disposition Disposition to use: `inline` (default) or `attachment`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3811)      *                            (unlikely you want this – {@see `addAttachment()`} instead)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3812)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3813)      * @return bool True on successfully adding an attachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3814)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3815)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3816)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3817)     public function addEmbeddedImage(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3818)         $path,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3819)         $cid,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3820)         $name = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3821)         $encoding = self::ENCODING_BASE64,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3822)         $type = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3823)         $disposition = 'inline'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3824)     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3825)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3826)             if (!static::fileIsAccessible($path)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3827)                 throw new Exception($this->lang('file_access') . $path, self::STOP_CONTINUE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3828)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3829) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3830)             //If a MIME type is not specified, try to work it out from the file name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3831)             if ('' === $type) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3832)                 $type = static::filenameToType($path);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3833)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3834) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3835)             if (!$this->validateEncoding($encoding)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3836)                 throw new Exception($this->lang('encoding') . $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3837)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3838) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3839)             $filename = (string) static::mb_pathinfo($path, PATHINFO_BASENAME);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3840)             if ('' === $name) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3841)                 $name = $filename;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3842)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3843) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3844)             //Append to $attachment array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3845)             $this->attachment[] = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3846)                 0 => $path,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3847)                 1 => $filename,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3848)                 2 => $name,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3849)                 3 => $encoding,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3850)                 4 => $type,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3851)                 5 => false, //isStringAttachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3852)                 6 => $disposition,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3853)                 7 => $cid,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3854)             ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3855)         } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3856)             $this->setError($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3857)             $this->edebug($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3858)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3859)                 throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3860)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3861) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3862)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3863)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3864) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3865)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3866)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3867) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3868)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3869)      * Add an embedded stringified attachment.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3870)      * This can include images, sounds, and just about any other document type.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3871)      * If your filename doesn't contain an extension, be sure to set the $type to an appropriate MIME type.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3872)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3873)      * @param string $string      The attachment binary data
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3874)      * @param string $cid         Content ID of the attachment; Use this to reference
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3875)      *                            the content when using an embedded image in HTML
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3876)      * @param string $name        A filename for the attachment. If this contains an extension,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3877)      *                            PHPMailer will attempt to set a MIME type for the attachment.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3878)      *                            For example 'file.jpg' would get an 'image/jpeg' MIME type.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3879)      * @param string $encoding    File encoding (see $Encoding), defaults to 'base64'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3880)      * @param string $type        MIME type - will be used in preference to any automatically derived type
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3881)      * @param string $disposition Disposition to use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3882)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3883)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3884)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3885)      * @return bool True on successfully adding an attachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3886)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3887)     public function addStringEmbeddedImage(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3888)         $string,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3889)         $cid,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3890)         $name = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3891)         $encoding = self::ENCODING_BASE64,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3892)         $type = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3893)         $disposition = 'inline'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3894)     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3895)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3896)             //If a MIME type is not specified, try to work it out from the name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3897)             if ('' === $type && !empty($name)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3898)                 $type = static::filenameToType($name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3899)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3900) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3901)             if (!$this->validateEncoding($encoding)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3902)                 throw new Exception($this->lang('encoding') . $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3903)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3904) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3905)             //Append to $attachment array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3906)             $this->attachment[] = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3907)                 0 => $string,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3908)                 1 => $name,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3909)                 2 => $name,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3910)                 3 => $encoding,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3911)                 4 => $type,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3912)                 5 => true, //isStringAttachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3913)                 6 => $disposition,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3914)                 7 => $cid,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3915)             ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3916)         } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3917)             $this->setError($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3918)             $this->edebug($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3919)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3920)                 throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3921)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3922) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3923)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3924)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3925) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3926)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3927)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3928) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3929)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3930)      * Validate encodings.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3931)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3932)      * @param string $encoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3933)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3934)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3935)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3936)     protected function validateEncoding($encoding)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3937)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3938)         return in_array(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3939)             $encoding,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3940)             [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3941)                 self::ENCODING_7BIT,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3942)                 self::ENCODING_QUOTED_PRINTABLE,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3943)                 self::ENCODING_BASE64,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3944)                 self::ENCODING_8BIT,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3945)                 self::ENCODING_BINARY,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3946)             ],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3947)             true
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3948)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3949)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3950) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3951)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3952)      * Check if an embedded attachment is present with this cid.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3953)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3954)      * @param string $cid
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3955)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3956)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3957)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3958)     protected function cidExists($cid)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3959)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3960)         foreach ($this->attachment as $attachment) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3961)             if ('inline' === $attachment[6] && $cid === $attachment[7]) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3962)                 return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3963)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3964)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3965) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3966)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3967)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3968) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3969)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3970)      * Check if an inline attachment is present.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3971)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3972)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3973)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3974)     public function inlineImageExists()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3975)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3976)         foreach ($this->attachment as $attachment) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3977)             if ('inline' === $attachment[6]) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3978)                 return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3979)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3980)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3981) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3982)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3983)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3984) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3985)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3986)      * Check if an attachment (non-inline) is present.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3987)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3988)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3989)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3990)     public function attachmentExists()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3991)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3992)         foreach ($this->attachment as $attachment) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3993)             if ('attachment' === $attachment[6]) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3994)                 return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3995)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3996)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3997) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3998)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3999)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4000) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4001)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4002)      * Check if this message has an alternative body set.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4003)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4004)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4005)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4006)     public function alternativeExists()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4007)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4008)         return !empty($this->AltBody);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4009)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4010) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4011)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4012)      * Clear queued addresses of given kind.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4013)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4014)      * @param string $kind 'to', 'cc', or 'bcc'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4015)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4016)     public function clearQueuedAddresses($kind)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4017)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4018)         $this->RecipientsQueue = array_filter(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4019)             $this->RecipientsQueue,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4020)             static function ($params) use ($kind) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4021)                 return $params[0] !== $kind;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4022)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4023)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4024)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4025) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4026)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4027)      * Clear all To recipients.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4028)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4029)     public function clearAddresses()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4030)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4031)         foreach ($this->to as $to) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4032)             unset($this->all_recipients[strtolower($to[0])]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4033)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4034)         $this->to = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4035)         $this->clearQueuedAddresses('to');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4036)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4037) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4038)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4039)      * Clear all CC recipients.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4040)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4041)     public function clearCCs()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4042)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4043)         foreach ($this->cc as $cc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4044)             unset($this->all_recipients[strtolower($cc[0])]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4045)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4046)         $this->cc = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4047)         $this->clearQueuedAddresses('cc');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4048)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4049) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4050)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4051)      * Clear all BCC recipients.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4052)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4053)     public function clearBCCs()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4054)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4055)         foreach ($this->bcc as $bcc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4056)             unset($this->all_recipients[strtolower($bcc[0])]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4057)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4058)         $this->bcc = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4059)         $this->clearQueuedAddresses('bcc');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4060)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4061) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4062)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4063)      * Clear all ReplyTo recipients.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4064)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4065)     public function clearReplyTos()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4066)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4067)         $this->ReplyTo = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4068)         $this->ReplyToQueue = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4069)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4070) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4071)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4072)      * Clear all recipient types.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4073)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4074)     public function clearAllRecipients()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4075)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4076)         $this->to = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4077)         $this->cc = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4078)         $this->bcc = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4079)         $this->all_recipients = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4080)         $this->RecipientsQueue = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4081)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4082) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4083)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4084)      * Clear all filesystem, string, and binary attachments.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4085)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4086)     public function clearAttachments()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4087)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4088)         $this->attachment = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4089)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4090) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4091)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4092)      * Clear all custom headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4093)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4094)     public function clearCustomHeaders()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4095)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4096)         $this->CustomHeader = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4097)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4098) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4099)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4100)      * Clear a specific custom header by name or name and value.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4101)      * $name value can be overloaded to contain
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4102)      * both header name and value (name:value).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4103)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4104)      * @param string      $name  Custom header name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4105)      * @param string|null $value Header value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4106)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4107)      * @return bool True if a header was replaced successfully
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4108)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4109)     public function clearCustomHeader($name, $value = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4110)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4111)         if (null === $value && strpos($name, ':') !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4112)             //Value passed in as name:value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4113)             list($name, $value) = explode(':', $name, 2);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4114)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4115)         $name = trim($name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4116)         $value = (null === $value) ? null : trim($value);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4117) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4118)         foreach ($this->CustomHeader as $k => $pair) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4119)             if ($pair[0] == $name) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4120)                 // We remove the header if the value is not provided or it matches.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4121)                 if (null === $value ||  $pair[1] == $value) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4122)                     unset($this->CustomHeader[$k]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4123)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4124)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4125)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4126) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4127)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4128)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4129) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4130)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4131)      * Replace a custom header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4132)      * $name value can be overloaded to contain
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4133)      * both header name and value (name:value).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4134)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4135)      * @param string      $name  Custom header name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4136)      * @param string|null $value Header value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4137)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4138)      * @return bool True if a header was replaced successfully
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4139)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4140)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4141)     public function replaceCustomHeader($name, $value = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4142)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4143)         if (null === $value && strpos($name, ':') !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4144)             //Value passed in as name:value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4145)             list($name, $value) = explode(':', $name, 2);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4146)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4147)         $name = trim($name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4148)         $value = (null === $value) ? '' : trim($value);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4149) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4150)         $replaced = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4151)         foreach ($this->CustomHeader as $k => $pair) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4152)             if ($pair[0] == $name) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4153)                 if ($replaced) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4154)                     unset($this->CustomHeader[$k]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4155)                     continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4156)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4157)                 if (strpbrk($name . $value, "\r\n") !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4158)                     if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4159)                         throw new Exception($this->lang('invalid_header'));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4160)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4161) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4162)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4163)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4164)                 $this->CustomHeader[$k] = [$name, $value];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4165)                 $replaced = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4166)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4167)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4168) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4169)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4170)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4171) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4172)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4173)      * Add an error message to the error container.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4174)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4175)      * @param string $msg
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4176)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4177)     protected function setError($msg)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4178)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4179)         ++$this->error_count;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4180)         if ('smtp' === $this->Mailer && null !== $this->smtp) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4181)             $lasterror = $this->smtp->getError();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4182)             if (!empty($lasterror['error'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4183)                 $msg .= $this->lang('smtp_error') . $lasterror['error'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4184)                 if (!empty($lasterror['detail'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4185)                     $msg .= ' ' . $this->lang('smtp_detail') . $lasterror['detail'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4186)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4187)                 if (!empty($lasterror['smtp_code'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4188)                     $msg .= ' ' . $this->lang('smtp_code') . $lasterror['smtp_code'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4189)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4190)                 if (!empty($lasterror['smtp_code_ex'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4191)                     $msg .= ' ' . $this->lang('smtp_code_ex') . $lasterror['smtp_code_ex'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4192)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4193)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4194)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4195)         $this->ErrorInfo = $msg;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4196)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4197) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4198)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4199)      * Return an RFC 822 formatted date.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4200)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4201)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4202)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4203)     public static function rfcDate()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4204)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4205)         //Set the time zone to whatever the default is to avoid 500 errors
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4206)         //Will default to UTC if it's not set properly in php.ini
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4207)         date_default_timezone_set(@date_default_timezone_get());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4208) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4209)         return date('D, j M Y H:i:s O');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4210)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4211) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4212)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4213)      * Get the server hostname.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4214)      * Returns 'localhost.localdomain' if unknown.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4215)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4216)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4217)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4218)     protected function serverHostname()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4219)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4220)         $result = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4221)         if (!empty($this->Hostname)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4222)             $result = $this->Hostname;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4223)         } elseif (isset($_SERVER) && array_key_exists('SERVER_NAME', $_SERVER)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4224)             $result = $_SERVER['SERVER_NAME'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4225)         } elseif (function_exists('gethostname') && gethostname() !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4226)             $result = gethostname();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4227)         } elseif (php_uname('n') !== '') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4228)             $result = php_uname('n');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4229)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4230)         if (!static::isValidHost($result)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4231)             return 'localhost.localdomain';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4232)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4233) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4234)         return $result;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4235)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4236) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4237)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4238)      * Validate whether a string contains a valid value to use as a hostname or IP address.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4239)      * IPv6 addresses must include [], e.g. `[::1]`, not just `::1`.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4240)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4241)      * @param string $host The host name or IP address to check
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4242)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4243)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4244)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4245)     public static function isValidHost($host)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4246)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4247)         //Simple syntax limits
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4248)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4249)             empty($host)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4250)             || !is_string($host)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4251)             || strlen($host) > 256
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4252)             || !preg_match('/^([a-z\d.-]*|\[[a-f\d:]+\])$/i', $host)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4253)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4254)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4255)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4256)         //Looks like a bracketed IPv6 address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4257)         if (strlen($host) > 2 && substr($host, 0, 1) === '[' && substr($host, -1, 1) === ']') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4258)             return filter_var(substr($host, 1, -1), FILTER_VALIDATE_IP, FILTER_FLAG_IPV6) !== false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4259)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4260)         //If removing all the dots results in a numeric string, it must be an IPv4 address.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4261)         //Need to check this first because otherwise things like `999.0.0.0` are considered valid host names
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4262)         if (is_numeric(str_replace('.', '', $host))) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4263)             //Is it a valid IPv4 address?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4264)             return filter_var($host, FILTER_VALIDATE_IP, FILTER_FLAG_IPV4) !== false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4265)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4266)         //Is it a syntactically valid hostname (when embedded in a URL)?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4267)         return filter_var('https://' . $host, FILTER_VALIDATE_URL) !== false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4268)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4269) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4270)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4271)      * Get an error message in the current language.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4272)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4273)      * @param string $key
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4274)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4275)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4276)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4277)     protected function lang($key)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4278)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4279)         if (count($this->language) < 1) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4280)             $this->setLanguage(); //Set the default language
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4281)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4282) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4283)         if (array_key_exists($key, $this->language)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4284)             if ('smtp_connect_failed' === $key) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4285)                 //Include a link to troubleshooting docs on SMTP connection failure.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4286)                 //This is by far the biggest cause of support questions
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4287)                 //but it's usually not PHPMailer's fault.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4288)                 return $this->language[$key] . ' https://github.com/PHPMailer/PHPMailer/wiki/Troubleshooting';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4289)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4290) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4291)             return $this->language[$key];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4292)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4293) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4294)         //Return the key as a fallback
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4295)         return $key;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4296)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4297) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4298)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4299)      * Build an error message starting with a generic one and adding details if possible.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4300)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4301)      * @param string $base_key
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4302)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4303)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4304)     private function getSmtpErrorMessage($base_key)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4305)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4306)         $message = $this->lang($base_key);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4307)         $error = $this->smtp->getError();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4308)         if (!empty($error['error'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4309)             $message .= ' ' . $error['error'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4310)             if (!empty($error['detail'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4311)                 $message .= ' ' . $error['detail'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4312)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4313)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4314) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4315)         return $message;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4316)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4317) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4318)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4319)      * Check if an error occurred.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4320)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4321)      * @return bool True if an error did occur
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4322)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4323)     public function isError()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4324)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4325)         return $this->error_count > 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4326)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4327) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4328)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4329)      * Add a custom header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4330)      * $name value can be overloaded to contain
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4331)      * both header name and value (name:value).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4332)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4333)      * @param string      $name  Custom header name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4334)      * @param string|null $value Header value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4335)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4336)      * @return bool True if a header was set successfully
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4337)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4338)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4339)     public function addCustomHeader($name, $value = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4340)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4341)         if (null === $value && strpos($name, ':') !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4342)             //Value passed in as name:value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4343)             list($name, $value) = explode(':', $name, 2);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4344)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4345)         $name = trim($name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4346)         $value = (null === $value) ? '' : trim($value);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4347)         //Ensure name is not empty, and that neither name nor value contain line breaks
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4348)         if (empty($name) || strpbrk($name . $value, "\r\n") !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4349)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4350)                 throw new Exception($this->lang('invalid_header'));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4351)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4352) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4353)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4354)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4355)         $this->CustomHeader[] = [$name, $value];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4356) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4357)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4358)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4359) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4360)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4361)      * Returns all custom headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4362)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4363)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4364)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4365)     public function getCustomHeaders()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4366)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4367)         return $this->CustomHeader;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4368)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4369) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4370)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4371)      * Create a message body from an HTML string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4372)      * Automatically inlines images and creates a plain-text version by converting the HTML,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4373)      * overwriting any existing values in Body and AltBody.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4374)      * Do not source $message content from user input!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4375)      * $basedir is prepended when handling relative URLs, e.g. <img src="/images/a.png"> and must not be empty
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4376)      * will look for an image file in $basedir/images/a.png and convert it to inline.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4377)      * If you don't provide a $basedir, relative paths will be left untouched (and thus probably break in email)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4378)      * Converts data-uri images into embedded attachments.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4379)      * If you don't want to apply these transformations to your HTML, just set Body and AltBody directly.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4380)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4381)      * @param string        $message  HTML message string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4382)      * @param string        $basedir  Absolute path to a base directory to prepend to relative paths to images
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4383)      * @param bool|callable $advanced Whether to use the internal HTML to text converter
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4384)      *                                or your own custom converter
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4385)      * @return string The transformed message body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4386)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4387)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4388)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4389)      * @see PHPMailer::html2text()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4390)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4391)     public function msgHTML($message, $basedir = '', $advanced = false)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4392)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4393)         preg_match_all('/(?<!-)(src|background)=["\'](.*)["\']/Ui', $message, $images);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4394)         if (array_key_exists(2, $images)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4395)             if (strlen($basedir) > 1 && '/' !== substr($basedir, -1)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4396)                 //Ensure $basedir has a trailing /
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4397)                 $basedir .= '/';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4398)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4399)             foreach ($images[2] as $imgindex => $url) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4400)                 //Convert data URIs into embedded images
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4401)                 //e.g. "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4402)                 $match = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4403)                 if (preg_match('#^data:(image/(?:jpe?g|gif|png));?(base64)?,(.+)#', $url, $match)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4404)                     if (count($match) === 4 && static::ENCODING_BASE64 === $match[2]) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4405)                         $data = base64_decode($match[3]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4406)                     } elseif ('' === $match[2]) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4407)                         $data = rawurldecode($match[3]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4408)                     } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4409)                         //Not recognised so leave it alone
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4410)                         continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4411)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4412)                     //Hash the decoded data, not the URL, so that the same data-URI image used in multiple places
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4413)                     //will only be embedded once, even if it used a different encoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4414)                     $cid = substr(hash('sha256', $data), 0, 32) . '@phpmailer.0'; //RFC2392 S 2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4415) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4416)                     if (!$this->cidExists($cid)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4417)                         $this->addStringEmbeddedImage(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4418)                             $data,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4419)                             $cid,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4420)                             'embed' . $imgindex,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4421)                             static::ENCODING_BASE64,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4422)                             $match[1]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4423)                         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4424)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4425)                     $message = str_replace(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4426)                         $images[0][$imgindex],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4427)                         $images[1][$imgindex] . '="cid:' . $cid . '"',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4428)                         $message
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4429)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4430)                     continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4431)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4432)                 if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4433)                     //Only process relative URLs if a basedir is provided (i.e. no absolute local paths)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4434)                     !empty($basedir)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4435)                     //Ignore URLs containing parent dir traversal (..)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4436)                     && (strpos($url, '..') === false)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4437)                     //Do not change urls that are already inline images
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4438)                     && 0 !== strpos($url, 'cid:')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4439)                     //Do not change absolute URLs, including anonymous protocol
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4440)                     && !preg_match('#^[a-z][a-z0-9+.-]*:?//#i', $url)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4441)                 ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4442)                     $filename = static::mb_pathinfo($url, PATHINFO_BASENAME);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4443)                     $directory = dirname($url);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4444)                     if ('.' === $directory) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4445)                         $directory = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4446)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4447)                     //RFC2392 S 2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4448)                     $cid = substr(hash('sha256', $url), 0, 32) . '@phpmailer.0';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4449)                     if (strlen($basedir) > 1 && '/' !== substr($basedir, -1)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4450)                         $basedir .= '/';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4451)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4452)                     if (strlen($directory) > 1 && '/' !== substr($directory, -1)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4453)                         $directory .= '/';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4454)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4455)                     if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4456)                         $this->addEmbeddedImage(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4457)                             $basedir . $directory . $filename,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4458)                             $cid,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4459)                             $filename,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4460)                             static::ENCODING_BASE64,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4461)                             static::_mime_types((string) static::mb_pathinfo($filename, PATHINFO_EXTENSION))
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4462)                         )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4463)                     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4464)                         $message = preg_replace(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4465)                             '/' . $images[1][$imgindex] . '=["\']' . preg_quote($url, '/') . '["\']/Ui',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4466)                             $images[1][$imgindex] . '="cid:' . $cid . '"',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4467)                             $message
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4468)                         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4469)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4470)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4471)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4472)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4473)         $this->isHTML();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4474)         //Convert all message body line breaks to LE, makes quoted-printable encoding work much better
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4475)         $this->Body = static::normalizeBreaks($message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4476)         $this->AltBody = static::normalizeBreaks($this->html2text($message, $advanced));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4477)         if (!$this->alternativeExists()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4478)             $this->AltBody = 'This is an HTML-only message. To view it, activate HTML in your email application.'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4479)                 . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4480)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4481) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4482)         return $this->Body;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4483)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4484) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4485)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4486)      * Convert an HTML string into plain text.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4487)      * This is used by msgHTML().
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4488)      * Note - older versions of this function used a bundled advanced converter
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4489)      * which was removed for license reasons in #232.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4490)      * Example usage:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4491)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4492)      * ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4493)      * //Use default conversion
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4494)      * $plain = $mail->html2text($html);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4495)      * //Use your own custom converter
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4496)      * $plain = $mail->html2text($html, function($html) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4497)      *     $converter = new MyHtml2text($html);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4498)      *     return $converter->get_text();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4499)      * });
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4500)      * ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4501)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4502)      * @param string        $html     The HTML text to convert
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4503)      * @param bool|callable $advanced Any boolean value to use the internal converter,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4504)      *                                or provide your own callable for custom conversion.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4505)      *                                *Never* pass user-supplied data into this parameter
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4506)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4507)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4508)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4509)     public function html2text($html, $advanced = false)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4510)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4511)         if (is_callable($advanced)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4512)             return call_user_func($advanced, $html);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4513)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4514) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4515)         return html_entity_decode(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4516)             trim(strip_tags(preg_replace('/<(head|title|style|script)[^>]*>.*?<\/\\1>/si', '', $html))),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4517)             ENT_QUOTES,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4518)             $this->CharSet
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4519)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4520)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4521) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4522)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4523)      * Get the MIME type for a file extension.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4524)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4525)      * @param string $ext File extension
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4526)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4527)      * @return string MIME type of file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4528)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4529)     public static function _mime_types($ext = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4530)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4531)         $mimes = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4532)             'xl' => 'application/excel',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4533)             'js' => 'application/javascript',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4534)             'hqx' => 'application/mac-binhex40',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4535)             'cpt' => 'application/mac-compactpro',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4536)             'bin' => 'application/macbinary',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4537)             'doc' => 'application/msword',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4538)             'word' => 'application/msword',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4539)             'xlsx' => 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4540)             'xltx' => 'application/vnd.openxmlformats-officedocument.spreadsheetml.template',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4541)             'potx' => 'application/vnd.openxmlformats-officedocument.presentationml.template',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4542)             'ppsx' => 'application/vnd.openxmlformats-officedocument.presentationml.slideshow',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4543)             'pptx' => 'application/vnd.openxmlformats-officedocument.presentationml.presentation',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4544)             'sldx' => 'application/vnd.openxmlformats-officedocument.presentationml.slide',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4545)             'docx' => 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4546)             'dotx' => 'application/vnd.openxmlformats-officedocument.wordprocessingml.template',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4547)             'xlam' => 'application/vnd.ms-excel.addin.macroEnabled.12',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4548)             'xlsb' => 'application/vnd.ms-excel.sheet.binary.macroEnabled.12',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4549)             'class' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4550)             'dll' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4551)             'dms' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4552)             'exe' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4553)             'lha' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4554)             'lzh' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4555)             'psd' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4556)             'sea' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4557)             'so' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4558)             'oda' => 'application/oda',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4559)             'pdf' => 'application/pdf',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4560)             'ai' => 'application/postscript',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4561)             'eps' => 'application/postscript',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4562)             'ps' => 'application/postscript',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4563)             'smi' => 'application/smil',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4564)             'smil' => 'application/smil',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4565)             'mif' => 'application/vnd.mif',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4566)             'xls' => 'application/vnd.ms-excel',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4567)             'ppt' => 'application/vnd.ms-powerpoint',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4568)             'wbxml' => 'application/vnd.wap.wbxml',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4569)             'wmlc' => 'application/vnd.wap.wmlc',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4570)             'dcr' => 'application/x-director',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4571)             'dir' => 'application/x-director',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4572)             'dxr' => 'application/x-director',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4573)             'dvi' => 'application/x-dvi',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4574)             'gtar' => 'application/x-gtar',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4575)             'php3' => 'application/x-httpd-php',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4576)             'php4' => 'application/x-httpd-php',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4577)             'php' => 'application/x-httpd-php',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4578)             'phtml' => 'application/x-httpd-php',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4579)             'phps' => 'application/x-httpd-php-source',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4580)             'swf' => 'application/x-shockwave-flash',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4581)             'sit' => 'application/x-stuffit',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4582)             'tar' => 'application/x-tar',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4583)             'tgz' => 'application/x-tar',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4584)             'xht' => 'application/xhtml+xml',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4585)             'xhtml' => 'application/xhtml+xml',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4586)             'zip' => 'application/zip',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4587)             'mid' => 'audio/midi',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4588)             'midi' => 'audio/midi',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4589)             'mp2' => 'audio/mpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4590)             'mp3' => 'audio/mpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4591)             'm4a' => 'audio/mp4',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4592)             'mpga' => 'audio/mpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4593)             'aif' => 'audio/x-aiff',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4594)             'aifc' => 'audio/x-aiff',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4595)             'aiff' => 'audio/x-aiff',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4596)             'ram' => 'audio/x-pn-realaudio',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4597)             'rm' => 'audio/x-pn-realaudio',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4598)             'rpm' => 'audio/x-pn-realaudio-plugin',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4599)             'ra' => 'audio/x-realaudio',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4600)             'wav' => 'audio/x-wav',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4601)             'mka' => 'audio/x-matroska',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4602)             'bmp' => 'image/bmp',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4603)             'gif' => 'image/gif',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4604)             'jpeg' => 'image/jpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4605)             'jpe' => 'image/jpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4606)             'jpg' => 'image/jpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4607)             'png' => 'image/png',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4608)             'tiff' => 'image/tiff',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4609)             'tif' => 'image/tiff',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4610)             'webp' => 'image/webp',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4611)             'avif' => 'image/avif',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4612)             'heif' => 'image/heif',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4613)             'heifs' => 'image/heif-sequence',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4614)             'heic' => 'image/heic',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4615)             'heics' => 'image/heic-sequence',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4616)             'eml' => 'message/rfc822',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4617)             'css' => 'text/css',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4618)             'html' => 'text/html',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4619)             'htm' => 'text/html',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4620)             'shtml' => 'text/html',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4621)             'log' => 'text/plain',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4622)             'text' => 'text/plain',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4623)             'txt' => 'text/plain',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4624)             'rtx' => 'text/richtext',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4625)             'rtf' => 'text/rtf',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4626)             'vcf' => 'text/vcard',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4627)             'vcard' => 'text/vcard',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4628)             'ics' => 'text/calendar',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4629)             'xml' => 'text/xml',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4630)             'xsl' => 'text/xml',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4631)             'csv' => 'text/csv',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4632)             'wmv' => 'video/x-ms-wmv',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4633)             'mpeg' => 'video/mpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4634)             'mpe' => 'video/mpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4635)             'mpg' => 'video/mpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4636)             'mp4' => 'video/mp4',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4637)             'm4v' => 'video/mp4',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4638)             'mov' => 'video/quicktime',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4639)             'qt' => 'video/quicktime',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4640)             'rv' => 'video/vnd.rn-realvideo',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4641)             'avi' => 'video/x-msvideo',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4642)             'movie' => 'video/x-sgi-movie',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4643)             'webm' => 'video/webm',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4644)             'mkv' => 'video/x-matroska',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4645)         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4646)         $ext = strtolower($ext);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4647)         if (array_key_exists($ext, $mimes)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4648)             return $mimes[$ext];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4649)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4650) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4651)         return 'application/octet-stream';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4652)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4653) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4654)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4655)      * Map a file name to a MIME type.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4656)      * Defaults to 'application/octet-stream', i.e.. arbitrary binary data.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4657)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4658)      * @param string $filename A file name or full path, does not need to exist as a file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4659)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4660)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4661)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4662)     public static function filenameToType($filename)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4663)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4664)         //In case the path is a URL, strip any query string before getting extension
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4665)         $qpos = strpos($filename, '?');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4666)         if (false !== $qpos) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4667)             $filename = substr($filename, 0, $qpos);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4668)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4669)         $ext = static::mb_pathinfo($filename, PATHINFO_EXTENSION);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4670) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4671)         return static::_mime_types($ext);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4672)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4673) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4674)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4675)      * Multi-byte-safe pathinfo replacement.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4676)      * Drop-in replacement for pathinfo(), but multibyte- and cross-platform-safe.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4677)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4678)      * @see https://www.php.net/manual/en/function.pathinfo.php#107461
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4679)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4680)      * @param string     $path    A filename or path, does not need to exist as a file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4681)      * @param int|string $options Either a PATHINFO_* constant,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4682)      *                            or a string name to return only the specified piece
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4683)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4684)      * @return string|array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4685)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4686)     public static function mb_pathinfo($path, $options = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4687)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4688)         $ret = ['dirname' => '', 'basename' => '', 'extension' => '', 'filename' => ''];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4689)         $pathinfo = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4690)         if (preg_match('#^(.*?)[\\\\/]*(([^/\\\\]*?)(\.([^.\\\\/]+?)|))[\\\\/.]*$#m', $path, $pathinfo)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4691)             if (array_key_exists(1, $pathinfo)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4692)                 $ret['dirname'] = $pathinfo[1];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4693)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4694)             if (array_key_exists(2, $pathinfo)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4695)                 $ret['basename'] = $pathinfo[2];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4696)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4697)             if (array_key_exists(5, $pathinfo)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4698)                 $ret['extension'] = $pathinfo[5];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4699)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4700)             if (array_key_exists(3, $pathinfo)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4701)                 $ret['filename'] = $pathinfo[3];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4702)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4703)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4704)         switch ($options) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4705)             case PATHINFO_DIRNAME:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4706)             case 'dirname':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4707)                 return $ret['dirname'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4708)             case PATHINFO_BASENAME:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4709)             case 'basename':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4710)                 return $ret['basename'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4711)             case PATHINFO_EXTENSION:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4712)             case 'extension':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4713)                 return $ret['extension'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4714)             case PATHINFO_FILENAME:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4715)             case 'filename':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4716)                 return $ret['filename'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4717)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4718)                 return $ret;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4719)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4720)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4721) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4722)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4723)      * Set or reset instance properties.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4724)      * You should avoid this function - it's more verbose, less efficient, more error-prone and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4725)      * harder to debug than setting properties directly.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4726)      * Usage Example:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4727)      * `$mail->set('SMTPSecure', static::ENCRYPTION_STARTTLS);`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4728)      *   is the same as:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4729)      * `$mail->SMTPSecure = static::ENCRYPTION_STARTTLS;`.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4730)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4731)      * @param string $name  The property name to set
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4732)      * @param mixed  $value The value to set the property to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4733)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4734)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4735)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4736)     public function set($name, $value = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4737)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4738)         if (property_exists($this, $name)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4739)             $this->{$name} = $value;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4740) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4741)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4742)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4743)         $this->setError($this->lang('variable_set') . $name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4744) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4745)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4746)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4747) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4748)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4749)      * Strip newlines to prevent header injection.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4750)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4751)      * @param string $str
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4752)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4753)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4754)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4755)     public function secureHeader($str)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4756)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4757)         return trim(str_replace(["\r", "\n"], '', $str));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4758)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4759) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4760)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4761)      * Normalize line breaks in a string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4762)      * Converts UNIX LF, Mac CR and Windows CRLF line breaks into a single line break format.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4763)      * Defaults to CRLF (for message bodies) and preserves consecutive breaks.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4764)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4765)      * @param string $text
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4766)      * @param string $breaktype What kind of line break to use; defaults to static::$LE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4767)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4768)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4769)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4770)     public static function normalizeBreaks($text, $breaktype = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4771)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4772)         if (null === $breaktype) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4773)             $breaktype = static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4774)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4775)         //Normalise to \n
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4776)         $text = str_replace([self::CRLF, "\r"], "\n", $text);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4777)         //Now convert LE as needed
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4778)         if ("\n" !== $breaktype) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4779)             $text = str_replace("\n", $breaktype, $text);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4780)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4781) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4782)         return $text;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4783)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4784) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4785)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4786)      * Remove trailing whitespace from a string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4787)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4788)      * @param string $text
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4789)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4790)      * @return string The text to remove whitespace from
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4791)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4792)     public static function stripTrailingWSP($text)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4793)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4794)         return rtrim($text, " \r\n\t");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4795)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4796) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4797)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4798)      * Strip trailing line breaks from a string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4799)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4800)      * @param string $text
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4801)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4802)      * @return string The text to remove breaks from
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4803)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4804)     public static function stripTrailingBreaks($text)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4805)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4806)         return rtrim($text, "\r\n");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4807)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4808) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4809)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4810)      * Return the current line break format string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4811)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4812)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4813)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4814)     public static function getLE()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4815)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4816)         return static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4817)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4818) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4819)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4820)      * Set the line break format string, e.g. "\r\n".
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4821)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4822)      * @param string $le
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4823)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4824)     protected static function setLE($le)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4825)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4826)         static::$LE = $le;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4827)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4828) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4829)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4830)      * Set the public and private key files and password for S/MIME signing.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4831)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4832)      * @param string $cert_filename
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4833)      * @param string $key_filename
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4834)      * @param string $key_pass            Password for private key
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4835)      * @param string $extracerts_filename Optional path to chain certificate
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4836)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4837)     public function sign($cert_filename, $key_filename, $key_pass, $extracerts_filename = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4838)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4839)         $this->sign_cert_file = $cert_filename;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4840)         $this->sign_key_file = $key_filename;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4841)         $this->sign_key_pass = $key_pass;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4842)         $this->sign_extracerts_file = $extracerts_filename;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4843)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4844) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4845)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4846)      * Quoted-Printable-encode a DKIM header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4847)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4848)      * @param string $txt
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4849)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4850)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4851)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4852)     public function DKIM_QP($txt)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4853)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4854)         $line = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4855)         $len = strlen($txt);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4856)         for ($i = 0; $i < $len; ++$i) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4857)             $ord = ord($txt[$i]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4858)             if (((0x21 <= $ord) && ($ord <= 0x3A)) || $ord === 0x3C || ((0x3E <= $ord) && ($ord <= 0x7E))) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4859)                 $line .= $txt[$i];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4860)             } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4861)                 $line .= '=' . sprintf('%02X', $ord);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4862)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4863)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4864) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4865)         return $line;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4866)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4867) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4868)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4869)      * Generate a DKIM signature.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4870)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4871)      * @param string $signHeader
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4872)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4873)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4874)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4875)      * @return string The DKIM signature value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4876)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4877)     public function DKIM_Sign($signHeader)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4878)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4879)         if (!defined('PKCS7_TEXT')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4880)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4881)                 throw new Exception($this->lang('extension_missing') . 'openssl');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4882)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4883) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4884)             return '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4885)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4886)         $privKeyStr = !empty($this->DKIM_private_string) ?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4887)             $this->DKIM_private_string :
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4888)             file_get_contents($this->DKIM_private);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4889)         if ('' !== $this->DKIM_passphrase) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4890)             $privKey = openssl_pkey_get_private($privKeyStr, $this->DKIM_passphrase);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4891)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4892)             $privKey = openssl_pkey_get_private($privKeyStr);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4893)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4894)         if (openssl_sign($signHeader, $signature, $privKey, 'sha256WithRSAEncryption')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4895)             if (\PHP_MAJOR_VERSION < 8) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4896)                 openssl_pkey_free($privKey);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4897)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4898) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4899)             return base64_encode($signature);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4900)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4901)         if (\PHP_MAJOR_VERSION < 8) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4902)             openssl_pkey_free($privKey);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4903)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4904) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4905)         return '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4906)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4907) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4908)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4909)      * Generate a DKIM canonicalization header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4910)      * Uses the 'relaxed' algorithm from RFC6376 section 3.4.2.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4911)      * Canonicalized headers should *always* use CRLF, regardless of mailer setting.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4912)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4913)      * @see https://tools.ietf.org/html/rfc6376#section-3.4.2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4914)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4915)      * @param string $signHeader Header
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4916)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4917)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4918)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4919)     public function DKIM_HeaderC($signHeader)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4920)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4921)         //Normalize breaks to CRLF (regardless of the mailer)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4922)         $signHeader = static::normalizeBreaks($signHeader, self::CRLF);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4923)         //Unfold header lines
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4924)         //Note PCRE \s is too broad a definition of whitespace; RFC5322 defines it as `[ \t]`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4925)         //@see https://tools.ietf.org/html/rfc5322#section-2.2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4926)         //That means this may break if you do something daft like put vertical tabs in your headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4927)         $signHeader = preg_replace('/\r\n[ \t]+/', ' ', $signHeader);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4928)         //Break headers out into an array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4929)         $lines = explode(self::CRLF, $signHeader);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4930)         foreach ($lines as $key => $line) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4931)             //If the header is missing a :, skip it as it's invalid
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4932)             //This is likely to happen because the explode() above will also split
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4933)             //on the trailing LE, leaving an empty line
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4934)             if (strpos($line, ':') === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4935)                 continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4936)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4937)             list($heading, $value) = explode(':', $line, 2);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4938)             //Lower-case header name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4939)             $heading = strtolower($heading);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4940)             //Collapse white space within the value, also convert WSP to space
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4941)             $value = preg_replace('/[ \t]+/', ' ', $value);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4942)             //RFC6376 is slightly unclear here - it says to delete space at the *end* of each value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4943)             //But then says to delete space before and after the colon.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4944)             //Net result is the same as trimming both ends of the value.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4945)             //By elimination, the same applies to the field name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4946)             $lines[$key] = trim($heading, " \t") . ':' . trim($value, " \t");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4947)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4948) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4949)         return implode(self::CRLF, $lines);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4950)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4951) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4952)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4953)      * Generate a DKIM canonicalization body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4954)      * Uses the 'simple' algorithm from RFC6376 section 3.4.3.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4955)      * Canonicalized bodies should *always* use CRLF, regardless of mailer setting.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4956)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4957)      * @see https://tools.ietf.org/html/rfc6376#section-3.4.3
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4958)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4959)      * @param string $body Message Body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4960)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4961)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4962)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4963)     public function DKIM_BodyC($body)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4964)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4965)         if (empty($body)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4966)             return self::CRLF;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4967)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4968)         //Normalize line endings to CRLF
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4969)         $body = static::normalizeBreaks($body, self::CRLF);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4970) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4971)         //Reduce multiple trailing line breaks to a single one
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4972)         return static::stripTrailingBreaks($body) . self::CRLF;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4973)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4974) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4975)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4976)      * Create the DKIM header and body in a new message header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4977)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4978)      * @param string $headers_line Header lines
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4979)      * @param string $subject      Subject
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4980)      * @param string $body         Body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4981)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4982)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4983)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4984)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4985)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4986)     public function DKIM_Add($headers_line, $subject, $body)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4987)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4988)         $DKIMsignatureType = 'rsa-sha256'; //Signature & hash algorithms
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4989)         $DKIMcanonicalization = 'relaxed/simple'; //Canonicalization methods of header & body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4990)         $DKIMquery = 'dns/txt'; //Query method
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4991)         $DKIMtime = time();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4992)         //Always sign these headers without being asked
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4993)         //Recommended list from https://tools.ietf.org/html/rfc6376#section-5.4.1
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4994)         $autoSignHeaders = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4995)             'from',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4996)             'to',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4997)             'cc',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4998)             'date',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4999)             'subject',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5000)             'reply-to',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5001)             'message-id',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5002)             'content-type',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5003)             'mime-version',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5004)             'x-mailer',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5005)         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5006)         if (stripos($headers_line, 'Subject') === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5007)             $headers_line .= 'Subject: ' . $subject . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5008)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5009)         $headerLines = explode(static::$LE, $headers_line);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5010)         $currentHeaderLabel = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5011)         $currentHeaderValue = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5012)         $parsedHeaders = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5013)         $headerLineIndex = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5014)         $headerLineCount = count($headerLines);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5015)         foreach ($headerLines as $headerLine) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5016)             $matches = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5017)             if (preg_match('/^([^ \t]*?)(?::[ \t]*)(.*)$/', $headerLine, $matches)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5018)                 if ($currentHeaderLabel !== '') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5019)                     //We were previously in another header; This is the start of a new header, so save the previous one
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5020)                     $parsedHeaders[] = ['label' => $currentHeaderLabel, 'value' => $currentHeaderValue];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5021)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5022)                 $currentHeaderLabel = $matches[1];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5023)                 $currentHeaderValue = $matches[2];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5024)             } elseif (preg_match('/^[ \t]+(.*)$/', $headerLine, $matches)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5025)                 //This is a folded continuation of the current header, so unfold it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5026)                 $currentHeaderValue .= ' ' . $matches[1];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5027)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5028)             ++$headerLineIndex;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5029)             if ($headerLineIndex >= $headerLineCount) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5030)                 //This was the last line, so finish off this header
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5031)                 $parsedHeaders[] = ['label' => $currentHeaderLabel, 'value' => $currentHeaderValue];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5032)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5033)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5034)         $copiedHeaders = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5035)         $headersToSignKeys = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5036)         $headersToSign = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5037)         foreach ($parsedHeaders as $header) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5038)             //Is this header one that must be included in the DKIM signature?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5039)             if (in_array(strtolower($header['label']), $autoSignHeaders, true)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5040)                 $headersToSignKeys[] = $header['label'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5041)                 $headersToSign[] = $header['label'] . ': ' . $header['value'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5042)                 if ($this->DKIM_copyHeaderFields) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5043)                     $copiedHeaders[] = $header['label'] . ':' . //Note no space after this, as per RFC
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5044)                         str_replace('|', '=7C', $this->DKIM_QP($header['value']));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5045)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5046)                 continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5047)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5048)             //Is this an extra custom header we've been asked to sign?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5049)             if (in_array($header['label'], $this->DKIM_extraHeaders, true)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5050)                 //Find its value in custom headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5051)                 foreach ($this->CustomHeader as $customHeader) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5052)                     if ($customHeader[0] === $header['label']) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5053)                         $headersToSignKeys[] = $header['label'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5054)                         $headersToSign[] = $header['label'] . ': ' . $header['value'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5055)                         if ($this->DKIM_copyHeaderFields) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5056)                             $copiedHeaders[] = $header['label'] . ':' . //Note no space after this, as per RFC
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5057)                                 str_replace('|', '=7C', $this->DKIM_QP($header['value']));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5058)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5059)                         //Skip straight to the next header
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5060)                         continue 2;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5061)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5062)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5063)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5064)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5065)         $copiedHeaderFields = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5066)         if ($this->DKIM_copyHeaderFields && count($copiedHeaders) > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5067)             //Assemble a DKIM 'z' tag
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5068)             $copiedHeaderFields = ' z=';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5069)             $first = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5070)             foreach ($copiedHeaders as $copiedHeader) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5071)                 if (!$first) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5072)                     $copiedHeaderFields .= static::$LE . ' |';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5073)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5074)                 //Fold long values
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5075)                 if (strlen($copiedHeader) > self::STD_LINE_LENGTH - 3) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5076)                     $copiedHeaderFields .= substr(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5077)                         chunk_split($copiedHeader, self::STD_LINE_LENGTH - 3, static::$LE . self::FWS),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5078)                         0,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5079)                         -strlen(static::$LE . self::FWS)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5080)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5081)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5082)                     $copiedHeaderFields .= $copiedHeader;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5083)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5084)                 $first = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5085)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5086)             $copiedHeaderFields .= ';' . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5087)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5088)         $headerKeys = ' h=' . implode(':', $headersToSignKeys) . ';' . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5089)         $headerValues = implode(static::$LE, $headersToSign);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5090)         $body = $this->DKIM_BodyC($body);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5091)         //Base64 of packed binary SHA-256 hash of body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5092)         $DKIMb64 = base64_encode(pack('H*', hash('sha256', $body)));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5093)         $ident = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5094)         if ('' !== $this->DKIM_identity) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5095)             $ident = ' i=' . $this->DKIM_identity . ';' . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5096)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5097)         //The DKIM-Signature header is included in the signature *except for* the value of the `b` tag
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5098)         //which is appended after calculating the signature
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5099)         //https://tools.ietf.org/html/rfc6376#section-3.5
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5100)         $dkimSignatureHeader = 'DKIM-Signature: v=1;' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5101)             ' d=' . $this->DKIM_domain . ';' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5102)             ' s=' . $this->DKIM_selector . ';' . static::$LE .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5103)             ' a=' . $DKIMsignatureType . ';' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5104)             ' q=' . $DKIMquery . ';' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5105)             ' t=' . $DKIMtime . ';' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5106)             ' c=' . $DKIMcanonicalization . ';' . static::$LE .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5107)             $headerKeys .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5108)             $ident .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5109)             $copiedHeaderFields .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5110)             ' bh=' . $DKIMb64 . ';' . static::$LE .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5111)             ' b=';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5112)         //Canonicalize the set of headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5113)         $canonicalizedHeaders = $this->DKIM_HeaderC(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5114)             $headerValues . static::$LE . $dkimSignatureHeader
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5115)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5116)         $signature = $this->DKIM_Sign($canonicalizedHeaders);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5117)         $signature = trim(chunk_split($signature, self::STD_LINE_LENGTH - 3, static::$LE . self::FWS));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5118) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5119)         return static::normalizeBreaks($dkimSignatureHeader . $signature);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5120)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5121) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5122)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5123)      * Detect if a string contains a line longer than the maximum line length
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5124)      * allowed by RFC 2822 section 2.1.1.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5125)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5126)      * @param string $str
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5127)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5128)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5129)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5130)     public static function hasLineLongerThanMax($str)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5131)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5132)         return (bool) preg_match('/^(.{' . (self::MAX_LINE_LENGTH + strlen(static::$LE)) . ',})/m', $str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5133)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5134) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5135)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5136)      * If a string contains any "special" characters, double-quote the name,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5137)      * and escape any double quotes with a backslash.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5138)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5139)      * @param string $str
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5140)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5141)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5142)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5143)      * @see RFC822 3.4.1
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5144)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5145)     public static function quotedString($str)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5146)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5147)         if (preg_match('/[ ()<>@,;:"\/\[\]?=]/', $str)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5148)             //If the string contains any of these chars, it must be double-quoted
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5149)             //and any double quotes must be escaped with a backslash
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5150)             return '"' . str_replace('"', '\\"', $str) . '"';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5151)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5152) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5153)         //Return the string untouched, it doesn't need quoting
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5154)         return $str;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5155)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5156) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5157)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5158)      * Allows for public read access to 'to' property.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5159)      * Before the send() call, queued addresses (i.e. with IDN) are not yet included.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5160)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5161)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5162)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5163)     public function getToAddresses()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5164)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5165)         return $this->to;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5166)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5167) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5168)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5169)      * Allows for public read access to 'cc' property.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5170)      * Before the send() call, queued addresses (i.e. with IDN) are not yet included.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5171)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5172)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5173)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5174)     public function getCcAddresses()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5175)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5176)         return $this->cc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5177)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5178) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5179)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5180)      * Allows for public read access to 'bcc' property.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5181)      * Before the send() call, queued addresses (i.e. with IDN) are not yet included.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5182)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5183)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5184)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5185)     public function getBccAddresses()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5186)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5187)         return $this->bcc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5188)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5189) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5190)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5191)      * Allows for public read access to 'ReplyTo' property.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5192)      * Before the send() call, queued addresses (i.e. with IDN) are not yet included.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5193)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5194)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5195)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5196)     public function getReplyToAddresses()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5197)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5198)         return $this->ReplyTo;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5199)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5200) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5201)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5202)      * Allows for public read access to 'all_recipients' property.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5203)      * Before the send() call, queued addresses (i.e. with IDN) are not yet included.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5204)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5205)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5206)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5207)     public function getAllRecipientAddresses()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5208)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5209)         return $this->all_recipients;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5210)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5211) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5212)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5213)      * Perform a callback.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5214)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5215)      * @param bool   $isSent
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5216)      * @param array  $to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5217)      * @param array  $cc
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5218)      * @param array  $bcc
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5219)      * @param string $subject
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5220)      * @param string $body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5221)      * @param string $from
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5222)      * @param array  $extra
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5223)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5224)     protected function doCallback($isSent, $to, $cc, $bcc, $subject, $body, $from, $extra)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5225)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5226)         if (!empty($this->action_function) && is_callable($this->action_function)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5227)             call_user_func($this->action_function, $isSent, $to, $cc, $bcc, $subject, $body, $from, $extra);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5228)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5229)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5230) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5231)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5232)      * Get the OAuthTokenProvider instance.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5233)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5234)      * @return OAuthTokenProvider
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5235)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5236)     public function getOAuth()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5237)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5238)         return $this->oauth;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5239)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5240) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5241)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5242)      * Set an OAuthTokenProvider instance.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5243)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5244)     public function setOAuth(OAuthTokenProvider $oauth)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5245)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5246)         $this->oauth = $oauth;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5247)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5248) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   4)  * PHPMailer POP-Before-SMTP Authentication Class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   5)  * PHP Version 5.5.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   6)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   7)  * @see https://github.com/PHPMailer/PHPMailer/ The PHPMailer GitHub project
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   8)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   9)  * @author    Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  10)  * @author    Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  11)  * @author    Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  12)  * @author    Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  13)  * @copyright 2012 - 2020 Marcus Bointon
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  14)  * @copyright 2010 - 2012 Jim Jagielski
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  15)  * @copyright 2004 - 2009 Andy Prevost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  16)  * @license   https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html GNU Lesser General Public License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  17)  * @note      This program is distributed in the hope that it will be useful - WITHOUT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  18)  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  19)  * FITNESS FOR A PARTICULAR PURPOSE.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  20)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  21) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  22) namespace PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  23) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  24) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  25)  * PHPMailer POP-Before-SMTP Authentication Class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  26)  * Specifically for PHPMailer to use for RFC1939 POP-before-SMTP authentication.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  27)  * 1) This class does not support APOP authentication.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  28)  * 2) Opening and closing lots of POP3 connections can be quite slow. If you need
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  29)  *   to send a batch of emails then just perform the authentication once at the start,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  30)  *   and then loop through your mail sending script. Providing this process doesn't
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  31)  *   take longer than the verification period lasts on your POP3 server, you should be fine.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  32)  * 3) This is really ancient technology; you should only need to use it to talk to very old systems.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  33)  * 4) This POP3 class is deliberately lightweight and incomplete, implementing just
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  34)  *   enough to do authentication.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  35)  *   If you want a more complete class there are other POP3 classes for PHP available.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  36)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  37)  * @author Richard Davey (original author) <rich@corephp.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  38)  * @author Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  39)  * @author Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  40)  * @author Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  41)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  42) class POP3
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  43) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  44)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  45)      * The POP3 PHPMailer Version number.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  46)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  47)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  48)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  49)     const VERSION = '6.9.2';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  50) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  51)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  52)      * Default POP3 port number.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  53)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  54)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  55)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  56)     const DEFAULT_PORT = 110;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  57) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  58)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  59)      * Default timeout in seconds.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  60)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  61)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  62)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  63)     const DEFAULT_TIMEOUT = 30;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  64) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  65)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  66)      * POP3 class debug output mode.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  67)      * Debug output level.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  68)      * Options:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  69)      * @see POP3::DEBUG_OFF: No output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  70)      * @see POP3::DEBUG_SERVER: Server messages, connection/server errors
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  71)      * @see POP3::DEBUG_CLIENT: Client and Server messages, connection/server errors
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  72)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  73)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  74)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  75)     public $do_debug = self::DEBUG_OFF;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  76) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  77)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  78)      * POP3 mail server hostname.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  79)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  80)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  81)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  82)     public $host;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  83) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  84)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  85)      * POP3 port number.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  86)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  87)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  88)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  89)     public $port;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  90) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  91)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  92)      * POP3 Timeout Value in seconds.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  93)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  94)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  95)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  96)     public $tval;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  97) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  98)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  99)      * POP3 username.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 100)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 101)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 102)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 103)     public $username;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 104) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 105)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 106)      * POP3 password.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 107)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 108)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 109)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 110)     public $password;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 111) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 112)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 113)      * Resource handle for the POP3 connection socket.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 114)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 115)      * @var resource
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 116)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 117)     protected $pop_conn;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 118) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 119)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 120)      * Are we connected?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 121)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 122)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 123)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 124)     protected $connected = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 125) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 126)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 127)      * Error container.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 128)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 129)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 130)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 131)     protected $errors = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 132) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 133)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 134)      * Line break constant.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 135)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 136)     const LE = "\r\n";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 137) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 138)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 139)      * Debug level for no output.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 140)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 141)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 142)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 143)     const DEBUG_OFF = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 144) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 145)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 146)      * Debug level to show server -> client messages
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 147)      * also shows clients connection errors or errors from server
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 148)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 149)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 150)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 151)     const DEBUG_SERVER = 1;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 152) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 153)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 154)      * Debug level to show client -> server and server -> client messages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 155)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 156)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 157)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 158)     const DEBUG_CLIENT = 2;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 159) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 160)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 161)      * Simple static wrapper for all-in-one POP before SMTP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 162)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 163)      * @param string   $host        The hostname to connect to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 164)      * @param int|bool $port        The port number to connect to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 165)      * @param int|bool $timeout     The timeout value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 166)      * @param string   $username
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 167)      * @param string   $password
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 168)      * @param int      $debug_level
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 169)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 170)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 171)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 172)     public static function popBeforeSmtp(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 173)         $host,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 174)         $port = false,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 175)         $timeout = false,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 176)         $username = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 177)         $password = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 178)         $debug_level = 0
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 179)     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 180)         $pop = new self();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 181) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 182)         return $pop->authorise($host, $port, $timeout, $username, $password, $debug_level);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 183)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 184) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 185)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 186)      * Authenticate with a POP3 server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 187)      * A connect, login, disconnect sequence
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 188)      * appropriate for POP-before SMTP authorisation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 189)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 190)      * @param string   $host        The hostname to connect to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 191)      * @param int|bool $port        The port number to connect to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 192)      * @param int|bool $timeout     The timeout value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 193)      * @param string   $username
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 194)      * @param string   $password
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 195)      * @param int      $debug_level
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 196)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 197)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 198)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 199)     public function authorise($host, $port = false, $timeout = false, $username = '', $password = '', $debug_level = 0)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 200)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 201)         $this->host = $host;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 202)         //If no port value provided, use default
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 203)         if (false === $port) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 204)             $this->port = static::DEFAULT_PORT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 205)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 206)             $this->port = (int) $port;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 207)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 208)         //If no timeout value provided, use default
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 209)         if (false === $timeout) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 210)             $this->tval = static::DEFAULT_TIMEOUT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 211)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 212)             $this->tval = (int) $timeout;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 213)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 214)         $this->do_debug = $debug_level;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 215)         $this->username = $username;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 216)         $this->password = $password;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 217)         //Reset the error log
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 218)         $this->errors = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 219)         //Connect
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 220)         $result = $this->connect($this->host, $this->port, $this->tval);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 221)         if ($result) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 222)             $login_result = $this->login($this->username, $this->password);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 223)             if ($login_result) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 224)                 $this->disconnect();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 225) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 226)                 return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 227)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 228)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 229)         //We need to disconnect regardless of whether the login succeeded
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 230)         $this->disconnect();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 231) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 232)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 233)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 234) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 235)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 236)      * Connect to a POP3 server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 237)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 238)      * @param string   $host
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 239)      * @param int|bool $port
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 240)      * @param int      $tval
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 241)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 242)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 243)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 244)     public function connect($host, $port = false, $tval = 30)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 245)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 246)         //Are we already connected?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 247)         if ($this->connected) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 248)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 249)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 250) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 251)         //On Windows this will raise a PHP Warning error if the hostname doesn't exist.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 252)         //Rather than suppress it with @fsockopen, capture it cleanly instead
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 253)         set_error_handler(function () {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 254)             call_user_func_array([$this, 'catchWarning'], func_get_args());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 255)         });
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 256) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 257)         if (false === $port) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 258)             $port = static::DEFAULT_PORT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 259)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 260) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 261)         //Connect to the POP3 server
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 262)         $errno = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 263)         $errstr = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 264)         $this->pop_conn = fsockopen(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 265)             $host, //POP3 Host
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 266)             $port, //Port #
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 267)             $errno, //Error Number
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 268)             $errstr, //Error Message
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 269)             $tval
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 270)         ); //Timeout (seconds)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 271)         //Restore the error handler
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 272)         restore_error_handler();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 273) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 274)         //Did we connect?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 275)         if (false === $this->pop_conn) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 276)             //It would appear not...
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 277)             $this->setError(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 278)                 "Failed to connect to server $host on port $port. errno: $errno; errstr: $errstr"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 279)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 280) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 281)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 282)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 283) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 284)         //Increase the stream time-out
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 285)         stream_set_timeout($this->pop_conn, $tval, 0);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 286) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 287)         //Get the POP3 server response
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 288)         $pop3_response = $this->getResponse();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 289)         //Check for the +OK
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 290)         if ($this->checkResponse($pop3_response)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 291)             //The connection is established and the POP3 server is talking
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 292)             $this->connected = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 293) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 294)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 295)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 296) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 297)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 298)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 299) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 300)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 301)      * Log in to the POP3 server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 302)      * Does not support APOP (RFC 2828, 4949).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 303)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 304)      * @param string $username
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 305)      * @param string $password
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 306)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 307)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 308)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 309)     public function login($username = '', $password = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 310)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 311)         if (!$this->connected) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 312)             $this->setError('Not connected to POP3 server');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 313)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 314)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 315)         if (empty($username)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 316)             $username = $this->username;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 317)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 318)         if (empty($password)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 319)             $password = $this->password;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 320)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 321) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 322)         //Send the Username
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 323)         $this->sendString("USER $username" . static::LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 324)         $pop3_response = $this->getResponse();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 325)         if ($this->checkResponse($pop3_response)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 326)             //Send the Password
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 327)             $this->sendString("PASS $password" . static::LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 328)             $pop3_response = $this->getResponse();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 329)             if ($this->checkResponse($pop3_response)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 330)                 return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 331)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 332)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 333) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 334)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 335)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 336) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 337)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 338)      * Disconnect from the POP3 server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 339)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 340)     public function disconnect()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 341)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 342)         // If could not connect at all, no need to disconnect
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 343)         if ($this->pop_conn === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 344)             return;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 345)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 346) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 347)         $this->sendString('QUIT' . static::LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 348) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 349)         // RFC 1939 shows POP3 server sending a +OK response to the QUIT command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 350)         // Try to get it.  Ignore any failures here.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 351)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 352)             $this->getResponse();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 353)         } catch (Exception $e) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 354)             //Do nothing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 355)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 356) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 357)         //The QUIT command may cause the daemon to exit, which will kill our connection
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 358)         //So ignore errors here
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 359)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 360)             @fclose($this->pop_conn);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 361)         } catch (Exception $e) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 362)             //Do nothing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 363)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 364) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 365)         // Clean up attributes.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 366)         $this->connected = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 367)         $this->pop_conn  = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 368)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 369) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 370)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 371)      * Get a response from the POP3 server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 372)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 373)      * @param int $size The maximum number of bytes to retrieve
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 374)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 375)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 376)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 377)     protected function getResponse($size = 128)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 378)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 379)         $response = fgets($this->pop_conn, $size);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 380)         if ($this->do_debug >= self::DEBUG_SERVER) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 381)             echo 'Server -> Client: ', $response;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 382)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 383) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 384)         return $response;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 385)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 386) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 387)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 388)      * Send raw data to the POP3 server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 389)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 390)      * @param string $string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 391)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 392)      * @return int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 393)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 394)     protected function sendString($string)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 395)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 396)         if ($this->pop_conn) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 397)             if ($this->do_debug >= self::DEBUG_CLIENT) { //Show client messages when debug >= 2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 398)                 echo 'Client -> Server: ', $string;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 399)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 400) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 401)             return fwrite($this->pop_conn, $string, strlen($string));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 402)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 403) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 404)         return 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 405)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 406) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 407)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 408)      * Checks the POP3 server response.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 409)      * Looks for for +OK or -ERR.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 410)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 411)      * @param string $string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 412)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 413)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 414)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 415)     protected function checkResponse($string)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 416)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 417)         if (strpos($string, '+OK') !== 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 418)             $this->setError("Server reported an error: $string");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 419) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 420)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 421)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 422) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 423)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 424)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 425) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 426)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 427)      * Add an error to the internal error store.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 428)      * Also display debug output if it's enabled.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 429)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 430)      * @param string $error
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 431)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 432)     protected function setError($error)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 433)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 434)         $this->errors[] = $error;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 435)         if ($this->do_debug >= self::DEBUG_SERVER) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 436)             echo '<pre>';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 437)             foreach ($this->errors as $e) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 438)                 print_r($e);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 439)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 440)             echo '</pre>';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 441)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 442)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 443) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 444)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 445)      * Get an array of error messages, if any.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 446)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 447)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 448)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 449)     public function getErrors()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 450)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 451)         return $this->errors;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 452)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 453) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 454)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 455)      * POP3 connection error handler.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 456)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 457)      * @param int    $errno
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 458)      * @param string $errstr
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 459)      * @param string $errfile
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 460)      * @param int    $errline
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 461)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 462)     protected function catchWarning($errno, $errstr, $errfile, $errline)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 463)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 464)         $this->setError(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 465)             'Connecting to the POP3 server raised a PHP warning:' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 466)             "errno: $errno errstr: $errstr; errfile: $errfile; errline: $errline"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 467)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 468)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 469) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    4)  * PHPMailer RFC821 SMTP email transport class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    5)  * PHP Version 5.5.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    6)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    7)  * @see       https://github.com/PHPMailer/PHPMailer/ The PHPMailer GitHub project
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    8)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    9)  * @author    Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   10)  * @author    Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   11)  * @author    Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   12)  * @author    Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   13)  * @copyright 2012 - 2020 Marcus Bointon
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   14)  * @copyright 2010 - 2012 Jim Jagielski
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   15)  * @copyright 2004 - 2009 Andy Prevost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   16)  * @license   https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html GNU Lesser General Public License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   17)  * @note      This program is distributed in the hope that it will be useful - WITHOUT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   18)  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   19)  * FITNESS FOR A PARTICULAR PURPOSE.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   20)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   21) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   22) namespace PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   23) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   24) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   25)  * PHPMailer RFC821 SMTP email transport class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   26)  * Implements RFC 821 SMTP commands and provides some utility methods for sending mail to an SMTP server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   27)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   28)  * @author Chris Ryan
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   29)  * @author Marcus Bointon <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   30)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   31) class SMTP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   32) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   33)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   34)      * The PHPMailer SMTP version number.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   35)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   36)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   37)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   38)     const VERSION = '6.9.2';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   39) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   40)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   41)      * SMTP line break constant.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   42)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   43)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   44)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   45)     const LE = "\r\n";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   46) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   47)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   48)      * The SMTP port to use if one is not specified.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   49)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   50)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   51)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   52)     const DEFAULT_PORT = 25;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   53) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   54)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   55)      * The SMTPs port to use if one is not specified.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   56)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   57)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   58)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   59)     const DEFAULT_SECURE_PORT = 465;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   60) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   61)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   62)      * The maximum line length allowed by RFC 5321 section 4.5.3.1.6,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   63)      * *excluding* a trailing CRLF break.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   64)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   65)      * @see https://tools.ietf.org/html/rfc5321#section-4.5.3.1.6
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   66)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   67)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   68)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   69)     const MAX_LINE_LENGTH = 998;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   70) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   71)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   72)      * The maximum line length allowed for replies in RFC 5321 section 4.5.3.1.5,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   73)      * *including* a trailing CRLF line break.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   74)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   75)      * @see https://tools.ietf.org/html/rfc5321#section-4.5.3.1.5
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   76)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   77)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   78)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   79)     const MAX_REPLY_LENGTH = 512;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   80) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   81)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   82)      * Debug level for no output.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   83)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   84)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   85)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   86)     const DEBUG_OFF = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   87) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   88)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   89)      * Debug level to show client -> server messages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   90)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   91)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   92)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   93)     const DEBUG_CLIENT = 1;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   94) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   95)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   96)      * Debug level to show client -> server and server -> client messages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   97)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   98)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   99)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  100)     const DEBUG_SERVER = 2;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  101) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  102)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  103)      * Debug level to show connection status, client -> server and server -> client messages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  104)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  105)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  106)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  107)     const DEBUG_CONNECTION = 3;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  108) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  109)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  110)      * Debug level to show all messages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  111)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  112)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  113)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  114)     const DEBUG_LOWLEVEL = 4;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  115) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  116)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  117)      * Debug output level.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  118)      * Options:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  119)      * * self::DEBUG_OFF (`0`) No debug output, default
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  120)      * * self::DEBUG_CLIENT (`1`) Client commands
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  121)      * * self::DEBUG_SERVER (`2`) Client commands and server responses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  122)      * * self::DEBUG_CONNECTION (`3`) As DEBUG_SERVER plus connection status
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  123)      * * self::DEBUG_LOWLEVEL (`4`) Low-level data output, all messages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  124)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  125)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  126)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  127)     public $do_debug = self::DEBUG_OFF;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  128) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  129)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  130)      * How to handle debug output.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  131)      * Options:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  132)      * * `echo` Output plain-text as-is, appropriate for CLI
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  133)      * * `html` Output escaped, line breaks converted to `<br>`, appropriate for browser output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  134)      * * `error_log` Output to error log as configured in php.ini
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  135)      * Alternatively, you can provide a callable expecting two params: a message string and the debug level:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  136)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  137)      * ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  138)      * $smtp->Debugoutput = function($str, $level) {echo "debug level $level; message: $str";};
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  139)      * ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  140)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  141)      * Alternatively, you can pass in an instance of a PSR-3 compatible logger, though only `debug`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  142)      * level output is used:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  143)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  144)      * ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  145)      * $mail->Debugoutput = new myPsr3Logger;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  146)      * ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  147)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  148)      * @var string|callable|\Psr\Log\LoggerInterface
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  149)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  150)     public $Debugoutput = 'echo';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  151) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  152)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  153)      * Whether to use VERP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  154)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  155)      * @see https://en.wikipedia.org/wiki/Variable_envelope_return_path
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  156)      * @see https://www.postfix.org/VERP_README.html Info on VERP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  157)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  158)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  159)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  160)     public $do_verp = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  161) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  162)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  163)      * The timeout value for connection, in seconds.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  164)      * Default of 5 minutes (300sec) is from RFC2821 section 4.5.3.2.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  165)      * This needs to be quite high to function correctly with hosts using greetdelay as an anti-spam measure.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  166)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  167)      * @see https://www.rfc-editor.org/rfc/rfc2821#section-4.5.3.2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  168)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  169)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  170)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  171)     public $Timeout = 300;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  172) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  173)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  174)      * How long to wait for commands to complete, in seconds.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  175)      * Default of 5 minutes (300sec) is from RFC2821 section 4.5.3.2.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  176)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  177)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  178)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  179)     public $Timelimit = 300;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  180) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  181)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  182)      * Patterns to extract an SMTP transaction id from reply to a DATA command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  183)      * The first capture group in each regex will be used as the ID.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  184)      * MS ESMTP returns the message ID, which may not be correct for internal tracking.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  185)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  186)      * @var string[]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  187)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  188)     protected $smtp_transaction_id_patterns = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  189)         'exim' => '/[\d]{3} OK id=(.*)/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  190)         'sendmail' => '/[\d]{3} 2\.0\.0 (.*) Message/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  191)         'postfix' => '/[\d]{3} 2\.0\.0 Ok: queued as (.*)/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  192)         'Microsoft_ESMTP' => '/[0-9]{3} 2\.[\d]\.0 (.*)@(?:.*) Queued mail for delivery/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  193)         'Amazon_SES' => '/[\d]{3} Ok (.*)/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  194)         'SendGrid' => '/[\d]{3} Ok: queued as (.*)/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  195)         'CampaignMonitor' => '/[\d]{3} 2\.0\.0 OK:([a-zA-Z\d]{48})/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  196)         'Haraka' => '/[\d]{3} Message Queued \((.*)\)/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  197)         'ZoneMTA' => '/[\d]{3} Message queued as (.*)/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  198)         'Mailjet' => '/[\d]{3} OK queued as (.*)/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  199)     ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  200) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  201)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  202)      * Allowed SMTP XCLIENT attributes.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  203)      * Must be allowed by the SMTP server. EHLO response is not checked.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  204)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  205)      * @see https://www.postfix.org/XCLIENT_README.html
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  206)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  207)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  208)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  209)     public static $xclient_allowed_attributes = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  210)         'NAME', 'ADDR', 'PORT', 'PROTO', 'HELO', 'LOGIN', 'DESTADDR', 'DESTPORT'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  211)     ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  212) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  213)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  214)      * The last transaction ID issued in response to a DATA command,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  215)      * if one was detected.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  216)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  217)      * @var string|bool|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  218)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  219)     protected $last_smtp_transaction_id;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  220) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  221)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  222)      * The socket for the server connection.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  223)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  224)      * @var ?resource
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  225)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  226)     protected $smtp_conn;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  227) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  228)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  229)      * Error information, if any, for the last SMTP command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  230)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  231)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  232)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  233)     protected $error = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  234)         'error' => '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  235)         'detail' => '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  236)         'smtp_code' => '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  237)         'smtp_code_ex' => '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  238)     ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  239) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  240)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  241)      * The reply the server sent to us for HELO.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  242)      * If null, no HELO string has yet been received.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  243)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  244)      * @var string|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  245)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  246)     protected $helo_rply;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  247) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  248)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  249)      * The set of SMTP extensions sent in reply to EHLO command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  250)      * Indexes of the array are extension names.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  251)      * Value at index 'HELO' or 'EHLO' (according to command that was sent)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  252)      * represents the server name. In case of HELO it is the only element of the array.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  253)      * Other values can be boolean TRUE or an array containing extension options.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  254)      * If null, no HELO/EHLO string has yet been received.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  255)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  256)      * @var array|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  257)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  258)     protected $server_caps;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  259) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  260)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  261)      * The most recent reply received from the server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  262)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  263)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  264)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  265)     protected $last_reply = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  266) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  267)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  268)      * Output debugging info via a user-selected method.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  269)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  270)      * @param string $str   Debug string to output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  271)      * @param int    $level The debug level of this message; see DEBUG_* constants
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  272)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  273)      * @see SMTP::$Debugoutput
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  274)      * @see SMTP::$do_debug
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  275)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  276)     protected function edebug($str, $level = 0)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  277)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  278)         if ($level > $this->do_debug) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  279)             return;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  280)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  281)         //Is this a PSR-3 logger?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  282)         if ($this->Debugoutput instanceof \Psr\Log\LoggerInterface) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  283)             //Remove trailing line breaks potentially added by calls to SMTP::client_send()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  284)             $this->Debugoutput->debug(rtrim($str, "\r\n"));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  285) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  286)             return;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  287)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  288)         //Avoid clash with built-in function names
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  289)         if (is_callable($this->Debugoutput) && !in_array($this->Debugoutput, ['error_log', 'html', 'echo'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  290)             call_user_func($this->Debugoutput, $str, $level);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  291) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  292)             return;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  293)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  294)         switch ($this->Debugoutput) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  295)             case 'error_log':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  296)                 //Don't output, just log
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  297)                 /** @noinspection ForgottenDebugOutputInspection */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  298)                 error_log($str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  299)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  300)             case 'html':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  301)                 //Cleans up output a bit for a better looking, HTML-safe output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  302)                 echo gmdate('Y-m-d H:i:s'), ' ', htmlentities(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  303)                     preg_replace('/[\r\n]+/', '', $str),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  304)                     ENT_QUOTES,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  305)                     'UTF-8'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  306)                 ), "<br>\n";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  307)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  308)             case 'echo':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  309)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  310)                 //Normalize line breaks
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  311)                 $str = preg_replace('/\r\n|\r/m', "\n", $str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  312)                 echo gmdate('Y-m-d H:i:s'),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  313)                 "\t",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  314)                     //Trim trailing space
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  315)                 trim(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  316)                     //Indent for readability, except for trailing break
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  317)                     str_replace(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  318)                         "\n",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  319)                         "\n                   \t                  ",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  320)                         trim($str)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  321)                     )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  322)                 ),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  323)                 "\n";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  324)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  325)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  326) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  327)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  328)      * Connect to an SMTP server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  329)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  330)      * @param string $host    SMTP server IP or host name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  331)      * @param int    $port    The port number to connect to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  332)      * @param int    $timeout How long to wait for the connection to open
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  333)      * @param array  $options An array of options for stream_context_create()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  334)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  335)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  336)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  337)     public function connect($host, $port = null, $timeout = 30, $options = [])
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  338)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  339)         //Clear errors to avoid confusion
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  340)         $this->setError('');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  341)         //Make sure we are __not__ connected
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  342)         if ($this->connected()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  343)             //Already connected, generate error
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  344)             $this->setError('Already connected to a server');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  345) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  346)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  347)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  348)         if (empty($port)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  349)             $port = self::DEFAULT_PORT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  350)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  351)         //Connect to the SMTP server
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  352)         $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  353)             "Connection: opening to $host:$port, timeout=$timeout, options=" .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  354)             (count($options) > 0 ? var_export($options, true) : 'array()'),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  355)             self::DEBUG_CONNECTION
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  356)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  357) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  358)         $this->smtp_conn = $this->getSMTPConnection($host, $port, $timeout, $options);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  359) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  360)         if ($this->smtp_conn === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  361)             //Error info already set inside `getSMTPConnection()`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  362)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  363)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  364) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  365)         $this->edebug('Connection: opened', self::DEBUG_CONNECTION);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  366) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  367)         //Get any announcement
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  368)         $this->last_reply = $this->get_lines();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  369)         $this->edebug('SERVER -> CLIENT: ' . $this->last_reply, self::DEBUG_SERVER);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  370)         $responseCode = (int)substr($this->last_reply, 0, 3);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  371)         if ($responseCode === 220) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  372)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  373)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  374)         //Anything other than a 220 response means something went wrong
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  375)         //RFC 5321 says the server will wait for us to send a QUIT in response to a 554 error
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  376)         //https://tools.ietf.org/html/rfc5321#section-3.1
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  377)         if ($responseCode === 554) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  378)             $this->quit();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  379)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  380)         //This will handle 421 responses which may not wait for a QUIT (e.g. if the server is being shut down)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  381)         $this->edebug('Connection: closing due to error', self::DEBUG_CONNECTION);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  382)         $this->close();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  383)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  384)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  385) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  386)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  387)      * Create connection to the SMTP server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  388)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  389)      * @param string $host    SMTP server IP or host name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  390)      * @param int    $port    The port number to connect to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  391)      * @param int    $timeout How long to wait for the connection to open
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  392)      * @param array  $options An array of options for stream_context_create()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  393)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  394)      * @return false|resource
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  395)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  396)     protected function getSMTPConnection($host, $port = null, $timeout = 30, $options = [])
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  397)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  398)         static $streamok;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  399)         //This is enabled by default since 5.0.0 but some providers disable it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  400)         //Check this once and cache the result
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  401)         if (null === $streamok) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  402)             $streamok = function_exists('stream_socket_client');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  403)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  404) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  405)         $errno = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  406)         $errstr = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  407)         if ($streamok) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  408)             $socket_context = stream_context_create($options);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  409)             set_error_handler(function () {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  410)                 call_user_func_array([$this, 'errorHandler'], func_get_args());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  411)             });
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  412)             $connection = stream_socket_client(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  413)                 $host . ':' . $port,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  414)                 $errno,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  415)                 $errstr,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  416)                 $timeout,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  417)                 STREAM_CLIENT_CONNECT,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  418)                 $socket_context
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  419)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  420)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  421)             //Fall back to fsockopen which should work in more places, but is missing some features
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  422)             $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  423)                 'Connection: stream_socket_client not available, falling back to fsockopen',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  424)                 self::DEBUG_CONNECTION
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  425)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  426)             set_error_handler(function () {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  427)                 call_user_func_array([$this, 'errorHandler'], func_get_args());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  428)             });
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  429)             $connection = fsockopen(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  430)                 $host,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  431)                 $port,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  432)                 $errno,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  433)                 $errstr,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  434)                 $timeout
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  435)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  436)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  437)         restore_error_handler();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  438) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  439)         //Verify we connected properly
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  440)         if (!is_resource($connection)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  441)             $this->setError(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  442)                 'Failed to connect to server',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  443)                 '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  444)                 (string) $errno,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  445)                 $errstr
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  446)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  447)             $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  448)                 'SMTP ERROR: ' . $this->error['error']
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  449)                 . ": $errstr ($errno)",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  450)                 self::DEBUG_CLIENT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  451)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  452) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  453)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  454)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  455) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  456)         //SMTP server can take longer to respond, give longer timeout for first read
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  457)         //Windows does not have support for this timeout function
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  458)         if (strpos(PHP_OS, 'WIN') !== 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  459)             $max = (int)ini_get('max_execution_time');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  460)             //Don't bother if unlimited, or if set_time_limit is disabled
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  461)             if (0 !== $max && $timeout > $max && strpos(ini_get('disable_functions'), 'set_time_limit') === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  462)                 @set_time_limit($timeout);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  463)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  464)             stream_set_timeout($connection, $timeout, 0);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  465)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  466) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  467)         return $connection;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  468)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  469) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  470)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  471)      * Initiate a TLS (encrypted) session.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  472)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  473)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  474)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  475)     public function startTLS()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  476)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  477)         if (!$this->sendCommand('STARTTLS', 'STARTTLS', 220)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  478)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  479)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  480) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  481)         //Allow the best TLS version(s) we can
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  482)         $crypto_method = STREAM_CRYPTO_METHOD_TLS_CLIENT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  483) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  484)         //PHP 5.6.7 dropped inclusion of TLS 1.1 and 1.2 in STREAM_CRYPTO_METHOD_TLS_CLIENT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  485)         //so add them back in manually if we can
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  486)         if (defined('STREAM_CRYPTO_METHOD_TLSv1_2_CLIENT')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  487)             $crypto_method |= STREAM_CRYPTO_METHOD_TLSv1_2_CLIENT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  488)             $crypto_method |= STREAM_CRYPTO_METHOD_TLSv1_1_CLIENT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  489)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  490) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  491)         //Begin encrypted connection
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  492)             set_error_handler(function () {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  493)                 call_user_func_array([$this, 'errorHandler'], func_get_args());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  494)             });
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  495)         $crypto_ok = stream_socket_enable_crypto(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  496)             $this->smtp_conn,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  497)             true,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  498)             $crypto_method
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  499)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  500)         restore_error_handler();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  501) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  502)         return (bool) $crypto_ok;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  503)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  504) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  505)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  506)      * Perform SMTP authentication.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  507)      * Must be run after hello().
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  508)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  509)      * @see    hello()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  510)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  511)      * @param string $username The user name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  512)      * @param string $password The password
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  513)      * @param string $authtype The auth type (CRAM-MD5, PLAIN, LOGIN, XOAUTH2)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  514)      * @param OAuthTokenProvider $OAuth An optional OAuthTokenProvider instance for XOAUTH2 authentication
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  515)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  516)      * @return bool True if successfully authenticated
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  517)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  518)     public function authenticate(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  519)         $username,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  520)         $password,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  521)         $authtype = null,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  522)         $OAuth = null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  523)     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  524)         if (!$this->server_caps) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  525)             $this->setError('Authentication is not allowed before HELO/EHLO');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  526) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  527)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  528)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  529) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  530)         if (array_key_exists('EHLO', $this->server_caps)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  531)             //SMTP extensions are available; try to find a proper authentication method
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  532)             if (!array_key_exists('AUTH', $this->server_caps)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  533)                 $this->setError('Authentication is not allowed at this stage');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  534)                 //'at this stage' means that auth may be allowed after the stage changes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  535)                 //e.g. after STARTTLS
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  536) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  537)                 return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  538)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  539) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  540)             $this->edebug('Auth method requested: ' . ($authtype ?: 'UNSPECIFIED'), self::DEBUG_LOWLEVEL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  541)             $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  542)                 'Auth methods available on the server: ' . implode(',', $this->server_caps['AUTH']),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  543)                 self::DEBUG_LOWLEVEL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  544)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  545) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  546)             //If we have requested a specific auth type, check the server supports it before trying others
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  547)             if (null !== $authtype && !in_array($authtype, $this->server_caps['AUTH'], true)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  548)                 $this->edebug('Requested auth method not available: ' . $authtype, self::DEBUG_LOWLEVEL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  549)                 $authtype = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  550)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  551) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  552)             if (empty($authtype)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  553)                 //If no auth mechanism is specified, attempt to use these, in this order
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  554)                 //Try CRAM-MD5 first as it's more secure than the others
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  555)                 foreach (['CRAM-MD5', 'LOGIN', 'PLAIN', 'XOAUTH2'] as $method) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  556)                     if (in_array($method, $this->server_caps['AUTH'], true)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  557)                         $authtype = $method;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  558)                         break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  559)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  560)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  561)                 if (empty($authtype)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  562)                     $this->setError('No supported authentication methods found');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  563) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  564)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  565)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  566)                 $this->edebug('Auth method selected: ' . $authtype, self::DEBUG_LOWLEVEL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  567)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  568) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  569)             if (!in_array($authtype, $this->server_caps['AUTH'], true)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  570)                 $this->setError("The requested authentication method \"$authtype\" is not supported by the server");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  571) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  572)                 return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  573)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  574)         } elseif (empty($authtype)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  575)             $authtype = 'LOGIN';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  576)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  577)         switch ($authtype) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  578)             case 'PLAIN':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  579)                 //Start authentication
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  580)                 if (!$this->sendCommand('AUTH', 'AUTH PLAIN', 334)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  581)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  582)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  583)                 //Send encoded username and password
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  584)                 if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  585)                     //Format from https://tools.ietf.org/html/rfc4616#section-2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  586)                     //We skip the first field (it's forgery), so the string starts with a null byte
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  587)                     !$this->sendCommand(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  588)                         'User & Password',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  589)                         base64_encode("\0" . $username . "\0" . $password),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  590)                         235
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  591)                     )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  592)                 ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  593)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  594)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  595)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  596)             case 'LOGIN':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  597)                 //Start authentication
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  598)                 if (!$this->sendCommand('AUTH', 'AUTH LOGIN', 334)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  599)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  600)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  601)                 if (!$this->sendCommand('Username', base64_encode($username), 334)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  602)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  603)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  604)                 if (!$this->sendCommand('Password', base64_encode($password), 235)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  605)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  606)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  607)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  608)             case 'CRAM-MD5':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  609)                 //Start authentication
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  610)                 if (!$this->sendCommand('AUTH CRAM-MD5', 'AUTH CRAM-MD5', 334)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  611)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  612)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  613)                 //Get the challenge
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  614)                 $challenge = base64_decode(substr($this->last_reply, 4));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  615) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  616)                 //Build the response
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  617)                 $response = $username . ' ' . $this->hmac($challenge, $password);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  618) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  619)                 //send encoded credentials
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  620)                 return $this->sendCommand('Username', base64_encode($response), 235);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  621)             case 'XOAUTH2':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  622)                 //The OAuth instance must be set up prior to requesting auth.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  623)                 if (null === $OAuth) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  624)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  625)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  626)                 $oauth = $OAuth->getOauth64();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  627) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  628)                 //Start authentication
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  629)                 if (!$this->sendCommand('AUTH', 'AUTH XOAUTH2 ' . $oauth, 235)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  630)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  631)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  632)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  633)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  634)                 $this->setError("Authentication method \"$authtype\" is not supported");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  635) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  636)                 return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  637)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  638) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  639)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  640)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  641) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  642)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  643)      * Calculate an MD5 HMAC hash.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  644)      * Works like hash_hmac('md5', $data, $key)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  645)      * in case that function is not available.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  646)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  647)      * @param string $data The data to hash
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  648)      * @param string $key  The key to hash with
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  649)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  650)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  651)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  652)     protected function hmac($data, $key)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  653)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  654)         if (function_exists('hash_hmac')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  655)             return hash_hmac('md5', $data, $key);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  656)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  657) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  658)         //The following borrowed from
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  659)         //https://www.php.net/manual/en/function.mhash.php#27225
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  660) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  661)         //RFC 2104 HMAC implementation for php.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  662)         //Creates an md5 HMAC.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  663)         //Eliminates the need to install mhash to compute a HMAC
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  664)         //by Lance Rushing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  665) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  666)         $bytelen = 64; //byte length for md5
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  667)         if (strlen($key) > $bytelen) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  668)             $key = pack('H*', md5($key));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  669)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  670)         $key = str_pad($key, $bytelen, chr(0x00));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  671)         $ipad = str_pad('', $bytelen, chr(0x36));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  672)         $opad = str_pad('', $bytelen, chr(0x5c));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  673)         $k_ipad = $key ^ $ipad;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  674)         $k_opad = $key ^ $opad;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  675) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  676)         return md5($k_opad . pack('H*', md5($k_ipad . $data)));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  677)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  678) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  679)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  680)      * Check connection state.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  681)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  682)      * @return bool True if connected
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  683)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  684)     public function connected()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  685)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  686)         if (is_resource($this->smtp_conn)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  687)             $sock_status = stream_get_meta_data($this->smtp_conn);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  688)             if ($sock_status['eof']) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  689)                 //The socket is valid but we are not connected
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  690)                 $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  691)                     'SMTP NOTICE: EOF caught while checking if connected',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  692)                     self::DEBUG_CLIENT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  693)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  694)                 $this->close();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  695) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  696)                 return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  697)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  698) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  699)             return true; //everything looks good
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  700)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  701) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  702)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  703)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  704) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  705)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  706)      * Close the socket and clean up the state of the class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  707)      * Don't use this function without first trying to use QUIT.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  708)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  709)      * @see quit()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  710)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  711)     public function close()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  712)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  713)         $this->server_caps = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  714)         $this->helo_rply = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  715)         if (is_resource($this->smtp_conn)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  716)             //Close the connection and cleanup
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  717)             fclose($this->smtp_conn);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  718)             $this->smtp_conn = null; //Makes for cleaner serialization
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  719)             $this->edebug('Connection: closed', self::DEBUG_CONNECTION);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  720)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  721)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  722) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  723)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  724)      * Send an SMTP DATA command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  725)      * Issues a data command and sends the msg_data to the server,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  726)      * finalizing the mail transaction. $msg_data is the message
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  727)      * that is to be sent with the headers. Each header needs to be
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  728)      * on a single line followed by a <CRLF> with the message headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  729)      * and the message body being separated by an additional <CRLF>.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  730)      * Implements RFC 821: DATA <CRLF>.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  731)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  732)      * @param string $msg_data Message data to send
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  733)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  734)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  735)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  736)     public function data($msg_data)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  737)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  738)         //This will use the standard timelimit
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  739)         if (!$this->sendCommand('DATA', 'DATA', 354)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  740)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  741)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  742) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  743)         /* The server is ready to accept data!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  744)          * According to rfc821 we should not send more than 1000 characters on a single line (including the LE)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  745)          * so we will break the data up into lines by \r and/or \n then if needed we will break each of those into
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  746)          * smaller lines to fit within the limit.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  747)          * We will also look for lines that start with a '.' and prepend an additional '.'.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  748)          * NOTE: this does not count towards line-length limit.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  749)          */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  750) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  751)         //Normalize line breaks before exploding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  752)         $lines = explode("\n", str_replace(["\r\n", "\r"], "\n", $msg_data));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  753) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  754)         /* To distinguish between a complete RFC822 message and a plain message body, we check if the first field
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  755)          * of the first line (':' separated) does not contain a space then it _should_ be a header, and we will
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  756)          * process all lines before a blank line as headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  757)          */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  758) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  759)         $field = substr($lines[0], 0, strpos($lines[0], ':'));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  760)         $in_headers = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  761)         if (!empty($field) && strpos($field, ' ') === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  762)             $in_headers = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  763)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  764) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  765)         foreach ($lines as $line) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  766)             $lines_out = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  767)             if ($in_headers && $line === '') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  768)                 $in_headers = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  769)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  770)             //Break this line up into several smaller lines if it's too long
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  771)             //Micro-optimisation: isset($str[$len]) is faster than (strlen($str) > $len),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  772)             while (isset($line[self::MAX_LINE_LENGTH])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  773)                 //Working backwards, try to find a space within the last MAX_LINE_LENGTH chars of the line to break on
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  774)                 //so as to avoid breaking in the middle of a word
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  775)                 $pos = strrpos(substr($line, 0, self::MAX_LINE_LENGTH), ' ');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  776)                 //Deliberately matches both false and 0
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  777)                 if (!$pos) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  778)                     //No nice break found, add a hard break
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  779)                     $pos = self::MAX_LINE_LENGTH - 1;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  780)                     $lines_out[] = substr($line, 0, $pos);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  781)                     $line = substr($line, $pos);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  782)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  783)                     //Break at the found point
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  784)                     $lines_out[] = substr($line, 0, $pos);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  785)                     //Move along by the amount we dealt with
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  786)                     $line = substr($line, $pos + 1);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  787)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  788)                 //If processing headers add a LWSP-char to the front of new line RFC822 section 3.1.1
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  789)                 if ($in_headers) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  790)                     $line = "\t" . $line;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  791)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  792)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  793)             $lines_out[] = $line;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  794) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  795)             //Send the lines to the server
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  796)             foreach ($lines_out as $line_out) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  797)                 //Dot-stuffing as per RFC5321 section 4.5.2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  798)                 //https://tools.ietf.org/html/rfc5321#section-4.5.2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  799)                 if (!empty($line_out) && $line_out[0] === '.') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  800)                     $line_out = '.' . $line_out;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  801)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  802)                 $this->client_send($line_out . static::LE, 'DATA');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  803)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  804)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  805) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  806)         //Message data has been sent, complete the command
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  807)         //Increase timelimit for end of DATA command
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  808)         $savetimelimit = $this->Timelimit;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  809)         $this->Timelimit *= 2;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  810)         $result = $this->sendCommand('DATA END', '.', 250);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  811)         $this->recordLastTransactionID();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  812)         //Restore timelimit
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  813)         $this->Timelimit = $savetimelimit;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  814) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  815)         return $result;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  816)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  817) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  818)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  819)      * Send an SMTP HELO or EHLO command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  820)      * Used to identify the sending server to the receiving server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  821)      * This makes sure that client and server are in a known state.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  822)      * Implements RFC 821: HELO <SP> <domain> <CRLF>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  823)      * and RFC 2821 EHLO.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  824)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  825)      * @param string $host The host name or IP to connect to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  826)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  827)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  828)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  829)     public function hello($host = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  830)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  831)         //Try extended hello first (RFC 2821)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  832)         if ($this->sendHello('EHLO', $host)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  833)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  834)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  835) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  836)         //Some servers shut down the SMTP service here (RFC 5321)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  837)         if (substr($this->helo_rply, 0, 3) == '421') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  838)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  839)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  840) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  841)         return $this->sendHello('HELO', $host);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  842)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  843) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  844)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  845)      * Send an SMTP HELO or EHLO command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  846)      * Low-level implementation used by hello().
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  847)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  848)      * @param string $hello The HELO string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  849)      * @param string $host  The hostname to say we are
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  850)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  851)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  852)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  853)      * @see hello()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  854)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  855)     protected function sendHello($hello, $host)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  856)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  857)         $noerror = $this->sendCommand($hello, $hello . ' ' . $host, 250);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  858)         $this->helo_rply = $this->last_reply;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  859)         if ($noerror) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  860)             $this->parseHelloFields($hello);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  861)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  862)             $this->server_caps = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  863)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  864) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  865)         return $noerror;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  866)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  867) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  868)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  869)      * Parse a reply to HELO/EHLO command to discover server extensions.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  870)      * In case of HELO, the only parameter that can be discovered is a server name.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  871)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  872)      * @param string $type `HELO` or `EHLO`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  873)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  874)     protected function parseHelloFields($type)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  875)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  876)         $this->server_caps = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  877)         $lines = explode("\n", $this->helo_rply);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  878) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  879)         foreach ($lines as $n => $s) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  880)             //First 4 chars contain response code followed by - or space
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  881)             $s = trim(substr($s, 4));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  882)             if (empty($s)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  883)                 continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  884)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  885)             $fields = explode(' ', $s);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  886)             if (!empty($fields)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  887)                 if (!$n) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  888)                     $name = $type;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  889)                     $fields = $fields[0];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  890)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  891)                     $name = array_shift($fields);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  892)                     switch ($name) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  893)                         case 'SIZE':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  894)                             $fields = ($fields ? $fields[0] : 0);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  895)                             break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  896)                         case 'AUTH':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  897)                             if (!is_array($fields)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  898)                                 $fields = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  899)                             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  900)                             break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  901)                         default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  902)                             $fields = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  903)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  904)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  905)                 $this->server_caps[$name] = $fields;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  906)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  907)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  908)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  909) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  910)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  911)      * Send an SMTP MAIL command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  912)      * Starts a mail transaction from the email address specified in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  913)      * $from. Returns true if successful or false otherwise. If True
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  914)      * the mail transaction is started and then one or more recipient
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  915)      * commands may be called followed by a data command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  916)      * Implements RFC 821: MAIL <SP> FROM:<reverse-path> <CRLF>.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  917)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  918)      * @param string $from Source address of this message
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  919)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  920)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  921)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  922)     public function mail($from)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  923)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  924)         $useVerp = ($this->do_verp ? ' XVERP' : '');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  925) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  926)         return $this->sendCommand(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  927)             'MAIL FROM',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  928)             'MAIL FROM:<' . $from . '>' . $useVerp,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  929)             250
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  930)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  931)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  932) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  933)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  934)      * Send an SMTP QUIT command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  935)      * Closes the socket if there is no error or the $close_on_error argument is true.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  936)      * Implements from RFC 821: QUIT <CRLF>.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  937)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  938)      * @param bool $close_on_error Should the connection close if an error occurs?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  939)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  940)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  941)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  942)     public function quit($close_on_error = true)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  943)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  944)         $noerror = $this->sendCommand('QUIT', 'QUIT', 221);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  945)         $err = $this->error; //Save any error
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  946)         if ($noerror || $close_on_error) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  947)             $this->close();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  948)             $this->error = $err; //Restore any error from the quit command
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  949)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  950) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  951)         return $noerror;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  952)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  953) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  954)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  955)      * Send an SMTP RCPT command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  956)      * Sets the TO argument to $toaddr.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  957)      * Returns true if the recipient was accepted false if it was rejected.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  958)      * Implements from RFC 821: RCPT <SP> TO:<forward-path> <CRLF>.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  959)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  960)      * @param string $address The address the message is being sent to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  961)      * @param string $dsn     Comma separated list of DSN notifications. NEVER, SUCCESS, FAILURE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  962)      *                        or DELAY. If you specify NEVER all other notifications are ignored.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  963)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  964)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  965)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  966)     public function recipient($address, $dsn = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  967)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  968)         if (empty($dsn)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  969)             $rcpt = 'RCPT TO:<' . $address . '>';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  970)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  971)             $dsn = strtoupper($dsn);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  972)             $notify = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  973) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  974)             if (strpos($dsn, 'NEVER') !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  975)                 $notify[] = 'NEVER';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  976)             } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  977)                 foreach (['SUCCESS', 'FAILURE', 'DELAY'] as $value) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  978)                     if (strpos($dsn, $value) !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  979)                         $notify[] = $value;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  980)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  981)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  982)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  983) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  984)             $rcpt = 'RCPT TO:<' . $address . '> NOTIFY=' . implode(',', $notify);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  985)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  986) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  987)         return $this->sendCommand(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  988)             'RCPT TO',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  989)             $rcpt,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  990)             [250, 251]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  991)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  992)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  993) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  994)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  995)      * Send SMTP XCLIENT command to server and check its return code.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  996)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  997)      * @return bool True on success
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  998)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  999)     public function xclient(array $vars)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1000)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1001)         $xclient_options = "";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1002)         foreach ($vars as $key => $value) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1003)             if (in_array($key, SMTP::$xclient_allowed_attributes)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1004)                 $xclient_options .= " {$key}={$value}";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1005)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1006)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1007)         if (!$xclient_options) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1008)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1009)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1010)         return $this->sendCommand('XCLIENT', 'XCLIENT' . $xclient_options, 250);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1011)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1012) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1013)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1014)      * Send an SMTP RSET command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1015)      * Abort any transaction that is currently in progress.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1016)      * Implements RFC 821: RSET <CRLF>.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1017)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1018)      * @return bool True on success
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1019)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1020)     public function reset()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1021)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1022)         return $this->sendCommand('RSET', 'RSET', 250);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1023)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1024) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1025)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1026)      * Send a command to an SMTP server and check its return code.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1027)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1028)      * @param string    $command       The command name - not sent to the server
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1029)      * @param string    $commandstring The actual command to send
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1030)      * @param int|array $expect        One or more expected integer success codes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1031)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1032)      * @return bool True on success
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1033)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1034)     protected function sendCommand($command, $commandstring, $expect)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1035)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1036)         if (!$this->connected()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1037)             $this->setError("Called $command without being connected");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1038) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1039)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1040)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1041)         //Reject line breaks in all commands
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1042)         if ((strpos($commandstring, "\n") !== false) || (strpos($commandstring, "\r") !== false)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1043)             $this->setError("Command '$command' contained line breaks");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1044) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1045)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1046)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1047)         $this->client_send($commandstring . static::LE, $command);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1048) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1049)         $this->last_reply = $this->get_lines();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1050)         //Fetch SMTP code and possible error code explanation
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1051)         $matches = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1052)         if (preg_match('/^([\d]{3})[ -](?:([\d]\\.[\d]\\.[\d]{1,2}) )?/', $this->last_reply, $matches)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1053)             $code = (int) $matches[1];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1054)             $code_ex = (count($matches) > 2 ? $matches[2] : null);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1055)             //Cut off error code from each response line
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1056)             $detail = preg_replace(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1057)                 "/{$code}[ -]" .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1058)                 ($code_ex ? str_replace('.', '\\.', $code_ex) . ' ' : '') . '/m',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1059)                 '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1060)                 $this->last_reply
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1061)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1062)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1063)             //Fall back to simple parsing if regex fails
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1064)             $code = (int) substr($this->last_reply, 0, 3);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1065)             $code_ex = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1066)             $detail = substr($this->last_reply, 4);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1067)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1068) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1069)         $this->edebug('SERVER -> CLIENT: ' . $this->last_reply, self::DEBUG_SERVER);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1070) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1071)         if (!in_array($code, (array) $expect, true)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1072)             $this->setError(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1073)                 "$command command failed",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1074)                 $detail,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1075)                 $code,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1076)                 $code_ex
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1077)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1078)             $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1079)                 'SMTP ERROR: ' . $this->error['error'] . ': ' . $this->last_reply,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1080)                 self::DEBUG_CLIENT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1081)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1082) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1083)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1084)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1085) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1086)         //Don't clear the error store when using keepalive
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1087)         if ($command !== 'RSET') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1088)             $this->setError('');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1089)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1090) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1091)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1092)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1093) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1094)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1095)      * Send an SMTP SAML command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1096)      * Starts a mail transaction from the email address specified in $from.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1097)      * Returns true if successful or false otherwise. If True
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1098)      * the mail transaction is started and then one or more recipient
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1099)      * commands may be called followed by a data command. This command
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1100)      * will send the message to the users terminal if they are logged
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1101)      * in and send them an email.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1102)      * Implements RFC 821: SAML <SP> FROM:<reverse-path> <CRLF>.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1103)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1104)      * @param string $from The address the message is from
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1105)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1106)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1107)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1108)     public function sendAndMail($from)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1109)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1110)         return $this->sendCommand('SAML', "SAML FROM:$from", 250);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1111)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1112) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1113)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1114)      * Send an SMTP VRFY command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1115)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1116)      * @param string $name The name to verify
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1117)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1118)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1119)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1120)     public function verify($name)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1121)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1122)         return $this->sendCommand('VRFY', "VRFY $name", [250, 251]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1123)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1124) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1125)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1126)      * Send an SMTP NOOP command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1127)      * Used to keep keep-alives alive, doesn't actually do anything.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1128)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1129)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1130)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1131)     public function noop()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1132)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1133)         return $this->sendCommand('NOOP', 'NOOP', 250);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1134)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1135) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1136)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1137)      * Send an SMTP TURN command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1138)      * This is an optional command for SMTP that this class does not support.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1139)      * This method is here to make the RFC821 Definition complete for this class
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1140)      * and _may_ be implemented in future.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1141)      * Implements from RFC 821: TURN <CRLF>.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1142)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1143)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1144)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1145)     public function turn()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1146)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1147)         $this->setError('The SMTP TURN command is not implemented');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1148)         $this->edebug('SMTP NOTICE: ' . $this->error['error'], self::DEBUG_CLIENT);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1149) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1150)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1151)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1152) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1153)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1154)      * Send raw data to the server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1155)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1156)      * @param string $data    The data to send
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1157)      * @param string $command Optionally, the command this is part of, used only for controlling debug output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1158)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1159)      * @return int|bool The number of bytes sent to the server or false on error
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1160)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1161)     public function client_send($data, $command = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1162)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1163)         //If SMTP transcripts are left enabled, or debug output is posted online
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1164)         //it can leak credentials, so hide credentials in all but lowest level
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1165)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1166)             self::DEBUG_LOWLEVEL > $this->do_debug &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1167)             in_array($command, ['User & Password', 'Username', 'Password'], true)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1168)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1169)             $this->edebug('CLIENT -> SERVER: [credentials hidden]', self::DEBUG_CLIENT);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1170)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1171)             $this->edebug('CLIENT -> SERVER: ' . $data, self::DEBUG_CLIENT);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1172)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1173)         set_error_handler(function () {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1174)             call_user_func_array([$this, 'errorHandler'], func_get_args());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1175)         });
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1176)         $result = fwrite($this->smtp_conn, $data);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1177)         restore_error_handler();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1178) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1179)         return $result;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1180)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1181) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1182)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1183)      * Get the latest error.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1184)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1185)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1186)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1187)     public function getError()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1188)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1189)         return $this->error;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1190)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1191) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1192)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1193)      * Get SMTP extensions available on the server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1194)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1195)      * @return array|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1196)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1197)     public function getServerExtList()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1198)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1199)         return $this->server_caps;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1200)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1201) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1202)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1203)      * Get metadata about the SMTP server from its HELO/EHLO response.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1204)      * The method works in three ways, dependent on argument value and current state:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1205)      *   1. HELO/EHLO has not been sent - returns null and populates $this->error.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1206)      *   2. HELO has been sent -
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1207)      *     $name == 'HELO': returns server name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1208)      *     $name == 'EHLO': returns boolean false
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1209)      *     $name == any other string: returns null and populates $this->error
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1210)      *   3. EHLO has been sent -
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1211)      *     $name == 'HELO'|'EHLO': returns the server name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1212)      *     $name == any other string: if extension $name exists, returns True
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1213)      *       or its options (e.g. AUTH mechanisms supported). Otherwise returns False.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1214)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1215)      * @param string $name Name of SMTP extension or 'HELO'|'EHLO'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1216)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1217)      * @return string|bool|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1218)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1219)     public function getServerExt($name)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1220)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1221)         if (!$this->server_caps) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1222)             $this->setError('No HELO/EHLO was sent');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1223) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1224)             return null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1225)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1226) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1227)         if (!array_key_exists($name, $this->server_caps)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1228)             if ('HELO' === $name) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1229)                 return $this->server_caps['EHLO'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1230)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1231)             if ('EHLO' === $name || array_key_exists('EHLO', $this->server_caps)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1232)                 return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1233)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1234)             $this->setError('HELO handshake was used; No information about server extensions available');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1235) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1236)             return null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1237)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1238) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1239)         return $this->server_caps[$name];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1240)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1241) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1242)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1243)      * Get the last reply from the server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1244)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1245)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1246)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1247)     public function getLastReply()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1248)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1249)         return $this->last_reply;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1250)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1251) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1252)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1253)      * Read the SMTP server's response.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1254)      * Either before eof or socket timeout occurs on the operation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1255)      * With SMTP we can tell if we have more lines to read if the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1256)      * 4th character is '-' symbol. If it is a space then we don't
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1257)      * need to read anything else.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1258)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1259)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1260)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1261)     protected function get_lines()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1262)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1263)         //If the connection is bad, give up straight away
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1264)         if (!is_resource($this->smtp_conn)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1265)             return '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1266)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1267)         $data = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1268)         $endtime = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1269)         stream_set_timeout($this->smtp_conn, $this->Timeout);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1270)         if ($this->Timelimit > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1271)             $endtime = time() + $this->Timelimit;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1272)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1273)         $selR = [$this->smtp_conn];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1274)         $selW = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1275)         while (is_resource($this->smtp_conn) && !feof($this->smtp_conn)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1276)             //Must pass vars in here as params are by reference
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1277)             //solution for signals inspired by https://github.com/symfony/symfony/pull/6540
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1278)             set_error_handler(function () {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1279)                 call_user_func_array([$this, 'errorHandler'], func_get_args());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1280)             });
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1281)             $n = stream_select($selR, $selW, $selW, $this->Timelimit);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1282)             restore_error_handler();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1283) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1284)             if ($n === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1285)                 $message = $this->getError()['detail'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1286) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1287)                 $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1288)                     'SMTP -> get_lines(): select failed (' . $message . ')',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1289)                     self::DEBUG_LOWLEVEL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1290)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1291) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1292)                 //stream_select returns false when the `select` system call is interrupted
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1293)                 //by an incoming signal, try the select again
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1294)                 if (stripos($message, 'interrupted system call') !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1295)                     $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1296)                         'SMTP -> get_lines(): retrying stream_select',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1297)                         self::DEBUG_LOWLEVEL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1298)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1299)                     $this->setError('');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1300)                     continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1301)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1302) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1303)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1304)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1305) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1306)             if (!$n) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1307)                 $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1308)                     'SMTP -> get_lines(): select timed-out in (' . $this->Timelimit . ' sec)',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1309)                     self::DEBUG_LOWLEVEL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1310)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1311)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1312)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1313) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1314)             //Deliberate noise suppression - errors are handled afterwards
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1315)             $str = @fgets($this->smtp_conn, self::MAX_REPLY_LENGTH);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1316)             $this->edebug('SMTP INBOUND: "' . trim($str) . '"', self::DEBUG_LOWLEVEL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1317)             $data .= $str;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1318)             //If response is only 3 chars (not valid, but RFC5321 S4.2 says it must be handled),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1319)             //or 4th character is a space or a line break char, we are done reading, break the loop.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1320)             //String array access is a significant micro-optimisation over strlen
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1321)             if (!isset($str[3]) || $str[3] === ' ' || $str[3] === "\r" || $str[3] === "\n") {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1322)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1323)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1324)             //Timed-out? Log and break
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1325)             $info = stream_get_meta_data($this->smtp_conn);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1326)             if ($info['timed_out']) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1327)                 $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1328)                     'SMTP -> get_lines(): stream timed-out (' . $this->Timeout . ' sec)',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1329)                     self::DEBUG_LOWLEVEL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1330)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1331)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1332)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1333)             //Now check if reads took too long
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1334)             if ($endtime && time() > $endtime) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1335)                 $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1336)                     'SMTP -> get_lines(): timelimit reached (' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1337)                     $this->Timelimit . ' sec)',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1338)                     self::DEBUG_LOWLEVEL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1339)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1340)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1341)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1342)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1343) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1344)         return $data;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1345)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1346) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1347)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1348)      * Enable or disable VERP address generation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1349)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1350)      * @param bool $enabled
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1351)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1352)     public function setVerp($enabled = false)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1353)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1354)         $this->do_verp = $enabled;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1355)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1356) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1357)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1358)      * Get VERP address generation mode.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1359)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1360)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1361)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1362)     public function getVerp()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1363)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1364)         return $this->do_verp;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1365)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1366) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1367)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1368)      * Set error messages and codes.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1369)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1370)      * @param string $message      The error message
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1371)      * @param string $detail       Further detail on the error
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1372)      * @param string $smtp_code    An associated SMTP error code
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1373)      * @param string $smtp_code_ex Extended SMTP code
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1374)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1375)     protected function setError($message, $detail = '', $smtp_code = '', $smtp_code_ex = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1376)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1377)         $this->error = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1378)             'error' => $message,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1379)             'detail' => $detail,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1380)             'smtp_code' => $smtp_code,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1381)             'smtp_code_ex' => $smtp_code_ex,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1382)         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1383)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1384) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1385)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1386)      * Set debug output method.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1387)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1388)      * @param string|callable $method The name of the mechanism to use for debugging output, or a callable to handle it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1389)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1390)     public function setDebugOutput($method = 'echo')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1391)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1392)         $this->Debugoutput = $method;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1393)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1394) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1395)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1396)      * Get debug output method.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1397)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1398)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1399)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1400)     public function getDebugOutput()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1401)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1402)         return $this->Debugoutput;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1403)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1404) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1405)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1406)      * Set debug output level.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1407)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1408)      * @param int $level
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1409)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1410)     public function setDebugLevel($level = 0)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1411)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1412)         $this->do_debug = $level;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1413)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1414) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1415)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1416)      * Get debug output level.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1417)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1418)      * @return int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1419)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1420)     public function getDebugLevel()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1421)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1422)         return $this->do_debug;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1423)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1424) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1425)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1426)      * Set SMTP timeout.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1427)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1428)      * @param int $timeout The timeout duration in seconds
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1429)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1430)     public function setTimeout($timeout = 0)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1431)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1432)         $this->Timeout = $timeout;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1433)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1434) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1435)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1436)      * Get SMTP timeout.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1437)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1438)      * @return int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1439)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1440)     public function getTimeout()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1441)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1442)         return $this->Timeout;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1443)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1444) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1445)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1446)      * Reports an error number and string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1447)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1448)      * @param int    $errno   The error number returned by PHP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1449)      * @param string $errmsg  The error message returned by PHP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1450)      * @param string $errfile The file the error occurred in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1451)      * @param int    $errline The line number the error occurred on
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1452)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1453)     protected function errorHandler($errno, $errmsg, $errfile = '', $errline = 0)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1454)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1455)         $notice = 'Connection failed.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1456)         $this->setError(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1457)             $notice,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1458)             $errmsg,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1459)             (string) $errno
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1460)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1461)         $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1462)             "$notice Error #$errno: $errmsg [$errfile line $errline]",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1463)             self::DEBUG_CONNECTION
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1464)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1465)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1466) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1467)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1468)      * Extract and return the ID of the last SMTP transaction based on
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1469)      * a list of patterns provided in SMTP::$smtp_transaction_id_patterns.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1470)      * Relies on the host providing the ID in response to a DATA command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1471)      * If no reply has been received yet, it will return null.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1472)      * If no pattern was matched, it will return false.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1473)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1474)      * @return bool|string|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1475)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1476)     protected function recordLastTransactionID()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1477)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1478)         $reply = $this->getLastReply();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1479) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1480)         if (empty($reply)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1481)             $this->last_smtp_transaction_id = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1482)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1483)             $this->last_smtp_transaction_id = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1484)             foreach ($this->smtp_transaction_id_patterns as $smtp_transaction_id_pattern) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1485)                 $matches = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1486)                 if (preg_match($smtp_transaction_id_pattern, $reply, $matches)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1487)                     $this->last_smtp_transaction_id = trim($matches[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1488)                     break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1489)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1490)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1491)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1492) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1493)         return $this->last_smtp_transaction_id;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1494)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1495) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1496)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1497)      * Get the queue/transaction ID of the last SMTP transaction
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1498)      * If no reply has been received yet, it will return null.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1499)      * If no pattern was matched, it will return false.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1500)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1501)      * @return bool|string|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1502)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1503)      * @see recordLastTransactionID()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1504)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1505)     public function getLastTransactionID()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1506)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1507)         return $this->last_smtp_transaction_id;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1508)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1509) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1) 6.9.2
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  1) ### Gmail Account Information
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  2) 
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  3) login: PickUrPlace904@gmail.com
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  4) password: PickUrPl@ce904!
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  5) 
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  6) ### AWS Account Information
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  7) 
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  8) email: PickUrPlace904@gmail.com
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  9) account name: PickUrPlace904
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 10) password: PickUrPl@ce904!
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  1) <!-- 
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  2)  SMTP endpoint address: 
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  3)  email-smtp.us-east-2.amazonaws.com
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  4)  email-smtp-fips.us-east-2.amazonaws.com  
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  5) 
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  6) Amazon SES SMTP interface port number:
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  7) STARTTLS Port
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  8) 25, 587 or 2587
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  9) -->
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 10) 
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 11) <?php
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 12) //Import PHPMailer classes into the global namespace
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 13) //These must be at the top of your script, not inside a function
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 14) use PHPMailer\PHPMailer\PHPMailer;
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 15) use PHPMailer\PHPMailer\SMTP;
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 16) use PHPMailer\PHPMailer\Exception;
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 17) 
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 18) //Load Composer's autoloader
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 19) require 'path/to/PHPMailer/src/Exception.php';
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 20) require 'path/to/PHPMailer/src/PHPMailer.php';
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 21) require 'path/to/PHPMailer/src/SMTP.php';
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 22) require 'vendor/autoload.php';
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 23) 
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 24) //Create an instance; passing `true` enables exceptions
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 25) $mail = new PHPMailer(true);
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 26) 
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 27) try {
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 28)     // Server settings
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 29)     $mail->SMTPDebug = SMTP::DEBUG_SERVER;                      // Enable verbose debug output
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 30)     $mail->isSMTP();                           // Send using SMTP
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 31)     $mail->Host       = 'smtp.gmail.com';    // Set the SMTP server to send through
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 32)     $mail->SMTPAuth   = true;                  // Enable SMTP authentication
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 33)     $mail->Username   = 'your_email@example.com'; // SMTP username
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 34)     $mail->Password   = 'your_email_password';   // SMTP password
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 35)     $mail->SMTPSecure = PHPMailer::ENCRYPTION_STARTTLS; // Enable TLS encryption; `PHPMailer::ENCRYPTION_SMTPS` also accepted
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 36)     $mail->Port       = 587;                   // TCP port to connect to
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 37) 
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 38)     // Recipients
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 39)     $mail->setFrom('your_email@example.com', 'Your Name');
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 40)     $mail->addAddress('recipient@example.com', 'Recipient Name');  // Add a recipient
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 41) 
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 42)     // Content
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 43)     $mail->isHTML(true);  // Set email format to HTML
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 44)     $mail->Subject = 'Test Email using PHPMailer';
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 45)     $mail->Body    = 'This is the HTML message body <b>in bold!</b>';
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 46)     $mail->AltBody = 'This is the plain text body for non-HTML email clients';
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 47) 
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 48)     // Send email
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 49)     $mail->send();
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 50)     echo 'Message has been sent';
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 51) } catch (Exception $e) {
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 52)     echo "Message could not be sent. Mailer Error: {$mail->ErrorInfo}";
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 53) }
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 54) 
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 55) ?>
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 1) ﻿IAM user name,SMTP user name,SMTP password
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 2) ses-smtp-user.20241014-090135,AKIAU5LH5V5QZPX7Z7IG,BM1CSFmMkzlRqyK+oX74XIGneD3Hg1BLrZ7Oej6vjw+X
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) GPL Cooperation Commitment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) Version 1.0
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4) Before filing or continuing to prosecute any legal proceeding or claim
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5) (other than a Defensive Action) arising from termination of a Covered
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6) License, we commit to extend to the person or entity ('you') accused
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) of violating the Covered License the following provisions regarding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) cure and reinstatement, taken from GPL version 3. As used here, the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) term 'this License' refers to the specific Covered License being
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) enforced.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12)     However, if you cease all violation of this License, then your
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13)     license from a particular copyright holder is reinstated (a)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14)     provisionally, unless and until the copyright holder explicitly
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15)     and finally terminates your license, and (b) permanently, if the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16)     copyright holder fails to notify you of the violation by some
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17)     reasonable means prior to 60 days after the cessation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19)     Moreover, your license from a particular copyright holder is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20)     reinstated permanently if the copyright holder notifies you of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21)     violation by some reasonable means, this is the first time you
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22)     have received notice of violation of this License (for any work)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23)     from that copyright holder, and you cure the violation prior to 30
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24)     days after your receipt of the notice.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) We intend this Commitment to be irrevocable, and binding and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) enforceable against us and assignees of or successors to our
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) copyrights.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) Definitions
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) 'Covered License' means the GNU General Public License, version 2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) (GPLv2), the GNU Lesser General Public License, version 2.1
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) (LGPLv2.1), or the GNU Library General Public License, version 2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) (LGPLv2), all as published by the Free Software Foundation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 37) 'Defensive Action' means a legal proceeding or claim that We bring
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 38) against you in response to a prior proceeding or claim initiated by
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 39) you or your affiliate.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 40) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 41) 'We' means each contributor to this repository as of the date of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 42) inclusion of this file, including subsidiaries of a corporate
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 43) contributor.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 44) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 45) This work is available under a Creative Commons Attribution-ShareAlike
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 46) 4.0 International license (https://creativecommons.org/licenses/by-sa/4.0/).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2)     "name": "phpmailer/phpmailer",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3)     "type": "library",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)     "description": "PHPMailer is a full-featured email creation and transfer class for PHP",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)     "authors": [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)         {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)             "name": "Marcus Bointon",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)             "email": "phpmailer@synchromedia.co.uk"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)         },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10)         {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11)             "name": "Jim Jagielski",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12)             "email": "jimjag@gmail.com"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13)         },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14)         {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15)             "name": "Andy Prevost",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16)             "email": "codeworxtech@users.sourceforge.net"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17)         },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18)         {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19)             "name": "Brent R. Matzelle"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21)     ],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22)     "funding": [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23)         {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24)             "url": "https://github.com/Synchro",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25)             "type": "github"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27)     ],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28)     "config": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29)         "allow-plugins": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30)             "dealerdirect/phpcodesniffer-composer-installer": true
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31)         },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32)         "lock": false
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33)     },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34)     "require": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35)         "php": ">=5.5.0",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36)         "ext-ctype": "*",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 37)         "ext-filter": "*",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 38)         "ext-hash": "*"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 39)     },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 40)     "require-dev": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 41)         "dealerdirect/phpcodesniffer-composer-installer": "^1.0",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 42)         "doctrine/annotations": "^1.2.6 || ^1.13.3",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 43)         "php-parallel-lint/php-console-highlighter": "^1.0.0",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 44)         "php-parallel-lint/php-parallel-lint": "^1.3.2",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 45)         "phpcompatibility/php-compatibility": "^9.3.5",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 46)         "roave/security-advisories": "dev-latest",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 47)         "squizlabs/php_codesniffer": "^3.7.2",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 48)         "yoast/phpunit-polyfills": "^1.0.4"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 49)     },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 50)     "suggest": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 51)         "decomplexity/SendOauth2": "Adapter for using XOAUTH2 authentication",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 52)         "ext-mbstring": "Needed to send email in multibyte encoding charset or decode encoded addresses",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 53)         "ext-openssl": "Needed for secure SMTP sending and DKIM signing",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 54)         "greew/oauth2-azure-provider": "Needed for Microsoft Azure XOAUTH2 authentication",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 55)         "hayageek/oauth2-yahoo": "Needed for Yahoo XOAUTH2 authentication",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 56)         "league/oauth2-google": "Needed for Google XOAUTH2 authentication",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 57)         "psr/log": "For optional PSR-3 debug logging",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 58)         "thenetworg/oauth2-azure": "Needed for Microsoft XOAUTH2 authentication",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 59)         "symfony/polyfill-mbstring": "To support UTF-8 if the Mbstring PHP extension is not enabled (^1.2)"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 60)     },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 61)     "autoload": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 62)         "psr-4": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 63)             "PHPMailer\\PHPMailer\\": "src/"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 64)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 65)     },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 66)     "autoload-dev": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 67)         "psr-4": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 68)             "PHPMailer\\Test\\": "test/"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 69)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 70)     },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 71)     "license": "LGPL-2.1-only",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 72)     "scripts": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 73)         "check": "./vendor/bin/phpcs",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 74)         "test": "./vendor/bin/phpunit --no-coverage",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 75)         "coverage": "./vendor/bin/phpunit",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 76)         "lint": [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 77)             "@php ./vendor/php-parallel-lint/php-parallel-lint/parallel-lint . --show-deprecated -e php,phps --exclude vendor --exclude .git --exclude build"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 78)         ]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 79)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 80) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) root = true
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) [*]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4) charset = utf-8
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5) indent_size = 4
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6) indent_style = space
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) end_of_line = lf
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) insert_final_newline = true
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) trim_trailing_whitespace = true
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) [*.md]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) trim_trailing_whitespace = false
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) [*.{yml,yaml}]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) indent_size = 2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   4)  * PHPMailer - PHP email creation and transport class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   5)  * PHP Version 5.5
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   6)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   7)  * @see https://github.com/PHPMailer/PHPMailer/ The PHPMailer GitHub project
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   8)  * @author Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   9)  * @author Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  10)  * @author Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  11)  * @author Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  12)  * @copyright 2012 - 2020 Marcus Bointon
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  13)  * @copyright 2010 - 2012 Jim Jagielski
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  14)  * @copyright 2004 - 2009 Andy Prevost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  15)  * @license https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html GNU Lesser General Public License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  16)  * @note This program is distributed in the hope that it will be useful - WITHOUT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  17)  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  18)  * FITNESS FOR A PARTICULAR PURPOSE.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  19)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  20) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  21) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  22)  * Get an OAuth2 token from an OAuth2 provider.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  23)  * * Install this script on your server so that it's accessible
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  24)  * as [https/http]://<yourdomain>/<folder>/get_oauth_token.php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  25)  * e.g.: http://localhost/phpmailer/get_oauth_token.php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  26)  * * Ensure dependencies are installed with 'composer install'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  27)  * * Set up an app in your Google/Yahoo/Microsoft account
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  28)  * * Set the script address as the app's redirect URL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  29)  * If no refresh token is obtained when running this file,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  30)  * revoke access to your app and run the script again.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  31)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  32) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  33) namespace PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  34) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  35) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  36)  * Aliases for League Provider Classes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  37)  * Make sure you have added these to your composer.json and run `composer install`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  38)  * Plenty to choose from here:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  39)  * @see https://oauth2-client.thephpleague.com/providers/thirdparty/
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  40)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  41) //@see https://github.com/thephpleague/oauth2-google
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  42) use League\OAuth2\Client\Provider\Google;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  43) //@see https://packagist.org/packages/hayageek/oauth2-yahoo
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  44) use Hayageek\OAuth2\Client\Provider\Yahoo;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  45) //@see https://github.com/stevenmaguire/oauth2-microsoft
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  46) use Stevenmaguire\OAuth2\Client\Provider\Microsoft;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  47) //@see https://github.com/greew/oauth2-azure-provider
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  48) use Greew\OAuth2\Client\Provider\Azure;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  49) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  50) if (!isset($_GET['code']) && !isset($_POST['provider'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  51)     ?>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  52) <html>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  53) <body>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  54) <form method="post">
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  55)     <h1>Select Provider</h1>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  56)     <input type="radio" name="provider" value="Google" id="providerGoogle">
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  57)     <label for="providerGoogle">Google</label><br>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  58)     <input type="radio" name="provider" value="Yahoo" id="providerYahoo">
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  59)     <label for="providerYahoo">Yahoo</label><br>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  60)     <input type="radio" name="provider" value="Microsoft" id="providerMicrosoft">
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  61)     <label for="providerMicrosoft">Microsoft</label><br>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  62)     <input type="radio" name="provider" value="Azure" id="providerAzure">
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  63)     <label for="providerAzure">Azure</label><br>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  64)     <h1>Enter id and secret</h1>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  65)     <p>These details are obtained by setting up an app in your provider's developer console.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  66)     </p>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  67)     <p>ClientId: <input type="text" name="clientId"><p>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  68)     <p>ClientSecret: <input type="text" name="clientSecret"></p>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  69)     <p>TenantID (only relevant for Azure): <input type="text" name="tenantId"></p>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  70)     <input type="submit" value="Continue">
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  71) </form>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  72) </body>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  73) </html>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  74)     <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  75)     exit;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  76) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  77) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  78) require 'vendor/autoload.php';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  79) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  80) session_start();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  81) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  82) $providerName = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  83) $clientId = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  84) $clientSecret = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  85) $tenantId = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  86) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  87) if (array_key_exists('provider', $_POST)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  88)     $providerName = $_POST['provider'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  89)     $clientId = $_POST['clientId'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  90)     $clientSecret = $_POST['clientSecret'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  91)     $tenantId = $_POST['tenantId'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  92)     $_SESSION['provider'] = $providerName;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  93)     $_SESSION['clientId'] = $clientId;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  94)     $_SESSION['clientSecret'] = $clientSecret;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  95)     $_SESSION['tenantId'] = $tenantId;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  96) } elseif (array_key_exists('provider', $_SESSION)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  97)     $providerName = $_SESSION['provider'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  98)     $clientId = $_SESSION['clientId'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  99)     $clientSecret = $_SESSION['clientSecret'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 100)     $tenantId = $_SESSION['tenantId'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 101) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 102) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 103) //If you don't want to use the built-in form, set your client id and secret here
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 104) //$clientId = 'RANDOMCHARS-----duv1n2.apps.googleusercontent.com';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 105) //$clientSecret = 'RANDOMCHARS-----lGyjPcRtvP';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 106) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 107) //If this automatic URL doesn't work, set it yourself manually to the URL of this script
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 108) $redirectUri = (isset($_SERVER['HTTPS']) ? 'https://' : 'http://') . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 109) //$redirectUri = 'http://localhost/PHPMailer/redirect';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 110) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 111) $params = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 112)     'clientId' => $clientId,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 113)     'clientSecret' => $clientSecret,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 114)     'redirectUri' => $redirectUri,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 115)     'accessType' => 'offline'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 116) ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 117) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 118) $options = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 119) $provider = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 120) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 121) switch ($providerName) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 122)     case 'Google':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 123)         $provider = new Google($params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 124)         $options = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 125)             'scope' => [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 126)                 'https://mail.google.com/'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 127)             ]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 128)         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 129)         break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 130)     case 'Yahoo':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 131)         $provider = new Yahoo($params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 132)         break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 133)     case 'Microsoft':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 134)         $provider = new Microsoft($params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 135)         $options = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 136)             'scope' => [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 137)                 'wl.imap',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 138)                 'wl.offline_access'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 139)             ]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 140)         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 141)         break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 142)     case 'Azure':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 143)         $params['tenantId'] = $tenantId;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 144) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 145)         $provider = new Azure($params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 146)         $options = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 147)             'scope' => [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 148)                 'https://outlook.office.com/SMTP.Send',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 149)                 'offline_access'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 150)             ]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 151)         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 152)         break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 153) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 154) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 155) if (null === $provider) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 156)     exit('Provider missing');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 157) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 158) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 159) if (!isset($_GET['code'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 160)     //If we don't have an authorization code then get one
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 161)     $authUrl = $provider->getAuthorizationUrl($options);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 162)     $_SESSION['oauth2state'] = $provider->getState();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 163)     header('Location: ' . $authUrl);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 164)     exit;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 165)     //Check given state against previously stored one to mitigate CSRF attack
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 166) } elseif (empty($_GET['state']) || ($_GET['state'] !== $_SESSION['oauth2state'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 167)     unset($_SESSION['oauth2state']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 168)     unset($_SESSION['provider']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 169)     exit('Invalid state');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 170) } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 171)     unset($_SESSION['provider']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 172)     //Try to get an access token (using the authorization code grant)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 173)     $token = $provider->getAccessToken(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 174)         'authorization_code',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 175)         [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 176)             'code' => $_GET['code']
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 177)         ]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 178)     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 179)     //Use this to interact with an API on the users behalf
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 180)     //Use this to get a new access token if the old one expires
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 181)     echo 'Refresh Token: ', htmlspecialchars($token->getRefreshToken());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 182) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Afrikaans PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) $PHPMAILER_LANG['authenticate']         = 'SMTP-fout: kon nie geverifieer word nie.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['connect_host']         = 'SMTP-fout: kon nie aan SMTP-verbind nie.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP-fout: data nie aanvaar nie.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['empty_message']        = 'Boodskapliggaam leeg.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['encoding']             = 'Onbekende kodering: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['execute']              = 'Kon nie uitvoer nie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['file_access']          = 'Kon nie lêer oopmaak nie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_open']            = 'Lêerfout: Kon nie lêer oopmaak nie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['from_failed']          = 'Die volgende Van adres misluk: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['instantiate']          = 'Kon nie posfunksie instansieer nie.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['invalid_address']      = 'Ongeldige adres: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer word nie ondersteun nie.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['provide_address']      = 'U moet ten minste een ontvanger e-pos adres verskaf.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['recipients_failed']    = 'SMTP-fout: Die volgende ontvangers het misluk: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['signing']              = 'Ondertekening Fout: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP-verbinding () misluk.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_error']           = 'SMTP-bediener fout: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['variable_set']         = 'Kan nie veranderlike instel of herstel nie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['extension_missing']    = 'Uitbreiding ontbreek: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Arabic PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author bahjat al mostafa <bahjat983@hotmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'خطأ SMTP : لا يمكن تأكيد الهوية.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'خطأ SMTP: لا يمكن الاتصال بالخادم SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'خطأ SMTP: لم يتم قبول المعلومات .';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'نص الرسالة فارغ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'ترميز غير معروف: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'لا يمكن تنفيذ : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'لا يمكن الوصول للملف: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'خطأ في الملف: لا يمكن فتحه: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'خطأ على مستوى عنوان المرسل : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'لا يمكن توفير خدمة البريد.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'الإرسال غير ممكن لأن عنوان البريد الإلكتروني غير صالح: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' برنامج الإرسال غير مدعوم.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'يجب توفير عنوان البريد الإلكتروني لمستلم واحد على الأقل.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'خطأ SMTP: الأخطاء التالية فشل في الارسال لكل من : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'خطأ في التوقيع: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() غير ممكن.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'خطأ على مستوى الخادم SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'لا يمكن تعيين أو إعادة تعيين متغير: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'الإضافة غير موجودة: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Assamese PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Manish Sarkar <manish.n.manish@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP ত্ৰুটি: প্ৰমাণীকৰণ কৰিব নোৱাৰি';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['buggy_php']            = 'আপোনাৰ PHP সংস্কৰণ এটা বাগৰ দ্বাৰা প্ৰভাৱিত হয় যাৰ ফলত নষ্ট বাৰ্তা হব পাৰে । ইয়াক সমাধান কৰিবলে, প্ৰেৰণ কৰিবলে SMTP ব্যৱহাৰ কৰক, আপোনাৰ php.ini ত mail.add_x_header বিকল্প নিষ্ক্ৰিয় কৰক, MacOS বা Linux লৈ সলনি কৰক, বা আপোনাৰ PHP সংস্কৰণ 7.0.17+ বা 7.1.3+ লৈ সলনি কৰক ।';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP ত্ৰুটি: SMTP চাৰ্ভাৰৰ সৈতে সংযোগ কৰিবলে অক্ষম';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP ত্ৰুটি: তথ্য গ্ৰহণ কৰা হোৱা নাই';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'বাৰ্তাৰ মূখ্য অংশ খালী।';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'অজ্ঞাত এনকোডিং: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'এক্সিকিউট কৰিব নোৱাৰি: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['extension_missing']    = 'সম্প্ৰসাৰণ নোহোৱা হৈছে: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_access']          = 'ফাইল অভিগম কৰিবলে অক্ষম: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['file_open']            = 'ফাইল ত্ৰুটি: ফাইল খোলিবলৈ অক্ষম: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['from_failed']          = 'নিম্নলিখিত প্ৰেৰকৰ ঠিকনা(সমূহ) ব্যৰ্থ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['instantiate']          = 'মেইল ফাংচনৰ এটা উদাহৰণ সৃষ্টি কৰিবলে অক্ষম';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_address']      = 'প্ৰেৰণ কৰিব নোৱাৰি: অবৈধ ইমেইল ঠিকনা: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_header']       = 'অবৈধ হেডাৰৰ নাম বা মান';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_hostentry']    = 'অবৈধ হোষ্টেন্ট্ৰি: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_host']         = 'অবৈধ হস্ট:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['mailer_not_supported'] = 'মেইলাৰ সমৰ্থিত নহয়।';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['provide_address']      = 'আপুনি অন্ততঃ এটা গন্তব্য ইমেইল ঠিকনা দিব লাগিব';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['recipients_failed']    = 'SMTP ত্ৰুটি: নিম্নলিখিত গন্তব্যস্থানসমূহ ব্যৰ্থ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['signing']              = 'স্বাক্ষৰ কৰাত ব্যৰ্থ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_code']            = 'SMTP কড: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['smtp_code_ex']         = 'অতিৰিক্ত SMTP তথ্য: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_detail']          = 'বিৱৰণ:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP সংযোগ() ব্যৰ্থ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_error']           = 'SMTP চাৰ্ভাৰৰ ত্ৰুটি: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['variable_set']         = 'চলক নিৰ্ধাৰণ কৰিব পৰা নগল: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['extension_missing']    = 'অনুপস্থিত সম্প্ৰসাৰণ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Azerbaijani PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author @mirjalal
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP xətası: Giriş uğursuz oldu.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP xətası: SMTP serverinə qoşulma uğursuz oldu.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP xətası: Verilənlər qəbul edilməyib.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Boş mesaj göndərilə bilməz.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Qeyri-müəyyən kodlaşdırma: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Əmr yerinə yetirilmədi: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Fayla giriş yoxdur: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Fayl xətası: Fayl açıla bilmədi: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Göstərilən poçtlara göndərmə uğursuz oldu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Mail funksiyası işə salına bilmədi.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Düzgün olmayan e-mail adresi: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' - e-mail kitabxanası dəstəklənmir.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Ən azı bir e-mail adresi daxil edilməlidir.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP xətası: Aşağıdakı ünvanlar üzrə alıcılara göndərmə uğursuzdur: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'İmzalama xətası: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP serverinə qoşulma uğursuz oldu.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP serveri xətası: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Dəyişənin quraşdırılması uğursuz oldu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Bosnian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Ermin Islamagić <ermin@islamagic.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP Greška: Neuspjela prijava.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP Greška: Nije moguće spojiti se sa SMTP serverom.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP Greška: Podatci nisu prihvaćeni.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Sadržaj poruke je prazan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Nepoznata kriptografija: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Nije moguće izvršiti naredbu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Nije moguće pristupiti datoteci: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Nije moguće otvoriti datoteku: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'SMTP Greška: Slanje sa navedenih e-mail adresa nije uspjelo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Greška: Slanje na navedene e-mail adrese nije uspjelo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'Ne mogu pokrenuti mail funkcionalnost.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'E-mail nije poslan. Neispravna e-mail adresa: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer nije podržan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['provide_address']      = 'Definišite barem jednu adresu primaoca.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Greška prilikom prijave: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'Spajanje na SMTP server nije uspjelo.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP greška: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Nije moguće postaviti varijablu ili je vratiti nazad: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Nedostaje ekstenzija: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Belarusian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Aleksander Maksymiuk <info@setpro.pl>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'Памылка SMTP: памылка ідэнтыфікацыі.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Памылка SMTP: нельга ўстанавіць сувязь з SMTP-серверам.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Памылка SMTP: звесткі непрынятыя.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Пустое паведамленне.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Невядомая кадыроўка тэксту: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Нельга выканаць каманду: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Няма доступу да файла: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Нельга адкрыць файл: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Няправільны адрас адпраўніка: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Нельга прымяніць функцыю mail().';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Нельга даслаць паведамленне, няправільны email атрымальніка: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['provide_address']      = 'Запоўніце, калі ласка, правільны email атрымальніка.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['mailer_not_supported'] = ' - паштовы сервер не падтрымліваецца.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'Памылка SMTP: няправільныя атрымальнікі: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Памылка подпісу паведамлення: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'Памылка сувязі з SMTP-серверам.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'Памылка SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Нельга ўстанавіць або перамяніць значэнне пераменнай: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Bulgarian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Mikhail Kyosev <mialygk@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP грешка: Не може да се удостовери пред сървъра.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP грешка: Не може да се свърже с SMTP хоста.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP грешка: данните не са приети.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Съдържанието на съобщението е празно';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Неизвестно кодиране: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Не може да се изпълни: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Няма достъп до файл: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Файлова грешка: Не може да се отвори файл: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Следните адреси за подател са невалидни: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Не може да се инстанцира функцията mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Невалиден адрес: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' - пощенски сървър не се поддържа.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Трябва да предоставите поне един email адрес за получател.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP грешка: Следните адреси за Получател са невалидни: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Грешка при подписване: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP провален connect().';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP сървърна грешка: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Не може да се установи или възстанови променлива: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Липсва разширение: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Bengali PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Manish Sarkar <manish.n.manish@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP ত্রুটি: প্রমাণীকরণ করতে অক্ষম৷';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['buggy_php']            = 'আপনার PHP সংস্করণ একটি বাগ দ্বারা প্রভাবিত হয় যার ফলে দূষিত বার্তা হতে পারে। এটি ঠিক করতে, পাঠাতে SMTP ব্যবহার করুন, আপনার php.ini এ mail.add_x_header বিকল্পটি নিষ্ক্রিয় করুন, MacOS বা Linux-এ স্যুইচ করুন, অথবা আপনার PHP সংস্করণকে 7.0.17+ বা 7.1.3+ এ পরিবর্তন করুন।';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP ত্রুটি: SMTP সার্ভারের সাথে সংযোগ করতে অক্ষম৷';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP ত্রুটি: ডেটা গ্রহণ করা হয়নি৷';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'বার্তার অংশটি খালি।';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'অজানা এনকোডিং: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'নির্বাহ করতে অক্ষম: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['extension_missing']    = 'এক্সটেনশন অনুপস্থিত:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_access']          = 'ফাইল অ্যাক্সেস করতে অক্ষম: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['file_open']            = 'ফাইল ত্রুটি: ফাইল খুলতে অক্ষম: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['from_failed']          = 'নিম্নলিখিত প্রেরকের ঠিকানা(গুলি) ব্যর্থ হয়েছে: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['instantiate']          = 'মেল ফাংশনের একটি উদাহরণ তৈরি করতে অক্ষম৷';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_address']      = 'পাঠাতে অক্ষম: অবৈধ ইমেল ঠিকানা: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_header']       = 'অবৈধ হেডার নাম বা মান';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_hostentry']    = 'অবৈধ হোস্টেন্ট্রি: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_host']         = 'অবৈধ হোস্ট:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['mailer_not_supported'] = 'মেইলার সমর্থিত নয়।';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['provide_address']      = 'আপনাকে অবশ্যই অন্তত একটি গন্তব্য ইমেল ঠিকানা প্রদান করতে হবে৷';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['recipients_failed']    = 'SMTP ত্রুটি: নিম্নলিখিত গন্তব্যগুলি ব্যর্থ হয়েছে: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['signing']              = 'স্বাক্ষর করতে ব্যর্থ হয়েছে: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_code']            = 'SMTP কোড: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['smtp_code_ex']         = 'অতিরিক্ত SMTP তথ্য:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_detail']          = 'বর্ণনা: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP সংযোগ() ব্যর্থ হয়েছে৷';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_error']           = 'SMTP সার্ভার ত্রুটি: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['variable_set']         = 'পরিবর্তনশীল সেট করা যায়নি: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['extension_missing']    = 'অনুপস্থিত এক্সটেনশন: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Catalan PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Ivan <web AT microstudi DOT com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'Error SMTP: No s’ha pogut autenticar.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Error SMTP: No es pot connectar al servidor SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Error SMTP: Dades no acceptades.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'El cos del missatge està buit.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Codificació desconeguda: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'No es pot executar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'No es pot accedir a l’arxiu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Error d’Arxiu: No es pot obrir l’arxiu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'La(s) següent(s) adreces de remitent han fallat: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'No s’ha pogut crear una instància de la funció Mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Adreça d’email invalida: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer no està suportat';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'S’ha de proveir almenys una adreça d’email com a destinatari.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'Error SMTP: Els següents destinataris han fallat: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Error al signar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'Ha fallat el SMTP Connect().';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'Error del servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'No s’ha pogut establir o restablir la variable: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Czech PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) $PHPMAILER_LANG['authenticate']         = 'Chyba SMTP: Autentizace selhala.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['connect_host']         = 'Chyba SMTP: Nelze navázat spojení se SMTP serverem.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['data_not_accepted']    = 'Chyba SMTP: Data nebyla přijata.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['empty_message']        = 'Prázdné tělo zprávy';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['encoding']             = 'Neznámé kódování: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['execute']              = 'Nelze provést: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['file_access']          = 'Nelze získat přístup k souboru: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_open']            = 'Chyba souboru: Nelze otevřít soubor pro čtení: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['from_failed']          = 'Následující adresa odesílatele je nesprávná: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['instantiate']          = 'Nelze vytvořit instanci emailové funkce.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['invalid_address']      = 'Neplatná adresa: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_hostentry']    = 'Záznam hostitele je nesprávný: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_host']         = 'Hostitel je nesprávný: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer není podporován.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['provide_address']      = 'Musíte zadat alespoň jednu emailovou adresu příjemce.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['recipients_failed']    = 'Chyba SMTP: Následující adresy příjemců nejsou správně: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['signing']              = 'Chyba přihlašování: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() selhal.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'Chyba SMTP serveru: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'Nelze nastavit nebo změnit proměnnou: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'Chybí rozšíření: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Danish PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author John Sebastian <jms@iwb.dk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * Rewrite and extension of the work by Mikael Stokkebro <info@stokkebro.dk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['authenticate']         = 'SMTP fejl: Login mislykkedes.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['buggy_php']            = 'Din version af PHP er berørt af en fejl, som gør at dine beskeder muligvis vises forkert. For at rette dette kan du skifte til SMTP, slå mail.add_x_header headeren i din php.ini fil fra, skifte til MacOS eller Linux eller opgradere din version af PHP til 7.0.17+ eller 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['connect_host']         = 'SMTP fejl: Forbindelse til SMTP serveren kunne ikke oprettes.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP fejl: Data blev ikke accepteret.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['empty_message']        = 'Meddelelsen er uden indhold';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['encoding']             = 'Ukendt encode-format: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['execute']              = 'Kunne ikke afvikle: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['extension_missing']    = 'Udvidelse mangler: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['file_access']          = 'Kunne ikke tilgå filen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['file_open']            = 'Fil fejl: Kunne ikke åbne filen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['from_failed']          = 'Følgende afsenderadresse er forkert: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['instantiate']          = 'Email funktionen kunne ikke initialiseres.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_address']      = 'Udgyldig adresse: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_header']       = 'Ugyldig header navn eller værdi';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_hostentry']    = 'Ugyldig hostentry: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['invalid_host']         = 'Ugyldig vært: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer understøttes ikke.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['provide_address']      = 'Indtast mindst en modtagers email adresse.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['recipients_failed']    = 'SMTP fejl: Følgende modtagere fejlede: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['signing']              = 'Signeringsfejl: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_code']            = 'SMTP kode: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_code_ex']         = 'Yderligere SMTP info: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() fejlede.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_detail']          = 'Detalje: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_error']           = 'SMTP server fejl: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['variable_set']         = 'Kunne ikke definere eller nulstille variablen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * German PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) $PHPMAILER_LANG['authenticate']         = 'SMTP-Fehler: Authentifizierung fehlgeschlagen.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['connect_host']         = 'SMTP-Fehler: Konnte keine Verbindung zum SMTP-Host herstellen.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP-Fehler: Daten werden nicht akzeptiert.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['empty_message']        = 'E-Mail-Inhalt ist leer.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['encoding']             = 'Unbekannte Kodierung: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['execute']              = 'Konnte folgenden Befehl nicht ausführen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['file_access']          = 'Zugriff auf folgende Datei fehlgeschlagen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_open']            = 'Dateifehler: Konnte folgende Datei nicht öffnen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['from_failed']          = 'Die folgende Absenderadresse ist nicht korrekt: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['instantiate']          = 'Mail-Funktion konnte nicht initialisiert werden.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['invalid_address']      = 'Die Adresse ist ungültig: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_hostentry']    = 'Ungültiger Hosteintrag: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_host']         = 'Ungültiger Host: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer wird nicht unterstützt.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['provide_address']      = 'Bitte geben Sie mindestens eine Empfängeradresse an.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['recipients_failed']    = 'SMTP-Fehler: Die folgenden Empfänger sind nicht korrekt: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['signing']              = 'Fehler beim Signieren: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'Verbindung zum SMTP-Server fehlgeschlagen.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'Fehler vom SMTP-Server: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'Kann Variable nicht setzen oder zurücksetzen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'Fehlende Erweiterung: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Greek PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) $PHPMAILER_LANG['authenticate']         = 'Σφάλμα SMTP: Αδυναμία πιστοποίησης.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['buggy_php']            = 'Η έκδοση PHP που χρησιμοποιείτε παρουσιάζει σφάλμα που μπορεί να έχει ως αποτέλεσμα κατεστραμένα μηνύματα. Για να το διορθώσετε, αλλάξτε τον τρόπο αποστολής σε SMTP, απενεργοποιήστε την επιλογή mail.add_x_header στο αρχείο php.ini, αλλάξτε λειτουργικό σε MacOS ή Linux ή αναβαθμίστε την PHP σε έκδοση 7.0.17+ ή 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Σφάλμα SMTP: Αδυναμία σύνδεσης με τον φιλοξενητή SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Σφάλμα SMTP: Μη αποδεκτά δεδομένα.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Η ηλεκτρονική επιστολή δεν έχει περιεχόμενο.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Άγνωστη μορφή κωδικοποίησης: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Αδυναμία εκτέλεσης: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['extension_missing']    = 'Απουσία επέκτασης: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Αδυναμία πρόσβασης στο αρχείο: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'Σφάλμα Αρχείου: Αδυναμία ανοίγματος αρχείου: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'Η ακόλουθη διεύθυνση αποστολέα δεν είναι σωστή: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'Αδυναμία εκκίνησης συνάρτησης Mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'Μη έγκυρη διεύθυνση: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_header']       = 'Μη έγκυρο όνομα κεφαλίδας ή τιμή';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_hostentry']    = 'Μη έγκυρη εισαγωγή φιλοξενητή: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_host']         = 'Μη έγκυρος φιλοξενητής: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer δεν υποστηρίζεται.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['provide_address']      = 'Δώστε τουλάχιστον μια ηλεκτρονική διεύθυνση παραλήπτη.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['recipients_failed']    = 'Σφάλμα SMTP: Οι παρακάτω διευθύνσεις παραλήπτη δεν είναι έγκυρες: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['signing']              = 'Σφάλμα υπογραφής: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['smtp_code']            = 'Κώδικάς SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_code_ex']         = 'Πρόσθετες πληροφορίες SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['smtp_connect_failed']  = 'Αποτυχία σύνδεσης SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_detail']          = 'Λεπτομέρεια: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_error']           = 'Σφάλμα με τον διακομιστή SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['variable_set']         = 'Αδυναμία ορισμού ή επαναφοράς μεταβλητής: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Esperanto PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) $PHPMAILER_LANG['authenticate']         = 'Eraro de servilo SMTP : aŭtentigo malsukcesis.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['connect_host']         = 'Eraro de servilo SMTP : konektado al servilo malsukcesis.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['data_not_accepted']    = 'Eraro de servilo SMTP : neĝustaj datumoj.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['empty_message']        = 'Teksto de mesaĝo mankas.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['encoding']             = 'Nekonata kodoprezento: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['execute']              = 'Lanĉi rulumadon ne eblis: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['file_access']          = 'Aliro al dosiero ne sukcesis: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_open']            = 'Eraro de dosiero: malfermo neeblas: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['from_failed']          = 'Jena adreso de sendinto malsukcesis: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['instantiate']          = 'Genero de retmesaĝa funkcio neeblis.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['invalid_address']      = 'Retadreso ne validas: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['mailer_not_supported'] = ' mesaĝilo ne subtenata.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['provide_address']      = 'Vi devas tajpi almenaŭ unu recevontan retadreson.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['recipients_failed']    = 'Eraro de servilo SMTP : la jenaj poŝtrecivuloj kaŭzis eraron: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['signing']              = 'Eraro de subskribo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP konektado malsukcesis.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_error']           = 'Eraro de servilo SMTP : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['variable_set']         = 'Variablo ne pravalorizeblas aŭ ne repravalorizeblas: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['extension_missing']    = 'Mankas etendo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Spanish PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Matt Sturdy <matt.sturdy@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Crystopher Glodzienski Cardoso <crystopher.glodzienski@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author Daniel Cruz <danicruz0415@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['authenticate']         = 'Error SMTP: Imposible autentificar.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['buggy_php']            = 'Tu versión de PHP está afectada por un bug que puede resultar en mensajes corruptos. Para arreglarlo, cambia a enviar usando SMTP, deshabilita la opción mail.add_x_header en tu php.ini, cambia a MacOS o Linux, o actualiza tu PHP a la versión 7.0.17+ o 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['connect_host']         = 'Error SMTP: Imposible conectar al servidor SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['data_not_accepted']    = 'Error SMTP: Datos no aceptados.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['empty_message']        = 'El cuerpo del mensaje está vacío.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['encoding']             = 'Codificación desconocida: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['execute']              = 'Imposible ejecutar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['extension_missing']    = 'Extensión faltante: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['file_access']          = 'Imposible acceder al archivo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['file_open']            = 'Error de Archivo: Imposible abrir el archivo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['from_failed']          = 'La(s) siguiente(s) direcciones de remitente fallaron: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['instantiate']          = 'Imposible crear una instancia de la función Mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_address']      = 'Imposible enviar: dirección de email inválido: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_header']       = 'Nombre o valor de encabezado no válido';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_hostentry']    = 'Hostentry inválido: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['invalid_host']         = 'Host inválido: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer no está soportado.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['provide_address']      = 'Debe proporcionar al menos una dirección de email de destino.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['recipients_failed']    = 'Error SMTP: Los siguientes destinos fallaron: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['signing']              = 'Error al firmar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_code']            = 'Código del servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_code_ex']         = 'Información adicional del servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() falló.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_detail']          = 'Detalle: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_error']           = 'Error del servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['variable_set']         = 'No se pudo configurar la variable: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Estonian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Indrek Päri
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Elan Ruusamäe <glen@delfi.ee>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'SMTP Viga: Autoriseerimise viga.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP Viga: Ei õnnestunud luua ühendust SMTP serveriga.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP Viga: Vigased andmed.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'Tühi kirja sisu';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG["encoding"]             = 'Tundmatu kodeering: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'Tegevus ebaõnnestus: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Pole piisavalt õiguseid järgneva faili avamiseks: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'Faili Viga: Faili avamine ebaõnnestus: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'Järgnev saatja e-posti aadress on vigane: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'mail funktiooni käivitamine ebaõnnestus.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'Saatmine peatatud, e-posti address vigane: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Te peate määrama vähemalt ühe saaja e-posti aadressi.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['mailer_not_supported'] = ' maileri tugi puudub.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Viga: Järgnevate saajate e-posti aadressid on vigased: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG["signing"]              = 'Viga allkirjastamisel: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() ebaõnnestus.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'SMTP serveri viga: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'Ei õnnestunud määrata või lähtestada muutujat: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'Nõutud laiendus on puudu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Persian/Farsi PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Ali Jazayeri <jaza.ali@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Mohammad Hossein Mojtahedi <mhm5000@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'خطای SMTP: احراز هویت با شکست مواجه شد.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'خطای SMTP: اتصال به سرور SMTP برقرار نشد.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'خطای SMTP: داده‌ها نا‌درست هستند.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'بخش متن پیام خالی است.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'کد‌گذاری نا‌شناخته: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'امکان اجرا وجود ندارد: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'امکان دسترسی به فایل وجود ندارد: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'خطای File: امکان بازکردن فایل وجود ندارد: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'آدرس فرستنده اشتباه است: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'امکان معرفی تابع ایمیل وجود ندارد.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'آدرس ایمیل معتبر نیست: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer پشتیبانی نمی‌شود.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['provide_address']      = 'باید حداقل یک آدرس گیرنده وارد کنید.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['recipients_failed']    = 'خطای SMTP: ارسال به آدرس گیرنده با خطا مواجه شد: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['signing']              = 'خطا در امضا: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'خطا در اتصال به SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'خطا در SMTP Server: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'امکان ارسال یا ارسال مجدد متغیر‌ها وجود ندارد: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'افزونه موجود نیست: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Finnish PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Jyry Kuukanen
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP-virhe: käyttäjätunnistus epäonnistui.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP-virhe: yhteys palvelimeen ei onnistu.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP-virhe: data on virheellinen.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) //$PHPMAILER_LANG['empty_message']        = 'Message body empty';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Tuntematon koodaustyyppi: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Suoritus epäonnistui: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Seuraavaan tiedostoon ei ole oikeuksia: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Tiedostovirhe: Ei voida avata tiedostoa: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Seuraava lähettäjän osoite on virheellinen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'mail-funktion luonti epäonnistui.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) //$PHPMAILER_LANG['invalid_address']      = 'Invalid address: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = 'postivälitintyyppiä ei tueta.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Aseta vähintään yksi vastaanottajan sähk&ouml;postiosoite.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP-virhe: seuraava vastaanottaja osoite on virheellinen.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) //$PHPMAILER_LANG['signing']              = 'Signing Error: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) //$PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() failed.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) //$PHPMAILER_LANG['smtp_error']           = 'SMTP server error: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) //$PHPMAILER_LANG['variable_set']         = 'Cannot set or reset variable: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Faroese PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Dávur Sørensen <http://www.profo-webdesign.dk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP feilur: Kundi ikki góðkenna.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP feilur: Kundi ikki knýta samband við SMTP vert.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP feilur: Data ikki góðkent.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) //$PHPMAILER_LANG['empty_message']        = 'Message body empty';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Ókend encoding: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Kundi ikki útføra: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Kundi ikki tilganga fílu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Fílu feilur: Kundi ikki opna fílu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'fylgjandi Frá/From adressa miseydnaðist: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Kuni ikki instantiera mail funktión.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) //$PHPMAILER_LANG['invalid_address']      = 'Invalid address: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' er ikki supporterað.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Tú skal uppgeva minst móttakara-emailadressu(r).';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Feilur: Fylgjandi móttakarar miseydnaðust: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) //$PHPMAILER_LANG['signing']              = 'Signing Error: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) //$PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() failed.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) //$PHPMAILER_LANG['smtp_error']           = 'SMTP server error: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) //$PHPMAILER_LANG['variable_set']         = 'Cannot set or reset variable: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * French PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * Some French punctuation requires a thin non-breaking space (U+202F) character before it,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * for example before a colon or exclamation mark.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * There is one of these characters between these quotes: " "
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['authenticate']         = 'Erreur SMTP : échec de l’authentification.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['buggy_php']            = 'Votre version de PHP est affectée par un bug qui peut entraîner des messages corrompus. Pour résoudre ce problème, passez à l’envoi par SMTP, désactivez l’option mail.add_x_header dans le fichier php.ini, passez à MacOS ou Linux, ou passez PHP à la version 7.0.17+ ou 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['connect_host']         = 'Erreur SMTP : impossible de se connecter au serveur SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['data_not_accepted']    = 'Erreur SMTP : données incorrectes.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['empty_message']        = 'Corps du message vide.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['encoding']             = 'Encodage inconnu : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['execute']              = 'Impossible de lancer l’exécution : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['extension_missing']    = 'Extension manquante : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['file_access']          = 'Impossible d’accéder au fichier : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['file_open']            = 'Ouverture du fichier impossible : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['from_failed']          = 'L’adresse d’expéditeur suivante a échoué : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['instantiate']          = 'Impossible d’instancier la fonction mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_address']      = 'Adresse courriel non valide : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_header']       = 'Nom ou valeur de l’en-tête non valide';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_hostentry']    = 'Entrée d’hôte non valide : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['invalid_host']         = 'Hôte non valide : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['mailer_not_supported'] = ' client de messagerie non supporté.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['provide_address']      = 'Vous devez fournir au moins une adresse de destinataire.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['recipients_failed']    = 'Erreur SMTP : les destinataires suivants ont échoué : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['signing']              = 'Erreur de signature : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_code']            = 'Code SMTP : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_code_ex']         = 'Informations supplémentaires SMTP : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_connect_failed']  = 'La fonction SMTP connect() a échoué.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_detail']          = 'Détails : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_error']           = 'Erreur du serveur SMTP : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['variable_set']         = 'Impossible d’initialiser ou de réinitialiser une variable : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Galician PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author by Donato Rouco <donatorouco@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'Erro SMTP: Non puido ser autentificado.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Erro SMTP: Non puido conectar co servidor SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Erro SMTP: Datos non aceptados.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Corpo da mensaxe vacía';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Codificación descoñecida: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Non puido ser executado: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Nob puido acceder ó arquivo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Erro de Arquivo: No puido abrir o arquivo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'A(s) seguinte(s) dirección(s) de remitente(s) deron erro: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Non puido crear unha instancia da función Mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Non puido envia-lo correo: dirección de email inválida: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer non está soportado.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Debe engadir polo menos unha dirección de email coma destino.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'Erro SMTP: Os seguintes destinos fallaron: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Erro ó firmar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() fallou.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'Erro do servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Non puidemos axustar ou reaxustar a variábel: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Hebrew PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Ronny Sherer <ronny@hoojima.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'שגיאת SMTP: פעולת האימות נכשלה.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'שגיאת SMTP: לא הצלחתי להתחבר לשרת SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'שגיאת SMTP: מידע לא התקבל.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'גוף ההודעה ריק';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['invalid_address']      = 'כתובת שגויה: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'קידוד לא מוכר: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'לא הצלחתי להפעיל את: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'לא ניתן לגשת לקובץ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'שגיאת קובץ: לא ניתן לגשת לקובץ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'כתובות הנמענים הבאות נכשלו: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'לא הצלחתי להפעיל את פונקציית המייל.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' אינה נתמכת.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'חובה לספק לפחות כתובת אחת של מקבל המייל.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'שגיאת SMTP: הנמענים הבאים נכשלו: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'שגיאת חתימה: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() failed.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'שגיאת שרת SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'לא ניתן לקבוע או לשנות את המשתנה: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Hindi PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Yash Karanke <mr.karanke@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * Rewrite and extension of the work by Jayanti Suthar <suthar.jayanti93@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'SMTP त्रुटि: प्रामाणिकता की जांच नहीं हो सका। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['buggy_php']            = 'PHP का आपका संस्करण एक बग से प्रभावित है जिसके परिणामस्वरूप संदेश दूषित हो सकते हैं. इसे ठीक करने हेतु, भेजने के लिए SMTP का उपयोग करे, अपने php.ini में mail.add_x_header विकल्प को अक्षम करें, MacOS या Linux पर जाए, या अपने PHP संस्करण को 7.0.17+ या 7.1.3+ बदले.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['connect_host']         = 'SMTP त्रुटि: SMTP सर्वर से कनेक्ट नहीं हो सका। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP त्रुटि: डेटा स्वीकार नहीं किया जाता है। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['empty_message']        = 'संदेश खाली है। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['encoding']             = 'अज्ञात एन्कोडिंग प्रकार। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['execute']              = 'आदेश को निष्पादित करने में विफल। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['extension_missing']    = 'एक्सटेन्षन गायब है: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['file_access']          = 'फ़ाइल उपलब्ध नहीं है। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['file_open']            = 'फ़ाइल त्रुटि: फाइल को खोला नहीं जा सका। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['from_failed']          = 'प्रेषक का पता गलत है। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['instantiate']          = 'मेल फ़ंक्शन कॉल नहीं कर सकता है।';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_address']      = 'पता गलत है। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_header']       = 'अमान्य हेडर नाम या मान';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_hostentry']    = 'अमान्य hostentry: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_host']         = 'अमान्य होस्ट: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['mailer_not_supported'] = 'मेल सर्वर के साथ काम नहीं करता है। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['provide_address']      = 'आपको कम से कम एक प्राप्तकर्ता का ई-मेल पता प्रदान करना होगा।';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['recipients_failed']    = 'SMTP त्रुटि: निम्न प्राप्तकर्ताओं को पते भेजने में विफल। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['signing']              = 'साइनअप त्रुटि: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['smtp_code']            = 'SMTP कोड: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_code_ex']         = 'अतिरिक्त SMTP जानकारी: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP का connect () फ़ंक्शन विफल हुआ। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_detail']          = 'विवरण: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_error']           = 'SMTP सर्वर त्रुटि। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['variable_set']         = 'चर को बना या संशोधित नहीं किया जा सकता। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Croatian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Hrvoj3e <hrvoj3e@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP Greška: Neuspjela autentikacija.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP Greška: Ne mogu se spojiti na SMTP poslužitelj.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP Greška: Podatci nisu prihvaćeni.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Sadržaj poruke je prazan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Nepoznati encoding: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Nije moguće izvršiti naredbu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Nije moguće pristupiti datoteci: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Nije moguće otvoriti datoteku: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'SMTP Greška: Slanje s navedenih e-mail adresa nije uspjelo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Greška: Slanje na navedenih e-mail adresa nije uspjelo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'Ne mogu pokrenuti mail funkcionalnost.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'E-mail nije poslan. Neispravna e-mail adresa: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer nije podržan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['provide_address']      = 'Definirajte barem jednu adresu primatelja.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Greška prilikom prijave: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'Spajanje na SMTP poslužitelj nije uspjelo.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'Greška SMTP poslužitelja: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Ne mogu postaviti varijablu niti ju vratiti nazad: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Nedostaje proširenje: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Hungarian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author @dominicus-75
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP hiba: az azonosítás sikertelen.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP hiba: nem lehet kapcsolódni az SMTP-szerverhez.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP hiba: adatok visszautasítva.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Üres az üzenettörzs.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Ismeretlen kódolás: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Nem lehet végrehajtani: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'A következő fájl nem elérhető: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Fájl hiba: a következő fájlt nem lehet megnyitni: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'A feladóként megadott következő cím hibás: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'A PHP mail() függvényt nem sikerült végrehajtani.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Érvénytelen cím: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' a mailer-osztály nem támogatott.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Legalább egy címzettet fel kell tüntetni.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP hiba: a címzettként megadott következő címek hibásak: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Hibás aláírás: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'Hiba az SMTP-kapcsolatban.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP-szerver hiba: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'A következő változók beállítása nem sikerült: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Bővítmény hiányzik: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Armenian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Hrayr Grigoryan <hrayr@bits.am>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP -ի սխալ: չհաջողվեց ստուգել իսկությունը.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP -ի սխալ: չհաջողվեց կապ հաստատել SMTP սերվերի հետ.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP -ի սխալ: տվյալները ընդունված չեն.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Հաղորդագրությունը դատարկ է';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Կոդավորման անհայտ տեսակ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Չհաջողվեց իրականացնել հրամանը: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Ֆայլը հասանելի չէ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Ֆայլի սխալ: ֆայլը չհաջողվեց բացել: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Ուղարկողի հետևյալ հասցեն սխալ է: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Հնարավոր չէ կանչել mail ֆունկցիան.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Հասցեն սխալ է: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' փոստային սերվերի հետ չի աշխատում.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Անհրաժեշտ է տրամադրել գոնե մեկ ստացողի e-mail հասցե.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP -ի սխալ: չի հաջողվել ուղարկել հետևյալ ստացողների հասցեներին: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Ստորագրման սխալ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP -ի connect() ֆունկցիան չի հաջողվել';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP սերվերի սխալ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Չի հաջողվում ստեղծել կամ վերափոխել փոփոխականը: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Հավելվածը բացակայում է: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Indonesian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Cecep Prawiro <cecep.prawiro@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author @januridp
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author Ian Mustafa <mail@ianmustafa.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['authenticate']         = 'Kesalahan SMTP: Tidak dapat mengotentikasi.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['connect_host']         = 'Kesalahan SMTP: Tidak dapat terhubung ke host SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['data_not_accepted']    = 'Kesalahan SMTP: Data tidak diterima.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['empty_message']        = 'Isi pesan kosong';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['encoding']             = 'Pengkodean karakter tidak dikenali: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['execute']              = 'Tidak dapat menjalankan proses: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_access']          = 'Tidak dapat mengakses berkas: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['file_open']            = 'Kesalahan Berkas: Berkas tidak dapat dibuka: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['from_failed']          = 'Alamat pengirim berikut mengakibatkan kesalahan: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['instantiate']          = 'Tidak dapat menginisialisasi fungsi surel.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_address']      = 'Gagal terkirim, alamat surel tidak sesuai: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_hostentry']    = 'Gagal terkirim, entri host tidak sesuai: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_host']         = 'Gagal terkirim, host tidak sesuai: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['provide_address']      = 'Harus tersedia minimal satu alamat tujuan';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer tidak didukung';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['recipients_failed']    = 'Kesalahan SMTP: Alamat tujuan berikut menyebabkan kesalahan: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['signing']              = 'Kesalahan dalam penandatangan SSL: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() gagal.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_error']           = 'Kesalahan pada pelayan SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['variable_set']         = 'Tidak dapat mengatur atau mengatur ulang variabel: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['extension_missing']    = 'Ekstensi PHP tidak tersedia: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Italian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Ilias Bartolini <brain79@inwind.it>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Stefano Sabatini <sabas88@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'SMTP Error: Impossibile autenticarsi.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP Error: Impossibile connettersi all\'host SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP Error: Dati non accettati dal server.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'Il corpo del messaggio è vuoto';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'Codifica dei caratteri sconosciuta: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'Impossibile eseguire l\'operazione: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Impossibile accedere al file: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'File Error: Impossibile aprire il file: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'I seguenti indirizzi mittenti hanno generato errore: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'Impossibile istanziare la funzione mail';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'Impossibile inviare, l\'indirizzo email non è valido: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Deve essere fornito almeno un indirizzo ricevente';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['mailer_not_supported'] = 'Mailer non supportato';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Error: I seguenti indirizzi destinatari hanno generato un errore: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['signing']              = 'Errore nella firma: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() fallita.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'Errore del server SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'Impossibile impostare o resettare la variabile: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'Estensione mancante: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Japanese PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Mitsuhiro Yoshida <https://mitstek.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Yoshi Sakai <http://bluemooninc.jp/>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author Arisophy <https://github.com/arisophy/>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  * @author ARAKI Musashi <https://github.com/arakim/>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['authenticate']         = 'SMTPエラー: 認証できませんでした。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['buggy_php']            = 'ご利用のバージョンのPHPには不具合があり、メッセージが破損するおそれがあります。問題の解決は以下のいずれかを行ってください。SMTPでの送信に切り替える。php.iniのmail.add_x_headerをoffにする。MacOSまたはLinuxに切り替える。PHPバージョン7.0.17以降または7.1.3以降にアップグレードする。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['connect_host']         = 'SMTPエラー: SMTPホストに接続できませんでした。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['data_not_accepted']    = 'SMTPエラー: データが受け付けられませんでした。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['empty_message']        = 'メール本文が空です。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['encoding']             = '不明なエンコーディング: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['execute']              = '実行できませんでした: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['extension_missing']    = '拡張機能が見つかりません: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['file_access']          = 'ファイルにアクセスできません: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['file_open']            = 'ファイルエラー: ファイルを開けません: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['from_failed']          = 'Fromアドレスを登録する際にエラーが発生しました: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['instantiate']          = 'メール関数が正常に動作しませんでした。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_address']      = '不正なメールアドレス: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_header']       = '不正なヘッダー名またはその内容';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['invalid_hostentry']    = '不正なホストエントリー: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['invalid_host']         = '不正なホスト: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['mailer_not_supported'] = ' メーラーがサポートされていません。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['provide_address']      = '少なくとも1つメールアドレスを 指定する必要があります。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['recipients_failed']    = 'SMTPエラー: 次の受信者アドレスに 間違いがあります: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['signing']              = '署名エラー: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_code']            = 'SMTPコード: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_code_ex']         = 'SMTP追加情報: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP接続に失敗しました。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_detail']          = '詳細: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['smtp_error']           = 'SMTPサーバーエラー: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 37) $PHPMAILER_LANG['variable_set']         = '変数が存在しません: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Georgian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Avtandil Kikabidze aka LONGMAN <akalongman@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP შეცდომა: ავტორიზაცია შეუძლებელია.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP შეცდომა: SMTP სერვერთან დაკავშირება შეუძლებელია.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP შეცდომა: მონაცემები არ იქნა მიღებული.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['encoding']             = 'კოდირების უცნობი ტიპი: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['execute']              = 'შეუძლებელია შემდეგი ბრძანების შესრულება: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['file_access']          = 'შეუძლებელია წვდომა ფაილთან: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_open']            = 'ფაილური სისტემის შეცდომა: არ იხსნება ფაილი: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['from_failed']          = 'გამგზავნის არასწორი მისამართი: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['instantiate']          = 'mail ფუნქციის გაშვება ვერ ხერხდება.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['provide_address']      = 'გთხოვთ მიუთითოთ ერთი ადრესატის e-mail მისამართი მაინც.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['mailer_not_supported'] = ' - საფოსტო სერვერის მხარდაჭერა არ არის.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['recipients_failed']    = 'SMTP შეცდომა: შემდეგ მისამართებზე გაგზავნა ვერ მოხერხდა: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['empty_message']        = 'შეტყობინება ცარიელია';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_address']      = 'არ გაიგზავნა, e-mail მისამართის არასწორი ფორმატი: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'ხელმოწერის შეცდომა: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'შეცდომა SMTP სერვერთან დაკავშირებისას';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP სერვერის შეცდომა: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'შეუძლებელია შემდეგი ცვლადის შექმნა ან შეცვლა: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'ბიბლიოთეკა არ არსებობს: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Korean PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author ChalkPE <amato0617@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP 오류: 인증할 수 없습니다.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP 오류: SMTP 호스트에 접속할 수 없습니다.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP 오류: 데이터가 받아들여지지 않았습니다.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = '메세지 내용이 없습니다';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = '알 수 없는 인코딩: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = '실행 불가: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = '파일 접근 불가: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = '파일 오류: 파일을 열 수 없습니다: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = '다음 From 주소에서 오류가 발생했습니다: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'mail 함수를 인스턴스화할 수 없습니다';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = '잘못된 주소: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' 메일러는 지원되지 않습니다.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = '적어도 한 개 이상의 수신자 메일 주소를 제공해야 합니다.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP 오류: 다음 수신자에서 오류가 발생했습니다: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = '서명 오류: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP 연결을 실패하였습니다.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP 서버 오류: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = '변수 설정 및 초기화 불가: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = '확장자 없음: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Kurdish (Sorani) PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Halo Salman <halo@home4t.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'هەڵەی SMTP : نەتوانرا کۆدەکە پشتڕاست بکرێتەوە ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'هەڵەی SMTP: نەتوانرا پەیوەندی بە سێرڤەرەوە بکات SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'هەڵەی SMTP: ئەو زانیاریانە قبوڵ نەکرا.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'پەیامەکە بەتاڵە';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'کۆدکردنی نەزانراو : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'ناتوانرێت جێبەجێ بکرێت: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'ناتوانرێت دەستت بگات بە فایلەکە: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'هەڵەی پەڕگە(فایل): ناتوانرێت بکرێتەوە: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'هەڵە لە ئاستی ناونیشانی نێرەر: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'ناتوانرێت خزمەتگوزاری پۆستە پێشکەش بکرێت.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'نەتوانرا بنێردرێت ، چونکە ناونیشانی ئیمەیڵەکە نادروستە: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' مەیلەر پشتگیری ناکات';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'دەبێت ناونیشانی ئیمەیڵی لانیکەم یەک وەرگر دابین بکرێت.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = ' هەڵەی SMTP: ئەم هەڵانەی خوارەوەشکستی هێنا لە ناردن بۆ هەردووکیان: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'هەڵەی واژۆ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect()پەیوەندی شکستی هێنا .';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'هەڵەی ئاستی سێرڤەری SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'ناتوانرێت بیگۆڕیت یان دوبارە بینێریتەوە: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'درێژکراوە نەماوە: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Lithuanian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Dainius Kaupaitis <dk@sum.lt>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP klaida: autentifikacija nepavyko.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP klaida: nepavyksta prisijungti prie SMTP stoties.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP klaida: duomenys nepriimti.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Laiško turinys tuščias';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Neatpažinta koduotė: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Nepavyko įvykdyti komandos: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Byla nepasiekiama: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Bylos klaida: Nepavyksta atidaryti: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Neteisingas siuntėjo adresas: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Nepavyko paleisti mail funkcijos.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Neteisingas adresas: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' pašto stotis nepalaikoma.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Nurodykite bent vieną gavėjo adresą.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP klaida: nepavyko išsiųsti šiems gavėjams: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Prisijungimo klaida: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP susijungimo klaida';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP stoties klaida: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Nepavyko priskirti reikšmės kintamajam: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Latvian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Eduards M. <e@npd.lv>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP kļūda: Autorizācija neizdevās.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP Kļūda: Nevar izveidot savienojumu ar SMTP serveri.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP Kļūda: Nepieņem informāciju.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Ziņojuma teksts ir tukšs';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Neatpazīts kodējums: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Neizdevās izpildīt komandu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Fails nav pieejams: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Faila kļūda: Nevar atvērt failu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Nepareiza sūtītāja adrese: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Nevar palaist sūtīšanas funkciju.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Nepareiza adrese: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' sūtītājs netiek atbalstīts.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Lūdzu, norādiet vismaz vienu adresātu.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP kļūda: neizdevās nosūtīt šādiem saņēmējiem: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Autorizācijas kļūda: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP savienojuma kļūda';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP servera kļūda: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Nevar piešķirt mainīgā vērtību: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Malagasy PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Hackinet <piyushjha8164@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'Hadisoana SMTP: Tsy nahomby ny fanamarinana.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP Error: Tsy afaka mampifandray amin\'ny mpampiantrano SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP diso: tsy voarakitra ny angona.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Tsy misy ny votoaty mailaka.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Tsy fantatra encoding: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Tsy afaka manatanteraka ity baiko manaraka ity: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Tsy nahomby ny fidirana amin\'ity rakitra ity: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Hadisoana diso: Tsy afaka nanokatra ity file manaraka ity: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Ny adiresy iraka manaraka dia diso: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Tsy afaka nanomboka ny hetsika mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Tsy mety ny adiresy: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer tsy manohana.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Alefaso azafady iray adiresy iray farafahakeliny.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Error: Tsy mety ireo mpanaraka ireto: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Error nandritra ny sonia:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'Tsy nahomby ny fifandraisana tamin\'ny server SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'Fahadisoana tamin\'ny server SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Tsy azo atao ny mametraka na mamerina ny variable: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Tsy hita ny ampahany: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Mongolian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author @wispas
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'Алдаа SMTP: Холбогдож чадсангүй.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Алдаа SMTP: SMTP- сервертэй холбогдож болохгүй байна.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Алдаа SMTP: зөвшөөрөгдсөнгүй.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['encoding']             = 'Тодорхойгүй кодчилол: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['execute']              = 'Коммандыг гүйцэтгэх боломжгүй байна: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['file_access']          = 'Файлд хандах боломжгүй байна: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_open']            = 'Файлын алдаа: файлыг нээх боломжгүй байна: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['from_failed']          = 'Илгээгчийн хаяг буруу байна: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['instantiate']          = 'Mail () функцийг ажиллуулах боломжгүй байна.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['provide_address']      = 'Хүлээн авагчийн имэйл хаягийг оруулна уу.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['mailer_not_supported'] = ' — мэйл серверийг дэмжсэнгүй.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['recipients_failed']    = 'Алдаа SMTP: ийм хаягийг илгээж чадсангүй: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['empty_message']        = 'Хоосон мессэж';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_address']      = 'И-Мэйл буруу форматтай тул илгээх боломжгүй: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Гарын үсгийн алдаа: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP сервертэй холбогдоход алдаа гарлаа';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP серверийн алдаа: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Хувьсагчийг тохируулах эсвэл дахин тохируулах боломжгүй байна: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Өргөтгөл байхгүй: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Malaysian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Nawawi Jamili <nawawi@rutweb.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'Ralat SMTP: Tidak dapat pengesahan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Ralat SMTP: Tidak dapat menghubungi hos pelayan SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Ralat SMTP: Data tidak diterima oleh pelayan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Tiada isi untuk mesej';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Pengekodan tidak diketahui: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Tidak dapat melaksanakan: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Tidak dapat mengakses fail: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Ralat Fail: Tidak dapat membuka fail: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Berikut merupakan ralat dari alamat e-mel: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Tidak dapat memberi contoh fungsi e-mel.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Alamat emel tidak sah: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' jenis penghantar emel tidak disokong.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Anda perlu menyediakan sekurang-kurangnya satu alamat e-mel penerima.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'Ralat SMTP: Penerima e-mel berikut telah gagal: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Ralat pada tanda tangan: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() telah gagal.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'Ralat pada pelayan SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Tidak boleh menetapkan atau menetapkan semula pembolehubah: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Sambungan hilang: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Norwegian Bokmål PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  $PHPMAILER_LANG['authenticate']         = 'SMTP-feil: Kunne ikke autentiseres.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  $PHPMAILER_LANG['buggy_php']            = 'Din versjon av PHP er berørt av en feil som kan føre til ødelagte meldinger. For å løse problemet kan du bytte til SMTP, deaktivere alternativet mail.add_x_header i php.ini, bytte til MacOS eller Linux eller oppgradere PHP til versjon 7.0.17+ eller 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10)  $PHPMAILER_LANG['connect_host']         = 'SMTP-feil: Kunne ikke koble til SMTP-vert.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11)  $PHPMAILER_LANG['data_not_accepted']    = 'SMTP-feil: data ikke akseptert.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12)  $PHPMAILER_LANG['empty_message']        = 'Meldingstekst mangler';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13)  $PHPMAILER_LANG['encoding']             = 'Ukjent koding: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14)  $PHPMAILER_LANG['execute']              = 'Kunne ikke utføres: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15)  $PHPMAILER_LANG['extension_missing']    = 'Utvidelse mangler: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16)  $PHPMAILER_LANG['file_access']          = 'Kunne ikke få tilgang til filen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17)  $PHPMAILER_LANG['file_open']            = 'Feil i fil: Kunne ikke åpne filen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18)  $PHPMAILER_LANG['from_failed']          = 'Følgende Fra-adresse mislyktes: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19)  $PHPMAILER_LANG['instantiate']          = 'Kunne ikke instansiere e-postfunksjonen.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20)  $PHPMAILER_LANG['invalid_address']      = 'Ugyldig adresse: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21)  $PHPMAILER_LANG['invalid_header']       = 'Ugyldig headernavn eller verdi';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22)  $PHPMAILER_LANG['invalid_hostentry']    = 'Ugyldig vertsinngang: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23)  $PHPMAILER_LANG['invalid_host']         = 'Ugyldig vert: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24)  $PHPMAILER_LANG['mailer_not_supported'] = ' sender er ikke støttet.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25)  $PHPMAILER_LANG['provide_address']      = 'Du må oppgi minst én mottaker-e-postadresse.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26)  $PHPMAILER_LANG['recipients_failed']    = 'SMTP Feil: Følgende mottakeradresse feilet: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27)  $PHPMAILER_LANG['signing']              = 'Signeringsfeil: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28)  $PHPMAILER_LANG['smtp_code']            = 'SMTP-kode: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29)  $PHPMAILER_LANG['smtp_code_ex']         = 'Ytterligere SMTP-info: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30)  $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP connect() mislyktes.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31)  $PHPMAILER_LANG['smtp_detail']          = 'Detaljer: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32)  $PHPMAILER_LANG['smtp_error']           = 'SMTP-serverfeil: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33)  $PHPMAILER_LANG['variable_set']         = 'Kan ikke angi eller tilbakestille variabel: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Dutch PHPMailer language file: refer to PHPMailer.php for definitive list.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Tuxion <team@tuxion.nl>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP-fout: authenticatie mislukt.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['buggy_php']            = 'PHP versie gededecteerd die onderhavig is aan een bug die kan resulteren in gecorrumpeerde berichten. Om dit te voorkomen, gebruik SMTP voor het verzenden van berichten, zet de mail.add_x_header optie in uw php.ini file uit, gebruik MacOS of Linux, of pas de gebruikte PHP versie aan naar versie 7.0.17+ or 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP-fout: kon niet verbinden met SMTP-host.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP-fout: data niet geaccepteerd.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'Berichttekst is leeg';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'Onbekende codering: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'Kon niet uitvoeren: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['extension_missing']    = 'Extensie afwezig: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_access']          = 'Kreeg geen toegang tot bestand: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['file_open']            = 'Bestandsfout: kon bestand niet openen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['from_failed']          = 'Het volgende afzendersadres is mislukt: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['instantiate']          = 'Kon mailfunctie niet initialiseren.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_address']      = 'Ongeldig adres: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_header']       = 'Ongeldige header naam of waarde';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_hostentry']    = 'Ongeldige hostentry: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_host']         = 'Ongeldige host: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer wordt niet ondersteund.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['provide_address']      = 'Er moet minstens één ontvanger worden opgegeven.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['recipients_failed']    = 'SMTP-fout: de volgende ontvangers zijn mislukt: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['signing']              = 'Signeerfout: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_code']            = 'SMTP code: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['smtp_code_ex']         = 'Aanvullende SMTP informatie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Verbinding mislukt.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_detail']          = 'Detail: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_error']           = 'SMTP-serverfout: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['variable_set']         = 'Kan de volgende variabele niet instellen of resetten: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Polish PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) $PHPMAILER_LANG['authenticate']         = 'Błąd SMTP: Nie można przeprowadzić uwierzytelnienia.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['buggy_php']            = 'Twoja wersja PHP zawiera błąd, który może powodować uszkodzenie wiadomości. Aby go naprawić, przełącz się na wysyłanie za pomocą SMTP, wyłącz opcję mail.add_x_header w php.ini, przełącz się na MacOS lub Linux lub zaktualizuj PHP do wersji 7.0.17+ lub 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Błąd SMTP: Nie można połączyć się z wybranym hostem.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Błąd SMTP: Dane nie zostały przyjęte.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Wiadomość jest pusta.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Błędny sposób kodowania znaków: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Nie można uruchomić: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['extension_missing']    = 'Brakujące rozszerzenie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Brak dostępu do pliku: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'Nie można otworzyć pliku: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'Następujący adres nadawcy jest nieprawidłowy lub nie istnieje: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'Nie można wywołać funkcji mail(). Sprawdź konfigurację serwera.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'Nie można wysłać wiadomości, ' . 'następujący adres odbiorcy jest nieprawidłowy lub nie istnieje: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_header']       = 'Nieprawidłowa nazwa lub wartość nagłówka';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_hostentry']    = 'Nieprawidłowy wpis hosta: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_host']         = 'Nieprawidłowy host: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['provide_address']      = 'Należy podać prawidłowy adres email odbiorcy.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['mailer_not_supported'] = 'Wybrana metoda wysyłki wiadomości nie jest obsługiwana.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['recipients_failed']    = 'Błąd SMTP: Następujący odbiorcy są nieprawidłowi lub nie istnieją: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['signing']              = 'Błąd podpisywania wiadomości: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['smtp_code']            = 'Kod SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_code_ex']         = 'Dodatkowe informacje SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['smtp_connect_failed']  = 'Wywołanie funkcji SMTP Connect() zostało zakończone niepowodzeniem.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_detail']          = 'Szczegóły: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_error']           = 'Błąd SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['variable_set']         = 'Nie można ustawić lub zmodyfikować zmiennej: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Brazilian Portuguese PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Paulo Henrique Garcia <paulo@controllerweb.com.br>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Lucas Guimarães <lucas@lucasguimaraes.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author Phelipe Alves <phelipealvesdesouza@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  * @author Fabio Beneditto <fabiobeneditto@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10)  * @author Geidson Benício Coelho <geidsonc@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['authenticate']         = 'Erro de SMTP: Não foi possível autenticar.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['buggy_php']            = 'Sua versão do PHP é afetada por um bug que por resultar em messagens corrompidas. Para corrigir, mude para enviar usando SMTP, desative a opção mail.add_x_header em seu php.ini, mude para MacOS ou Linux, ou atualize seu PHP para versão 7.0.17+ ou 7.1.3+ ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['connect_host']         = 'Erro de SMTP: Não foi possível conectar ao servidor SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['data_not_accepted']    = 'Erro de SMTP: Dados rejeitados.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['empty_message']        = 'Mensagem vazia';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['encoding']             = 'Codificação desconhecida: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['execute']              = 'Não foi possível executar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['extension_missing']    = 'Extensão não existe: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['file_access']          = 'Não foi possível acessar o arquivo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['file_open']            = 'Erro de Arquivo: Não foi possível abrir o arquivo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['from_failed']          = 'Os seguintes remetentes falharam: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['instantiate']          = 'Não foi possível instanciar a função mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_address']      = 'Endereço de e-mail inválido: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['invalid_header']       = 'Nome ou valor de cabeçalho inválido';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['invalid_hostentry']    = 'hostentry inválido: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['invalid_host']         = 'host inválido: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer não é suportado.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['provide_address']      = 'Você deve informar pelo menos um destinatário.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['recipients_failed']    = 'Erro de SMTP: Os seguintes destinatários falharam: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['signing']              = 'Erro de Assinatura: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() falhou.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_code']            = 'Código do servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_error']           = 'Erro de servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['smtp_code_ex']         = 'Informações adicionais do servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 37) $PHPMAILER_LANG['smtp_detail']          = 'Detalhes do servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 38) $PHPMAILER_LANG['variable_set']         = 'Não foi possível definir ou redefinir a variável: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Portuguese (European) PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Jonadabe <jonadabe@hotmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'Erro do SMTP: Não foi possível realizar a autenticação.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Erro do SMTP: Não foi possível realizar ligação com o servidor SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Erro do SMTP: Os dados foram rejeitados.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'A mensagem no e-mail está vazia.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Codificação desconhecida: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Não foi possível executar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Não foi possível aceder o ficheiro: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Abertura do ficheiro: Não foi possível abrir o ficheiro: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Ocorreram falhas nos endereços dos seguintes remententes: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Não foi possível iniciar uma instância da função mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Não foi enviado nenhum e-mail para o endereço de e-mail inválido: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer não é suportado.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Tem de fornecer pelo menos um endereço como destinatário do e-mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'Erro do SMTP: O endereço do seguinte destinatário falhou: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Erro ao assinar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() falhou.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'Erro de servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Não foi possível definir ou redefinir a variável: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Extensão em falta: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Romanian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) $PHPMAILER_LANG['authenticate']         = 'Eroare SMTP: Autentificarea a eșuat.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['buggy_php']            = 'Versiunea instalată de PHP este afectată de o problemă care poate duce la coruperea mesajelor Pentru a preveni această problemă, folosiți SMTP, dezactivați opțiunea mail.add_x_header din php.ini, folosiți MacOS/Linux sau actualizați versiunea de PHP la 7.0.17+ sau 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Eroare SMTP: Conectarea la serverul SMTP a eșuat.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Eroare SMTP: Datele nu au fost acceptate.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Mesajul este gol.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Encodare necunoscută: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Nu se poate executa următoarea comandă:  ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['extension_missing']    = 'Lipsește extensia: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Nu se poate accesa următorul fișier: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'Eroare fișier: Nu se poate deschide următorul fișier: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'Următoarele adrese From au dat eroare: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'Funcția mail nu a putut fi inițializată.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'Adresa de email nu este validă: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_header']       = 'Numele sau valoarea header-ului nu este validă: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_hostentry']    = 'Hostentry invalid: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_host']         = 'Host invalid: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer nu este suportat.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['provide_address']      = 'Trebuie să adăugați cel puțin o adresă de email.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['recipients_failed']    = 'Eroare SMTP: Următoarele adrese de email au eșuat: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['signing']              = 'A aparut o problemă la semnarea emailului. ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['smtp_code']            = 'Cod SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_code_ex']         = 'Informații SMTP adiționale: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['smtp_connect_failed']  = 'Conectarea la serverul SMTP a eșuat.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_detail']          = 'Detalii SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_error']           = 'Eroare server SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['variable_set']         = 'Nu se poate seta/reseta variabila. ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Russian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Alexey Chumakov <alex@chumakov.ru>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Foster Snowhill <i18n@forstwoof.ru>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author ProjectSoft <projectsoft2009@yandex.ru>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['authenticate']         = 'Ошибка SMTP: не удалось пройти аутентификацию.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['buggy_php']            = 'В вашей версии PHP есть ошибка, которая может привести к повреждению сообщений. Чтобы исправить, переключитесь на отправку по SMTP, отключите опцию mail.add_x_header в ваш php.ini, переключитесь на MacOS или Linux или обновите PHP до версии 7.0.17+ или 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['connect_host']         = 'Ошибка SMTP: не удается подключиться к SMTP-серверу.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['data_not_accepted']    = 'Ошибка SMTP: данные не приняты.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['empty_message']        = 'Пустое сообщение';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['encoding']             = 'Неизвестная кодировка: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['execute']              = 'Невозможно выполнить команду: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['extension_missing']    = 'Расширение отсутствует: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['file_access']          = 'Нет доступа к файлу: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['file_open']            = 'Файловая ошибка: не удаётся открыть файл: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['from_failed']          = 'Неверный адрес отправителя: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['instantiate']          = 'Невозможно запустить функцию mail().';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_address']      = 'Не отправлено из-за неправильного формата email-адреса: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_header']       = 'Неверное имя или значение заголовка';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_hostentry']    = 'Неверная запись хоста: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['invalid_host']         = 'Неверный хост: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['mailer_not_supported'] = ' — почтовый сервер не поддерживается.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['provide_address']      = 'Вы должны указать хотя бы один адрес электронной почты получателя.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['recipients_failed']    = 'Ошибка SMTP: Ошибка следующих получателей: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['signing']              = 'Ошибка подписи: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_code']            = 'Код SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_code_ex']         = 'Дополнительная информация SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_connect_failed']  = 'Ошибка соединения с SMTP-сервером.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_detail']          = 'Детали: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_error']           = 'Ошибка SMTP-сервера: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['variable_set']         = 'Невозможно установить или сбросить переменную: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Sinhalese PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Ayesh Karunaratne <ayesh@aye.sh>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP දෝෂය: සත්‍යාපනය අසාර්ථක විය.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['buggy_php']            = 'ඔබගේ PHP version එකෙහි පවතින දෝෂයක් නිසා email පණිවිඩ දෝෂ සහගත වීමේ හැකියාවක් ඇත. මෙය විසදීම සදහා SMTP භාවිතා කිරීම, mail.add_x_header INI setting එක අක්‍රීය කිරීම, MacOS හෝ Linux වලට මාරු වීම, හෝ ඔබගේ PHP version එක 7.0.17+ හෝ 7.1.3+ වලට අලුත් කිරීම කරගන්න.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP දෝෂය: සම්බන්ධ වීමට නොහැකි විය.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP දෝෂය: දත්ත පිළිගනු නොලැබේ.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'පණිවිඩ අන්තර්ගතය හිස්';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'නොදන්නා කේතනය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'ක්‍රියාත්මක කළ නොහැකි විය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['extension_missing']    = 'Extension එක නොමැත: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_access']          = 'File එකට ප්‍රවේශ විය නොහැකි විය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['file_open']            = 'File දෝෂය: File එක විවෘත කළ නොහැක: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['from_failed']          = 'පහත From ලිපිනයන් අසාර්ථක විය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['instantiate']          = 'mail function එක ක්‍රියාත්මක කළ නොහැක.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_address']      = 'වලංගු නොවන ලිපිනය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_header']       = 'වලංගු නොවන header නාමයක් හෝ අගයක්';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_hostentry']    = 'වලංගු නොවන hostentry එකක්: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_host']         = 'වලංගු නොවන host එකක්: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer සහාය නොදක්වයි.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['provide_address']      = 'ඔබ අවම වශයෙන් එක් ලබන්නෙකුගේ ඊමේල් ලිපිනයක් සැපයිය යුතුය.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['recipients_failed']    = 'SMTP දෝෂය: පහත ලබන්නන් අසමත් විය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['signing']              = 'Sign කිරීමේ දෝෂය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_code']            = 'SMTP කේතය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['smtp_code_ex']         = 'අමතර SMTP තොරතුරු: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP සම්බන්ධය අසාර්ථක විය.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_detail']          = 'තොරතුරු: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_error']           = 'SMTP දෝෂය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['variable_set']         = 'Variable එක සැකසීමට හෝ නැවත සැකසීමට නොහැක: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Slovak PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Michal Tinka <michaltinka@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Peter Orlický <pcmanik91@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'SMTP Error: Chyba autentifikácie.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP Error: Nebolo možné nadviazať spojenie so SMTP serverom.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP Error: Dáta neboli prijaté';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'Prázdne telo správy.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'Neznáme kódovanie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'Nedá sa vykonať: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Súbor nebol nájdený: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'File Error: Súbor sa otvoriť pre čítanie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'Následujúca adresa From je nesprávna: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'Nedá sa vytvoriť inštancia emailovej funkcie.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'Neodoslané, emailová adresa je nesprávna: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_hostentry']    = 'Záznam hostiteľa je nesprávny: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_host']         = 'Hostiteľ je nesprávny: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['mailer_not_supported'] = ' emailový klient nieje podporovaný.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['provide_address']      = 'Musíte zadať aspoň jednu emailovú adresu príjemcu.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Error: Adresy príjemcov niesu správne ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['signing']              = 'Chyba prihlasovania: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() zlyhalo.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['smtp_error']           = 'SMTP chyba serveru: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['variable_set']         = 'Nemožno nastaviť alebo resetovať premennú: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['extension_missing']    = 'Chýba rozšírenie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Slovene PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Klemen Tušar <techouse@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Filip Š <projects@filips.si>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author Blaž Oražem <blaz@orazem.si>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['authenticate']         = 'SMTP napaka: Avtentikacija ni uspela.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['buggy_php']            = 'Na vašo PHP različico vpliva napaka, ki lahko povzroči poškodovana sporočila. Če želite težavo odpraviti, preklopite na pošiljanje prek SMTP, onemogočite možnost mail.add_x_header v vaši php.ini datoteki, preklopite na MacOS ali Linux, ali nadgradite vašo PHP zaličico na 7.0.17+ ali 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['connect_host']         = 'SMTP napaka: Vzpostavljanje povezave s SMTP gostiteljem ni uspelo.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP napaka: Strežnik zavrača podatke.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['empty_message']        = 'E-poštno sporočilo nima vsebine.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['encoding']             = 'Nepoznan tip kodiranja: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['execute']              = 'Operacija ni uspela: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['extension_missing']    = 'Manjkajoča razširitev: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['file_access']          = 'Nimam dostopa do datoteke: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['file_open']            = 'Ne morem odpreti datoteke: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['from_failed']          = 'Neveljaven e-naslov pošiljatelja: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['instantiate']          = 'Ne morem inicializirati mail funkcije.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_address']      = 'E-poštno sporočilo ni bilo poslano. E-naslov je neveljaven: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_header']       = 'Neveljavno ime ali vrednost glave';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_hostentry']    = 'Neveljaven vnos gostitelja: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['invalid_host']         = 'Neveljaven gostitelj: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer ni podprt.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['provide_address']      = 'Prosimo, vnesite vsaj enega naslovnika.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['recipients_failed']    = 'SMTP napaka: Sledeči naslovniki so neveljavni: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['signing']              = 'Napaka pri podpisovanju: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_code']            = 'SMTP koda: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_code_ex']         = 'Dodatne informacije o SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_connect_failed']  = 'Ne morem vzpostaviti povezave s SMTP strežnikom.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_detail']          = 'Podrobnosti: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_error']           = 'Napaka SMTP strežnika: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['variable_set']         = 'Ne morem nastaviti oz. ponastaviti spremenljivke: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Serbian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Александар Јевремовић <ajevremovic@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Miloš Milanović <mmilanovic016@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'SMTP greška: autentifikacija nije uspela.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP greška: povezivanje sa SMTP serverom nije uspelo.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP greška: podaci nisu prihvaćeni.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'Sadržaj poruke je prazan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'Nepoznato kodiranje: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'Nije moguće izvršiti naredbu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Nije moguće pristupiti datoteci: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'Nije moguće otvoriti datoteku: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'SMTP greška: slanje sa sledećih adresa nije uspelo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['recipients_failed']    = 'SMTP greška: slanje na sledeće adrese nije uspelo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['instantiate']          = 'Nije moguće pokrenuti mail funkciju.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_address']      = 'Poruka nije poslata. Neispravna adresa: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['mailer_not_supported'] = ' majler nije podržan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['provide_address']      = 'Definišite bar jednu adresu primaoca.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['signing']              = 'Greška prilikom prijave: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'Povezivanje sa SMTP serverom nije uspelo.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'Greška SMTP servera: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'Nije moguće zadati niti resetovati promenljivu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'Nedostaje proširenje: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Serbian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Александар Јевремовић <ajevremovic@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Miloš Milanović <mmilanovic016@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'SMTP грешка: аутентификација није успела.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP грешка: повезивање са SMTP сервером није успело.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP грешка: подаци нису прихваћени.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'Садржај поруке је празан.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'Непознато кодирање: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'Није могуће извршити наредбу: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Није могуће приступити датотеци: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'Није могуће отворити датотеку: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'SMTP грешка: слање са следећих адреса није успело: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['recipients_failed']    = 'SMTP грешка: слање на следеће адресе није успело: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['instantiate']          = 'Није могуће покренути mail функцију.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_address']      = 'Порука није послата. Неисправна адреса: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['mailer_not_supported'] = ' мејлер није подржан.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['provide_address']      = 'Дефинишите бар једну адресу примаоца.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['signing']              = 'Грешка приликом пријаве: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'Повезивање са SMTP сервером није успело.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'Грешка SMTP сервера: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'Није могуће задати нити ресетовати променљиву: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'Недостаје проширење: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Swedish PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Johan Linnér <johan@linner.biz>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP fel: Kunde inte autentisera.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP fel: Kunde inte ansluta till SMTP-server.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP fel: Data accepterades inte.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) //$PHPMAILER_LANG['empty_message']        = 'Message body empty';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Okänt encode-format: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Kunde inte köra: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Ingen åtkomst till fil: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Fil fel: Kunde inte öppna fil: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Följande avsändaradress är felaktig: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Kunde inte initiera e-postfunktion.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Felaktig adress: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['provide_address']      = 'Du måste ange minst en mottagares e-postadress.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer stöds inte.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP fel: Följande mottagare är felaktig: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Signeringsfel: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() misslyckades.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP serverfel: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Kunde inte definiera eller återställa variabel: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Tillägg ej tillgängligt: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Tagalog PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  *   @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  *   @author Adriane Justine Tan <eidoriantan@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'SMTP Error: Hindi mapatotohanan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP Error: Hindi makakonekta sa SMTP host.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP Error: Ang datos ay hindi naitanggap.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'Walang laman ang mensahe';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'Hindi alam ang encoding: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'Hindi maisasagawa: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Hindi ma-access ang file: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'File Error: Hindi mabuksan ang file: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'Ang sumusunod na address ay nabigo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'Hindi maisimulan ang instance ng mail function.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'Hindi wasto ang address na naibigay: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['mailer_not_supported'] = 'Ang mailer ay hindi suportado.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['provide_address']      = 'Kailangan mong magbigay ng kahit isang email address na tatanggap.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Error: Ang mga sumusunod na tatanggap ay nabigo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['signing']              = 'Hindi ma-sign: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'Ang SMTP connect() ay nabigo.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'Ang server ng SMTP ay nabigo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'Hindi matatakda o ma-reset ang mga variables: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'Nawawala ang extension: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Turkish PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Elçin Özel
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Can Yılmaz
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author Mehmet Benlioğlu
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  * @author @yasinaydin
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10)  * @author Ogün Karakuş
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['authenticate']         = 'SMTP Hatası: Oturum açılamadı.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['buggy_php']            = 'PHP sürümünüz iletilerin bozulmasına neden olabilecek bir hatadan etkileniyor. Bunu düzeltmek için, SMTP kullanarak göndermeye geçin, mail.add_x_header seçeneğini devre dışı bırakın php.ini dosyanızdaki mail.add_x_header seçeneğini devre dışı bırakın, MacOS veya Linux geçin veya PHP sürümünü 7.0.17+ veya 7.1.3+ sürümüne yükseltin,';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['connect_host']         = 'SMTP Hatası: SMTP sunucusuna bağlanılamadı.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP Hatası: Veri kabul edilmedi.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['empty_message']        = 'Mesajın içeriği boş';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['encoding']             = 'Bilinmeyen karakter kodlama: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['execute']              = 'Çalıştırılamadı: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['extension_missing']    = 'Eklenti bulunamadı: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['file_access']          = 'Dosyaya erişilemedi: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['file_open']            = 'Dosya Hatası: Dosya açılamadı: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['from_failed']          = 'Belirtilen adreslere gönderme başarısız: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['instantiate']          = 'Örnek e-posta fonksiyonu oluşturulamadı.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_address']      = 'Geçersiz e-posta adresi: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['invalid_header']       = 'Geçersiz başlık adı veya değeri: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['invalid_hostentry']    = 'Geçersiz ana bilgisayar girişi: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['invalid_host']         = 'Geçersiz ana bilgisayar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['mailer_not_supported'] = ' e-posta kütüphanesi desteklenmiyor.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['provide_address']      = 'En az bir alıcı e-posta adresi belirtmelisiniz.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Hatası: Belirtilen alıcılara ulaşılamadı: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['signing']              = 'İmzalama hatası: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_code']            = 'SMTP kodu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_code_ex']         = 'ek SMTP bilgileri: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP connect() fonksiyonu başarısız.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['smtp_detail']          = 'SMTP SMTP Detayı: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 37) $PHPMAILER_LANG['smtp_error']           = 'SMTP sunucu hatası: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 38) $PHPMAILER_LANG['variable_set']         = 'Değişken ayarlanamadı ya da sıfırlanamadı: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Ukrainian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Yuriy Rudyy <yrudyy@prs.net.ua>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @fixed by Boris Yurchenko <boris@yurchenko.pp.ua>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'Помилка SMTP: помилка авторизації.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'Помилка SMTP: не вдається під\'єднатися до SMTP-серверу.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'Помилка SMTP: дані не прийнято.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Невідоме кодування: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Неможливо виконати команду: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Немає доступу до файлу: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Помилка файлової системи: не вдається відкрити файл: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Невірна адреса відправника: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Неможливо запустити функцію mail().';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['provide_address']      = 'Будь ласка, введіть хоча б одну email-адресу отримувача.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' - поштовий сервер не підтримується.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['recipients_failed']    = 'Помилка SMTP: не вдалося відправлення для таких отримувачів: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['empty_message']        = 'Пусте повідомлення';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_address']      = 'Не відправлено через неправильний формат email-адреси: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['signing']              = 'Помилка підпису: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'Помилка з\'єднання з SMTP-сервером';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'Помилка SMTP-сервера: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'Неможливо встановити або скинути змінну: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'Розширення відсутнє: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Urdu PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Saqib Ali Siddiqui <saqibsra@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP خرابی: تصدیق کرنے سے قاصر۔';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP خرابی: سرور سے منسلک ہونے سے قاصر۔';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP خرابی: ڈیٹا قبول نہیں کیا گیا۔';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'پیغام کی باڈی خالی ہے۔';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'نامعلوم انکوڈنگ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'عمل کرنے کے قابل نہیں ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'فائل تک رسائی سے قاصر:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'فائل کی خرابی: فائل کو کھولنے سے قاصر:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'درج ذیل بھیجنے والے کا پتہ ناکام ہو گیا:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'میل فنکشن کی مثال بنانے سے قاصر۔';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'بھیجنے سے قاصر: غلط ای میل پتہ:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' میلر تعاون یافتہ نہیں ہے۔';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'آپ کو کم از کم ایک منزل کا ای میل پتہ فراہم کرنا چاہیے۔';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP خرابی: درج ذیل پتہ پر نہیں بھیجا جاسکا: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'دستخط کی خرابی: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP ملنا ناکام ہوا';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP سرور کی خرابی: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'متغیر سیٹ نہیں کیا جا سکا: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'ایکٹینشن موجود نہیں ہے۔ ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['smtp_code']            = 'SMTP سرور کوڈ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_code_ex']         = 'اضافی SMTP سرور کی معلومات:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['invalid_header']       = 'غلط ہیڈر کا نام یا قدر';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Vietnamese (Tiếng Việt) PHPMailer language file: refer to English translation for definitive list.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author VINADES.,JSC <contact@vinades.vn>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'Lỗi SMTP: Không thể xác thực.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Lỗi SMTP: Không thể kết nối máy chủ SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Lỗi SMTP: Dữ liệu không được chấp nhận.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Không có nội dung';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Mã hóa không xác định: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Không thực hiện được: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Không thể truy cập tệp tin ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Lỗi Tập tin: Không thể mở tệp tin: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Lỗi địa chỉ gửi đi: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Không dùng được các hàm gửi thư.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Đại chỉ emai không đúng: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' trình gửi thư không được hỗ trợ.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Bạn phải cung cấp ít nhất một địa chỉ người nhận.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'Lỗi SMTP: lỗi địa chỉ người nhận: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Lỗi đăng nhập: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'Lỗi kết nối với SMTP';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'Lỗi máy chủ smtp ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Không thể thiết lập hoặc thiết lập lại biến: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Simplified Chinese PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author liqwei <liqwei@liqwei.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author young <masxy@foxmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author Teddysun <i@teddysun.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['authenticate']         = 'SMTP 错误：登录失败。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['buggy_php']            = '您的 PHP 版本存在漏洞，可能会导致消息损坏。为修复此问题，请切换到使用 SMTP 发送，在您的 php.ini 中禁用 mail.add_x_header 选项。切换到 MacOS 或 Linux，或将您的 PHP 升级到 7.0.17+ 或 7.1.3+ 版本。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['connect_host']         = 'SMTP 错误：无法连接到 SMTP 主机。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP 错误：数据不被接受。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['empty_message']        = '邮件正文为空。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['encoding']             = '未知编码：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['execute']              = '无法执行：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['extension_missing']    = '缺少扩展名：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['file_access']          = '无法访问文件：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['file_open']            = '文件错误：无法打开文件：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['from_failed']          = '发送地址错误：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['instantiate']          = '未知函数调用。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_address']      = '发送失败，电子邮箱地址是无效的：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['mailer_not_supported'] = '发信客户端不被支持。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['provide_address']      = '必须提供至少一个收件人地址。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['recipients_failed']    = 'SMTP 错误：收件人地址错误：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP服务器连接失败。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['smtp_error']           = 'SMTP服务器出错：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['variable_set']         = '无法设置或重置变量：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['invalid_header']       = '无效的标题名称或值';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['invalid_hostentry']    = '无效的hostentry： ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['invalid_host']         = '无效的主机：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['signing']              = '签名错误：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_code']            = 'SMTP代码： ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_code_ex']         = '附加SMTP信息： ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['smtp_detail']          = '详情:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Traditional Chinese PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author liqwei <liqwei@liqwei.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Peter Dave Hello <@PeterDaveHello/>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author Jason Chiang <xcojad@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['authenticate']         = 'SMTP 錯誤：登入失敗。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['connect_host']         = 'SMTP 錯誤：無法連線到 SMTP 主機。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP 錯誤：無法接受的資料。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['empty_message']        = '郵件內容為空';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['encoding']             = '未知編碼: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['execute']              = '無法執行：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_access']          = '無法存取檔案：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['file_open']            = '檔案錯誤：無法開啟檔案：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['from_failed']          = '發送地址錯誤：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['instantiate']          = '未知函數呼叫。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_address']      = '因為電子郵件地址無效，無法傳送: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['mailer_not_supported'] = '不支援的發信客戶端。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['provide_address']      = '必須提供至少一個收件人地址。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['recipients_failed']    = 'SMTP 錯誤：以下收件人地址錯誤：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['signing']              = '電子簽章錯誤: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP 連線失敗';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['smtp_error']           = 'SMTP 伺服器錯誤: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['variable_set']         = '無法設定或重設變數: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['extension_missing']    = '遺失模組 Extension: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   1)                   GNU LESSER GENERAL PUBLIC LICENSE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   2)                        Version 2.1, February 1999
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   3) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   4)  Copyright (C) 1991, 1999 Free Software Foundation, Inc.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   5)  51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   6)  Everyone is permitted to copy and distribute verbatim copies
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   7)  of this license document, but changing it is not allowed.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   9) [This is the first released version of the Lesser GPL.  It also counts
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  10)  as the successor of the GNU Library Public License, version 2, hence
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  11)  the version number 2.1.]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  12) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  13)                             Preamble
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  14) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  15)   The licenses for most software are designed to take away your
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  16) freedom to share and change it.  By contrast, the GNU General Public
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  17) Licenses are intended to guarantee your freedom to share and change
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  18) free software--to make sure the software is free for all its users.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  19) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  20)   This license, the Lesser General Public License, applies to some
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  21) specially designated software packages--typically libraries--of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  22) Free Software Foundation and other authors who decide to use it.  You
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  23) can use it too, but we suggest you first think carefully about whether
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  24) this license or the ordinary General Public License is the better
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  25) strategy to use in any particular case, based on the explanations below.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  26) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  27)   When we speak of free software, we are referring to freedom of use,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  28) not price.  Our General Public Licenses are designed to make sure that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  29) you have the freedom to distribute copies of free software (and charge
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  30) for this service if you wish); that you receive source code or can get
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  31) it if you want it; that you can change the software and use pieces of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  32) it in new free programs; and that you are informed that you can do
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  33) these things.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  34) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  35)   To protect your rights, we need to make restrictions that forbid
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  36) distributors to deny you these rights or to ask you to surrender these
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  37) rights.  These restrictions translate to certain responsibilities for
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  38) you if you distribute copies of the library or if you modify it.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  39) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  40)   For example, if you distribute copies of the library, whether gratis
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  41) or for a fee, you must give the recipients all the rights that we gave
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  42) you.  You must make sure that they, too, receive or can get the source
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  43) code.  If you link other code with the library, you must provide
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  44) complete object files to the recipients, so that they can relink them
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  45) with the library after making changes to the library and recompiling
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  46) it.  And you must show them these terms so they know their rights.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  47) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  48)   We protect your rights with a two-step method: (1) we copyright the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  49) library, and (2) we offer you this license, which gives you legal
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  50) permission to copy, distribute and/or modify the library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  51) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  52)   To protect each distributor, we want to make it very clear that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  53) there is no warranty for the free library.  Also, if the library is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  54) modified by someone else and passed on, the recipients should know
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  55) that what they have is not the original version, so that the original
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  56) author's reputation will not be affected by problems that might be
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  57) introduced by others.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  58) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  59)   Finally, software patents pose a constant threat to the existence of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  60) any free program.  We wish to make sure that a company cannot
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  61) effectively restrict the users of a free program by obtaining a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  62) restrictive license from a patent holder.  Therefore, we insist that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  63) any patent license obtained for a version of the library must be
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  64) consistent with the full freedom of use specified in this license.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  65) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  66)   Most GNU software, including some libraries, is covered by the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  67) ordinary GNU General Public License.  This license, the GNU Lesser
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  68) General Public License, applies to certain designated libraries, and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  69) is quite different from the ordinary General Public License.  We use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  70) this license for certain libraries in order to permit linking those
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  71) libraries into non-free programs.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  72) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  73)   When a program is linked with a library, whether statically or using
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  74) a shared library, the combination of the two is legally speaking a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  75) combined work, a derivative of the original library.  The ordinary
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  76) General Public License therefore permits such linking only if the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  77) entire combination fits its criteria of freedom.  The Lesser General
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  78) Public License permits more lax criteria for linking other code with
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  79) the library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  80) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  81)   We call this license the "Lesser" General Public License because it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  82) does Less to protect the user's freedom than the ordinary General
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  83) Public License.  It also provides other free software developers Less
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  84) of an advantage over competing non-free programs.  These disadvantages
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  85) are the reason we use the ordinary General Public License for many
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  86) libraries.  However, the Lesser license provides advantages in certain
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  87) special circumstances.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  88) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  89)   For example, on rare occasions, there may be a special need to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  90) encourage the widest possible use of a certain library, so that it becomes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  91) a de-facto standard.  To achieve this, non-free programs must be
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  92) allowed to use the library.  A more frequent case is that a free
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  93) library does the same job as widely used non-free libraries.  In this
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  94) case, there is little to gain by limiting the free library to free
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  95) software only, so we use the Lesser General Public License.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  96) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  97)   In other cases, permission to use a particular library in non-free
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  98) programs enables a greater number of people to use a large body of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  99) free software.  For example, permission to use the GNU C Library in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 100) non-free programs enables many more people to use the whole GNU
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 101) operating system, as well as its variant, the GNU/Linux operating
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 102) system.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 103) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 104)   Although the Lesser General Public License is Less protective of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 105) users' freedom, it does ensure that the user of a program that is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 106) linked with the Library has the freedom and the wherewithal to run
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 107) that program using a modified version of the Library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 108) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 109)   The precise terms and conditions for copying, distribution and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 110) modification follow.  Pay close attention to the difference between a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 111) "work based on the library" and a "work that uses the library".  The
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 112) former contains code derived from the library, whereas the latter must
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 113) be combined with the library in order to run.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 114) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 115)                   GNU LESSER GENERAL PUBLIC LICENSE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 116)    TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 117) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 118)   0. This License Agreement applies to any software library or other
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 119) program which contains a notice placed by the copyright holder or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 120) other authorized party saying it may be distributed under the terms of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 121) this Lesser General Public License (also called "this License").
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 122) Each licensee is addressed as "you".
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 123) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 124)   A "library" means a collection of software functions and/or data
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 125) prepared so as to be conveniently linked with application programs
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 126) (which use some of those functions and data) to form executables.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 127) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 128)   The "Library", below, refers to any such software library or work
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 129) which has been distributed under these terms.  A "work based on the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 130) Library" means either the Library or any derivative work under
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 131) copyright law: that is to say, a work containing the Library or a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 132) portion of it, either verbatim or with modifications and/or translated
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 133) straightforwardly into another language.  (Hereinafter, translation is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 134) included without limitation in the term "modification".)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 135) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 136)   "Source code" for a work means the preferred form of the work for
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 137) making modifications to it.  For a library, complete source code means
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 138) all the source code for all modules it contains, plus any associated
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 139) interface definition files, plus the scripts used to control compilation
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 140) and installation of the library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 141) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 142)   Activities other than copying, distribution and modification are not
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 143) covered by this License; they are outside its scope.  The act of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 144) running a program using the Library is not restricted, and output from
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 145) such a program is covered only if its contents constitute a work based
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 146) on the Library (independent of the use of the Library in a tool for
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 147) writing it).  Whether that is true depends on what the Library does
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 148) and what the program that uses the Library does.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 149) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 150)   1. You may copy and distribute verbatim copies of the Library's
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 151) complete source code as you receive it, in any medium, provided that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 152) you conspicuously and appropriately publish on each copy an
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 153) appropriate copyright notice and disclaimer of warranty; keep intact
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 154) all the notices that refer to this License and to the absence of any
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 155) warranty; and distribute a copy of this License along with the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 156) Library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 157) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 158)   You may charge a fee for the physical act of transferring a copy,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 159) and you may at your option offer warranty protection in exchange for a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 160) fee.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 161) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 162)   2. You may modify your copy or copies of the Library or any portion
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 163) of it, thus forming a work based on the Library, and copy and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 164) distribute such modifications or work under the terms of Section 1
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 165) above, provided that you also meet all of these conditions:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 166) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 167)     a) The modified work must itself be a software library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 168) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 169)     b) You must cause the files modified to carry prominent notices
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 170)     stating that you changed the files and the date of any change.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 171) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 172)     c) You must cause the whole of the work to be licensed at no
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 173)     charge to all third parties under the terms of this License.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 174) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 175)     d) If a facility in the modified Library refers to a function or a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 176)     table of data to be supplied by an application program that uses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 177)     the facility, other than as an argument passed when the facility
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 178)     is invoked, then you must make a good faith effort to ensure that,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 179)     in the event an application does not supply such function or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 180)     table, the facility still operates, and performs whatever part of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 181)     its purpose remains meaningful.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 182) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 183)     (For example, a function in a library to compute square roots has
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 184)     a purpose that is entirely well-defined independent of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 185)     application.  Therefore, Subsection 2d requires that any
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 186)     application-supplied function or table used by this function must
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 187)     be optional: if the application does not supply it, the square
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 188)     root function must still compute square roots.)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 189) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 190) These requirements apply to the modified work as a whole.  If
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 191) identifiable sections of that work are not derived from the Library,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 192) and can be reasonably considered independent and separate works in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 193) themselves, then this License, and its terms, do not apply to those
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 194) sections when you distribute them as separate works.  But when you
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 195) distribute the same sections as part of a whole which is a work based
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 196) on the Library, the distribution of the whole must be on the terms of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 197) this License, whose permissions for other licensees extend to the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 198) entire whole, and thus to each and every part regardless of who wrote
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 199) it.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 200) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 201) Thus, it is not the intent of this section to claim rights or contest
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 202) your rights to work written entirely by you; rather, the intent is to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 203) exercise the right to control the distribution of derivative or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 204) collective works based on the Library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 205) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 206) In addition, mere aggregation of another work not based on the Library
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 207) with the Library (or with a work based on the Library) on a volume of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 208) a storage or distribution medium does not bring the other work under
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 209) the scope of this License.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 210) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 211)   3. You may opt to apply the terms of the ordinary GNU General Public
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 212) License instead of this License to a given copy of the Library.  To do
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 213) this, you must alter all the notices that refer to this License, so
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 214) that they refer to the ordinary GNU General Public License, version 2,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 215) instead of to this License.  (If a newer version than version 2 of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 216) ordinary GNU General Public License has appeared, then you can specify
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 217) that version instead if you wish.)  Do not make any other change in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 218) these notices.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 219) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 220)   Once this change is made in a given copy, it is irreversible for
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 221) that copy, so the ordinary GNU General Public License applies to all
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 222) subsequent copies and derivative works made from that copy.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 223) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 224)   This option is useful when you wish to copy part of the code of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 225) the Library into a program that is not a library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 226) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 227)   4. You may copy and distribute the Library (or a portion or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 228) derivative of it, under Section 2) in object code or executable form
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 229) under the terms of Sections 1 and 2 above provided that you accompany
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 230) it with the complete corresponding machine-readable source code, which
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 231) must be distributed under the terms of Sections 1 and 2 above on a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 232) medium customarily used for software interchange.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 233) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 234)   If distribution of object code is made by offering access to copy
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 235) from a designated place, then offering equivalent access to copy the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 236) source code from the same place satisfies the requirement to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 237) distribute the source code, even though third parties are not
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 238) compelled to copy the source along with the object code.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 239) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 240)   5. A program that contains no derivative of any portion of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 241) Library, but is designed to work with the Library by being compiled or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 242) linked with it, is called a "work that uses the Library".  Such a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 243) work, in isolation, is not a derivative work of the Library, and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 244) therefore falls outside the scope of this License.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 245) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 246)   However, linking a "work that uses the Library" with the Library
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 247) creates an executable that is a derivative of the Library (because it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 248) contains portions of the Library), rather than a "work that uses the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 249) library".  The executable is therefore covered by this License.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 250) Section 6 states terms for distribution of such executables.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 251) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 252)   When a "work that uses the Library" uses material from a header file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 253) that is part of the Library, the object code for the work may be a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 254) derivative work of the Library even though the source code is not.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 255) Whether this is true is especially significant if the work can be
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 256) linked without the Library, or if the work is itself a library.  The
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 257) threshold for this to be true is not precisely defined by law.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 258) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 259)   If such an object file uses only numerical parameters, data
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 260) structure layouts and accessors, and small macros and small inline
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 261) functions (ten lines or less in length), then the use of the object
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 262) file is unrestricted, regardless of whether it is legally a derivative
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 263) work.  (Executables containing this object code plus portions of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 264) Library will still fall under Section 6.)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 265) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 266)   Otherwise, if the work is a derivative of the Library, you may
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 267) distribute the object code for the work under the terms of Section 6.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 268) Any executables containing that work also fall under Section 6,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 269) whether or not they are linked directly with the Library itself.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 270) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 271)   6. As an exception to the Sections above, you may also combine or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 272) link a "work that uses the Library" with the Library to produce a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 273) work containing portions of the Library, and distribute that work
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 274) under terms of your choice, provided that the terms permit
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 275) modification of the work for the customer's own use and reverse
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 276) engineering for debugging such modifications.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 277) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 278)   You must give prominent notice with each copy of the work that the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 279) Library is used in it and that the Library and its use are covered by
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 280) this License.  You must supply a copy of this License.  If the work
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 281) during execution displays copyright notices, you must include the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 282) copyright notice for the Library among them, as well as a reference
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 283) directing the user to the copy of this License.  Also, you must do one
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 284) of these things:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 285) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 286)     a) Accompany the work with the complete corresponding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 287)     machine-readable source code for the Library including whatever
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 288)     changes were used in the work (which must be distributed under
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 289)     Sections 1 and 2 above); and, if the work is an executable linked
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 290)     with the Library, with the complete machine-readable "work that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 291)     uses the Library", as object code and/or source code, so that the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 292)     user can modify the Library and then relink to produce a modified
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 293)     executable containing the modified Library.  (It is understood
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 294)     that the user who changes the contents of definitions files in the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 295)     Library will not necessarily be able to recompile the application
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 296)     to use the modified definitions.)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 297) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 298)     b) Use a suitable shared library mechanism for linking with the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 299)     Library.  A suitable mechanism is one that (1) uses at run time a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 300)     copy of the library already present on the user's computer system,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 301)     rather than copying library functions into the executable, and (2)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 302)     will operate properly with a modified version of the library, if
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 303)     the user installs one, as long as the modified version is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 304)     interface-compatible with the version that the work was made with.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 305) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 306)     c) Accompany the work with a written offer, valid for at
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 307)     least three years, to give the same user the materials
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 308)     specified in Subsection 6a, above, for a charge no more
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 309)     than the cost of performing this distribution.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 310) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 311)     d) If distribution of the work is made by offering access to copy
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 312)     from a designated place, offer equivalent access to copy the above
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 313)     specified materials from the same place.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 314) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 315)     e) Verify that the user has already received a copy of these
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 316)     materials or that you have already sent this user a copy.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 317) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 318)   For an executable, the required form of the "work that uses the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 319) Library" must include any data and utility programs needed for
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 320) reproducing the executable from it.  However, as a special exception,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 321) the materials to be distributed need not include anything that is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 322) normally distributed (in either source or binary form) with the major
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 323) components (compiler, kernel, and so on) of the operating system on
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 324) which the executable runs, unless that component itself accompanies
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 325) the executable.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 326) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 327)   It may happen that this requirement contradicts the license
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 328) restrictions of other proprietary libraries that do not normally
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 329) accompany the operating system.  Such a contradiction means you cannot
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 330) use both them and the Library together in an executable that you
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 331) distribute.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 332) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 333)   7. You may place library facilities that are a work based on the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 334) Library side-by-side in a single library together with other library
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 335) facilities not covered by this License, and distribute such a combined
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 336) library, provided that the separate distribution of the work based on
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 337) the Library and of the other library facilities is otherwise
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 338) permitted, and provided that you do these two things:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 339) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 340)     a) Accompany the combined library with a copy of the same work
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 341)     based on the Library, uncombined with any other library
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 342)     facilities.  This must be distributed under the terms of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 343)     Sections above.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 344) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 345)     b) Give prominent notice with the combined library of the fact
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 346)     that part of it is a work based on the Library, and explaining
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 347)     where to find the accompanying uncombined form of the same work.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 348) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 349)   8. You may not copy, modify, sublicense, link with, or distribute
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 350) the Library except as expressly provided under this License.  Any
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 351) attempt otherwise to copy, modify, sublicense, link with, or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 352) distribute the Library is void, and will automatically terminate your
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 353) rights under this License.  However, parties who have received copies,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 354) or rights, from you under this License will not have their licenses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 355) terminated so long as such parties remain in full compliance.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 356) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 357)   9. You are not required to accept this License, since you have not
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 358) signed it.  However, nothing else grants you permission to modify or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 359) distribute the Library or its derivative works.  These actions are
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 360) prohibited by law if you do not accept this License.  Therefore, by
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 361) modifying or distributing the Library (or any work based on the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 362) Library), you indicate your acceptance of this License to do so, and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 363) all its terms and conditions for copying, distributing or modifying
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 364) the Library or works based on it.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 365) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 366)   10. Each time you redistribute the Library (or any work based on the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 367) Library), the recipient automatically receives a license from the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 368) original licensor to copy, distribute, link with or modify the Library
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 369) subject to these terms and conditions.  You may not impose any further
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 370) restrictions on the recipients' exercise of the rights granted herein.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 371) You are not responsible for enforcing compliance by third parties with
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 372) this License.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 373) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 374)   11. If, as a consequence of a court judgment or allegation of patent
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 375) infringement or for any other reason (not limited to patent issues),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 376) conditions are imposed on you (whether by court order, agreement or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 377) otherwise) that contradict the conditions of this License, they do not
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 378) excuse you from the conditions of this License.  If you cannot
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 379) distribute so as to satisfy simultaneously your obligations under this
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 380) License and any other pertinent obligations, then as a consequence you
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 381) may not distribute the Library at all.  For example, if a patent
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 382) license would not permit royalty-free redistribution of the Library by
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 383) all those who receive copies directly or indirectly through you, then
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 384) the only way you could satisfy both it and this License would be to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 385) refrain entirely from distribution of the Library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 386) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 387) If any portion of this section is held invalid or unenforceable under any
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 388) particular circumstance, the balance of the section is intended to apply,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 389) and the section as a whole is intended to apply in other circumstances.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 390) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 391) It is not the purpose of this section to induce you to infringe any
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 392) patents or other property right claims or to contest validity of any
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 393) such claims; this section has the sole purpose of protecting the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 394) integrity of the free software distribution system which is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 395) implemented by public license practices.  Many people have made
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 396) generous contributions to the wide range of software distributed
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 397) through that system in reliance on consistent application of that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 398) system; it is up to the author/donor to decide if he or she is willing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 399) to distribute software through any other system and a licensee cannot
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 400) impose that choice.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 401) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 402) This section is intended to make thoroughly clear what is believed to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 403) be a consequence of the rest of this License.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 404) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 405)   12. If the distribution and/or use of the Library is restricted in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 406) certain countries either by patents or by copyrighted interfaces, the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 407) original copyright holder who places the Library under this License may add
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 408) an explicit geographical distribution limitation excluding those countries,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 409) so that distribution is permitted only in or among countries not thus
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 410) excluded.  In such case, this License incorporates the limitation as if
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 411) written in the body of this License.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 412) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 413)   13. The Free Software Foundation may publish revised and/or new
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 414) versions of the Lesser General Public License from time to time.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 415) Such new versions will be similar in spirit to the present version,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 416) but may differ in detail to address new problems or concerns.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 417) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 418) Each version is given a distinguishing version number.  If the Library
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 419) specifies a version number of this License which applies to it and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 420) "any later version", you have the option of following the terms and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 421) conditions either of that version or of any later version published by
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 422) the Free Software Foundation.  If the Library does not specify a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 423) license version number, you may choose any version ever published by
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 424) the Free Software Foundation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 425) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 426)   14. If you wish to incorporate parts of the Library into other free
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 427) programs whose distribution conditions are incompatible with these,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 428) write to the author to ask for permission.  For software which is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 429) copyrighted by the Free Software Foundation, write to the Free
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 430) Software Foundation; we sometimes make exceptions for this.  Our
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 431) decision will be guided by the two goals of preserving the free status
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 432) of all derivatives of our free software and of promoting the sharing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 433) and reuse of software generally.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 434) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 435)                             NO WARRANTY
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 436) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 437)   15. BECAUSE THE LIBRARY IS LICENSED FREE OF CHARGE, THERE IS NO
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 438) WARRANTY FOR THE LIBRARY, TO THE EXTENT PERMITTED BY APPLICABLE LAW.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 439) EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 440) OTHER PARTIES PROVIDE THE LIBRARY "AS IS" WITHOUT WARRANTY OF ANY
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 441) KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 442) IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 443) PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 444) LIBRARY IS WITH YOU.  SHOULD THE LIBRARY PROVE DEFECTIVE, YOU ASSUME
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 445) THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 446) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 447)   16. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 448) WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 449) AND/OR REDISTRIBUTE THE LIBRARY AS PERMITTED ABOVE, BE LIABLE TO YOU
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 450) FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 451) CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 452) LIBRARY (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 453) RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 454) FAILURE OF THE LIBRARY TO OPERATE WITH ANY OTHER SOFTWARE), EVEN IF
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 455) SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 456) DAMAGES.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 457) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 458)                      END OF TERMS AND CONDITIONS
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 459) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 460)            How to Apply These Terms to Your New Libraries
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 461) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 462)   If you develop a new library, and you want it to be of the greatest
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 463) possible use to the public, we recommend making it free software that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 464) everyone can redistribute and change.  You can do so by permitting
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 465) redistribution under these terms (or, alternatively, under the terms of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 466) ordinary General Public License).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 467) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 468)   To apply these terms, attach the following notices to the library.  It is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 469) safest to attach them to the start of each source file to most effectively
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 470) convey the exclusion of warranty; and each file should have at least the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 471) "copyright" line and a pointer to where the full notice is found.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 472) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 473)     <one line to give the library's name and a brief idea of what it does.>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 474)     Copyright (C) <year>  <name of author>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 475) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 476)     This library is free software; you can redistribute it and/or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 477)     modify it under the terms of the GNU Lesser General Public
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 478)     License as published by the Free Software Foundation; either
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 479)     version 2.1 of the License, or (at your option) any later version.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 480) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 481)     This library is distributed in the hope that it will be useful,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 482)     but WITHOUT ANY WARRANTY; without even the implied warranty of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 483)     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 484)     Lesser General Public License for more details.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 485) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 486)     You should have received a copy of the GNU Lesser General Public
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 487)     License along with this library; if not, write to the Free Software
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 488)     Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 489) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 490) Also add information on how to contact you by electronic and paper mail.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 491) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 492) You should also get your employer (if you work as a programmer) or your
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 493) school, if any, to sign a "copyright disclaimer" for the library, if
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 494) necessary.  Here is a sample; alter the names:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 495) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 496)   Yoyodyne, Inc., hereby disclaims all copyright interest in the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 497)   library `Frob' (a library for tweaking knobs) written by James Random Hacker.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 498) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 499)   <signature of Ty Coon>, 1 April 1990
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 500)   Ty Coon, President of Vice
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 501) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 502) That's all there is to it!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   1) [![SWUbanner](https://raw.githubusercontent.com/vshymanskyy/StandWithUkraine/main/banner2-direct.svg)](https://supportukrainenow.org/)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   3) ![PHPMailer](https://raw.github.com/PHPMailer/PHPMailer/master/examples/images/phpmailer.png)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   4) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   5) # PHPMailer – A full-featured email creation and transfer class for PHP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   6) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   7) [![Test status](https://github.com/PHPMailer/PHPMailer/workflows/Tests/badge.svg)](https://github.com/PHPMailer/PHPMailer/actions)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   8) [![codecov.io](https://codecov.io/gh/PHPMailer/PHPMailer/branch/master/graph/badge.svg?token=iORZpwmYmM)](https://codecov.io/gh/PHPMailer/PHPMailer)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   9) [![Latest Stable Version](https://poser.pugx.org/phpmailer/phpmailer/v/stable.svg)](https://packagist.org/packages/phpmailer/phpmailer)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  10) [![Total Downloads](https://poser.pugx.org/phpmailer/phpmailer/downloads)](https://packagist.org/packages/phpmailer/phpmailer)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  11) [![License](https://poser.pugx.org/phpmailer/phpmailer/license.svg)](https://packagist.org/packages/phpmailer/phpmailer)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  12) [![API Docs](https://github.com/phpmailer/phpmailer/workflows/Docs/badge.svg)](https://phpmailer.github.io/PHPMailer/)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  13) [![OpenSSF Scorecard](https://api.securityscorecards.dev/projects/github.com/PHPMailer/PHPMailer/badge)](https://api.securityscorecards.dev/projects/github.com/PHPMailer/PHPMailer)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  14) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  15) ## Features
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  16) - Probably the world's most popular code for sending email from PHP!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  17) - Used by many open-source projects: WordPress, Drupal, 1CRM, SugarCRM, Yii, Joomla! and many more
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  18) - Integrated SMTP support – send without a local mail server
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  19) - Send emails with multiple To, CC, BCC, and Reply-to addresses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  20) - Multipart/alternative emails for mail clients that do not read HTML email
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  21) - Add attachments, including inline
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  22) - Support for UTF-8 content and 8bit, base64, binary, and quoted-printable encodings
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  23) - SMTP authentication with LOGIN, PLAIN, CRAM-MD5, and XOAUTH2 mechanisms over SMTPS and SMTP+STARTTLS transports
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  24) - Validates email addresses automatically
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  25) - Protects against header injection attacks
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  26) - Error messages in over 50 languages!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  27) - DKIM and S/MIME signing support
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  28) - Compatible with PHP 5.5 and later, including PHP 8.2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  29) - Namespaced to prevent name clashes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  30) - Much more!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  31) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  32) ## Why you might need it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  33) Many PHP developers need to send email from their code. The only PHP function that supports this directly is [`mail()`](https://www.php.net/manual/en/function.mail.php). However, it does not provide any assistance for making use of popular features such as encryption, authentication, HTML messages, and attachments.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  34) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  35) Formatting email correctly is surprisingly difficult. There are myriad overlapping (and conflicting) standards, requiring tight adherence to horribly complicated formatting and encoding rules – the vast majority of code that you'll find online that uses the `mail()` function directly is just plain wrong, if not unsafe!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  36) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  37) The PHP `mail()` function usually sends via a local mail server, typically fronted by a `sendmail` binary on Linux, BSD, and macOS platforms, however, Windows usually doesn't include a local mail server; PHPMailer's integrated SMTP client allows email sending on all platforms without needing a local mail server. Be aware though, that the `mail()` function should be avoided when possible; it's both faster and [safer](https://exploitbox.io/paper/Pwning-PHP-Mail-Function-For-Fun-And-RCE.html) to use SMTP to localhost.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  38) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  39) *Please* don't be tempted to do it yourself – if you don't use PHPMailer, there are many other excellent libraries that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  40) you should look at before rolling your own. Try [SwiftMailer](https://swiftmailer.symfony.com/)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  41) , [Laminas/Mail](https://docs.laminas.dev/laminas-mail/), [ZetaComponents](https://github.com/zetacomponents/Mail), etc.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  42) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  43) ## License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  44) This software is distributed under the [LGPL 2.1](https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html) license, along with the [GPL Cooperation Commitment](https://gplcc.github.io/gplcc/). Please read [LICENSE](https://github.com/PHPMailer/PHPMailer/blob/master/LICENSE) for information on the software availability and distribution.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  45) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  46) ## Installation & loading
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  47) PHPMailer is available on [Packagist](https://packagist.org/packages/phpmailer/phpmailer) (using semantic versioning), and installation via [Composer](https://getcomposer.org) is the recommended way to install PHPMailer. Just add this line to your `composer.json` file:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  48) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  49) ```json
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  50) "phpmailer/phpmailer": "^6.9.2"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  51) ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  52) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  53) or run
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  54) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  55) ```sh
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  56) composer require phpmailer/phpmailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  57) ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  58) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  59) Note that the `vendor` folder and the `vendor/autoload.php` script are generated by Composer; they are not part of PHPMailer.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  60) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  61) If you want to use XOAUTH2 authentication, you will also need to add a dependency on the `league/oauth2-client` and appropriate service adapters package in your `composer.json`, or take a look at
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  62) by @decomplexity's [SendOauth2 wrapper](https://github.com/decomplexity/SendOauth2), especially if you're using Microsoft services.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  63) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  64) Alternatively, if you're not using Composer, you
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  65) can [download PHPMailer as a zip file](https://github.com/PHPMailer/PHPMailer/archive/master.zip), (note that docs and examples are not included in the zip file), then copy the contents of the PHPMailer folder into one of the `include_path` directories specified in your PHP configuration and load each class file manually:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  66) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  67) ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  68) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  69) use PHPMailer\PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  70) use PHPMailer\PHPMailer\Exception;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  71) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  72) require 'path/to/PHPMailer/src/Exception.php';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  73) require 'path/to/PHPMailer/src/PHPMailer.php';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  74) require 'path/to/PHPMailer/src/SMTP.php';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  75) ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  76) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  77) If you're not using the `SMTP` class explicitly (you're probably not), you don't need a `use` line for the SMTP class. Even if you're not using exceptions, you do still need to load the `Exception` class as it is used internally.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  78) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  79) ## Legacy versions
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  80) PHPMailer 5.2 (which is compatible with PHP 5.0 — 7.0) is no longer supported, even for security updates. You will find the latest version of 5.2 in the [5.2-stable branch](https://github.com/PHPMailer/PHPMailer/tree/5.2-stable). If you're using PHP 5.5 or later (which you should be), switch to the 6.x releases.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  81) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  82) ### Upgrading from 5.2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  83) The biggest changes are that source files are now in the `src/` folder, and PHPMailer now declares the namespace `PHPMailer\PHPMailer`. This has several important effects – [read the upgrade guide](https://github.com/PHPMailer/PHPMailer/tree/master/UPGRADING.md) for more details.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  84) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  85) ### Minimal installation
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  86) While installing the entire package manually or with Composer is simple, convenient, and reliable, you may want to include only vital files in your project. At the very least you will need [src/PHPMailer.php](https://github.com/PHPMailer/PHPMailer/tree/master/src/PHPMailer.php). If you're using SMTP, you'll need [src/SMTP.php](https://github.com/PHPMailer/PHPMailer/tree/master/src/SMTP.php), and if you're using POP-before SMTP (*very* unlikely!), you'll need [src/POP3.php](https://github.com/PHPMailer/PHPMailer/tree/master/src/POP3.php). You can skip the [language](https://github.com/PHPMailer/PHPMailer/tree/master/language/) folder if you're not showing errors to users and can make do with English-only errors. If you're using XOAUTH2 you will need [src/OAuth.php](https://github.com/PHPMailer/PHPMailer/tree/master/src/OAuth.php) as well as the Composer dependencies for the services you wish to authenticate with. Really, it's much easier to use Composer!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  87) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  88) ## A Simple Example
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  89) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  90) ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  91) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  92) //Import PHPMailer classes into the global namespace
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  93) //These must be at the top of your script, not inside a function
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  94) use PHPMailer\PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  95) use PHPMailer\PHPMailer\SMTP;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  96) use PHPMailer\PHPMailer\Exception;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  97) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  98) //Load Composer's autoloader
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  99) require 'vendor/autoload.php';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 100) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 101) //Create an instance; passing `true` enables exceptions
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 102) $mail = new PHPMailer(true);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 103) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 104) try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 105)     //Server settings
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 106)     $mail->SMTPDebug = SMTP::DEBUG_SERVER;                      //Enable verbose debug output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 107)     $mail->isSMTP();                                            //Send using SMTP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 108)     $mail->Host       = 'smtp.example.com';                     //Set the SMTP server to send through
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 109)     $mail->SMTPAuth   = true;                                   //Enable SMTP authentication
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 110)     $mail->Username   = 'user@example.com';                     //SMTP username
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 111)     $mail->Password   = 'secret';                               //SMTP password
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 112)     $mail->SMTPSecure = PHPMailer::ENCRYPTION_SMTPS;            //Enable implicit TLS encryption
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 113)     $mail->Port       = 465;                                    //TCP port to connect to; use 587 if you have set `SMTPSecure = PHPMailer::ENCRYPTION_STARTTLS`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 114) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 115)     //Recipients
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 116)     $mail->setFrom('from@example.com', 'Mailer');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 117)     $mail->addAddress('joe@example.net', 'Joe User');     //Add a recipient
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 118)     $mail->addAddress('ellen@example.com');               //Name is optional
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 119)     $mail->addReplyTo('info@example.com', 'Information');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 120)     $mail->addCC('cc@example.com');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 121)     $mail->addBCC('bcc@example.com');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 122) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 123)     //Attachments
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 124)     $mail->addAttachment('/var/tmp/file.tar.gz');         //Add attachments
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 125)     $mail->addAttachment('/tmp/image.jpg', 'new.jpg');    //Optional name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 126) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 127)     //Content
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 128)     $mail->isHTML(true);                                  //Set email format to HTML
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 129)     $mail->Subject = 'Here is the subject';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 130)     $mail->Body    = 'This is the HTML message body <b>in bold!</b>';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 131)     $mail->AltBody = 'This is the body in plain text for non-HTML mail clients';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 132) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 133)     $mail->send();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 134)     echo 'Message has been sent';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 135) } catch (Exception $e) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 136)     echo "Message could not be sent. Mailer Error: {$mail->ErrorInfo}";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 137) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 138) ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 139) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 140) You'll find plenty to play with in the [examples](https://github.com/PHPMailer/PHPMailer/tree/master/examples) folder, which covers many common scenarios including sending through Gmail, building contact forms, sending to mailing lists, and more.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 141) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 142) If you are re-using the instance (e.g. when sending to a mailing list), you may need to clear the recipient list to avoid sending duplicate messages. See [the mailing list example](https://github.com/PHPMailer/PHPMailer/blob/master/examples/mailing_list.phps) for further guidance.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 143) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 144) That's it. You should now be ready to use PHPMailer!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 145) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 146) ## Localization
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 147) PHPMailer defaults to English, but in the [language](https://github.com/PHPMailer/PHPMailer/tree/master/language/) folder, you'll find many translations for PHPMailer error messages that you may encounter. Their filenames contain [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) language code for the translations, for example `fr` for French. To specify a language, you need to tell PHPMailer which one to use, like this:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 148) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 149) ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 150) //To load the French version
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 151) $mail->setLanguage('fr', '/optional/path/to/language/directory/');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 152) ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 153) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 154) We welcome corrections and new languages – if you're looking for corrections, run the [Language/TranslationCompletenessTest.php](https://github.com/PHPMailer/PHPMailer/blob/master/test/Language/TranslationCompletenessTest.php) script in the tests folder and it will show any missing translations.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 155) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 156) ## Documentation
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 157) Start reading at the [GitHub wiki](https://github.com/PHPMailer/PHPMailer/wiki). If you're having trouble, head for [the troubleshooting guide](https://github.com/PHPMailer/PHPMailer/wiki/Troubleshooting) as it's frequently updated.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 158) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 159) Examples of how to use PHPMailer for common scenarios can be found in the [examples](https://github.com/PHPMailer/PHPMailer/tree/master/examples) folder. If you're looking for a good starting point, we recommend you start with [the Gmail example](https://github.com/PHPMailer/PHPMailer/tree/master/examples/gmail.phps).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 160) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 161) To reduce PHPMailer's deployed code footprint, examples are not included if you load PHPMailer via Composer or via [GitHub's zip file download](https://github.com/PHPMailer/PHPMailer/archive/master.zip), so you'll need to either clone the git repository or use the above links to get to the examples directly.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 162) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 163) Complete generated API documentation is [available online](https://phpmailer.github.io/PHPMailer/).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 164) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 165) You can generate complete API-level documentation by running `phpdoc` in the top-level folder, and documentation will appear in the `docs` folder, though you'll need to have [PHPDocumentor](https://www.phpdoc.org) installed. You may find [the unit tests](https://github.com/PHPMailer/PHPMailer/blob/master/test/PHPMailerTest.php) a good reference for how to do various operations such as encryption.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 166) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 167) If the documentation doesn't cover what you need, search the [many questions on Stack Overflow](https://stackoverflow.com/questions/tagged/phpmailer), and before you ask a question about "SMTP Error: Could not connect to SMTP host.", [read the troubleshooting guide](https://github.com/PHPMailer/PHPMailer/wiki/Troubleshooting).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 168) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 169) ## Tests
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 170) [PHPMailer tests](https://github.com/PHPMailer/PHPMailer/tree/master/test/) use PHPUnit 9, with [a polyfill](https://github.com/Yoast/PHPUnit-Polyfills) to let 9-style tests run on older PHPUnit and PHP versions.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 171) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 172) [![Test status](https://github.com/PHPMailer/PHPMailer/workflows/Tests/badge.svg)](https://github.com/PHPMailer/PHPMailer/actions)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 173) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 174) If this isn't passing, is there something you can do to help?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 175) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 176) ## Security
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 177) Please disclose any vulnerabilities found responsibly – report security issues to the maintainers privately.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 178) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 179) See [SECURITY](https://github.com/PHPMailer/PHPMailer/tree/master/SECURITY.md) and [PHPMailer's security advisories on GitHub](https://github.com/PHPMailer/PHPMailer/security). 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 180) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 181) ## Contributing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 182) Please submit bug reports, suggestions, and pull requests to the [GitHub issue tracker](https://github.com/PHPMailer/PHPMailer/issues).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 183) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 184) We're particularly interested in fixing edge cases, expanding test coverage, and updating translations.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 185) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 186) If you found a mistake in the docs, or want to add something, go ahead and amend the wiki – anyone can edit it.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 187) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 188) If you have git clones from prior to the move to the PHPMailer GitHub organisation, you'll need to update any remote URLs referencing the old GitHub location with a command like this from within your clone:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 189) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 190) ```sh
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 191) git remote set-url upstream https://github.com/PHPMailer/PHPMailer.git
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 192) ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 193) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 194) Please *don't* use the SourceForge or Google Code projects any more; they are obsolete and no longer maintained.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 195) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 196) ## Sponsorship
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 197) Development time and resources for PHPMailer are provided by [Smartmessages.net](https://info.smartmessages.net/), the world's only privacy-first email marketing system.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 198) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 199) <a href="https://info.smartmessages.net/"><img src="https://www.smartmessages.net/img/smartmessages-logo.svg" width="550" alt="Smartmessages.net privacy-first email marketing logo"></a>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 200) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 201) Donations are very welcome, whether in beer 🍺, T-shirts 👕, or cold, hard cash 💰. Sponsorship through GitHub is a simple and convenient way to say "thank you" to PHPMailer's maintainers and contributors – just click the "Sponsor" button [on the project page](https://github.com/PHPMailer/PHPMailer). If your company uses PHPMailer, consider taking part in Tidelift's enterprise support programme.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 202) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 203) ## PHPMailer For Enterprise
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 204) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 205) Available as part of the Tidelift Subscription.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 206) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 207) The maintainers of PHPMailer and thousands of other packages are working with Tidelift to deliver commercial
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 208) support and maintenance for the open-source packages you use to build your applications. Save time, reduce risk, and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 209) improve code health, while paying the maintainers of the exact packages you
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 210) use. [Learn more.](https://tidelift.com/subscription/pkg/packagist-phpmailer-phpmailer?utm_source=packagist-phpmailer-phpmailer&utm_medium=referral&utm_campaign=enterprise&utm_term=repo)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 211) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 212) ## Changelog
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 213) See [changelog](changelog.md).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 214) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 215) ## History
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 216) - PHPMailer was originally written in 2001 by Brent R. Matzelle as a [SourceForge project](https://sourceforge.net/projects/phpmailer/).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 217) - [Marcus Bointon](https://github.com/Synchro) (`coolbru` on SF) and Andy Prevost (`codeworxtech`) took over the project in 2004.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 218) - Became an Apache incubator project on Google Code in 2010, managed by Jim Jagielski.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 219) - Marcus created [his fork on GitHub](https://github.com/Synchro/PHPMailer) in 2008.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 220) - Jim and Marcus decide to join forces and use GitHub as the canonical and official repo for PHPMailer in 2013.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 221) - PHPMailer moves to [the PHPMailer organisation](https://github.com/PHPMailer) on GitHub in 2013.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 222) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 223) ### What's changed since moving from SourceForge?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 224) - Official successor to the SourceForge and Google Code projects.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 225) - Test suite.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 226) - Continuous integration with GitHub Actions.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 227) - Composer support.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 228) - Public development.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 229) - Additional languages and language strings.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 230) - CRAM-MD5 authentication support.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 231) - Preserves full repo history of authors, commits, and branches from the original SourceForge project.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) # Security notices relating to PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) Please disclose any security issues or vulnerabilities found through [Tidelift's coordinated disclosure system](https://tidelift.com/security) or to the maintainers privately.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5) PHPMailer 6.4.1 and earlier contain a vulnerability that can result in untrusted code being called (if such code is injected into the host project's scope by other means). If the `$patternselect` parameter to `validateAddress()` is set to `'php'` (the default, defined by `PHPMailer::$validator`), and the global namespace contains a function called `php`, it will be called in preference to the built-in validator of the same name. Mitigated in PHPMailer 6.5.0 by denying the use of simple strings as validator function names. Recorded as [CVE-2021-3603](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2021-3603). Reported by [Vikrant Singh Chauhan](mailto:vi@hackberry.xyz) via [huntr.dev](https://www.huntr.dev/).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) PHPMailer versions 6.4.1 and earlier contain a possible remote code execution vulnerability through the `$lang_path` parameter of the `setLanguage()` method. If the `$lang_path` parameter is passed unfiltered from user input, it can be set to [a UNC path](https://docs.microsoft.com/en-us/dotnet/standard/io/file-path-formats#unc-paths), and if an attacker is also able to persuade the server to load a file from that UNC path, a script file under their control may be executed. This vulnerability only applies to systems that resolve UNC paths, typically only Microsoft Windows.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) PHPMailer 6.5.0 mitigates this by no longer treating translation files as PHP code, but by parsing their text content directly. This approach avoids the possibility of executing unknown code while retaining backward compatibility. This isn't ideal, so the current translation format is deprecated and will be replaced in the next major release. Recorded as [CVE-2021-34551](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2021-34551). Reported by [Jilin Diting Information Technology Co., Ltd](https://listensec.com) via Tidelift.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) PHPMailer versions between 6.1.8 and 6.4.0 contain a regression of the earlier CVE-2018-19296 object injection vulnerability as a result of [a fix for Windows UNC paths in 6.1.8](https://github.com/PHPMailer/PHPMailer/commit/e2e07a355ee8ff36aba21d0242c5950c56e4c6f9). Recorded as [CVE-2020-36326](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2020-36326). Reported by Fariskhi Vidyan via Tidelift. 6.4.1 fixes this issue, and also enforces stricter checks for URL schemes in local path contexts.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) PHPMailer versions 6.1.5 and earlier contain an output escaping bug that occurs in `Content-Type` and `Content-Disposition` when filenames passed into `addAttachment` and other methods that accept attachment names contain double quote characters, in contravention of RFC822 3.4.1. No specific vulnerability has been found relating to this, but it could allow file attachments to bypass attachment filters that are based on matching filename extensions. Recorded as [CVE-2020-13625](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2020-13625). Reported by Elar Lang of Clarified Security.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) PHPMailer versions prior to 6.0.6 and 5.2.27 are vulnerable to an object injection attack by passing `phar://` paths into `addAttachment()` and other functions that may receive unfiltered local paths, possibly leading to RCE. Recorded as [CVE-2018-19296](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2018-19296). See [this article](https://knasmueller.net/5-answers-about-php-phar-exploitation) for more info on this type of vulnerability. Mitigated by blocking the use of paths containing URL-protocol style prefixes such as `phar://`. Reported by Sehun Oh of cyberone.kr.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) PHPMailer versions prior to 5.2.24 (released July 26th 2017) have an XSS vulnerability in one of the code examples, [CVE-2017-11503](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2017-11503). The `code_generator.phps` example did not filter user input prior to output. This file is distributed with a `.phps` extension, so it is not normally executable unless it is explicitly renamed, and the file is not included when PHPMailer is loaded through composer, so it is safe by default. There was also an undisclosed potential XSS vulnerability in the default exception handler (unused by default). Patches for both issues kindly provided by Patrick Monnerat of the Fedora Project.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) PHPMailer versions prior to 5.2.22 (released January 9th 2017) have a local file disclosure vulnerability, [CVE-2017-5223](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2017-5223). If content passed into `msgHTML()` is sourced from unfiltered user input, relative paths can map to absolute local file paths and added as attachments. Also note that `addAttachment` (just like `file_get_contents`, `passthru`, `unlink`, etc) should not be passed user-sourced params either! Reported by Yongxiang Li of Asiasecurity.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) PHPMailer versions prior to 5.2.20 (released December 28th 2016) are vulnerable to [CVE-2016-10045](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2016-10045) a remote code execution vulnerability, responsibly reported by [Dawid Golunski](https://legalhackers.com/advisories/PHPMailer-Exploit-Remote-Code-Exec-CVE-2016-10045-Vuln-Patch-Bypass.html), and patched by Paul Buonopane (@Zenexer).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) PHPMailer versions prior to 5.2.18 (released December 2016) are vulnerable to [CVE-2016-10033](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2016-10033) a remote code execution vulnerability, responsibly reported by [Dawid Golunski](https://legalhackers.com/advisories/PHPMailer-Exploit-Remote-Code-Exec-CVE-2016-10033-Vuln.html).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) PHPMailer versions prior to 5.2.14 (released November 2015) are vulnerable to [CVE-2015-8476](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2015-8476) an SMTP CRLF injection bug permitting arbitrary message sending.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) PHPMailer versions prior to 5.2.10 (released May 2015) are vulnerable to [CVE-2008-5619](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2008-5619), a remote code execution vulnerability in the bundled html2text library. This file was removed in 5.2.10, so if you are using a version prior to that and make use of the html2text function, it's vitally important that you upgrade and remove this file.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) PHPMailer versions prior to 2.0.7 and 2.2.1 are vulnerable to [CVE-2012-0796](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2012-0796), an email header injection attack.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) Joomla 1.6.0 uses PHPMailer in an unsafe way, allowing it to reveal local file paths, reported in [CVE-2011-3747](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2011-3747).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) PHPMailer didn't sanitise the `$lang_path` parameter in `SetLanguage`. This wasn't a problem in itself, but some apps (PHPClassifieds, ATutor) also failed to sanitise user-provided parameters passed to it, permitting semi-arbitrary local file inclusion, reported in [CVE-2010-4914](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2010-4914), [CVE-2007-2021](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2007-2021) and [CVE-2006-5734](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2006-5734).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) PHPMailer 1.7.2 and earlier contained a possible DDoS vulnerability reported in [CVE-2005-1807](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2005-1807).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) PHPMailer 1.7 and earlier (June 2003) have a possible vulnerability in the `SendmailSend` method where shell commands may not be sanitised. Reported in [CVE-2007-3215](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2007-3215).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 37) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   4)  * PHPMailer - PHP email creation and transport class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   5)  * PHP Version 5.5.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   6)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   7)  * @see https://github.com/PHPMailer/PHPMailer/ The PHPMailer GitHub project
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   8)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   9)  * @author    Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  10)  * @author    Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  11)  * @author    Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  12)  * @author    Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  13)  * @copyright 2012 - 2023 Marcus Bointon
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  14)  * @copyright 2010 - 2012 Jim Jagielski
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  15)  * @copyright 2004 - 2009 Andy Prevost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  16)  * @license   https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html GNU Lesser General Public License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  17)  * @note      This program is distributed in the hope that it will be useful - WITHOUT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  18)  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  19)  * FITNESS FOR A PARTICULAR PURPOSE.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  20)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  21) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  22) namespace PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  23) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  24) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  25)  * Configure PHPMailer with DSN string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  26)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  27)  * @see https://en.wikipedia.org/wiki/Data_source_name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  28)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  29)  * @author Oleg Voronkovich <oleg-voronkovich@yandex.ru>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  30)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  31) class DSNConfigurator
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  32) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  33)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  34)      * Create new PHPMailer instance configured by DSN.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  35)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  36)      * @param string $dsn        DSN
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  37)      * @param bool   $exceptions Should we throw external exceptions?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  38)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  39)      * @return PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  40)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  41)     public static function mailer($dsn, $exceptions = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  42)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  43)         static $configurator = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  44) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  45)         if (null === $configurator) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  46)             $configurator = new DSNConfigurator();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  47)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  48) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  49)         return $configurator->configure(new PHPMailer($exceptions), $dsn);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  50)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  51) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  52)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  53)      * Configure PHPMailer instance with DSN string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  54)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  55)      * @param PHPMailer $mailer PHPMailer instance
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  56)      * @param string    $dsn    DSN
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  57)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  58)      * @return PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  59)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  60)     public function configure(PHPMailer $mailer, $dsn)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  61)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  62)         $config = $this->parseDSN($dsn);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  63) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  64)         $this->applyConfig($mailer, $config);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  65) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  66)         return $mailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  67)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  68) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  69)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  70)      * Parse DSN string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  71)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  72)      * @param string $dsn DSN
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  73)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  74)      * @throws Exception If DSN is malformed
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  75)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  76)      * @return array Configuration
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  77)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  78)     private function parseDSN($dsn)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  79)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  80)         $config = $this->parseUrl($dsn);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  81) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  82)         if (false === $config || !isset($config['scheme']) || !isset($config['host'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  83)             throw new Exception('Malformed DSN');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  84)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  85) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  86)         if (isset($config['query'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  87)             parse_str($config['query'], $config['query']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  88)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  89) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  90)         return $config;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  91)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  92) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  93)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  94)      * Apply configuration to mailer.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  95)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  96)      * @param PHPMailer $mailer PHPMailer instance
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  97)      * @param array     $config Configuration
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  98)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  99)      * @throws Exception If scheme is invalid
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 100)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 101)     private function applyConfig(PHPMailer $mailer, $config)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 102)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 103)         switch ($config['scheme']) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 104)             case 'mail':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 105)                 $mailer->isMail();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 106)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 107)             case 'sendmail':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 108)                 $mailer->isSendmail();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 109)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 110)             case 'qmail':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 111)                 $mailer->isQmail();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 112)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 113)             case 'smtp':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 114)             case 'smtps':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 115)                 $mailer->isSMTP();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 116)                 $this->configureSMTP($mailer, $config);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 117)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 118)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 119)                 throw new Exception(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 120)                     sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 121)                         'Invalid scheme: "%s". Allowed values: "mail", "sendmail", "qmail", "smtp", "smtps".',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 122)                         $config['scheme']
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 123)                     )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 124)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 125)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 126) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 127)         if (isset($config['query'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 128)             $this->configureOptions($mailer, $config['query']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 129)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 130)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 131) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 132)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 133)      * Configure SMTP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 134)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 135)      * @param PHPMailer $mailer PHPMailer instance
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 136)      * @param array     $config Configuration
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 137)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 138)     private function configureSMTP($mailer, $config)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 139)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 140)         $isSMTPS = 'smtps' === $config['scheme'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 141) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 142)         if ($isSMTPS) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 143)             $mailer->SMTPSecure = PHPMailer::ENCRYPTION_STARTTLS;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 144)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 145) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 146)         $mailer->Host = $config['host'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 147) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 148)         if (isset($config['port'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 149)             $mailer->Port = $config['port'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 150)         } elseif ($isSMTPS) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 151)             $mailer->Port = SMTP::DEFAULT_SECURE_PORT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 152)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 153) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 154)         $mailer->SMTPAuth = isset($config['user']) || isset($config['pass']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 155) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 156)         if (isset($config['user'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 157)             $mailer->Username = $config['user'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 158)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 159) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 160)         if (isset($config['pass'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 161)             $mailer->Password = $config['pass'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 162)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 163)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 164) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 165)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 166)      * Configure options.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 167)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 168)      * @param PHPMailer $mailer  PHPMailer instance
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 169)      * @param array     $options Options
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 170)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 171)      * @throws Exception If option is unknown
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 172)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 173)     private function configureOptions(PHPMailer $mailer, $options)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 174)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 175)         $allowedOptions = get_object_vars($mailer);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 176) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 177)         unset($allowedOptions['Mailer']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 178)         unset($allowedOptions['SMTPAuth']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 179)         unset($allowedOptions['Username']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 180)         unset($allowedOptions['Password']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 181)         unset($allowedOptions['Hostname']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 182)         unset($allowedOptions['Port']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 183)         unset($allowedOptions['ErrorInfo']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 184) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 185)         $allowedOptions = \array_keys($allowedOptions);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 186) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 187)         foreach ($options as $key => $value) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 188)             if (!in_array($key, $allowedOptions)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 189)                 throw new Exception(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 190)                     sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 191)                         'Unknown option: "%s". Allowed values: "%s"',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 192)                         $key,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 193)                         implode('", "', $allowedOptions)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 194)                     )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 195)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 196)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 197) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 198)             switch ($key) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 199)                 case 'AllowEmpty':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 200)                 case 'SMTPAutoTLS':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 201)                 case 'SMTPKeepAlive':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 202)                 case 'SingleTo':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 203)                 case 'UseSendmailOptions':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 204)                 case 'do_verp':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 205)                 case 'DKIM_copyHeaderFields':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 206)                     $mailer->$key = (bool) $value;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 207)                     break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 208)                 case 'Priority':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 209)                 case 'SMTPDebug':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 210)                 case 'WordWrap':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 211)                     $mailer->$key = (int) $value;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 212)                     break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 213)                 default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 214)                     $mailer->$key = $value;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 215)                     break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 216)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 217)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 218)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 219) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 220)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 221)      * Parse a URL.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 222)      * Wrapper for the built-in parse_url function to work around a bug in PHP 5.5.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 223)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 224)      * @param string $url URL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 225)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 226)      * @return array|false
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 227)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 228)     protected function parseUrl($url)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 229)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 230)         if (\PHP_VERSION_ID >= 50600 || false === strpos($url, '?')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 231)             return parse_url($url);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 232)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 233) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 234)         $chunks = explode('?', $url);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 235)         if (is_array($chunks)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 236)             $result = parse_url($chunks[0]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 237)             if (is_array($result)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 238)                 $result['query'] = $chunks[1];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 239)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 240)             return $result;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 241)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 242) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 243)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 244)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 245) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * PHPMailer Exception class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * PHP Version 5.5.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @see       https://github.com/PHPMailer/PHPMailer/ The PHPMailer GitHub project
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  * @author    Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10)  * @author    Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11)  * @author    Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12)  * @author    Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13)  * @copyright 2012 - 2020 Marcus Bointon
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14)  * @copyright 2010 - 2012 Jim Jagielski
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15)  * @copyright 2004 - 2009 Andy Prevost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16)  * @license   https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html GNU Lesser General Public License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17)  * @note      This program is distributed in the hope that it will be useful - WITHOUT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18)  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19)  * FITNESS FOR A PARTICULAR PURPOSE.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) namespace PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25)  * PHPMailer exception handler.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27)  * @author Marcus Bointon <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) class Exception extends \Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32)      * Prettify error message output.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36)     public function errorMessage()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 37)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 38)         return '<strong>' . htmlspecialchars($this->getMessage(), ENT_COMPAT | ENT_HTML401) . "</strong><br />\n";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 39)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 40) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   4)  * PHPMailer - PHP email creation and transport class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   5)  * PHP Version 5.5.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   6)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   7)  * @see       https://github.com/PHPMailer/PHPMailer/ The PHPMailer GitHub project
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   8)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   9)  * @author    Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  10)  * @author    Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  11)  * @author    Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  12)  * @author    Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  13)  * @copyright 2012 - 2020 Marcus Bointon
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  14)  * @copyright 2010 - 2012 Jim Jagielski
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  15)  * @copyright 2004 - 2009 Andy Prevost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  16)  * @license   https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html GNU Lesser General Public License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  17)  * @note      This program is distributed in the hope that it will be useful - WITHOUT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  18)  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  19)  * FITNESS FOR A PARTICULAR PURPOSE.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  20)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  21) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  22) namespace PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  23) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  24) use League\OAuth2\Client\Grant\RefreshToken;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  25) use League\OAuth2\Client\Provider\AbstractProvider;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  26) use League\OAuth2\Client\Token\AccessToken;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  27) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  28) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  29)  * OAuth - OAuth2 authentication wrapper class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  30)  * Uses the oauth2-client package from the League of Extraordinary Packages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  31)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  32)  * @see     https://oauth2-client.thephpleague.com
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  33)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  34)  * @author  Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  35)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  36) class OAuth implements OAuthTokenProvider
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  37) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  38)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  39)      * An instance of the League OAuth Client Provider.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  40)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  41)      * @var AbstractProvider
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  42)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  43)     protected $provider;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  44) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  45)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  46)      * The current OAuth access token.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  47)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  48)      * @var AccessToken
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  49)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  50)     protected $oauthToken;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  51) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  52)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  53)      * The user's email address, usually used as the login ID
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  54)      * and also the from address when sending email.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  55)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  56)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  57)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  58)     protected $oauthUserEmail = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  59) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  60)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  61)      * The client secret, generated in the app definition of the service you're connecting to.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  62)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  63)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  64)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  65)     protected $oauthClientSecret = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  66) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  67)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  68)      * The client ID, generated in the app definition of the service you're connecting to.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  69)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  70)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  71)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  72)     protected $oauthClientId = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  73) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  74)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  75)      * The refresh token, used to obtain new AccessTokens.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  76)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  77)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  78)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  79)     protected $oauthRefreshToken = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  80) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  81)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  82)      * OAuth constructor.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  83)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  84)      * @param array $options Associative array containing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  85)      *                       `provider`, `userName`, `clientSecret`, `clientId` and `refreshToken` elements
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  86)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  87)     public function __construct($options)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  88)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  89)         $this->provider = $options['provider'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  90)         $this->oauthUserEmail = $options['userName'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  91)         $this->oauthClientSecret = $options['clientSecret'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  92)         $this->oauthClientId = $options['clientId'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  93)         $this->oauthRefreshToken = $options['refreshToken'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  94)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  95) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  96)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  97)      * Get a new RefreshToken.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  98)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  99)      * @return RefreshToken
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 100)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 101)     protected function getGrant()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 102)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 103)         return new RefreshToken();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 104)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 105) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 106)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 107)      * Get a new AccessToken.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 108)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 109)      * @return AccessToken
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 110)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 111)     protected function getToken()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 112)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 113)         return $this->provider->getAccessToken(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 114)             $this->getGrant(),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 115)             ['refresh_token' => $this->oauthRefreshToken]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 116)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 117)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 118) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 119)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 120)      * Generate a base64-encoded OAuth token.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 121)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 122)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 123)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 124)     public function getOauth64()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 125)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 126)         //Get a new token if it's not available or has expired
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 127)         if (null === $this->oauthToken || $this->oauthToken->hasExpired()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 128)             $this->oauthToken = $this->getToken();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 129)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 130) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 131)         return base64_encode(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 132)             'user=' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 133)             $this->oauthUserEmail .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 134)             "\001auth=Bearer " .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 135)             $this->oauthToken .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 136)             "\001\001"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 137)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 138)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 139) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * PHPMailer - PHP email creation and transport class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * PHP Version 5.5.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @see https://github.com/PHPMailer/PHPMailer/ The PHPMailer GitHub project
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  * @author    Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10)  * @author    Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11)  * @author    Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12)  * @author    Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13)  * @copyright 2012 - 2020 Marcus Bointon
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14)  * @copyright 2010 - 2012 Jim Jagielski
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15)  * @copyright 2004 - 2009 Andy Prevost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16)  * @license   https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html GNU Lesser General Public License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17)  * @note      This program is distributed in the hope that it will be useful - WITHOUT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18)  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19)  * FITNESS FOR A PARTICULAR PURPOSE.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) namespace PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25)  * OAuthTokenProvider - OAuth2 token provider interface.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26)  * Provides base64 encoded OAuth2 auth strings for SMTP authentication.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28)  * @see     OAuth
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29)  * @see     SMTP::authenticate()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31)  * @author  Peter Scopes (pdscopes)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32)  * @author  Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) interface OAuthTokenProvider
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 37)      * Generate a base64-encoded OAuth token ensuring that the access token has not expired.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 38)      * The string to be base 64 encoded should be in the form:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 39)      * "user=<user_email_address>\001auth=Bearer <access_token>\001\001"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 40)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 41)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 42)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 43)     public function getOauth64();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 44) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    4)  * PHPMailer - PHP email creation and transport class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    5)  * PHP Version 5.5.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    6)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    7)  * @see https://github.com/PHPMailer/PHPMailer/ The PHPMailer GitHub project
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    8)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    9)  * @author    Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   10)  * @author    Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   11)  * @author    Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   12)  * @author    Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   13)  * @copyright 2012 - 2020 Marcus Bointon
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   14)  * @copyright 2010 - 2012 Jim Jagielski
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   15)  * @copyright 2004 - 2009 Andy Prevost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   16)  * @license   https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html GNU Lesser General Public License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   17)  * @note      This program is distributed in the hope that it will be useful - WITHOUT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   18)  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   19)  * FITNESS FOR A PARTICULAR PURPOSE.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   20)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   21) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   22) namespace PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   23) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   24) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   25)  * PHPMailer - PHP email creation and transport class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   26)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   27)  * @author Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   28)  * @author Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   29)  * @author Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   30)  * @author Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   31)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   32) class PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   33) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   34)     const CHARSET_ASCII = 'us-ascii';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   35)     const CHARSET_ISO88591 = 'iso-8859-1';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   36)     const CHARSET_UTF8 = 'utf-8';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   37) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   38)     const CONTENT_TYPE_PLAINTEXT = 'text/plain';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   39)     const CONTENT_TYPE_TEXT_CALENDAR = 'text/calendar';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   40)     const CONTENT_TYPE_TEXT_HTML = 'text/html';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   41)     const CONTENT_TYPE_MULTIPART_ALTERNATIVE = 'multipart/alternative';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   42)     const CONTENT_TYPE_MULTIPART_MIXED = 'multipart/mixed';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   43)     const CONTENT_TYPE_MULTIPART_RELATED = 'multipart/related';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   44) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   45)     const ENCODING_7BIT = '7bit';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   46)     const ENCODING_8BIT = '8bit';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   47)     const ENCODING_BASE64 = 'base64';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   48)     const ENCODING_BINARY = 'binary';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   49)     const ENCODING_QUOTED_PRINTABLE = 'quoted-printable';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   50) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   51)     const ENCRYPTION_STARTTLS = 'tls';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   52)     const ENCRYPTION_SMTPS = 'ssl';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   53) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   54)     const ICAL_METHOD_REQUEST = 'REQUEST';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   55)     const ICAL_METHOD_PUBLISH = 'PUBLISH';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   56)     const ICAL_METHOD_REPLY = 'REPLY';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   57)     const ICAL_METHOD_ADD = 'ADD';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   58)     const ICAL_METHOD_CANCEL = 'CANCEL';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   59)     const ICAL_METHOD_REFRESH = 'REFRESH';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   60)     const ICAL_METHOD_COUNTER = 'COUNTER';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   61)     const ICAL_METHOD_DECLINECOUNTER = 'DECLINECOUNTER';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   62) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   63)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   64)      * Email priority.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   65)      * Options: null (default), 1 = High, 3 = Normal, 5 = low.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   66)      * When null, the header is not set at all.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   67)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   68)      * @var int|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   69)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   70)     public $Priority;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   71) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   72)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   73)      * The character set of the message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   74)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   75)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   76)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   77)     public $CharSet = self::CHARSET_ISO88591;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   78) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   79)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   80)      * The MIME Content-type of the message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   81)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   82)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   83)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   84)     public $ContentType = self::CONTENT_TYPE_PLAINTEXT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   85) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   86)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   87)      * The message encoding.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   88)      * Options: "8bit", "7bit", "binary", "base64", and "quoted-printable".
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   89)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   90)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   91)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   92)     public $Encoding = self::ENCODING_8BIT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   93) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   94)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   95)      * Holds the most recent mailer error message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   96)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   97)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   98)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   99)     public $ErrorInfo = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  100) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  101)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  102)      * The From email address for the message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  103)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  104)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  105)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  106)     public $From = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  107) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  108)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  109)      * The From name of the message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  110)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  111)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  112)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  113)     public $FromName = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  114) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  115)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  116)      * The envelope sender of the message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  117)      * This will usually be turned into a Return-Path header by the receiver,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  118)      * and is the address that bounces will be sent to.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  119)      * If not empty, will be passed via `-f` to sendmail or as the 'MAIL FROM' value over SMTP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  120)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  121)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  122)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  123)     public $Sender = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  124) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  125)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  126)      * The Subject of the message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  127)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  128)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  129)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  130)     public $Subject = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  131) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  132)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  133)      * An HTML or plain text message body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  134)      * If HTML then call isHTML(true).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  135)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  136)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  137)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  138)     public $Body = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  139) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  140)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  141)      * The plain-text message body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  142)      * This body can be read by mail clients that do not have HTML email
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  143)      * capability such as mutt & Eudora.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  144)      * Clients that can read HTML will view the normal Body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  145)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  146)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  147)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  148)     public $AltBody = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  149) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  150)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  151)      * An iCal message part body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  152)      * Only supported in simple alt or alt_inline message types
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  153)      * To generate iCal event structures, use classes like EasyPeasyICS or iCalcreator.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  154)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  155)      * @see https://kigkonsult.se/iCalcreator/
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  156)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  157)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  158)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  159)     public $Ical = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  160) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  161)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  162)      * Value-array of "method" in Contenttype header "text/calendar"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  163)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  164)      * @var string[]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  165)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  166)     protected static $IcalMethods = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  167)         self::ICAL_METHOD_REQUEST,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  168)         self::ICAL_METHOD_PUBLISH,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  169)         self::ICAL_METHOD_REPLY,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  170)         self::ICAL_METHOD_ADD,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  171)         self::ICAL_METHOD_CANCEL,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  172)         self::ICAL_METHOD_REFRESH,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  173)         self::ICAL_METHOD_COUNTER,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  174)         self::ICAL_METHOD_DECLINECOUNTER,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  175)     ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  176) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  177)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  178)      * The complete compiled MIME message body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  179)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  180)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  181)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  182)     protected $MIMEBody = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  183) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  184)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  185)      * The complete compiled MIME message headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  186)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  187)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  188)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  189)     protected $MIMEHeader = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  190) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  191)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  192)      * Extra headers that createHeader() doesn't fold in.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  193)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  194)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  195)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  196)     protected $mailHeader = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  197) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  198)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  199)      * Word-wrap the message body to this number of chars.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  200)      * Set to 0 to not wrap. A useful value here is 78, for RFC2822 section 2.1.1 compliance.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  201)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  202)      * @see static::STD_LINE_LENGTH
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  203)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  204)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  205)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  206)     public $WordWrap = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  207) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  208)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  209)      * Which method to use to send mail.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  210)      * Options: "mail", "sendmail", or "smtp".
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  211)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  212)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  213)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  214)     public $Mailer = 'mail';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  215) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  216)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  217)      * The path to the sendmail program.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  218)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  219)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  220)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  221)     public $Sendmail = '/usr/sbin/sendmail';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  222) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  223)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  224)      * Whether mail() uses a fully sendmail-compatible MTA.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  225)      * One which supports sendmail's "-oi -f" options.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  226)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  227)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  228)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  229)     public $UseSendmailOptions = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  230) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  231)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  232)      * The email address that a reading confirmation should be sent to, also known as read receipt.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  233)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  234)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  235)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  236)     public $ConfirmReadingTo = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  237) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  238)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  239)      * The hostname to use in the Message-ID header and as default HELO string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  240)      * If empty, PHPMailer attempts to find one with, in order,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  241)      * $_SERVER['SERVER_NAME'], gethostname(), php_uname('n'), or the value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  242)      * 'localhost.localdomain'.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  243)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  244)      * @see PHPMailer::$Helo
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  245)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  246)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  247)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  248)     public $Hostname = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  249) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  250)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  251)      * An ID to be used in the Message-ID header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  252)      * If empty, a unique id will be generated.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  253)      * You can set your own, but it must be in the format "<id@domain>",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  254)      * as defined in RFC5322 section 3.6.4 or it will be ignored.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  255)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  256)      * @see https://tools.ietf.org/html/rfc5322#section-3.6.4
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  257)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  258)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  259)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  260)     public $MessageID = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  261) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  262)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  263)      * The message Date to be used in the Date header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  264)      * If empty, the current date will be added.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  265)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  266)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  267)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  268)     public $MessageDate = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  269) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  270)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  271)      * SMTP hosts.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  272)      * Either a single hostname or multiple semicolon-delimited hostnames.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  273)      * You can also specify a different port
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  274)      * for each host by using this format: [hostname:port]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  275)      * (e.g. "smtp1.example.com:25;smtp2.example.com").
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  276)      * You can also specify encryption type, for example:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  277)      * (e.g. "tls://smtp1.example.com:587;ssl://smtp2.example.com:465").
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  278)      * Hosts will be tried in order.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  279)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  280)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  281)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  282)     public $Host = 'localhost';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  283) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  284)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  285)      * The default SMTP server port.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  286)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  287)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  288)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  289)     public $Port = 25;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  290) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  291)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  292)      * The SMTP HELO/EHLO name used for the SMTP connection.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  293)      * Default is $Hostname. If $Hostname is empty, PHPMailer attempts to find
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  294)      * one with the same method described above for $Hostname.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  295)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  296)      * @see PHPMailer::$Hostname
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  297)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  298)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  299)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  300)     public $Helo = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  301) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  302)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  303)      * What kind of encryption to use on the SMTP connection.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  304)      * Options: '', static::ENCRYPTION_STARTTLS, or static::ENCRYPTION_SMTPS.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  305)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  306)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  307)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  308)     public $SMTPSecure = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  309) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  310)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  311)      * Whether to enable TLS encryption automatically if a server supports it,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  312)      * even if `SMTPSecure` is not set to 'tls'.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  313)      * Be aware that in PHP >= 5.6 this requires that the server's certificates are valid.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  314)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  315)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  316)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  317)     public $SMTPAutoTLS = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  318) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  319)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  320)      * Whether to use SMTP authentication.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  321)      * Uses the Username and Password properties.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  322)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  323)      * @see PHPMailer::$Username
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  324)      * @see PHPMailer::$Password
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  325)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  326)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  327)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  328)     public $SMTPAuth = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  329) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  330)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  331)      * Options array passed to stream_context_create when connecting via SMTP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  332)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  333)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  334)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  335)     public $SMTPOptions = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  336) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  337)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  338)      * SMTP username.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  339)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  340)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  341)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  342)     public $Username = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  343) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  344)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  345)      * SMTP password.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  346)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  347)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  348)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  349)     public $Password = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  350) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  351)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  352)      * SMTP authentication type. Options are CRAM-MD5, LOGIN, PLAIN, XOAUTH2.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  353)      * If not specified, the first one from that list that the server supports will be selected.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  354)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  355)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  356)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  357)     public $AuthType = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  358) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  359)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  360)      * SMTP SMTPXClient command attributes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  361)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  362)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  363)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  364)     protected $SMTPXClient = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  365) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  366)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  367)      * An implementation of the PHPMailer OAuthTokenProvider interface.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  368)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  369)      * @var OAuthTokenProvider
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  370)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  371)     protected $oauth;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  372) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  373)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  374)      * The SMTP server timeout in seconds.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  375)      * Default of 5 minutes (300sec) is from RFC2821 section 4.5.3.2.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  376)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  377)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  378)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  379)     public $Timeout = 300;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  380) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  381)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  382)      * Comma separated list of DSN notifications
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  383)      * 'NEVER' under no circumstances a DSN must be returned to the sender.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  384)      *         If you use NEVER all other notifications will be ignored.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  385)      * 'SUCCESS' will notify you when your mail has arrived at its destination.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  386)      * 'FAILURE' will arrive if an error occurred during delivery.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  387)      * 'DELAY'   will notify you if there is an unusual delay in delivery, but the actual
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  388)      *           delivery's outcome (success or failure) is not yet decided.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  389)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  390)      * @see https://tools.ietf.org/html/rfc3461 See section 4.1 for more information about NOTIFY
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  391)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  392)     public $dsn = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  393) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  394)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  395)      * SMTP class debug output mode.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  396)      * Debug output level.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  397)      * Options:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  398)      * @see SMTP::DEBUG_OFF: No output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  399)      * @see SMTP::DEBUG_CLIENT: Client messages
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  400)      * @see SMTP::DEBUG_SERVER: Client and server messages
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  401)      * @see SMTP::DEBUG_CONNECTION: As SERVER plus connection status
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  402)      * @see SMTP::DEBUG_LOWLEVEL: Noisy, low-level data output, rarely needed
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  403)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  404)      * @see SMTP::$do_debug
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  405)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  406)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  407)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  408)     public $SMTPDebug = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  409) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  410)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  411)      * How to handle debug output.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  412)      * Options:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  413)      * * `echo` Output plain-text as-is, appropriate for CLI
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  414)      * * `html` Output escaped, line breaks converted to `<br>`, appropriate for browser output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  415)      * * `error_log` Output to error log as configured in php.ini
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  416)      * By default PHPMailer will use `echo` if run from a `cli` or `cli-server` SAPI, `html` otherwise.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  417)      * Alternatively, you can provide a callable expecting two params: a message string and the debug level:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  418)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  419)      * ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  420)      * $mail->Debugoutput = function($str, $level) {echo "debug level $level; message: $str";};
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  421)      * ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  422)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  423)      * Alternatively, you can pass in an instance of a PSR-3 compatible logger, though only `debug`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  424)      * level output is used:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  425)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  426)      * ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  427)      * $mail->Debugoutput = new myPsr3Logger;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  428)      * ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  429)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  430)      * @see SMTP::$Debugoutput
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  431)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  432)      * @var string|callable|\Psr\Log\LoggerInterface
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  433)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  434)     public $Debugoutput = 'echo';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  435) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  436)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  437)      * Whether to keep the SMTP connection open after each message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  438)      * If this is set to true then the connection will remain open after a send,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  439)      * and closing the connection will require an explicit call to smtpClose().
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  440)      * It's a good idea to use this if you are sending multiple messages as it reduces overhead.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  441)      * See the mailing list example for how to use it.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  442)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  443)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  444)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  445)     public $SMTPKeepAlive = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  446) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  447)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  448)      * Whether to split multiple to addresses into multiple messages
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  449)      * or send them all in one message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  450)      * Only supported in `mail` and `sendmail` transports, not in SMTP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  451)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  452)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  453)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  454)      * @deprecated 6.0.0 PHPMailer isn't a mailing list manager!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  455)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  456)     public $SingleTo = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  457) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  458)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  459)      * Storage for addresses when SingleTo is enabled.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  460)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  461)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  462)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  463)     protected $SingleToArray = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  464) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  465)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  466)      * Whether to generate VERP addresses on send.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  467)      * Only applicable when sending via SMTP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  468)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  469)      * @see https://en.wikipedia.org/wiki/Variable_envelope_return_path
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  470)      * @see https://www.postfix.org/VERP_README.html Postfix VERP info
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  471)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  472)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  473)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  474)     public $do_verp = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  475) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  476)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  477)      * Whether to allow sending messages with an empty body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  478)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  479)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  480)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  481)     public $AllowEmpty = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  482) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  483)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  484)      * DKIM selector.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  485)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  486)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  487)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  488)     public $DKIM_selector = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  489) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  490)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  491)      * DKIM Identity.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  492)      * Usually the email address used as the source of the email.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  493)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  494)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  495)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  496)     public $DKIM_identity = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  497) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  498)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  499)      * DKIM passphrase.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  500)      * Used if your key is encrypted.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  501)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  502)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  503)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  504)     public $DKIM_passphrase = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  505) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  506)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  507)      * DKIM signing domain name.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  508)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  509)      * @example 'example.com'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  510)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  511)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  512)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  513)     public $DKIM_domain = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  514) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  515)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  516)      * DKIM Copy header field values for diagnostic use.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  517)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  518)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  519)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  520)     public $DKIM_copyHeaderFields = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  521) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  522)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  523)      * DKIM Extra signing headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  524)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  525)      * @example ['List-Unsubscribe', 'List-Help']
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  526)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  527)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  528)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  529)     public $DKIM_extraHeaders = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  530) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  531)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  532)      * DKIM private key file path.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  533)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  534)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  535)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  536)     public $DKIM_private = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  537) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  538)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  539)      * DKIM private key string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  540)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  541)      * If set, takes precedence over `$DKIM_private`.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  542)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  543)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  544)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  545)     public $DKIM_private_string = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  546) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  547)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  548)      * Callback Action function name.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  549)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  550)      * The function that handles the result of the send email action.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  551)      * It is called out by send() for each email sent.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  552)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  553)      * Value can be any php callable: https://www.php.net/is_callable
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  554)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  555)      * Parameters:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  556)      *   bool $result           result of the send action
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  557)      *   array   $to            email addresses of the recipients
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  558)      *   array   $cc            cc email addresses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  559)      *   array   $bcc           bcc email addresses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  560)      *   string  $subject       the subject
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  561)      *   string  $body          the email body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  562)      *   string  $from          email address of sender
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  563)      *   string  $extra         extra information of possible use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  564)      *                          "smtp_transaction_id' => last smtp transaction id
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  565)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  566)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  567)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  568)     public $action_function = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  569) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  570)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  571)      * What to put in the X-Mailer header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  572)      * Options: An empty string for PHPMailer default, whitespace/null for none, or a string to use.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  573)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  574)      * @var string|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  575)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  576)     public $XMailer = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  577) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  578)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  579)      * Which validator to use by default when validating email addresses.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  580)      * May be a callable to inject your own validator, but there are several built-in validators.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  581)      * The default validator uses PHP's FILTER_VALIDATE_EMAIL filter_var option.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  582)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  583)      * @see PHPMailer::validateAddress()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  584)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  585)      * @var string|callable
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  586)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  587)     public static $validator = 'php';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  588) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  589)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  590)      * An instance of the SMTP sender class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  591)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  592)      * @var SMTP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  593)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  594)     protected $smtp;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  595) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  596)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  597)      * The array of 'to' names and addresses.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  598)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  599)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  600)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  601)     protected $to = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  602) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  603)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  604)      * The array of 'cc' names and addresses.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  605)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  606)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  607)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  608)     protected $cc = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  609) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  610)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  611)      * The array of 'bcc' names and addresses.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  612)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  613)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  614)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  615)     protected $bcc = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  616) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  617)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  618)      * The array of reply-to names and addresses.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  619)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  620)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  621)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  622)     protected $ReplyTo = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  623) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  624)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  625)      * An array of all kinds of addresses.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  626)      * Includes all of $to, $cc, $bcc.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  627)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  628)      * @see PHPMailer::$to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  629)      * @see PHPMailer::$cc
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  630)      * @see PHPMailer::$bcc
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  631)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  632)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  633)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  634)     protected $all_recipients = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  635) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  636)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  637)      * An array of names and addresses queued for validation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  638)      * In send(), valid and non duplicate entries are moved to $all_recipients
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  639)      * and one of $to, $cc, or $bcc.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  640)      * This array is used only for addresses with IDN.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  641)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  642)      * @see PHPMailer::$to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  643)      * @see PHPMailer::$cc
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  644)      * @see PHPMailer::$bcc
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  645)      * @see PHPMailer::$all_recipients
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  646)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  647)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  648)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  649)     protected $RecipientsQueue = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  650) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  651)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  652)      * An array of reply-to names and addresses queued for validation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  653)      * In send(), valid and non duplicate entries are moved to $ReplyTo.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  654)      * This array is used only for addresses with IDN.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  655)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  656)      * @see PHPMailer::$ReplyTo
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  657)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  658)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  659)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  660)     protected $ReplyToQueue = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  661) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  662)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  663)      * The array of attachments.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  664)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  665)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  666)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  667)     protected $attachment = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  668) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  669)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  670)      * The array of custom headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  671)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  672)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  673)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  674)     protected $CustomHeader = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  675) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  676)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  677)      * The most recent Message-ID (including angular brackets).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  678)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  679)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  680)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  681)     protected $lastMessageID = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  682) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  683)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  684)      * The message's MIME type.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  685)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  686)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  687)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  688)     protected $message_type = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  689) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  690)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  691)      * The array of MIME boundary strings.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  692)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  693)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  694)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  695)     protected $boundary = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  696) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  697)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  698)      * The array of available text strings for the current language.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  699)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  700)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  701)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  702)     protected $language = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  703) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  704)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  705)      * The number of errors encountered.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  706)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  707)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  708)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  709)     protected $error_count = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  710) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  711)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  712)      * The S/MIME certificate file path.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  713)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  714)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  715)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  716)     protected $sign_cert_file = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  717) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  718)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  719)      * The S/MIME key file path.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  720)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  721)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  722)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  723)     protected $sign_key_file = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  724) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  725)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  726)      * The optional S/MIME extra certificates ("CA Chain") file path.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  727)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  728)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  729)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  730)     protected $sign_extracerts_file = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  731) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  732)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  733)      * The S/MIME password for the key.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  734)      * Used only if the key is encrypted.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  735)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  736)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  737)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  738)     protected $sign_key_pass = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  739) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  740)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  741)      * Whether to throw exceptions for errors.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  742)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  743)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  744)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  745)     protected $exceptions = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  746) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  747)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  748)      * Unique ID used for message ID and boundaries.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  749)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  750)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  751)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  752)     protected $uniqueid = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  753) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  754)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  755)      * The PHPMailer Version number.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  756)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  757)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  758)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  759)     const VERSION = '6.9.2';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  760) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  761)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  762)      * Error severity: message only, continue processing.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  763)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  764)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  765)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  766)     const STOP_MESSAGE = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  767) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  768)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  769)      * Error severity: message, likely ok to continue processing.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  770)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  771)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  772)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  773)     const STOP_CONTINUE = 1;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  774) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  775)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  776)      * Error severity: message, plus full stop, critical error reached.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  777)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  778)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  779)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  780)     const STOP_CRITICAL = 2;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  781) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  782)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  783)      * The SMTP standard CRLF line break.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  784)      * If you want to change line break format, change static::$LE, not this.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  785)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  786)     const CRLF = "\r\n";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  787) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  788)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  789)      * "Folding White Space" a white space string used for line folding.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  790)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  791)     const FWS = ' ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  792) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  793)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  794)      * SMTP RFC standard line ending; Carriage Return, Line Feed.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  795)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  796)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  797)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  798)     protected static $LE = self::CRLF;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  799) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  800)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  801)      * The maximum line length supported by mail().
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  802)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  803)      * Background: mail() will sometimes corrupt messages
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  804)      * with headers longer than 65 chars, see #818.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  805)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  806)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  807)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  808)     const MAIL_MAX_LINE_LENGTH = 63;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  809) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  810)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  811)      * The maximum line length allowed by RFC 2822 section 2.1.1.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  812)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  813)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  814)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  815)     const MAX_LINE_LENGTH = 998;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  816) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  817)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  818)      * The lower maximum line length allowed by RFC 2822 section 2.1.1.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  819)      * This length does NOT include the line break
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  820)      * 76 means that lines will be 77 or 78 chars depending on whether
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  821)      * the line break format is LF or CRLF; both are valid.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  822)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  823)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  824)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  825)     const STD_LINE_LENGTH = 76;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  826) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  827)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  828)      * Constructor.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  829)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  830)      * @param bool $exceptions Should we throw external exceptions?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  831)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  832)     public function __construct($exceptions = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  833)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  834)         if (null !== $exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  835)             $this->exceptions = (bool) $exceptions;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  836)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  837)         //Pick an appropriate debug output format automatically
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  838)         $this->Debugoutput = (strpos(PHP_SAPI, 'cli') !== false ? 'echo' : 'html');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  839)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  840) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  841)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  842)      * Destructor.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  843)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  844)     public function __destruct()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  845)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  846)         //Close any open SMTP connection nicely
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  847)         $this->smtpClose();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  848)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  849) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  850)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  851)      * Call mail() in a safe_mode-aware fashion.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  852)      * Also, unless sendmail_path points to sendmail (or something that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  853)      * claims to be sendmail), don't pass params (not a perfect fix,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  854)      * but it will do).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  855)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  856)      * @param string      $to      To
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  857)      * @param string      $subject Subject
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  858)      * @param string      $body    Message Body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  859)      * @param string      $header  Additional Header(s)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  860)      * @param string|null $params  Params
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  861)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  862)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  863)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  864)     private function mailPassthru($to, $subject, $body, $header, $params)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  865)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  866)         //Check overloading of mail function to avoid double-encoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  867)         if ((int)ini_get('mbstring.func_overload') & 1) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  868)             $subject = $this->secureHeader($subject);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  869)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  870)             $subject = $this->encodeHeader($this->secureHeader($subject));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  871)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  872)         //Calling mail() with null params breaks
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  873)         $this->edebug('Sending with mail()');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  874)         $this->edebug('Sendmail path: ' . ini_get('sendmail_path'));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  875)         $this->edebug("Envelope sender: {$this->Sender}");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  876)         $this->edebug("To: {$to}");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  877)         $this->edebug("Subject: {$subject}");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  878)         $this->edebug("Headers: {$header}");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  879)         if (!$this->UseSendmailOptions || null === $params) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  880)             $result = @mail($to, $subject, $body, $header);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  881)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  882)             $this->edebug("Additional params: {$params}");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  883)             $result = @mail($to, $subject, $body, $header, $params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  884)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  885)         $this->edebug('Result: ' . ($result ? 'true' : 'false'));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  886)         return $result;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  887)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  888) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  889)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  890)      * Output debugging info via a user-defined method.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  891)      * Only generates output if debug output is enabled.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  892)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  893)      * @see PHPMailer::$Debugoutput
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  894)      * @see PHPMailer::$SMTPDebug
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  895)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  896)      * @param string $str
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  897)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  898)     protected function edebug($str)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  899)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  900)         if ($this->SMTPDebug <= 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  901)             return;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  902)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  903)         //Is this a PSR-3 logger?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  904)         if ($this->Debugoutput instanceof \Psr\Log\LoggerInterface) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  905)             $this->Debugoutput->debug(rtrim($str, "\r\n"));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  906) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  907)             return;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  908)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  909)         //Avoid clash with built-in function names
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  910)         if (is_callable($this->Debugoutput) && !in_array($this->Debugoutput, ['error_log', 'html', 'echo'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  911)             call_user_func($this->Debugoutput, $str, $this->SMTPDebug);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  912) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  913)             return;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  914)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  915)         switch ($this->Debugoutput) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  916)             case 'error_log':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  917)                 //Don't output, just log
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  918)                 /** @noinspection ForgottenDebugOutputInspection */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  919)                 error_log($str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  920)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  921)             case 'html':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  922)                 //Cleans up output a bit for a better looking, HTML-safe output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  923)                 echo htmlentities(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  924)                     preg_replace('/[\r\n]+/', '', $str),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  925)                     ENT_QUOTES,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  926)                     'UTF-8'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  927)                 ), "<br>\n";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  928)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  929)             case 'echo':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  930)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  931)                 //Normalize line breaks
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  932)                 $str = preg_replace('/\r\n|\r/m', "\n", $str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  933)                 echo gmdate('Y-m-d H:i:s'),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  934)                 "\t",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  935)                     //Trim trailing space
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  936)                 trim(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  937)                     //Indent for readability, except for trailing break
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  938)                     str_replace(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  939)                         "\n",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  940)                         "\n                   \t                  ",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  941)                         trim($str)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  942)                     )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  943)                 ),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  944)                 "\n";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  945)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  946)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  947) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  948)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  949)      * Sets message type to HTML or plain.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  950)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  951)      * @param bool $isHtml True for HTML mode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  952)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  953)     public function isHTML($isHtml = true)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  954)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  955)         if ($isHtml) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  956)             $this->ContentType = static::CONTENT_TYPE_TEXT_HTML;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  957)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  958)             $this->ContentType = static::CONTENT_TYPE_PLAINTEXT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  959)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  960)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  961) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  962)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  963)      * Send messages using SMTP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  964)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  965)     public function isSMTP()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  966)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  967)         $this->Mailer = 'smtp';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  968)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  969) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  970)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  971)      * Send messages using PHP's mail() function.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  972)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  973)     public function isMail()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  974)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  975)         $this->Mailer = 'mail';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  976)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  977) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  978)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  979)      * Send messages using $Sendmail.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  980)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  981)     public function isSendmail()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  982)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  983)         $ini_sendmail_path = ini_get('sendmail_path');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  984) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  985)         if (false === stripos($ini_sendmail_path, 'sendmail')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  986)             $this->Sendmail = '/usr/sbin/sendmail';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  987)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  988)             $this->Sendmail = $ini_sendmail_path;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  989)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  990)         $this->Mailer = 'sendmail';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  991)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  992) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  993)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  994)      * Send messages using qmail.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  995)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  996)     public function isQmail()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  997)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  998)         $ini_sendmail_path = ini_get('sendmail_path');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  999) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1000)         if (false === stripos($ini_sendmail_path, 'qmail')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1001)             $this->Sendmail = '/var/qmail/bin/qmail-inject';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1002)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1003)             $this->Sendmail = $ini_sendmail_path;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1004)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1005)         $this->Mailer = 'qmail';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1006)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1007) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1008)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1009)      * Add a "To" address.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1010)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1011)      * @param string $address The email address to send to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1012)      * @param string $name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1013)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1014)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1015)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1016)      * @return bool true on success, false if address already used or invalid in some way
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1017)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1018)     public function addAddress($address, $name = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1019)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1020)         return $this->addOrEnqueueAnAddress('to', $address, $name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1021)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1022) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1023)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1024)      * Add a "CC" address.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1025)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1026)      * @param string $address The email address to send to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1027)      * @param string $name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1028)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1029)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1030)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1031)      * @return bool true on success, false if address already used or invalid in some way
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1032)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1033)     public function addCC($address, $name = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1034)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1035)         return $this->addOrEnqueueAnAddress('cc', $address, $name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1036)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1037) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1038)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1039)      * Add a "BCC" address.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1040)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1041)      * @param string $address The email address to send to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1042)      * @param string $name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1043)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1044)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1045)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1046)      * @return bool true on success, false if address already used or invalid in some way
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1047)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1048)     public function addBCC($address, $name = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1049)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1050)         return $this->addOrEnqueueAnAddress('bcc', $address, $name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1051)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1052) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1053)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1054)      * Add a "Reply-To" address.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1055)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1056)      * @param string $address The email address to reply to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1057)      * @param string $name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1058)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1059)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1060)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1061)      * @return bool true on success, false if address already used or invalid in some way
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1062)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1063)     public function addReplyTo($address, $name = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1064)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1065)         return $this->addOrEnqueueAnAddress('Reply-To', $address, $name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1066)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1067) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1068)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1069)      * Add an address to one of the recipient arrays or to the ReplyTo array. Because PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1070)      * can't validate addresses with an IDN without knowing the PHPMailer::$CharSet (that can still
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1071)      * be modified after calling this function), addition of such addresses is delayed until send().
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1072)      * Addresses that have been added already return false, but do not throw exceptions.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1073)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1074)      * @param string $kind    One of 'to', 'cc', 'bcc', or 'Reply-To'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1075)      * @param string $address The email address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1076)      * @param string $name    An optional username associated with the address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1077)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1078)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1079)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1080)      * @return bool true on success, false if address already used or invalid in some way
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1081)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1082)     protected function addOrEnqueueAnAddress($kind, $address, $name)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1083)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1084)         $pos = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1085)         if ($address !== null) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1086)             $address = trim($address);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1087)             $pos = strrpos($address, '@');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1088)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1089)         if (false === $pos) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1090)             //At-sign is missing.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1091)             $error_message = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1092)                 '%s (%s): %s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1093)                 $this->lang('invalid_address'),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1094)                 $kind,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1095)                 $address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1096)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1097)             $this->setError($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1098)             $this->edebug($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1099)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1100)                 throw new Exception($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1101)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1102) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1103)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1104)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1105)         if ($name !== null && is_string($name)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1106)             $name = trim(preg_replace('/[\r\n]+/', '', $name)); //Strip breaks and trim
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1107)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1108)             $name = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1109)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1110)         $params = [$kind, $address, $name];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1111)         //Enqueue addresses with IDN until we know the PHPMailer::$CharSet.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1112)         //Domain is assumed to be whatever is after the last @ symbol in the address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1113)         if (static::idnSupported() && $this->has8bitChars(substr($address, ++$pos))) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1114)             if ('Reply-To' !== $kind) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1115)                 if (!array_key_exists($address, $this->RecipientsQueue)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1116)                     $this->RecipientsQueue[$address] = $params;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1117) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1118)                     return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1119)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1120)             } elseif (!array_key_exists($address, $this->ReplyToQueue)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1121)                 $this->ReplyToQueue[$address] = $params;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1122) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1123)                 return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1124)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1125) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1126)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1127)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1128) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1129)         //Immediately add standard addresses without IDN.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1130)         return call_user_func_array([$this, 'addAnAddress'], $params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1131)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1132) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1133)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1134)      * Set the boundaries to use for delimiting MIME parts.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1135)      * If you override this, ensure you set all 3 boundaries to unique values.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1136)      * The default boundaries include a "=_" sequence which cannot occur in quoted-printable bodies,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1137)      * as suggested by https://www.rfc-editor.org/rfc/rfc2045#section-6.7
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1138)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1139)      * @return void
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1140)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1141)     public function setBoundaries()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1142)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1143)         $this->uniqueid = $this->generateId();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1144)         $this->boundary[1] = 'b1=_' . $this->uniqueid;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1145)         $this->boundary[2] = 'b2=_' . $this->uniqueid;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1146)         $this->boundary[3] = 'b3=_' . $this->uniqueid;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1147)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1148) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1149)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1150)      * Add an address to one of the recipient arrays or to the ReplyTo array.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1151)      * Addresses that have been added already return false, but do not throw exceptions.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1152)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1153)      * @param string $kind    One of 'to', 'cc', 'bcc', or 'ReplyTo'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1154)      * @param string $address The email address to send, resp. to reply to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1155)      * @param string $name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1156)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1157)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1158)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1159)      * @return bool true on success, false if address already used or invalid in some way
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1160)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1161)     protected function addAnAddress($kind, $address, $name = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1162)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1163)         if (!in_array($kind, ['to', 'cc', 'bcc', 'Reply-To'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1164)             $error_message = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1165)                 '%s: %s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1166)                 $this->lang('Invalid recipient kind'),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1167)                 $kind
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1168)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1169)             $this->setError($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1170)             $this->edebug($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1171)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1172)                 throw new Exception($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1173)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1174) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1175)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1176)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1177)         if (!static::validateAddress($address)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1178)             $error_message = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1179)                 '%s (%s): %s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1180)                 $this->lang('invalid_address'),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1181)                 $kind,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1182)                 $address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1183)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1184)             $this->setError($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1185)             $this->edebug($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1186)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1187)                 throw new Exception($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1188)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1189) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1190)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1191)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1192)         if ('Reply-To' !== $kind) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1193)             if (!array_key_exists(strtolower($address), $this->all_recipients)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1194)                 $this->{$kind}[] = [$address, $name];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1195)                 $this->all_recipients[strtolower($address)] = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1196) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1197)                 return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1198)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1199)         } elseif (!array_key_exists(strtolower($address), $this->ReplyTo)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1200)             $this->ReplyTo[strtolower($address)] = [$address, $name];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1201) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1202)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1203)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1204) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1205)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1206)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1207) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1208)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1209)      * Parse and validate a string containing one or more RFC822-style comma-separated email addresses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1210)      * of the form "display name <address>" into an array of name/address pairs.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1211)      * Uses the imap_rfc822_parse_adrlist function if the IMAP extension is available.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1212)      * Note that quotes in the name part are removed.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1213)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1214)      * @see https://www.andrew.cmu.edu/user/agreen1/testing/mrbs/web/Mail/RFC822.php A more careful implementation
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1215)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1216)      * @param string $addrstr The address list string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1217)      * @param bool   $useimap Whether to use the IMAP extension to parse the list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1218)      * @param string $charset The charset to use when decoding the address list string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1219)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1220)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1221)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1222)     public static function parseAddresses($addrstr, $useimap = true, $charset = self::CHARSET_ISO88591)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1223)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1224)         $addresses = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1225)         if ($useimap && function_exists('imap_rfc822_parse_adrlist')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1226)             //Use this built-in parser if it's available
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1227)             $list = imap_rfc822_parse_adrlist($addrstr, '');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1228)             // Clear any potential IMAP errors to get rid of notices being thrown at end of script.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1229)             imap_errors();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1230)             foreach ($list as $address) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1231)                 if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1232)                     '.SYNTAX-ERROR.' !== $address->host &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1233)                     static::validateAddress($address->mailbox . '@' . $address->host)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1234)                 ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1235)                     //Decode the name part if it's present and encoded
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1236)                     if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1237)                         property_exists($address, 'personal') &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1238)                         //Check for a Mbstring constant rather than using extension_loaded, which is sometimes disabled
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1239)                         defined('MB_CASE_UPPER') &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1240)                         preg_match('/^=\?.*\?=$/s', $address->personal)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1241)                     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1242)                         $origCharset = mb_internal_encoding();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1243)                         mb_internal_encoding($charset);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1244)                         //Undo any RFC2047-encoded spaces-as-underscores
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1245)                         $address->personal = str_replace('_', '=20', $address->personal);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1246)                         //Decode the name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1247)                         $address->personal = mb_decode_mimeheader($address->personal);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1248)                         mb_internal_encoding($origCharset);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1249)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1250) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1251)                     $addresses[] = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1252)                         'name' => (property_exists($address, 'personal') ? $address->personal : ''),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1253)                         'address' => $address->mailbox . '@' . $address->host,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1254)                     ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1255)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1256)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1257)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1258)             //Use this simpler parser
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1259)             $list = explode(',', $addrstr);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1260)             foreach ($list as $address) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1261)                 $address = trim($address);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1262)                 //Is there a separate name part?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1263)                 if (strpos($address, '<') === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1264)                     //No separate name, just use the whole thing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1265)                     if (static::validateAddress($address)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1266)                         $addresses[] = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1267)                             'name' => '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1268)                             'address' => $address,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1269)                         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1270)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1271)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1272)                     list($name, $email) = explode('<', $address);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1273)                     $email = trim(str_replace('>', '', $email));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1274)                     $name = trim($name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1275)                     if (static::validateAddress($email)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1276)                         //Check for a Mbstring constant rather than using extension_loaded, which is sometimes disabled
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1277)                         //If this name is encoded, decode it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1278)                         if (defined('MB_CASE_UPPER') && preg_match('/^=\?.*\?=$/s', $name)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1279)                             $origCharset = mb_internal_encoding();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1280)                             mb_internal_encoding($charset);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1281)                             //Undo any RFC2047-encoded spaces-as-underscores
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1282)                             $name = str_replace('_', '=20', $name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1283)                             //Decode the name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1284)                             $name = mb_decode_mimeheader($name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1285)                             mb_internal_encoding($origCharset);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1286)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1287)                         $addresses[] = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1288)                             //Remove any surrounding quotes and spaces from the name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1289)                             'name' => trim($name, '\'" '),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1290)                             'address' => $email,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1291)                         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1292)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1293)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1294)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1295)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1296) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1297)         return $addresses;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1298)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1299) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1300)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1301)      * Set the From and FromName properties.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1302)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1303)      * @param string $address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1304)      * @param string $name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1305)      * @param bool   $auto    Whether to also set the Sender address, defaults to true
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1306)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1307)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1308)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1309)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1310)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1311)     public function setFrom($address, $name = '', $auto = true)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1312)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1313)         $address = trim((string)$address);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1314)         $name = trim(preg_replace('/[\r\n]+/', '', $name)); //Strip breaks and trim
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1315)         //Don't validate now addresses with IDN. Will be done in send().
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1316)         $pos = strrpos($address, '@');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1317)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1318)             (false === $pos)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1319)             || ((!$this->has8bitChars(substr($address, ++$pos)) || !static::idnSupported())
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1320)             && !static::validateAddress($address))
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1321)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1322)             $error_message = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1323)                 '%s (From): %s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1324)                 $this->lang('invalid_address'),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1325)                 $address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1326)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1327)             $this->setError($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1328)             $this->edebug($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1329)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1330)                 throw new Exception($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1331)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1332) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1333)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1334)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1335)         $this->From = $address;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1336)         $this->FromName = $name;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1337)         if ($auto && empty($this->Sender)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1338)             $this->Sender = $address;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1339)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1340) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1341)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1342)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1343) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1344)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1345)      * Return the Message-ID header of the last email.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1346)      * Technically this is the value from the last time the headers were created,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1347)      * but it's also the message ID of the last sent message except in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1348)      * pathological cases.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1349)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1350)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1351)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1352)     public function getLastMessageID()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1353)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1354)         return $this->lastMessageID;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1355)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1356) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1357)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1358)      * Check that a string looks like an email address.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1359)      * Validation patterns supported:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1360)      * * `auto` Pick best pattern automatically;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1361)      * * `pcre8` Use the squiloople.com pattern, requires PCRE > 8.0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1362)      * * `pcre` Use old PCRE implementation;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1363)      * * `php` Use PHP built-in FILTER_VALIDATE_EMAIL;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1364)      * * `html5` Use the pattern given by the HTML5 spec for 'email' type form input elements.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1365)      * * `noregex` Don't use a regex: super fast, really dumb.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1366)      * Alternatively you may pass in a callable to inject your own validator, for example:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1367)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1368)      * ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1369)      * PHPMailer::validateAddress('user@example.com', function($address) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1370)      *     return (strpos($address, '@') !== false);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1371)      * });
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1372)      * ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1373)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1374)      * You can also set the PHPMailer::$validator static to a callable, allowing built-in methods to use your validator.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1375)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1376)      * @param string          $address       The email address to check
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1377)      * @param string|callable $patternselect Which pattern to use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1378)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1379)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1380)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1381)     public static function validateAddress($address, $patternselect = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1382)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1383)         if (null === $patternselect) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1384)             $patternselect = static::$validator;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1385)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1386)         //Don't allow strings as callables, see SECURITY.md and CVE-2021-3603
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1387)         if (is_callable($patternselect) && !is_string($patternselect)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1388)             return call_user_func($patternselect, $address);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1389)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1390)         //Reject line breaks in addresses; it's valid RFC5322, but not RFC5321
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1391)         if (strpos($address, "\n") !== false || strpos($address, "\r") !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1392)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1393)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1394)         switch ($patternselect) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1395)             case 'pcre': //Kept for BC
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1396)             case 'pcre8':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1397)                 /*
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1398)                  * A more complex and more permissive version of the RFC5322 regex on which FILTER_VALIDATE_EMAIL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1399)                  * is based.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1400)                  * In addition to the addresses allowed by filter_var, also permits:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1401)                  *  * dotless domains: `a@b`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1402)                  *  * comments: `1234 @ local(blah) .machine .example`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1403)                  *  * quoted elements: `'"test blah"@example.org'`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1404)                  *  * numeric TLDs: `a@b.123`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1405)                  *  * unbracketed IPv4 literals: `a@192.168.0.1`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1406)                  *  * IPv6 literals: 'first.last@[IPv6:a1::]'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1407)                  * Not all of these will necessarily work for sending!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1408)                  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1409)                  * @copyright 2009-2010 Michael Rushton
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1410)                  * Feel free to use and redistribute this code. But please keep this copyright notice.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1411)                  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1412)                 return (bool) preg_match(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1413)                     '/^(?!(?>(?1)"?(?>\\\[ -~]|[^"])"?(?1)){255,})(?!(?>(?1)"?(?>\\\[ -~]|[^"])"?(?1)){65,}@)' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1414)                     '((?>(?>(?>((?>(?>(?>\x0D\x0A)?[\t ])+|(?>[\t ]*\x0D\x0A)?[\t ]+)?)(\((?>(?2)' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1415)                     '(?>[\x01-\x08\x0B\x0C\x0E-\'*-\[\]-\x7F]|\\\[\x00-\x7F]|(?3)))*(?2)\)))+(?2))|(?2))?)' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1416)                     '([!#-\'*+\/-9=?^-~-]+|"(?>(?2)(?>[\x01-\x08\x0B\x0C\x0E-!#-\[\]-\x7F]|\\\[\x00-\x7F]))*' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1417)                     '(?2)")(?>(?1)\.(?1)(?4))*(?1)@(?!(?1)[a-z0-9-]{64,})(?1)(?>([a-z0-9](?>[a-z0-9-]*[a-z0-9])?)' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1418)                     '(?>(?1)\.(?!(?1)[a-z0-9-]{64,})(?1)(?5)){0,126}|\[(?:(?>IPv6:(?>([a-f0-9]{1,4})(?>:(?6)){7}' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1419)                     '|(?!(?:.*[a-f0-9][:\]]){8,})((?6)(?>:(?6)){0,6})?::(?7)?))|(?>(?>IPv6:(?>(?6)(?>:(?6)){5}:' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1420)                     '|(?!(?:.*[a-f0-9]:){6,})(?8)?::(?>((?6)(?>:(?6)){0,4}):)?))?(25[0-5]|2[0-4][0-9]|1[0-9]{2}' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1421)                     '|[1-9]?[0-9])(?>\.(?9)){3}))\])(?1)$/isD',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1422)                     $address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1423)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1424)             case 'html5':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1425)                 /*
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1426)                  * This is the pattern used in the HTML5 spec for validation of 'email' type form input elements.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1427)                  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1428)                  * @see https://html.spec.whatwg.org/#e-mail-state-(type=email)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1429)                  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1430)                 return (bool) preg_match(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1431)                     '/^[a-zA-Z0-9.!#$%&\'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1432)                     '[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/sD',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1433)                     $address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1434)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1435)             case 'php':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1436)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1437)                 return filter_var($address, FILTER_VALIDATE_EMAIL) !== false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1438)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1439)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1440) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1441)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1442)      * Tells whether IDNs (Internationalized Domain Names) are supported or not. This requires the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1443)      * `intl` and `mbstring` PHP extensions.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1444)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1445)      * @return bool `true` if required functions for IDN support are present
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1446)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1447)     public static function idnSupported()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1448)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1449)         return function_exists('idn_to_ascii') && function_exists('mb_convert_encoding');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1450)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1451) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1452)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1453)      * Converts IDN in given email address to its ASCII form, also known as punycode, if possible.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1454)      * Important: Address must be passed in same encoding as currently set in PHPMailer::$CharSet.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1455)      * This function silently returns unmodified address if:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1456)      * - No conversion is necessary (i.e. domain name is not an IDN, or is already in ASCII form)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1457)      * - Conversion to punycode is impossible (e.g. required PHP functions are not available)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1458)      *   or fails for any reason (e.g. domain contains characters not allowed in an IDN).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1459)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1460)      * @see PHPMailer::$CharSet
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1461)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1462)      * @param string $address The email address to convert
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1463)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1464)      * @return string The encoded address in ASCII form
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1465)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1466)     public function punyencodeAddress($address)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1467)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1468)         //Verify we have required functions, CharSet, and at-sign.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1469)         $pos = strrpos($address, '@');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1470)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1471)             !empty($this->CharSet) &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1472)             false !== $pos &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1473)             static::idnSupported()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1474)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1475)             $domain = substr($address, ++$pos);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1476)             //Verify CharSet string is a valid one, and domain properly encoded in this CharSet.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1477)             if ($this->has8bitChars($domain) && @mb_check_encoding($domain, $this->CharSet)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1478)                 //Convert the domain from whatever charset it's in to UTF-8
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1479)                 $domain = mb_convert_encoding($domain, self::CHARSET_UTF8, $this->CharSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1480)                 //Ignore IDE complaints about this line - method signature changed in PHP 5.4
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1481)                 $errorcode = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1482)                 if (defined('INTL_IDNA_VARIANT_UTS46')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1483)                     //Use the current punycode standard (appeared in PHP 7.2)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1484)                     $punycode = idn_to_ascii(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1485)                         $domain,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1486)                         \IDNA_DEFAULT | \IDNA_USE_STD3_RULES | \IDNA_CHECK_BIDI |
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1487)                             \IDNA_CHECK_CONTEXTJ | \IDNA_NONTRANSITIONAL_TO_ASCII,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1488)                         \INTL_IDNA_VARIANT_UTS46
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1489)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1490)                 } elseif (defined('INTL_IDNA_VARIANT_2003')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1491)                     //Fall back to this old, deprecated/removed encoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1492)                     $punycode = idn_to_ascii($domain, $errorcode, \INTL_IDNA_VARIANT_2003);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1493)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1494)                     //Fall back to a default we don't know about
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1495)                     $punycode = idn_to_ascii($domain, $errorcode);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1496)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1497)                 if (false !== $punycode) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1498)                     return substr($address, 0, $pos) . $punycode;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1499)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1500)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1501)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1502) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1503)         return $address;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1504)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1505) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1506)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1507)      * Create a message and send it.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1508)      * Uses the sending method specified by $Mailer.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1509)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1510)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1511)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1512)      * @return bool false on error - See the ErrorInfo property for details of the error
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1513)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1514)     public function send()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1515)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1516)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1517)             if (!$this->preSend()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1518)                 return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1519)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1520) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1521)             return $this->postSend();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1522)         } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1523)             $this->mailHeader = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1524)             $this->setError($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1525)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1526)                 throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1527)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1528) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1529)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1530)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1531)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1532) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1533)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1534)      * Prepare a message for sending.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1535)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1536)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1537)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1538)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1539)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1540)     public function preSend()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1541)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1542)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1543)             'smtp' === $this->Mailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1544)             || ('mail' === $this->Mailer && (\PHP_VERSION_ID >= 80000 || stripos(PHP_OS, 'WIN') === 0))
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1545)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1546)             //SMTP mandates RFC-compliant line endings
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1547)             //and it's also used with mail() on Windows
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1548)             static::setLE(self::CRLF);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1549)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1550)             //Maintain backward compatibility with legacy Linux command line mailers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1551)             static::setLE(PHP_EOL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1552)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1553)         //Check for buggy PHP versions that add a header with an incorrect line break
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1554)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1555)             'mail' === $this->Mailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1556)             && ((\PHP_VERSION_ID >= 70000 && \PHP_VERSION_ID < 70017)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1557)                 || (\PHP_VERSION_ID >= 70100 && \PHP_VERSION_ID < 70103))
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1558)             && ini_get('mail.add_x_header') === '1'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1559)             && stripos(PHP_OS, 'WIN') === 0
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1560)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1561)             trigger_error($this->lang('buggy_php'), E_USER_WARNING);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1562)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1563) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1564)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1565)             $this->error_count = 0; //Reset errors
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1566)             $this->mailHeader = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1567) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1568)             //Dequeue recipient and Reply-To addresses with IDN
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1569)             foreach (array_merge($this->RecipientsQueue, $this->ReplyToQueue) as $params) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1570)                 $params[1] = $this->punyencodeAddress($params[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1571)                 call_user_func_array([$this, 'addAnAddress'], $params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1572)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1573)             if (count($this->to) + count($this->cc) + count($this->bcc) < 1) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1574)                 throw new Exception($this->lang('provide_address'), self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1575)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1576) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1577)             //Validate From, Sender, and ConfirmReadingTo addresses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1578)             foreach (['From', 'Sender', 'ConfirmReadingTo'] as $address_kind) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1579)                 if ($this->{$address_kind} === null) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1580)                     $this->{$address_kind} = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1581)                     continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1582)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1583)                 $this->{$address_kind} = trim($this->{$address_kind});
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1584)                 if (empty($this->{$address_kind})) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1585)                     continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1586)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1587)                 $this->{$address_kind} = $this->punyencodeAddress($this->{$address_kind});
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1588)                 if (!static::validateAddress($this->{$address_kind})) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1589)                     $error_message = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1590)                         '%s (%s): %s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1591)                         $this->lang('invalid_address'),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1592)                         $address_kind,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1593)                         $this->{$address_kind}
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1594)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1595)                     $this->setError($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1596)                     $this->edebug($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1597)                     if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1598)                         throw new Exception($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1599)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1600) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1601)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1602)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1603)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1604) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1605)             //Set whether the message is multipart/alternative
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1606)             if ($this->alternativeExists()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1607)                 $this->ContentType = static::CONTENT_TYPE_MULTIPART_ALTERNATIVE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1608)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1609) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1610)             $this->setMessageType();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1611)             //Refuse to send an empty message unless we are specifically allowing it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1612)             if (!$this->AllowEmpty && empty($this->Body)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1613)                 throw new Exception($this->lang('empty_message'), self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1614)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1615) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1616)             //Trim subject consistently
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1617)             $this->Subject = trim($this->Subject);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1618)             //Create body before headers in case body makes changes to headers (e.g. altering transfer encoding)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1619)             $this->MIMEHeader = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1620)             $this->MIMEBody = $this->createBody();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1621)             //createBody may have added some headers, so retain them
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1622)             $tempheaders = $this->MIMEHeader;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1623)             $this->MIMEHeader = $this->createHeader();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1624)             $this->MIMEHeader .= $tempheaders;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1625) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1626)             //To capture the complete message when using mail(), create
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1627)             //an extra header list which createHeader() doesn't fold in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1628)             if ('mail' === $this->Mailer) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1629)                 if (count($this->to) > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1630)                     $this->mailHeader .= $this->addrAppend('To', $this->to);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1631)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1632)                     $this->mailHeader .= $this->headerLine('To', 'undisclosed-recipients:;');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1633)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1634)                 $this->mailHeader .= $this->headerLine(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1635)                     'Subject',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1636)                     $this->encodeHeader($this->secureHeader($this->Subject))
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1637)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1638)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1639) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1640)             //Sign with DKIM if enabled
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1641)             if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1642)                 !empty($this->DKIM_domain)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1643)                 && !empty($this->DKIM_selector)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1644)                 && (!empty($this->DKIM_private_string)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1645)                     || (!empty($this->DKIM_private)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1646)                         && static::isPermittedPath($this->DKIM_private)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1647)                         && file_exists($this->DKIM_private)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1648)                     )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1649)                 )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1650)             ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1651)                 $header_dkim = $this->DKIM_Add(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1652)                     $this->MIMEHeader . $this->mailHeader,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1653)                     $this->encodeHeader($this->secureHeader($this->Subject)),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1654)                     $this->MIMEBody
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1655)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1656)                 $this->MIMEHeader = static::stripTrailingWSP($this->MIMEHeader) . static::$LE .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1657)                     static::normalizeBreaks($header_dkim) . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1658)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1659) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1660)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1661)         } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1662)             $this->setError($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1663)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1664)                 throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1665)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1666) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1667)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1668)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1669)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1670) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1671)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1672)      * Actually send a message via the selected mechanism.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1673)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1674)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1675)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1676)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1677)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1678)     public function postSend()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1679)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1680)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1681)             //Choose the mailer and send through it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1682)             switch ($this->Mailer) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1683)                 case 'sendmail':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1684)                 case 'qmail':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1685)                     return $this->sendmailSend($this->MIMEHeader, $this->MIMEBody);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1686)                 case 'smtp':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1687)                     return $this->smtpSend($this->MIMEHeader, $this->MIMEBody);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1688)                 case 'mail':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1689)                     return $this->mailSend($this->MIMEHeader, $this->MIMEBody);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1690)                 default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1691)                     $sendMethod = $this->Mailer . 'Send';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1692)                     if (method_exists($this, $sendMethod)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1693)                         return $this->{$sendMethod}($this->MIMEHeader, $this->MIMEBody);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1694)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1695) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1696)                     return $this->mailSend($this->MIMEHeader, $this->MIMEBody);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1697)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1698)         } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1699)             $this->setError($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1700)             $this->edebug($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1701)             if ($this->Mailer === 'smtp' && $this->SMTPKeepAlive == true && $this->smtp->connected()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1702)                 $this->smtp->reset();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1703)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1704)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1705)                 throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1706)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1707)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1708) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1709)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1710)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1711) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1712)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1713)      * Send mail using the $Sendmail program.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1714)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1715)      * @see PHPMailer::$Sendmail
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1716)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1717)      * @param string $header The message headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1718)      * @param string $body   The message body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1719)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1720)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1721)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1722)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1723)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1724)     protected function sendmailSend($header, $body)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1725)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1726)         if ($this->Mailer === 'qmail') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1727)             $this->edebug('Sending with qmail');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1728)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1729)             $this->edebug('Sending with sendmail');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1730)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1731)         $header = static::stripTrailingWSP($header) . static::$LE . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1732)         //This sets the SMTP envelope sender which gets turned into a return-path header by the receiver
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1733)         //A space after `-f` is optional, but there is a long history of its presence
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1734)         //causing problems, so we don't use one
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1735)         //Exim docs: https://www.exim.org/exim-html-current/doc/html/spec_html/ch-the_exim_command_line.html
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1736)         //Sendmail docs: https://www.sendmail.org/~ca/email/man/sendmail.html
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1737)         //Example problem: https://www.drupal.org/node/1057954
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1738) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1739)         //PHP 5.6 workaround
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1740)         $sendmail_from_value = ini_get('sendmail_from');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1741)         if (empty($this->Sender) && !empty($sendmail_from_value)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1742)             //PHP config has a sender address we can use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1743)             $this->Sender = ini_get('sendmail_from');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1744)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1745)         //CVE-2016-10033, CVE-2016-10045: Don't pass -f if characters will be escaped.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1746)         if (!empty($this->Sender) && static::validateAddress($this->Sender) && self::isShellSafe($this->Sender)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1747)             if ($this->Mailer === 'qmail') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1748)                 $sendmailFmt = '%s -f%s';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1749)             } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1750)                 $sendmailFmt = '%s -oi -f%s -t';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1751)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1752)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1753)             //allow sendmail to choose a default envelope sender. It may
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1754)             //seem preferable to force it to use the From header as with
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1755)             //SMTP, but that introduces new problems (see
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1756)             //<https://github.com/PHPMailer/PHPMailer/issues/2298>), and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1757)             //it has historically worked this way.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1758)             $sendmailFmt = '%s -oi -t';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1759)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1760) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1761)         $sendmail = sprintf($sendmailFmt, escapeshellcmd($this->Sendmail), $this->Sender);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1762)         $this->edebug('Sendmail path: ' . $this->Sendmail);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1763)         $this->edebug('Sendmail command: ' . $sendmail);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1764)         $this->edebug('Envelope sender: ' . $this->Sender);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1765)         $this->edebug("Headers: {$header}");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1766) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1767)         if ($this->SingleTo) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1768)             foreach ($this->SingleToArray as $toAddr) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1769)                 $mail = @popen($sendmail, 'w');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1770)                 if (!$mail) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1771)                     throw new Exception($this->lang('execute') . $this->Sendmail, self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1772)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1773)                 $this->edebug("To: {$toAddr}");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1774)                 fwrite($mail, 'To: ' . $toAddr . "\n");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1775)                 fwrite($mail, $header);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1776)                 fwrite($mail, $body);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1777)                 $result = pclose($mail);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1778)                 $addrinfo = static::parseAddresses($toAddr, true, $this->CharSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1779)                 $this->doCallback(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1780)                     ($result === 0),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1781)                     [[$addrinfo['address'], $addrinfo['name']]],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1782)                     $this->cc,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1783)                     $this->bcc,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1784)                     $this->Subject,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1785)                     $body,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1786)                     $this->From,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1787)                     []
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1788)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1789)                 $this->edebug("Result: " . ($result === 0 ? 'true' : 'false'));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1790)                 if (0 !== $result) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1791)                     throw new Exception($this->lang('execute') . $this->Sendmail, self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1792)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1793)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1794)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1795)             $mail = @popen($sendmail, 'w');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1796)             if (!$mail) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1797)                 throw new Exception($this->lang('execute') . $this->Sendmail, self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1798)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1799)             fwrite($mail, $header);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1800)             fwrite($mail, $body);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1801)             $result = pclose($mail);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1802)             $this->doCallback(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1803)                 ($result === 0),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1804)                 $this->to,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1805)                 $this->cc,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1806)                 $this->bcc,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1807)                 $this->Subject,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1808)                 $body,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1809)                 $this->From,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1810)                 []
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1811)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1812)             $this->edebug("Result: " . ($result === 0 ? 'true' : 'false'));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1813)             if (0 !== $result) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1814)                 throw new Exception($this->lang('execute') . $this->Sendmail, self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1815)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1816)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1817) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1818)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1819)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1820) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1821)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1822)      * Fix CVE-2016-10033 and CVE-2016-10045 by disallowing potentially unsafe shell characters.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1823)      * Note that escapeshellarg and escapeshellcmd are inadequate for our purposes, especially on Windows.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1824)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1825)      * @see https://github.com/PHPMailer/PHPMailer/issues/924 CVE-2016-10045 bug report
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1826)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1827)      * @param string $string The string to be validated
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1828)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1829)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1830)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1831)     protected static function isShellSafe($string)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1832)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1833)         //It's not possible to use shell commands safely (which includes the mail() function) without escapeshellarg,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1834)         //but some hosting providers disable it, creating a security problem that we don't want to have to deal with,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1835)         //so we don't.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1836)         if (!function_exists('escapeshellarg') || !function_exists('escapeshellcmd')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1837)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1838)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1839) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1840)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1841)             escapeshellcmd($string) !== $string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1842)             || !in_array(escapeshellarg($string), ["'$string'", "\"$string\""])
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1843)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1844)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1845)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1846) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1847)         $length = strlen($string);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1848) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1849)         for ($i = 0; $i < $length; ++$i) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1850)             $c = $string[$i];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1851) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1852)             //All other characters have a special meaning in at least one common shell, including = and +.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1853)             //Full stop (.) has a special meaning in cmd.exe, but its impact should be negligible here.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1854)             //Note that this does permit non-Latin alphanumeric characters based on the current locale.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1855)             if (!ctype_alnum($c) && strpos('@_-.', $c) === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1856)                 return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1857)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1858)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1859) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1860)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1861)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1862) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1863)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1864)      * Check whether a file path is of a permitted type.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1865)      * Used to reject URLs and phar files from functions that access local file paths,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1866)      * such as addAttachment.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1867)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1868)      * @param string $path A relative or absolute path to a file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1869)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1870)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1871)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1872)     protected static function isPermittedPath($path)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1873)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1874)         //Matches scheme definition from https://tools.ietf.org/html/rfc3986#section-3.1
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1875)         return !preg_match('#^[a-z][a-z\d+.-]*://#i', $path);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1876)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1877) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1878)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1879)      * Check whether a file path is safe, accessible, and readable.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1880)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1881)      * @param string $path A relative or absolute path to a file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1882)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1883)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1884)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1885)     protected static function fileIsAccessible($path)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1886)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1887)         if (!static::isPermittedPath($path)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1888)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1889)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1890)         $readable = is_file($path);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1891)         //If not a UNC path (expected to start with \\), check read permission, see #2069
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1892)         if (strpos($path, '\\\\') !== 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1893)             $readable = $readable && is_readable($path);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1894)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1895)         return  $readable;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1896)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1897) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1898)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1899)      * Send mail using the PHP mail() function.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1900)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1901)      * @see https://www.php.net/manual/en/book.mail.php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1902)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1903)      * @param string $header The message headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1904)      * @param string $body   The message body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1905)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1906)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1907)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1908)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1909)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1910)     protected function mailSend($header, $body)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1911)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1912)         $header = static::stripTrailingWSP($header) . static::$LE . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1913) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1914)         $toArr = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1915)         foreach ($this->to as $toaddr) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1916)             $toArr[] = $this->addrFormat($toaddr);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1917)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1918)         $to = trim(implode(', ', $toArr));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1919) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1920)         //If there are no To-addresses (e.g. when sending only to BCC-addresses)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1921)         //the following should be added to get a correct DKIM-signature.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1922)         //Compare with $this->preSend()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1923)         if ($to === '') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1924)             $to = 'undisclosed-recipients:;';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1925)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1926) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1927)         $params = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1928)         //This sets the SMTP envelope sender which gets turned into a return-path header by the receiver
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1929)         //A space after `-f` is optional, but there is a long history of its presence
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1930)         //causing problems, so we don't use one
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1931)         //Exim docs: https://www.exim.org/exim-html-current/doc/html/spec_html/ch-the_exim_command_line.html
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1932)         //Sendmail docs: https://www.sendmail.org/~ca/email/man/sendmail.html
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1933)         //Example problem: https://www.drupal.org/node/1057954
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1934)         //CVE-2016-10033, CVE-2016-10045: Don't pass -f if characters will be escaped.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1935) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1936)         //PHP 5.6 workaround
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1937)         $sendmail_from_value = ini_get('sendmail_from');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1938)         if (empty($this->Sender) && !empty($sendmail_from_value)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1939)             //PHP config has a sender address we can use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1940)             $this->Sender = ini_get('sendmail_from');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1941)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1942)         if (!empty($this->Sender) && static::validateAddress($this->Sender)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1943)             if (self::isShellSafe($this->Sender)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1944)                 $params = sprintf('-f%s', $this->Sender);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1945)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1946)             $old_from = ini_get('sendmail_from');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1947)             ini_set('sendmail_from', $this->Sender);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1948)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1949)         $result = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1950)         if ($this->SingleTo && count($toArr) > 1) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1951)             foreach ($toArr as $toAddr) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1952)                 $result = $this->mailPassthru($toAddr, $this->Subject, $body, $header, $params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1953)                 $addrinfo = static::parseAddresses($toAddr, true, $this->CharSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1954)                 $this->doCallback(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1955)                     $result,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1956)                     [[$addrinfo['address'], $addrinfo['name']]],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1957)                     $this->cc,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1958)                     $this->bcc,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1959)                     $this->Subject,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1960)                     $body,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1961)                     $this->From,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1962)                     []
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1963)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1964)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1965)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1966)             $result = $this->mailPassthru($to, $this->Subject, $body, $header, $params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1967)             $this->doCallback($result, $this->to, $this->cc, $this->bcc, $this->Subject, $body, $this->From, []);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1968)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1969)         if (isset($old_from)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1970)             ini_set('sendmail_from', $old_from);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1971)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1972)         if (!$result) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1973)             throw new Exception($this->lang('instantiate'), self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1974)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1975) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1976)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1977)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1978) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1979)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1980)      * Get an instance to use for SMTP operations.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1981)      * Override this function to load your own SMTP implementation,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1982)      * or set one with setSMTPInstance.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1983)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1984)      * @return SMTP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1985)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1986)     public function getSMTPInstance()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1987)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1988)         if (!is_object($this->smtp)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1989)             $this->smtp = new SMTP();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1990)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1991) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1992)         return $this->smtp;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1993)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1994) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1995)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1996)      * Provide an instance to use for SMTP operations.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1997)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1998)      * @return SMTP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1999)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2000)     public function setSMTPInstance(SMTP $smtp)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2001)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2002)         $this->smtp = $smtp;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2003) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2004)         return $this->smtp;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2005)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2006) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2007)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2008)      * Provide SMTP XCLIENT attributes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2009)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2010)      * @param string $name  Attribute name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2011)      * @param ?string $value Attribute value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2012)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2013)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2014)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2015)     public function setSMTPXclientAttribute($name, $value)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2016)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2017)         if (!in_array($name, SMTP::$xclient_allowed_attributes)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2018)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2019)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2020)         if (isset($this->SMTPXClient[$name]) && $value === null) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2021)             unset($this->SMTPXClient[$name]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2022)         } elseif ($value !== null) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2023)             $this->SMTPXClient[$name] = $value;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2024)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2025) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2026)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2027)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2028) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2029)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2030)      * Get SMTP XCLIENT attributes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2031)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2032)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2033)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2034)     public function getSMTPXclientAttributes()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2035)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2036)         return $this->SMTPXClient;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2037)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2038) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2039)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2040)      * Send mail via SMTP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2041)      * Returns false if there is a bad MAIL FROM, RCPT, or DATA input.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2042)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2043)      * @see PHPMailer::setSMTPInstance() to use a different class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2044)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2045)      * @uses \PHPMailer\PHPMailer\SMTP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2046)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2047)      * @param string $header The message headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2048)      * @param string $body   The message body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2049)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2050)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2051)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2052)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2053)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2054)     protected function smtpSend($header, $body)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2055)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2056)         $header = static::stripTrailingWSP($header) . static::$LE . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2057)         $bad_rcpt = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2058)         if (!$this->smtpConnect($this->SMTPOptions)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2059)             throw new Exception($this->lang('smtp_connect_failed'), self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2060)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2061)         //Sender already validated in preSend()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2062)         if ('' === $this->Sender) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2063)             $smtp_from = $this->From;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2064)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2065)             $smtp_from = $this->Sender;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2066)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2067)         if (count($this->SMTPXClient)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2068)             $this->smtp->xclient($this->SMTPXClient);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2069)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2070)         if (!$this->smtp->mail($smtp_from)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2071)             $this->setError($this->lang('from_failed') . $smtp_from . ' : ' . implode(',', $this->smtp->getError()));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2072)             throw new Exception($this->ErrorInfo, self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2073)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2074) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2075)         $callbacks = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2076)         //Attempt to send to all recipients
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2077)         foreach ([$this->to, $this->cc, $this->bcc] as $togroup) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2078)             foreach ($togroup as $to) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2079)                 if (!$this->smtp->recipient($to[0], $this->dsn)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2080)                     $error = $this->smtp->getError();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2081)                     $bad_rcpt[] = ['to' => $to[0], 'error' => $error['detail']];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2082)                     $isSent = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2083)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2084)                     $isSent = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2085)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2086) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2087)                 $callbacks[] = ['issent' => $isSent, 'to' => $to[0], 'name' => $to[1]];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2088)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2089)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2090) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2091)         //Only send the DATA command if we have viable recipients
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2092)         if ((count($this->all_recipients) > count($bad_rcpt)) && !$this->smtp->data($header . $body)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2093)             throw new Exception($this->lang('data_not_accepted'), self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2094)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2095) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2096)         $smtp_transaction_id = $this->smtp->getLastTransactionID();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2097) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2098)         if ($this->SMTPKeepAlive) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2099)             $this->smtp->reset();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2100)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2101)             $this->smtp->quit();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2102)             $this->smtp->close();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2103)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2104) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2105)         foreach ($callbacks as $cb) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2106)             $this->doCallback(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2107)                 $cb['issent'],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2108)                 [[$cb['to'], $cb['name']]],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2109)                 [],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2110)                 [],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2111)                 $this->Subject,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2112)                 $body,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2113)                 $this->From,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2114)                 ['smtp_transaction_id' => $smtp_transaction_id]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2115)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2116)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2117) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2118)         //Create error message for any bad addresses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2119)         if (count($bad_rcpt) > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2120)             $errstr = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2121)             foreach ($bad_rcpt as $bad) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2122)                 $errstr .= $bad['to'] . ': ' . $bad['error'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2123)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2124)             throw new Exception($this->lang('recipients_failed') . $errstr, self::STOP_CONTINUE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2125)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2126) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2127)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2128)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2129) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2130)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2131)      * Initiate a connection to an SMTP server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2132)      * Returns false if the operation failed.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2133)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2134)      * @param array $options An array of options compatible with stream_context_create()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2135)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2136)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2137)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2138)      * @uses \PHPMailer\PHPMailer\SMTP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2139)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2140)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2141)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2142)     public function smtpConnect($options = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2143)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2144)         if (null === $this->smtp) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2145)             $this->smtp = $this->getSMTPInstance();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2146)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2147) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2148)         //If no options are provided, use whatever is set in the instance
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2149)         if (null === $options) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2150)             $options = $this->SMTPOptions;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2151)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2152) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2153)         //Already connected?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2154)         if ($this->smtp->connected()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2155)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2156)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2157) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2158)         $this->smtp->setTimeout($this->Timeout);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2159)         $this->smtp->setDebugLevel($this->SMTPDebug);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2160)         $this->smtp->setDebugOutput($this->Debugoutput);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2161)         $this->smtp->setVerp($this->do_verp);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2162)         if ($this->Host === null) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2163)             $this->Host = 'localhost';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2164)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2165)         $hosts = explode(';', $this->Host);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2166)         $lastexception = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2167) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2168)         foreach ($hosts as $hostentry) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2169)             $hostinfo = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2170)             if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2171)                 !preg_match(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2172)                     '/^(?:(ssl|tls):\/\/)?(.+?)(?::(\d+))?$/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2173)                     trim($hostentry),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2174)                     $hostinfo
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2175)                 )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2176)             ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2177)                 $this->edebug($this->lang('invalid_hostentry') . ' ' . trim($hostentry));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2178)                 //Not a valid host entry
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2179)                 continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2180)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2181)             //$hostinfo[1]: optional ssl or tls prefix
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2182)             //$hostinfo[2]: the hostname
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2183)             //$hostinfo[3]: optional port number
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2184)             //The host string prefix can temporarily override the current setting for SMTPSecure
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2185)             //If it's not specified, the default value is used
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2186) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2187)             //Check the host name is a valid name or IP address before trying to use it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2188)             if (!static::isValidHost($hostinfo[2])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2189)                 $this->edebug($this->lang('invalid_host') . ' ' . $hostinfo[2]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2190)                 continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2191)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2192)             $prefix = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2193)             $secure = $this->SMTPSecure;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2194)             $tls = (static::ENCRYPTION_STARTTLS === $this->SMTPSecure);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2195)             if ('ssl' === $hostinfo[1] || ('' === $hostinfo[1] && static::ENCRYPTION_SMTPS === $this->SMTPSecure)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2196)                 $prefix = 'ssl://';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2197)                 $tls = false; //Can't have SSL and TLS at the same time
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2198)                 $secure = static::ENCRYPTION_SMTPS;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2199)             } elseif ('tls' === $hostinfo[1]) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2200)                 $tls = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2201)                 //TLS doesn't use a prefix
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2202)                 $secure = static::ENCRYPTION_STARTTLS;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2203)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2204)             //Do we need the OpenSSL extension?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2205)             $sslext = defined('OPENSSL_ALGO_SHA256');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2206)             if (static::ENCRYPTION_STARTTLS === $secure || static::ENCRYPTION_SMTPS === $secure) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2207)                 //Check for an OpenSSL constant rather than using extension_loaded, which is sometimes disabled
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2208)                 if (!$sslext) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2209)                     throw new Exception($this->lang('extension_missing') . 'openssl', self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2210)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2211)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2212)             $host = $hostinfo[2];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2213)             $port = $this->Port;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2214)             if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2215)                 array_key_exists(3, $hostinfo) &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2216)                 is_numeric($hostinfo[3]) &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2217)                 $hostinfo[3] > 0 &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2218)                 $hostinfo[3] < 65536
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2219)             ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2220)                 $port = (int) $hostinfo[3];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2221)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2222)             if ($this->smtp->connect($prefix . $host, $port, $this->Timeout, $options)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2223)                 try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2224)                     if ($this->Helo) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2225)                         $hello = $this->Helo;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2226)                     } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2227)                         $hello = $this->serverHostname();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2228)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2229)                     $this->smtp->hello($hello);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2230)                     //Automatically enable TLS encryption if:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2231)                     //* it's not disabled
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2232)                     //* we are not connecting to localhost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2233)                     //* we have openssl extension
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2234)                     //* we are not already using SSL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2235)                     //* the server offers STARTTLS
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2236)                     if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2237)                         $this->SMTPAutoTLS &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2238)                         $this->Host !== 'localhost' &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2239)                         $sslext &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2240)                         $secure !== 'ssl' &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2241)                         $this->smtp->getServerExt('STARTTLS')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2242)                     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2243)                         $tls = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2244)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2245)                     if ($tls) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2246)                         if (!$this->smtp->startTLS()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2247)                             $message = $this->getSmtpErrorMessage('connect_host');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2248)                             throw new Exception($message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2249)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2250)                         //We must resend EHLO after TLS negotiation
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2251)                         $this->smtp->hello($hello);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2252)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2253)                     if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2254)                         $this->SMTPAuth && !$this->smtp->authenticate(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2255)                             $this->Username,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2256)                             $this->Password,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2257)                             $this->AuthType,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2258)                             $this->oauth
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2259)                         )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2260)                     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2261)                         throw new Exception($this->lang('authenticate'));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2262)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2263) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2264)                     return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2265)                 } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2266)                     $lastexception = $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2267)                     $this->edebug($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2268)                     //We must have connected, but then failed TLS or Auth, so close connection nicely
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2269)                     $this->smtp->quit();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2270)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2271)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2272)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2273)         //If we get here, all connection attempts have failed, so close connection hard
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2274)         $this->smtp->close();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2275)         //As we've caught all exceptions, just report whatever the last one was
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2276)         if ($this->exceptions && null !== $lastexception) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2277)             throw $lastexception;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2278)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2279)         if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2280)             // no exception was thrown, likely $this->smtp->connect() failed
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2281)             $message = $this->getSmtpErrorMessage('connect_host');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2282)             throw new Exception($message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2283)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2284) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2285)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2286)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2287) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2288)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2289)      * Close the active SMTP session if one exists.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2290)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2291)     public function smtpClose()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2292)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2293)         if ((null !== $this->smtp) && $this->smtp->connected()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2294)             $this->smtp->quit();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2295)             $this->smtp->close();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2296)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2297)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2298) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2299)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2300)      * Set the language for error messages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2301)      * The default language is English.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2302)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2303)      * @param string $langcode  ISO 639-1 2-character language code (e.g. French is "fr")
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2304)      *                          Optionally, the language code can be enhanced with a 4-character
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2305)      *                          script annotation and/or a 2-character country annotation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2306)      * @param string $lang_path Path to the language file directory, with trailing separator (slash)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2307)      *                          Do not set this from user input!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2308)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2309)      * @return bool Returns true if the requested language was loaded, false otherwise.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2310)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2311)     public function setLanguage($langcode = 'en', $lang_path = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2312)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2313)         //Backwards compatibility for renamed language codes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2314)         $renamed_langcodes = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2315)             'br' => 'pt_br',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2316)             'cz' => 'cs',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2317)             'dk' => 'da',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2318)             'no' => 'nb',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2319)             'se' => 'sv',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2320)             'rs' => 'sr',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2321)             'tg' => 'tl',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2322)             'am' => 'hy',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2323)         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2324) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2325)         if (array_key_exists($langcode, $renamed_langcodes)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2326)             $langcode = $renamed_langcodes[$langcode];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2327)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2328) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2329)         //Define full set of translatable strings in English
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2330)         $PHPMAILER_LANG = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2331)             'authenticate' => 'SMTP Error: Could not authenticate.',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2332)             'buggy_php' => 'Your version of PHP is affected by a bug that may result in corrupted messages.' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2333)                 ' To fix it, switch to sending using SMTP, disable the mail.add_x_header option in' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2334)                 ' your php.ini, switch to MacOS or Linux, or upgrade your PHP to version 7.0.17+ or 7.1.3+.',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2335)             'connect_host' => 'SMTP Error: Could not connect to SMTP host.',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2336)             'data_not_accepted' => 'SMTP Error: data not accepted.',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2337)             'empty_message' => 'Message body empty',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2338)             'encoding' => 'Unknown encoding: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2339)             'execute' => 'Could not execute: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2340)             'extension_missing' => 'Extension missing: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2341)             'file_access' => 'Could not access file: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2342)             'file_open' => 'File Error: Could not open file: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2343)             'from_failed' => 'The following From address failed: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2344)             'instantiate' => 'Could not instantiate mail function.',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2345)             'invalid_address' => 'Invalid address: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2346)             'invalid_header' => 'Invalid header name or value',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2347)             'invalid_hostentry' => 'Invalid hostentry: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2348)             'invalid_host' => 'Invalid host: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2349)             'mailer_not_supported' => ' mailer is not supported.',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2350)             'provide_address' => 'You must provide at least one recipient email address.',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2351)             'recipients_failed' => 'SMTP Error: The following recipients failed: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2352)             'signing' => 'Signing Error: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2353)             'smtp_code' => 'SMTP code: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2354)             'smtp_code_ex' => 'Additional SMTP info: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2355)             'smtp_connect_failed' => 'SMTP connect() failed.',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2356)             'smtp_detail' => 'Detail: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2357)             'smtp_error' => 'SMTP server error: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2358)             'variable_set' => 'Cannot set or reset variable: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2359)         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2360)         if (empty($lang_path)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2361)             //Calculate an absolute path so it can work if CWD is not here
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2362)             $lang_path = dirname(__DIR__) . DIRECTORY_SEPARATOR . 'language' . DIRECTORY_SEPARATOR;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2363)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2364) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2365)         //Validate $langcode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2366)         $foundlang = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2367)         $langcode  = strtolower($langcode);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2368)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2369)             !preg_match('/^(?P<lang>[a-z]{2})(?P<script>_[a-z]{4})?(?P<country>_[a-z]{2})?$/', $langcode, $matches)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2370)             && $langcode !== 'en'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2371)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2372)             $foundlang = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2373)             $langcode = 'en';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2374)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2375) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2376)         //There is no English translation file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2377)         if ('en' !== $langcode) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2378)             $langcodes = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2379)             if (!empty($matches['script']) && !empty($matches['country'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2380)                 $langcodes[] = $matches['lang'] . $matches['script'] . $matches['country'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2381)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2382)             if (!empty($matches['country'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2383)                 $langcodes[] = $matches['lang'] . $matches['country'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2384)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2385)             if (!empty($matches['script'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2386)                 $langcodes[] = $matches['lang'] . $matches['script'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2387)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2388)             $langcodes[] = $matches['lang'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2389) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2390)             //Try and find a readable language file for the requested language.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2391)             $foundFile = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2392)             foreach ($langcodes as $code) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2393)                 $lang_file = $lang_path . 'phpmailer.lang-' . $code . '.php';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2394)                 if (static::fileIsAccessible($lang_file)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2395)                     $foundFile = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2396)                     break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2397)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2398)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2399) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2400)             if ($foundFile === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2401)                 $foundlang = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2402)             } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2403)                 $lines = file($lang_file);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2404)                 foreach ($lines as $line) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2405)                     //Translation file lines look like this:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2406)                     //$PHPMAILER_LANG['authenticate'] = 'SMTP-Fehler: Authentifizierung fehlgeschlagen.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2407)                     //These files are parsed as text and not PHP so as to avoid the possibility of code injection
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2408)                     //See https://blog.stevenlevithan.com/archives/match-quoted-string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2409)                     $matches = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2410)                     if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2411)                         preg_match(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2412)                             '/^\$PHPMAILER_LANG\[\'([a-z\d_]+)\'\]\s*=\s*(["\'])(.+)*?\2;/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2413)                             $line,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2414)                             $matches
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2415)                         ) &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2416)                         //Ignore unknown translation keys
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2417)                         array_key_exists($matches[1], $PHPMAILER_LANG)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2418)                     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2419)                         //Overwrite language-specific strings so we'll never have missing translation keys.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2420)                         $PHPMAILER_LANG[$matches[1]] = (string)$matches[3];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2421)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2422)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2423)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2424)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2425)         $this->language = $PHPMAILER_LANG;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2426) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2427)         return $foundlang; //Returns false if language not found
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2428)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2429) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2430)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2431)      * Get the array of strings for the current language.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2432)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2433)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2434)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2435)     public function getTranslations()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2436)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2437)         if (empty($this->language)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2438)             $this->setLanguage(); // Set the default language.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2439)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2440) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2441)         return $this->language;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2442)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2443) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2444)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2445)      * Create recipient headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2446)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2447)      * @param string $type
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2448)      * @param array  $addr An array of recipients,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2449)      *                     where each recipient is a 2-element indexed array with element 0 containing an address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2450)      *                     and element 1 containing a name, like:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2451)      *                     [['joe@example.com', 'Joe User'], ['zoe@example.com', 'Zoe User']]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2452)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2453)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2454)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2455)     public function addrAppend($type, $addr)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2456)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2457)         $addresses = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2458)         foreach ($addr as $address) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2459)             $addresses[] = $this->addrFormat($address);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2460)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2461) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2462)         return $type . ': ' . implode(', ', $addresses) . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2463)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2464) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2465)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2466)      * Format an address for use in a message header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2467)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2468)      * @param array $addr A 2-element indexed array, element 0 containing an address, element 1 containing a name like
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2469)      *                    ['joe@example.com', 'Joe User']
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2470)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2471)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2472)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2473)     public function addrFormat($addr)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2474)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2475)         if (!isset($addr[1]) || ($addr[1] === '')) { //No name provided
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2476)             return $this->secureHeader($addr[0]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2477)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2478) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2479)         return $this->encodeHeader($this->secureHeader($addr[1]), 'phrase') .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2480)             ' <' . $this->secureHeader($addr[0]) . '>';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2481)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2482) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2483)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2484)      * Word-wrap message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2485)      * For use with mailers that do not automatically perform wrapping
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2486)      * and for quoted-printable encoded messages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2487)      * Original written by philippe.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2488)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2489)      * @param string $message The message to wrap
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2490)      * @param int    $length  The line length to wrap to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2491)      * @param bool   $qp_mode Whether to run in Quoted-Printable mode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2492)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2493)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2494)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2495)     public function wrapText($message, $length, $qp_mode = false)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2496)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2497)         if ($qp_mode) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2498)             $soft_break = sprintf(' =%s', static::$LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2499)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2500)             $soft_break = static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2501)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2502)         //If utf-8 encoding is used, we will need to make sure we don't
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2503)         //split multibyte characters when we wrap
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2504)         $is_utf8 = static::CHARSET_UTF8 === strtolower($this->CharSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2505)         $lelen = strlen(static::$LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2506)         $crlflen = strlen(static::$LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2507) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2508)         $message = static::normalizeBreaks($message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2509)         //Remove a trailing line break
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2510)         if (substr($message, -$lelen) === static::$LE) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2511)             $message = substr($message, 0, -$lelen);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2512)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2513) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2514)         //Split message into lines
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2515)         $lines = explode(static::$LE, $message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2516)         //Message will be rebuilt in here
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2517)         $message = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2518)         foreach ($lines as $line) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2519)             $words = explode(' ', $line);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2520)             $buf = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2521)             $firstword = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2522)             foreach ($words as $word) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2523)                 if ($qp_mode && (strlen($word) > $length)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2524)                     $space_left = $length - strlen($buf) - $crlflen;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2525)                     if (!$firstword) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2526)                         if ($space_left > 20) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2527)                             $len = $space_left;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2528)                             if ($is_utf8) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2529)                                 $len = $this->utf8CharBoundary($word, $len);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2530)                             } elseif ('=' === substr($word, $len - 1, 1)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2531)                                 --$len;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2532)                             } elseif ('=' === substr($word, $len - 2, 1)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2533)                                 $len -= 2;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2534)                             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2535)                             $part = substr($word, 0, $len);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2536)                             $word = substr($word, $len);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2537)                             $buf .= ' ' . $part;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2538)                             $message .= $buf . sprintf('=%s', static::$LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2539)                         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2540)                             $message .= $buf . $soft_break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2541)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2542)                         $buf = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2543)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2544)                     while ($word !== '') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2545)                         if ($length <= 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2546)                             break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2547)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2548)                         $len = $length;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2549)                         if ($is_utf8) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2550)                             $len = $this->utf8CharBoundary($word, $len);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2551)                         } elseif ('=' === substr($word, $len - 1, 1)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2552)                             --$len;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2553)                         } elseif ('=' === substr($word, $len - 2, 1)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2554)                             $len -= 2;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2555)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2556)                         $part = substr($word, 0, $len);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2557)                         $word = (string) substr($word, $len);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2558) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2559)                         if ($word !== '') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2560)                             $message .= $part . sprintf('=%s', static::$LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2561)                         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2562)                             $buf = $part;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2563)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2564)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2565)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2566)                     $buf_o = $buf;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2567)                     if (!$firstword) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2568)                         $buf .= ' ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2569)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2570)                     $buf .= $word;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2571) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2572)                     if ('' !== $buf_o && strlen($buf) > $length) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2573)                         $message .= $buf_o . $soft_break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2574)                         $buf = $word;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2575)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2576)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2577)                 $firstword = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2578)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2579)             $message .= $buf . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2580)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2581) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2582)         return $message;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2583)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2584) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2585)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2586)      * Find the last character boundary prior to $maxLength in a utf-8
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2587)      * quoted-printable encoded string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2588)      * Original written by Colin Brown.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2589)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2590)      * @param string $encodedText utf-8 QP text
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2591)      * @param int    $maxLength   Find the last character boundary prior to this length
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2592)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2593)      * @return int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2594)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2595)     public function utf8CharBoundary($encodedText, $maxLength)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2596)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2597)         $foundSplitPos = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2598)         $lookBack = 3;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2599)         while (!$foundSplitPos) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2600)             $lastChunk = substr($encodedText, $maxLength - $lookBack, $lookBack);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2601)             $encodedCharPos = strpos($lastChunk, '=');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2602)             if (false !== $encodedCharPos) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2603)                 //Found start of encoded character byte within $lookBack block.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2604)                 //Check the encoded byte value (the 2 chars after the '=')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2605)                 $hex = substr($encodedText, $maxLength - $lookBack + $encodedCharPos + 1, 2);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2606)                 $dec = hexdec($hex);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2607)                 if ($dec < 128) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2608)                     //Single byte character.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2609)                     //If the encoded char was found at pos 0, it will fit
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2610)                     //otherwise reduce maxLength to start of the encoded char
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2611)                     if ($encodedCharPos > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2612)                         $maxLength -= $lookBack - $encodedCharPos;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2613)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2614)                     $foundSplitPos = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2615)                 } elseif ($dec >= 192) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2616)                     //First byte of a multi byte character
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2617)                     //Reduce maxLength to split at start of character
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2618)                     $maxLength -= $lookBack - $encodedCharPos;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2619)                     $foundSplitPos = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2620)                 } elseif ($dec < 192) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2621)                     //Middle byte of a multi byte character, look further back
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2622)                     $lookBack += 3;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2623)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2624)             } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2625)                 //No encoded character found
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2626)                 $foundSplitPos = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2627)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2628)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2629) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2630)         return $maxLength;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2631)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2632) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2633)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2634)      * Apply word wrapping to the message body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2635)      * Wraps the message body to the number of chars set in the WordWrap property.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2636)      * You should only do this to plain-text bodies as wrapping HTML tags may break them.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2637)      * This is called automatically by createBody(), so you don't need to call it yourself.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2638)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2639)     public function setWordWrap()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2640)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2641)         if ($this->WordWrap < 1) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2642)             return;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2643)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2644) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2645)         switch ($this->message_type) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2646)             case 'alt':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2647)             case 'alt_inline':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2648)             case 'alt_attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2649)             case 'alt_inline_attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2650)                 $this->AltBody = $this->wrapText($this->AltBody, $this->WordWrap);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2651)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2652)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2653)                 $this->Body = $this->wrapText($this->Body, $this->WordWrap);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2654)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2655)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2656)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2657) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2658)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2659)      * Assemble message headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2660)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2661)      * @return string The assembled headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2662)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2663)     public function createHeader()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2664)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2665)         $result = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2666) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2667)         $result .= $this->headerLine('Date', '' === $this->MessageDate ? self::rfcDate() : $this->MessageDate);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2668) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2669)         //The To header is created automatically by mail(), so needs to be omitted here
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2670)         if ('mail' !== $this->Mailer) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2671)             if ($this->SingleTo) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2672)                 foreach ($this->to as $toaddr) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2673)                     $this->SingleToArray[] = $this->addrFormat($toaddr);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2674)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2675)             } elseif (count($this->to) > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2676)                 $result .= $this->addrAppend('To', $this->to);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2677)             } elseif (count($this->cc) === 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2678)                 $result .= $this->headerLine('To', 'undisclosed-recipients:;');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2679)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2680)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2681)         $result .= $this->addrAppend('From', [[trim($this->From), $this->FromName]]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2682) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2683)         //sendmail and mail() extract Cc from the header before sending
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2684)         if (count($this->cc) > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2685)             $result .= $this->addrAppend('Cc', $this->cc);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2686)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2687) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2688)         //sendmail and mail() extract Bcc from the header before sending
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2689)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2690)             (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2691)                 'sendmail' === $this->Mailer || 'qmail' === $this->Mailer || 'mail' === $this->Mailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2692)             )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2693)             && count($this->bcc) > 0
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2694)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2695)             $result .= $this->addrAppend('Bcc', $this->bcc);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2696)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2697) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2698)         if (count($this->ReplyTo) > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2699)             $result .= $this->addrAppend('Reply-To', $this->ReplyTo);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2700)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2701) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2702)         //mail() sets the subject itself
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2703)         if ('mail' !== $this->Mailer) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2704)             $result .= $this->headerLine('Subject', $this->encodeHeader($this->secureHeader($this->Subject)));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2705)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2706) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2707)         //Only allow a custom message ID if it conforms to RFC 5322 section 3.6.4
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2708)         //https://tools.ietf.org/html/rfc5322#section-3.6.4
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2709)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2710)             '' !== $this->MessageID &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2711)             preg_match(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2712)                 '/^<((([a-z\d!#$%&\'*+\/=?^_`{|}~-]+(\.[a-z\d!#$%&\'*+\/=?^_`{|}~-]+)*)' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2713)                 '|("(([\x01-\x08\x0B\x0C\x0E-\x1F\x7F]|[\x21\x23-\x5B\x5D-\x7E])' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2714)                 '|(\\[\x01-\x09\x0B\x0C\x0E-\x7F]))*"))@(([a-z\d!#$%&\'*+\/=?^_`{|}~-]+' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2715)                 '(\.[a-z\d!#$%&\'*+\/=?^_`{|}~-]+)*)|(\[(([\x01-\x08\x0B\x0C\x0E-\x1F\x7F]' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2716)                 '|[\x21-\x5A\x5E-\x7E])|(\\[\x01-\x09\x0B\x0C\x0E-\x7F]))*\])))>$/Di',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2717)                 $this->MessageID
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2718)             )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2719)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2720)             $this->lastMessageID = $this->MessageID;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2721)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2722)             $this->lastMessageID = sprintf('<%s@%s>', $this->uniqueid, $this->serverHostname());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2723)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2724)         $result .= $this->headerLine('Message-ID', $this->lastMessageID);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2725)         if (null !== $this->Priority) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2726)             $result .= $this->headerLine('X-Priority', $this->Priority);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2727)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2728)         if ('' === $this->XMailer) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2729)             //Empty string for default X-Mailer header
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2730)             $result .= $this->headerLine(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2731)                 'X-Mailer',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2732)                 'PHPMailer ' . self::VERSION . ' (https://github.com/PHPMailer/PHPMailer)'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2733)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2734)         } elseif (is_string($this->XMailer) && trim($this->XMailer) !== '') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2735)             //Some string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2736)             $result .= $this->headerLine('X-Mailer', trim($this->XMailer));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2737)         } //Other values result in no X-Mailer header
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2738) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2739)         if ('' !== $this->ConfirmReadingTo) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2740)             $result .= $this->headerLine('Disposition-Notification-To', '<' . $this->ConfirmReadingTo . '>');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2741)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2742) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2743)         //Add custom headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2744)         foreach ($this->CustomHeader as $header) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2745)             $result .= $this->headerLine(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2746)                 trim($header[0]),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2747)                 $this->encodeHeader(trim($header[1]))
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2748)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2749)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2750)         if (!$this->sign_key_file) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2751)             $result .= $this->headerLine('MIME-Version', '1.0');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2752)             $result .= $this->getMailMIME();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2753)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2754) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2755)         return $result;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2756)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2757) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2758)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2759)      * Get the message MIME type headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2760)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2761)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2762)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2763)     public function getMailMIME()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2764)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2765)         $result = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2766)         $ismultipart = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2767)         switch ($this->message_type) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2768)             case 'inline':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2769)                 $result .= $this->headerLine('Content-Type', static::CONTENT_TYPE_MULTIPART_RELATED . ';');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2770)                 $result .= $this->textLine(' boundary="' . $this->boundary[1] . '"');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2771)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2772)             case 'attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2773)             case 'inline_attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2774)             case 'alt_attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2775)             case 'alt_inline_attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2776)                 $result .= $this->headerLine('Content-Type', static::CONTENT_TYPE_MULTIPART_MIXED . ';');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2777)                 $result .= $this->textLine(' boundary="' . $this->boundary[1] . '"');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2778)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2779)             case 'alt':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2780)             case 'alt_inline':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2781)                 $result .= $this->headerLine('Content-Type', static::CONTENT_TYPE_MULTIPART_ALTERNATIVE . ';');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2782)                 $result .= $this->textLine(' boundary="' . $this->boundary[1] . '"');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2783)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2784)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2785)                 //Catches case 'plain': and case '':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2786)                 $result .= $this->textLine('Content-Type: ' . $this->ContentType . '; charset=' . $this->CharSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2787)                 $ismultipart = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2788)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2789)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2790)         //RFC1341 part 5 says 7bit is assumed if not specified
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2791)         if (static::ENCODING_7BIT !== $this->Encoding) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2792)             //RFC 2045 section 6.4 says multipart MIME parts may only use 7bit, 8bit or binary CTE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2793)             if ($ismultipart) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2794)                 if (static::ENCODING_8BIT === $this->Encoding) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2795)                     $result .= $this->headerLine('Content-Transfer-Encoding', static::ENCODING_8BIT);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2796)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2797)                 //The only remaining alternatives are quoted-printable and base64, which are both 7bit compatible
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2798)             } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2799)                 $result .= $this->headerLine('Content-Transfer-Encoding', $this->Encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2800)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2801)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2802) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2803)         return $result;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2804)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2805) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2806)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2807)      * Returns the whole MIME message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2808)      * Includes complete headers and body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2809)      * Only valid post preSend().
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2810)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2811)      * @see PHPMailer::preSend()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2812)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2813)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2814)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2815)     public function getSentMIMEMessage()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2816)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2817)         return static::stripTrailingWSP($this->MIMEHeader . $this->mailHeader) .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2818)             static::$LE . static::$LE . $this->MIMEBody;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2819)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2820) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2821)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2822)      * Create a unique ID to use for boundaries.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2823)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2824)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2825)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2826)     protected function generateId()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2827)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2828)         $len = 32; //32 bytes = 256 bits
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2829)         $bytes = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2830)         if (function_exists('random_bytes')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2831)             try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2832)                 $bytes = random_bytes($len);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2833)             } catch (\Exception $e) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2834)                 //Do nothing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2835)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2836)         } elseif (function_exists('openssl_random_pseudo_bytes')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2837)             /** @noinspection CryptographicallySecureRandomnessInspection */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2838)             $bytes = openssl_random_pseudo_bytes($len);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2839)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2840)         if ($bytes === '') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2841)             //We failed to produce a proper random string, so make do.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2842)             //Use a hash to force the length to the same as the other methods
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2843)             $bytes = hash('sha256', uniqid((string) mt_rand(), true), true);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2844)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2845) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2846)         //We don't care about messing up base64 format here, just want a random string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2847)         return str_replace(['=', '+', '/'], '', base64_encode(hash('sha256', $bytes, true)));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2848)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2849) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2850)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2851)      * Assemble the message body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2852)      * Returns an empty string on failure.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2853)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2854)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2855)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2856)      * @return string The assembled message body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2857)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2858)     public function createBody()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2859)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2860)         $body = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2861)         //Create unique IDs and preset boundaries
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2862)         $this->setBoundaries();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2863) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2864)         if ($this->sign_key_file) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2865)             $body .= $this->getMailMIME() . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2866)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2867) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2868)         $this->setWordWrap();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2869) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2870)         $bodyEncoding = $this->Encoding;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2871)         $bodyCharSet = $this->CharSet;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2872)         //Can we do a 7-bit downgrade?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2873)         if (static::ENCODING_8BIT === $bodyEncoding && !$this->has8bitChars($this->Body)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2874)             $bodyEncoding = static::ENCODING_7BIT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2875)             //All ISO 8859, Windows codepage and UTF-8 charsets are ascii compatible up to 7-bit
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2876)             $bodyCharSet = static::CHARSET_ASCII;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2877)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2878)         //If lines are too long, and we're not already using an encoding that will shorten them,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2879)         //change to quoted-printable transfer encoding for the body part only
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2880)         if (static::ENCODING_BASE64 !== $this->Encoding && static::hasLineLongerThanMax($this->Body)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2881)             $bodyEncoding = static::ENCODING_QUOTED_PRINTABLE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2882)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2883) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2884)         $altBodyEncoding = $this->Encoding;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2885)         $altBodyCharSet = $this->CharSet;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2886)         //Can we do a 7-bit downgrade?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2887)         if (static::ENCODING_8BIT === $altBodyEncoding && !$this->has8bitChars($this->AltBody)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2888)             $altBodyEncoding = static::ENCODING_7BIT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2889)             //All ISO 8859, Windows codepage and UTF-8 charsets are ascii compatible up to 7-bit
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2890)             $altBodyCharSet = static::CHARSET_ASCII;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2891)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2892)         //If lines are too long, and we're not already using an encoding that will shorten them,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2893)         //change to quoted-printable transfer encoding for the alt body part only
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2894)         if (static::ENCODING_BASE64 !== $altBodyEncoding && static::hasLineLongerThanMax($this->AltBody)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2895)             $altBodyEncoding = static::ENCODING_QUOTED_PRINTABLE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2896)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2897)         //Use this as a preamble in all multipart message types
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2898)         $mimepre = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2899)         switch ($this->message_type) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2900)             case 'inline':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2901)                 $body .= $mimepre;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2902)                 $body .= $this->getBoundary($this->boundary[1], $bodyCharSet, '', $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2903)                 $body .= $this->encodeString($this->Body, $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2904)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2905)                 $body .= $this->attachAll('inline', $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2906)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2907)             case 'attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2908)                 $body .= $mimepre;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2909)                 $body .= $this->getBoundary($this->boundary[1], $bodyCharSet, '', $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2910)                 $body .= $this->encodeString($this->Body, $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2911)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2912)                 $body .= $this->attachAll('attachment', $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2913)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2914)             case 'inline_attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2915)                 $body .= $mimepre;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2916)                 $body .= $this->textLine('--' . $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2917)                 $body .= $this->headerLine('Content-Type', static::CONTENT_TYPE_MULTIPART_RELATED . ';');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2918)                 $body .= $this->textLine(' boundary="' . $this->boundary[2] . '";');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2919)                 $body .= $this->textLine(' type="' . static::CONTENT_TYPE_TEXT_HTML . '"');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2920)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2921)                 $body .= $this->getBoundary($this->boundary[2], $bodyCharSet, '', $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2922)                 $body .= $this->encodeString($this->Body, $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2923)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2924)                 $body .= $this->attachAll('inline', $this->boundary[2]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2925)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2926)                 $body .= $this->attachAll('attachment', $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2927)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2928)             case 'alt':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2929)                 $body .= $mimepre;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2930)                 $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2931)                     $this->boundary[1],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2932)                     $altBodyCharSet,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2933)                     static::CONTENT_TYPE_PLAINTEXT,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2934)                     $altBodyEncoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2935)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2936)                 $body .= $this->encodeString($this->AltBody, $altBodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2937)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2938)                 $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2939)                     $this->boundary[1],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2940)                     $bodyCharSet,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2941)                     static::CONTENT_TYPE_TEXT_HTML,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2942)                     $bodyEncoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2943)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2944)                 $body .= $this->encodeString($this->Body, $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2945)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2946)                 if (!empty($this->Ical)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2947)                     $method = static::ICAL_METHOD_REQUEST;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2948)                     foreach (static::$IcalMethods as $imethod) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2949)                         if (stripos($this->Ical, 'METHOD:' . $imethod) !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2950)                             $method = $imethod;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2951)                             break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2952)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2953)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2954)                     $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2955)                         $this->boundary[1],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2956)                         '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2957)                         static::CONTENT_TYPE_TEXT_CALENDAR . '; method=' . $method,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2958)                         ''
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2959)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2960)                     $body .= $this->encodeString($this->Ical, $this->Encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2961)                     $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2962)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2963)                 $body .= $this->endBoundary($this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2964)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2965)             case 'alt_inline':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2966)                 $body .= $mimepre;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2967)                 $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2968)                     $this->boundary[1],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2969)                     $altBodyCharSet,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2970)                     static::CONTENT_TYPE_PLAINTEXT,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2971)                     $altBodyEncoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2972)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2973)                 $body .= $this->encodeString($this->AltBody, $altBodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2974)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2975)                 $body .= $this->textLine('--' . $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2976)                 $body .= $this->headerLine('Content-Type', static::CONTENT_TYPE_MULTIPART_RELATED . ';');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2977)                 $body .= $this->textLine(' boundary="' . $this->boundary[2] . '";');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2978)                 $body .= $this->textLine(' type="' . static::CONTENT_TYPE_TEXT_HTML . '"');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2979)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2980)                 $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2981)                     $this->boundary[2],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2982)                     $bodyCharSet,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2983)                     static::CONTENT_TYPE_TEXT_HTML,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2984)                     $bodyEncoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2985)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2986)                 $body .= $this->encodeString($this->Body, $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2987)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2988)                 $body .= $this->attachAll('inline', $this->boundary[2]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2989)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2990)                 $body .= $this->endBoundary($this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2991)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2992)             case 'alt_attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2993)                 $body .= $mimepre;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2994)                 $body .= $this->textLine('--' . $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2995)                 $body .= $this->headerLine('Content-Type', static::CONTENT_TYPE_MULTIPART_ALTERNATIVE . ';');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2996)                 $body .= $this->textLine(' boundary="' . $this->boundary[2] . '"');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2997)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2998)                 $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2999)                     $this->boundary[2],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3000)                     $altBodyCharSet,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3001)                     static::CONTENT_TYPE_PLAINTEXT,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3002)                     $altBodyEncoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3003)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3004)                 $body .= $this->encodeString($this->AltBody, $altBodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3005)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3006)                 $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3007)                     $this->boundary[2],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3008)                     $bodyCharSet,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3009)                     static::CONTENT_TYPE_TEXT_HTML,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3010)                     $bodyEncoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3011)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3012)                 $body .= $this->encodeString($this->Body, $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3013)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3014)                 if (!empty($this->Ical)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3015)                     $method = static::ICAL_METHOD_REQUEST;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3016)                     foreach (static::$IcalMethods as $imethod) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3017)                         if (stripos($this->Ical, 'METHOD:' . $imethod) !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3018)                             $method = $imethod;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3019)                             break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3020)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3021)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3022)                     $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3023)                         $this->boundary[2],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3024)                         '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3025)                         static::CONTENT_TYPE_TEXT_CALENDAR . '; method=' . $method,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3026)                         ''
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3027)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3028)                     $body .= $this->encodeString($this->Ical, $this->Encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3029)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3030)                 $body .= $this->endBoundary($this->boundary[2]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3031)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3032)                 $body .= $this->attachAll('attachment', $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3033)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3034)             case 'alt_inline_attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3035)                 $body .= $mimepre;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3036)                 $body .= $this->textLine('--' . $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3037)                 $body .= $this->headerLine('Content-Type', static::CONTENT_TYPE_MULTIPART_ALTERNATIVE . ';');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3038)                 $body .= $this->textLine(' boundary="' . $this->boundary[2] . '"');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3039)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3040)                 $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3041)                     $this->boundary[2],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3042)                     $altBodyCharSet,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3043)                     static::CONTENT_TYPE_PLAINTEXT,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3044)                     $altBodyEncoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3045)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3046)                 $body .= $this->encodeString($this->AltBody, $altBodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3047)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3048)                 $body .= $this->textLine('--' . $this->boundary[2]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3049)                 $body .= $this->headerLine('Content-Type', static::CONTENT_TYPE_MULTIPART_RELATED . ';');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3050)                 $body .= $this->textLine(' boundary="' . $this->boundary[3] . '";');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3051)                 $body .= $this->textLine(' type="' . static::CONTENT_TYPE_TEXT_HTML . '"');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3052)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3053)                 $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3054)                     $this->boundary[3],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3055)                     $bodyCharSet,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3056)                     static::CONTENT_TYPE_TEXT_HTML,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3057)                     $bodyEncoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3058)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3059)                 $body .= $this->encodeString($this->Body, $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3060)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3061)                 $body .= $this->attachAll('inline', $this->boundary[3]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3062)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3063)                 $body .= $this->endBoundary($this->boundary[2]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3064)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3065)                 $body .= $this->attachAll('attachment', $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3066)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3067)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3068)                 //Catch case 'plain' and case '', applies to simple `text/plain` and `text/html` body content types
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3069)                 //Reset the `Encoding` property in case we changed it for line length reasons
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3070)                 $this->Encoding = $bodyEncoding;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3071)                 $body .= $this->encodeString($this->Body, $this->Encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3072)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3073)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3074) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3075)         if ($this->isError()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3076)             $body = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3077)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3078)                 throw new Exception($this->lang('empty_message'), self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3079)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3080)         } elseif ($this->sign_key_file) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3081)             try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3082)                 if (!defined('PKCS7_TEXT')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3083)                     throw new Exception($this->lang('extension_missing') . 'openssl');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3084)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3085) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3086)                 $file = tempnam(sys_get_temp_dir(), 'srcsign');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3087)                 $signed = tempnam(sys_get_temp_dir(), 'mailsign');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3088)                 file_put_contents($file, $body);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3089) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3090)                 //Workaround for PHP bug https://bugs.php.net/bug.php?id=69197
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3091)                 if (empty($this->sign_extracerts_file)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3092)                     $sign = @openssl_pkcs7_sign(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3093)                         $file,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3094)                         $signed,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3095)                         'file://' . realpath($this->sign_cert_file),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3096)                         ['file://' . realpath($this->sign_key_file), $this->sign_key_pass],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3097)                         []
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3098)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3099)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3100)                     $sign = @openssl_pkcs7_sign(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3101)                         $file,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3102)                         $signed,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3103)                         'file://' . realpath($this->sign_cert_file),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3104)                         ['file://' . realpath($this->sign_key_file), $this->sign_key_pass],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3105)                         [],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3106)                         PKCS7_DETACHED,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3107)                         $this->sign_extracerts_file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3108)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3109)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3110) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3111)                 @unlink($file);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3112)                 if ($sign) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3113)                     $body = file_get_contents($signed);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3114)                     @unlink($signed);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3115)                     //The message returned by openssl contains both headers and body, so need to split them up
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3116)                     $parts = explode("\n\n", $body, 2);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3117)                     $this->MIMEHeader .= $parts[0] . static::$LE . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3118)                     $body = $parts[1];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3119)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3120)                     @unlink($signed);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3121)                     throw new Exception($this->lang('signing') . openssl_error_string());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3122)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3123)             } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3124)                 $body = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3125)                 if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3126)                     throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3127)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3128)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3129)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3130) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3131)         return $body;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3132)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3133) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3134)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3135)      * Get the boundaries that this message will use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3136)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3137)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3138)     public function getBoundaries()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3139)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3140)         if (empty($this->boundary)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3141)             $this->setBoundaries();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3142)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3143)         return $this->boundary;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3144)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3145) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3146)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3147)      * Return the start of a message boundary.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3148)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3149)      * @param string $boundary
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3150)      * @param string $charSet
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3151)      * @param string $contentType
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3152)      * @param string $encoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3153)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3154)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3155)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3156)     protected function getBoundary($boundary, $charSet, $contentType, $encoding)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3157)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3158)         $result = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3159)         if ('' === $charSet) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3160)             $charSet = $this->CharSet;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3161)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3162)         if ('' === $contentType) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3163)             $contentType = $this->ContentType;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3164)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3165)         if ('' === $encoding) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3166)             $encoding = $this->Encoding;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3167)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3168)         $result .= $this->textLine('--' . $boundary);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3169)         $result .= sprintf('Content-Type: %s; charset=%s', $contentType, $charSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3170)         $result .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3171)         //RFC1341 part 5 says 7bit is assumed if not specified
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3172)         if (static::ENCODING_7BIT !== $encoding) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3173)             $result .= $this->headerLine('Content-Transfer-Encoding', $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3174)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3175)         $result .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3176) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3177)         return $result;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3178)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3179) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3180)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3181)      * Return the end of a message boundary.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3182)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3183)      * @param string $boundary
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3184)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3185)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3186)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3187)     protected function endBoundary($boundary)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3188)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3189)         return static::$LE . '--' . $boundary . '--' . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3190)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3191) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3192)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3193)      * Set the message type.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3194)      * PHPMailer only supports some preset message types, not arbitrary MIME structures.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3195)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3196)     protected function setMessageType()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3197)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3198)         $type = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3199)         if ($this->alternativeExists()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3200)             $type[] = 'alt';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3201)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3202)         if ($this->inlineImageExists()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3203)             $type[] = 'inline';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3204)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3205)         if ($this->attachmentExists()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3206)             $type[] = 'attach';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3207)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3208)         $this->message_type = implode('_', $type);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3209)         if ('' === $this->message_type) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3210)             //The 'plain' message_type refers to the message having a single body element, not that it is plain-text
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3211)             $this->message_type = 'plain';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3212)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3213)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3214) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3215)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3216)      * Format a header line.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3217)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3218)      * @param string     $name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3219)      * @param string|int $value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3220)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3221)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3222)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3223)     public function headerLine($name, $value)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3224)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3225)         return $name . ': ' . $value . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3226)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3227) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3228)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3229)      * Return a formatted mail line.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3230)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3231)      * @param string $value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3232)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3233)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3234)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3235)     public function textLine($value)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3236)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3237)         return $value . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3238)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3239) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3240)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3241)      * Add an attachment from a path on the filesystem.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3242)      * Never use a user-supplied path to a file!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3243)      * Returns false if the file could not be found or read.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3244)      * Explicitly *does not* support passing URLs; PHPMailer is not an HTTP client.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3245)      * If you need to do that, fetch the resource yourself and pass it in via a local file or string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3246)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3247)      * @param string $path        Path to the attachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3248)      * @param string $name        Overrides the attachment name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3249)      * @param string $encoding    File encoding (see $Encoding)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3250)      * @param string $type        MIME type, e.g. `image/jpeg`; determined automatically from $path if not specified
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3251)      * @param string $disposition Disposition to use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3252)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3253)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3254)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3255)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3256)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3257)     public function addAttachment(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3258)         $path,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3259)         $name = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3260)         $encoding = self::ENCODING_BASE64,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3261)         $type = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3262)         $disposition = 'attachment'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3263)     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3264)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3265)             if (!static::fileIsAccessible($path)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3266)                 throw new Exception($this->lang('file_access') . $path, self::STOP_CONTINUE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3267)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3268) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3269)             //If a MIME type is not specified, try to work it out from the file name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3270)             if ('' === $type) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3271)                 $type = static::filenameToType($path);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3272)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3273) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3274)             $filename = (string) static::mb_pathinfo($path, PATHINFO_BASENAME);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3275)             if ('' === $name) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3276)                 $name = $filename;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3277)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3278)             if (!$this->validateEncoding($encoding)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3279)                 throw new Exception($this->lang('encoding') . $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3280)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3281) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3282)             $this->attachment[] = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3283)                 0 => $path,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3284)                 1 => $filename,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3285)                 2 => $name,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3286)                 3 => $encoding,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3287)                 4 => $type,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3288)                 5 => false, //isStringAttachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3289)                 6 => $disposition,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3290)                 7 => $name,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3291)             ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3292)         } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3293)             $this->setError($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3294)             $this->edebug($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3295)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3296)                 throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3297)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3298) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3299)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3300)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3301) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3302)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3303)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3304) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3305)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3306)      * Return the array of attachments.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3307)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3308)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3309)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3310)     public function getAttachments()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3311)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3312)         return $this->attachment;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3313)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3314) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3315)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3316)      * Attach all file, string, and binary attachments to the message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3317)      * Returns an empty string on failure.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3318)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3319)      * @param string $disposition_type
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3320)      * @param string $boundary
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3321)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3322)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3323)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3324)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3325)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3326)     protected function attachAll($disposition_type, $boundary)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3327)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3328)         //Return text of body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3329)         $mime = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3330)         $cidUniq = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3331)         $incl = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3332) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3333)         //Add all attachments
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3334)         foreach ($this->attachment as $attachment) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3335)             //Check if it is a valid disposition_filter
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3336)             if ($attachment[6] === $disposition_type) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3337)                 //Check for string attachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3338)                 $string = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3339)                 $path = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3340)                 $bString = $attachment[5];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3341)                 if ($bString) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3342)                     $string = $attachment[0];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3343)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3344)                     $path = $attachment[0];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3345)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3346) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3347)                 $inclhash = hash('sha256', serialize($attachment));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3348)                 if (in_array($inclhash, $incl, true)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3349)                     continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3350)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3351)                 $incl[] = $inclhash;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3352)                 $name = $attachment[2];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3353)                 $encoding = $attachment[3];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3354)                 $type = $attachment[4];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3355)                 $disposition = $attachment[6];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3356)                 $cid = $attachment[7];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3357)                 if ('inline' === $disposition && array_key_exists($cid, $cidUniq)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3358)                     continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3359)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3360)                 $cidUniq[$cid] = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3361) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3362)                 $mime[] = sprintf('--%s%s', $boundary, static::$LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3363)                 //Only include a filename property if we have one
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3364)                 if (!empty($name)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3365)                     $mime[] = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3366)                         'Content-Type: %s; name=%s%s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3367)                         $type,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3368)                         static::quotedString($this->encodeHeader($this->secureHeader($name))),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3369)                         static::$LE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3370)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3371)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3372)                     $mime[] = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3373)                         'Content-Type: %s%s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3374)                         $type,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3375)                         static::$LE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3376)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3377)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3378)                 //RFC1341 part 5 says 7bit is assumed if not specified
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3379)                 if (static::ENCODING_7BIT !== $encoding) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3380)                     $mime[] = sprintf('Content-Transfer-Encoding: %s%s', $encoding, static::$LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3381)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3382) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3383)                 //Only set Content-IDs on inline attachments
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3384)                 if ((string) $cid !== '' && $disposition === 'inline') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3385)                     $mime[] = 'Content-ID: <' . $this->encodeHeader($this->secureHeader($cid)) . '>' . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3386)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3387) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3388)                 //Allow for bypassing the Content-Disposition header
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3389)                 if (!empty($disposition)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3390)                     $encoded_name = $this->encodeHeader($this->secureHeader($name));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3391)                     if (!empty($encoded_name)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3392)                         $mime[] = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3393)                             'Content-Disposition: %s; filename=%s%s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3394)                             $disposition,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3395)                             static::quotedString($encoded_name),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3396)                             static::$LE . static::$LE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3397)                         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3398)                     } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3399)                         $mime[] = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3400)                             'Content-Disposition: %s%s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3401)                             $disposition,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3402)                             static::$LE . static::$LE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3403)                         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3404)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3405)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3406)                     $mime[] = static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3407)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3408) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3409)                 //Encode as string attachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3410)                 if ($bString) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3411)                     $mime[] = $this->encodeString($string, $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3412)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3413)                     $mime[] = $this->encodeFile($path, $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3414)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3415)                 if ($this->isError()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3416)                     return '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3417)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3418)                 $mime[] = static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3419)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3420)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3421) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3422)         $mime[] = sprintf('--%s--%s', $boundary, static::$LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3423) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3424)         return implode('', $mime);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3425)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3426) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3427)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3428)      * Encode a file attachment in requested format.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3429)      * Returns an empty string on failure.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3430)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3431)      * @param string $path     The full path to the file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3432)      * @param string $encoding The encoding to use; one of 'base64', '7bit', '8bit', 'binary', 'quoted-printable'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3433)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3434)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3435)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3436)     protected function encodeFile($path, $encoding = self::ENCODING_BASE64)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3437)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3438)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3439)             if (!static::fileIsAccessible($path)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3440)                 throw new Exception($this->lang('file_open') . $path, self::STOP_CONTINUE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3441)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3442)             $file_buffer = file_get_contents($path);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3443)             if (false === $file_buffer) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3444)                 throw new Exception($this->lang('file_open') . $path, self::STOP_CONTINUE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3445)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3446)             $file_buffer = $this->encodeString($file_buffer, $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3447) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3448)             return $file_buffer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3449)         } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3450)             $this->setError($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3451)             $this->edebug($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3452)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3453)                 throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3454)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3455) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3456)             return '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3457)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3458)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3459) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3460)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3461)      * Encode a string in requested format.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3462)      * Returns an empty string on failure.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3463)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3464)      * @param string $str      The text to encode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3465)      * @param string $encoding The encoding to use; one of 'base64', '7bit', '8bit', 'binary', 'quoted-printable'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3466)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3467)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3468)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3469)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3470)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3471)     public function encodeString($str, $encoding = self::ENCODING_BASE64)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3472)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3473)         $encoded = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3474)         switch (strtolower($encoding)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3475)             case static::ENCODING_BASE64:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3476)                 $encoded = chunk_split(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3477)                     base64_encode($str),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3478)                     static::STD_LINE_LENGTH,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3479)                     static::$LE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3480)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3481)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3482)             case static::ENCODING_7BIT:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3483)             case static::ENCODING_8BIT:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3484)                 $encoded = static::normalizeBreaks($str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3485)                 //Make sure it ends with a line break
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3486)                 if (substr($encoded, -(strlen(static::$LE))) !== static::$LE) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3487)                     $encoded .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3488)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3489)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3490)             case static::ENCODING_BINARY:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3491)                 $encoded = $str;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3492)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3493)             case static::ENCODING_QUOTED_PRINTABLE:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3494)                 $encoded = $this->encodeQP($str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3495)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3496)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3497)                 $this->setError($this->lang('encoding') . $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3498)                 if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3499)                     throw new Exception($this->lang('encoding') . $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3500)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3501)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3502)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3503) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3504)         return $encoded;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3505)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3506) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3507)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3508)      * Encode a header value (not including its label) optimally.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3509)      * Picks shortest of Q, B, or none. Result includes folding if needed.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3510)      * See RFC822 definitions for phrase, comment and text positions.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3511)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3512)      * @param string $str      The header value to encode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3513)      * @param string $position What context the string will be used in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3514)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3515)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3516)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3517)     public function encodeHeader($str, $position = 'text')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3518)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3519)         $matchcount = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3520)         switch (strtolower($position)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3521)             case 'phrase':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3522)                 if (!preg_match('/[\200-\377]/', $str)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3523)                     //Can't use addslashes as we don't know the value of magic_quotes_sybase
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3524)                     $encoded = addcslashes($str, "\0..\37\177\\\"");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3525)                     if (($str === $encoded) && !preg_match('/[^A-Za-z0-9!#$%&\'*+\/=?^_`{|}~ -]/', $str)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3526)                         return $encoded;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3527)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3528) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3529)                     return "\"$encoded\"";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3530)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3531)                 $matchcount = preg_match_all('/[^\040\041\043-\133\135-\176]/', $str, $matches);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3532)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3533)             /* @noinspection PhpMissingBreakStatementInspection */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3534)             case 'comment':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3535)                 $matchcount = preg_match_all('/[()"]/', $str, $matches);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3536)             //fallthrough
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3537)             case 'text':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3538)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3539)                 $matchcount += preg_match_all('/[\000-\010\013\014\016-\037\177-\377]/', $str, $matches);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3540)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3541)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3542) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3543)         if ($this->has8bitChars($str)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3544)             $charset = $this->CharSet;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3545)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3546)             $charset = static::CHARSET_ASCII;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3547)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3548) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3549)         //Q/B encoding adds 8 chars and the charset ("` =?<charset>?[QB]?<content>?=`").
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3550)         $overhead = 8 + strlen($charset);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3551) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3552)         if ('mail' === $this->Mailer) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3553)             $maxlen = static::MAIL_MAX_LINE_LENGTH - $overhead;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3554)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3555)             $maxlen = static::MAX_LINE_LENGTH - $overhead;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3556)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3557) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3558)         //Select the encoding that produces the shortest output and/or prevents corruption.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3559)         if ($matchcount > strlen($str) / 3) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3560)             //More than 1/3 of the content needs encoding, use B-encode.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3561)             $encoding = 'B';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3562)         } elseif ($matchcount > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3563)             //Less than 1/3 of the content needs encoding, use Q-encode.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3564)             $encoding = 'Q';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3565)         } elseif (strlen($str) > $maxlen) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3566)             //No encoding needed, but value exceeds max line length, use Q-encode to prevent corruption.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3567)             $encoding = 'Q';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3568)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3569)             //No reformatting needed
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3570)             $encoding = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3571)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3572) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3573)         switch ($encoding) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3574)             case 'B':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3575)                 if ($this->hasMultiBytes($str)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3576)                     //Use a custom function which correctly encodes and wraps long
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3577)                     //multibyte strings without breaking lines within a character
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3578)                     $encoded = $this->base64EncodeWrapMB($str, "\n");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3579)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3580)                     $encoded = base64_encode($str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3581)                     $maxlen -= $maxlen % 4;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3582)                     $encoded = trim(chunk_split($encoded, $maxlen, "\n"));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3583)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3584)                 $encoded = preg_replace('/^(.*)$/m', ' =?' . $charset . "?$encoding?\\1?=", $encoded);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3585)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3586)             case 'Q':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3587)                 $encoded = $this->encodeQ($str, $position);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3588)                 $encoded = $this->wrapText($encoded, $maxlen, true);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3589)                 $encoded = str_replace('=' . static::$LE, "\n", trim($encoded));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3590)                 $encoded = preg_replace('/^(.*)$/m', ' =?' . $charset . "?$encoding?\\1?=", $encoded);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3591)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3592)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3593)                 return $str;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3594)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3595) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3596)         return trim(static::normalizeBreaks($encoded));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3597)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3598) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3599)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3600)      * Check if a string contains multi-byte characters.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3601)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3602)      * @param string $str multi-byte text to wrap encode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3603)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3604)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3605)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3606)     public function hasMultiBytes($str)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3607)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3608)         if (function_exists('mb_strlen')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3609)             return strlen($str) > mb_strlen($str, $this->CharSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3610)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3611) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3612)         //Assume no multibytes (we can't handle without mbstring functions anyway)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3613)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3614)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3615) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3616)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3617)      * Does a string contain any 8-bit chars (in any charset)?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3618)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3619)      * @param string $text
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3620)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3621)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3622)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3623)     public function has8bitChars($text)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3624)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3625)         return (bool) preg_match('/[\x80-\xFF]/', $text);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3626)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3627) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3628)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3629)      * Encode and wrap long multibyte strings for mail headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3630)      * without breaking lines within a character.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3631)      * Adapted from a function by paravoid.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3632)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3633)      * @see https://www.php.net/manual/en/function.mb-encode-mimeheader.php#60283
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3634)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3635)      * @param string $str       multi-byte text to wrap encode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3636)      * @param string $linebreak string to use as linefeed/end-of-line
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3637)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3638)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3639)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3640)     public function base64EncodeWrapMB($str, $linebreak = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3641)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3642)         $start = '=?' . $this->CharSet . '?B?';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3643)         $end = '?=';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3644)         $encoded = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3645)         if (null === $linebreak) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3646)             $linebreak = static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3647)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3648) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3649)         $mb_length = mb_strlen($str, $this->CharSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3650)         //Each line must have length <= 75, including $start and $end
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3651)         $length = 75 - strlen($start) - strlen($end);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3652)         //Average multi-byte ratio
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3653)         $ratio = $mb_length / strlen($str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3654)         //Base64 has a 4:3 ratio
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3655)         $avgLength = floor($length * $ratio * .75);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3656) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3657)         $offset = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3658)         for ($i = 0; $i < $mb_length; $i += $offset) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3659)             $lookBack = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3660)             do {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3661)                 $offset = $avgLength - $lookBack;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3662)                 $chunk = mb_substr($str, $i, $offset, $this->CharSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3663)                 $chunk = base64_encode($chunk);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3664)                 ++$lookBack;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3665)             } while (strlen($chunk) > $length);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3666)             $encoded .= $chunk . $linebreak;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3667)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3668) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3669)         //Chomp the last linefeed
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3670)         return substr($encoded, 0, -strlen($linebreak));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3671)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3672) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3673)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3674)      * Encode a string in quoted-printable format.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3675)      * According to RFC2045 section 6.7.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3676)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3677)      * @param string $string The text to encode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3678)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3679)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3680)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3681)     public function encodeQP($string)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3682)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3683)         return static::normalizeBreaks(quoted_printable_encode($string));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3684)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3685) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3686)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3687)      * Encode a string using Q encoding.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3688)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3689)      * @see https://www.rfc-editor.org/rfc/rfc2047#section-4.2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3690)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3691)      * @param string $str      the text to encode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3692)      * @param string $position Where the text is going to be used, see the RFC for what that means
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3693)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3694)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3695)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3696)     public function encodeQ($str, $position = 'text')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3697)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3698)         //There should not be any EOL in the string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3699)         $pattern = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3700)         $encoded = str_replace(["\r", "\n"], '', $str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3701)         switch (strtolower($position)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3702)             case 'phrase':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3703)                 //RFC 2047 section 5.3
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3704)                 $pattern = '^A-Za-z0-9!*+\/ -';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3705)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3706)             /*
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3707)              * RFC 2047 section 5.2.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3708)              * Build $pattern without including delimiters and []
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3709)              */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3710)             /* @noinspection PhpMissingBreakStatementInspection */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3711)             case 'comment':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3712)                 $pattern = '\(\)"';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3713)             /* Intentional fall through */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3714)             case 'text':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3715)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3716)                 //RFC 2047 section 5.1
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3717)                 //Replace every high ascii, control, =, ? and _ characters
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3718)                 $pattern = '\000-\011\013\014\016-\037\075\077\137\177-\377' . $pattern;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3719)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3720)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3721)         $matches = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3722)         if (preg_match_all("/[{$pattern}]/", $encoded, $matches)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3723)             //If the string contains an '=', make sure it's the first thing we replace
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3724)             //so as to avoid double-encoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3725)             $eqkey = array_search('=', $matches[0], true);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3726)             if (false !== $eqkey) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3727)                 unset($matches[0][$eqkey]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3728)                 array_unshift($matches[0], '=');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3729)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3730)             foreach (array_unique($matches[0]) as $char) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3731)                 $encoded = str_replace($char, '=' . sprintf('%02X', ord($char)), $encoded);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3732)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3733)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3734)         //Replace spaces with _ (more readable than =20)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3735)         //RFC 2047 section 4.2(2)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3736)         return str_replace(' ', '_', $encoded);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3737)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3738) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3739)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3740)      * Add a string or binary attachment (non-filesystem).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3741)      * This method can be used to attach ascii or binary data,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3742)      * such as a BLOB record from a database.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3743)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3744)      * @param string $string      String attachment data
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3745)      * @param string $filename    Name of the attachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3746)      * @param string $encoding    File encoding (see $Encoding)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3747)      * @param string $type        File extension (MIME) type
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3748)      * @param string $disposition Disposition to use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3749)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3750)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3751)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3752)      * @return bool True on successfully adding an attachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3753)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3754)     public function addStringAttachment(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3755)         $string,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3756)         $filename,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3757)         $encoding = self::ENCODING_BASE64,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3758)         $type = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3759)         $disposition = 'attachment'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3760)     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3761)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3762)             //If a MIME type is not specified, try to work it out from the file name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3763)             if ('' === $type) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3764)                 $type = static::filenameToType($filename);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3765)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3766) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3767)             if (!$this->validateEncoding($encoding)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3768)                 throw new Exception($this->lang('encoding') . $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3769)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3770) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3771)             //Append to $attachment array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3772)             $this->attachment[] = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3773)                 0 => $string,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3774)                 1 => $filename,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3775)                 2 => static::mb_pathinfo($filename, PATHINFO_BASENAME),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3776)                 3 => $encoding,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3777)                 4 => $type,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3778)                 5 => true, //isStringAttachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3779)                 6 => $disposition,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3780)                 7 => 0,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3781)             ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3782)         } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3783)             $this->setError($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3784)             $this->edebug($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3785)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3786)                 throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3787)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3788) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3789)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3790)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3791) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3792)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3793)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3794) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3795)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3796)      * Add an embedded (inline) attachment from a file.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3797)      * This can include images, sounds, and just about any other document type.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3798)      * These differ from 'regular' attachments in that they are intended to be
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3799)      * displayed inline with the message, not just attached for download.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3800)      * This is used in HTML messages that embed the images
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3801)      * the HTML refers to using the `$cid` value in `img` tags, for example `<img src="cid:mylogo">`.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3802)      * Never use a user-supplied path to a file!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3803)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3804)      * @param string $path        Path to the attachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3805)      * @param string $cid         Content ID of the attachment; Use this to reference
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3806)      *                            the content when using an embedded image in HTML
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3807)      * @param string $name        Overrides the attachment filename
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3808)      * @param string $encoding    File encoding (see $Encoding) defaults to `base64`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3809)      * @param string $type        File MIME type (by default mapped from the `$path` filename's extension)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3810)      * @param string $disposition Disposition to use: `inline` (default) or `attachment`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3811)      *                            (unlikely you want this – {@see `addAttachment()`} instead)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3812)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3813)      * @return bool True on successfully adding an attachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3814)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3815)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3816)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3817)     public function addEmbeddedImage(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3818)         $path,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3819)         $cid,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3820)         $name = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3821)         $encoding = self::ENCODING_BASE64,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3822)         $type = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3823)         $disposition = 'inline'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3824)     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3825)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3826)             if (!static::fileIsAccessible($path)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3827)                 throw new Exception($this->lang('file_access') . $path, self::STOP_CONTINUE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3828)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3829) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3830)             //If a MIME type is not specified, try to work it out from the file name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3831)             if ('' === $type) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3832)                 $type = static::filenameToType($path);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3833)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3834) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3835)             if (!$this->validateEncoding($encoding)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3836)                 throw new Exception($this->lang('encoding') . $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3837)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3838) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3839)             $filename = (string) static::mb_pathinfo($path, PATHINFO_BASENAME);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3840)             if ('' === $name) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3841)                 $name = $filename;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3842)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3843) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3844)             //Append to $attachment array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3845)             $this->attachment[] = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3846)                 0 => $path,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3847)                 1 => $filename,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3848)                 2 => $name,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3849)                 3 => $encoding,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3850)                 4 => $type,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3851)                 5 => false, //isStringAttachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3852)                 6 => $disposition,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3853)                 7 => $cid,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3854)             ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3855)         } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3856)             $this->setError($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3857)             $this->edebug($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3858)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3859)                 throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3860)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3861) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3862)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3863)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3864) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3865)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3866)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3867) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3868)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3869)      * Add an embedded stringified attachment.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3870)      * This can include images, sounds, and just about any other document type.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3871)      * If your filename doesn't contain an extension, be sure to set the $type to an appropriate MIME type.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3872)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3873)      * @param string $string      The attachment binary data
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3874)      * @param string $cid         Content ID of the attachment; Use this to reference
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3875)      *                            the content when using an embedded image in HTML
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3876)      * @param string $name        A filename for the attachment. If this contains an extension,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3877)      *                            PHPMailer will attempt to set a MIME type for the attachment.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3878)      *                            For example 'file.jpg' would get an 'image/jpeg' MIME type.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3879)      * @param string $encoding    File encoding (see $Encoding), defaults to 'base64'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3880)      * @param string $type        MIME type - will be used in preference to any automatically derived type
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3881)      * @param string $disposition Disposition to use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3882)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3883)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3884)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3885)      * @return bool True on successfully adding an attachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3886)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3887)     public function addStringEmbeddedImage(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3888)         $string,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3889)         $cid,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3890)         $name = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3891)         $encoding = self::ENCODING_BASE64,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3892)         $type = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3893)         $disposition = 'inline'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3894)     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3895)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3896)             //If a MIME type is not specified, try to work it out from the name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3897)             if ('' === $type && !empty($name)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3898)                 $type = static::filenameToType($name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3899)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3900) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3901)             if (!$this->validateEncoding($encoding)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3902)                 throw new Exception($this->lang('encoding') . $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3903)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3904) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3905)             //Append to $attachment array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3906)             $this->attachment[] = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3907)                 0 => $string,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3908)                 1 => $name,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3909)                 2 => $name,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3910)                 3 => $encoding,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3911)                 4 => $type,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3912)                 5 => true, //isStringAttachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3913)                 6 => $disposition,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3914)                 7 => $cid,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3915)             ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3916)         } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3917)             $this->setError($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3918)             $this->edebug($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3919)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3920)                 throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3921)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3922) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3923)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3924)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3925) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3926)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3927)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3928) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3929)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3930)      * Validate encodings.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3931)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3932)      * @param string $encoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3933)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3934)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3935)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3936)     protected function validateEncoding($encoding)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3937)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3938)         return in_array(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3939)             $encoding,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3940)             [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3941)                 self::ENCODING_7BIT,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3942)                 self::ENCODING_QUOTED_PRINTABLE,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3943)                 self::ENCODING_BASE64,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3944)                 self::ENCODING_8BIT,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3945)                 self::ENCODING_BINARY,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3946)             ],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3947)             true
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3948)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3949)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3950) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3951)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3952)      * Check if an embedded attachment is present with this cid.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3953)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3954)      * @param string $cid
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3955)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3956)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3957)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3958)     protected function cidExists($cid)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3959)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3960)         foreach ($this->attachment as $attachment) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3961)             if ('inline' === $attachment[6] && $cid === $attachment[7]) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3962)                 return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3963)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3964)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3965) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3966)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3967)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3968) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3969)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3970)      * Check if an inline attachment is present.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3971)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3972)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3973)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3974)     public function inlineImageExists()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3975)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3976)         foreach ($this->attachment as $attachment) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3977)             if ('inline' === $attachment[6]) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3978)                 return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3979)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3980)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3981) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3982)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3983)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3984) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3985)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3986)      * Check if an attachment (non-inline) is present.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3987)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3988)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3989)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3990)     public function attachmentExists()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3991)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3992)         foreach ($this->attachment as $attachment) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3993)             if ('attachment' === $attachment[6]) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3994)                 return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3995)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3996)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3997) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3998)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3999)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4000) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4001)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4002)      * Check if this message has an alternative body set.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4003)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4004)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4005)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4006)     public function alternativeExists()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4007)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4008)         return !empty($this->AltBody);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4009)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4010) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4011)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4012)      * Clear queued addresses of given kind.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4013)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4014)      * @param string $kind 'to', 'cc', or 'bcc'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4015)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4016)     public function clearQueuedAddresses($kind)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4017)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4018)         $this->RecipientsQueue = array_filter(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4019)             $this->RecipientsQueue,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4020)             static function ($params) use ($kind) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4021)                 return $params[0] !== $kind;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4022)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4023)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4024)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4025) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4026)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4027)      * Clear all To recipients.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4028)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4029)     public function clearAddresses()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4030)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4031)         foreach ($this->to as $to) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4032)             unset($this->all_recipients[strtolower($to[0])]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4033)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4034)         $this->to = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4035)         $this->clearQueuedAddresses('to');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4036)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4037) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4038)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4039)      * Clear all CC recipients.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4040)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4041)     public function clearCCs()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4042)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4043)         foreach ($this->cc as $cc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4044)             unset($this->all_recipients[strtolower($cc[0])]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4045)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4046)         $this->cc = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4047)         $this->clearQueuedAddresses('cc');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4048)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4049) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4050)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4051)      * Clear all BCC recipients.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4052)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4053)     public function clearBCCs()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4054)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4055)         foreach ($this->bcc as $bcc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4056)             unset($this->all_recipients[strtolower($bcc[0])]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4057)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4058)         $this->bcc = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4059)         $this->clearQueuedAddresses('bcc');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4060)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4061) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4062)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4063)      * Clear all ReplyTo recipients.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4064)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4065)     public function clearReplyTos()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4066)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4067)         $this->ReplyTo = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4068)         $this->ReplyToQueue = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4069)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4070) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4071)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4072)      * Clear all recipient types.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4073)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4074)     public function clearAllRecipients()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4075)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4076)         $this->to = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4077)         $this->cc = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4078)         $this->bcc = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4079)         $this->all_recipients = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4080)         $this->RecipientsQueue = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4081)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4082) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4083)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4084)      * Clear all filesystem, string, and binary attachments.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4085)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4086)     public function clearAttachments()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4087)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4088)         $this->attachment = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4089)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4090) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4091)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4092)      * Clear all custom headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4093)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4094)     public function clearCustomHeaders()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4095)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4096)         $this->CustomHeader = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4097)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4098) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4099)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4100)      * Clear a specific custom header by name or name and value.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4101)      * $name value can be overloaded to contain
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4102)      * both header name and value (name:value).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4103)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4104)      * @param string      $name  Custom header name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4105)      * @param string|null $value Header value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4106)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4107)      * @return bool True if a header was replaced successfully
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4108)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4109)     public function clearCustomHeader($name, $value = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4110)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4111)         if (null === $value && strpos($name, ':') !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4112)             //Value passed in as name:value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4113)             list($name, $value) = explode(':', $name, 2);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4114)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4115)         $name = trim($name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4116)         $value = (null === $value) ? null : trim($value);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4117) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4118)         foreach ($this->CustomHeader as $k => $pair) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4119)             if ($pair[0] == $name) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4120)                 // We remove the header if the value is not provided or it matches.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4121)                 if (null === $value ||  $pair[1] == $value) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4122)                     unset($this->CustomHeader[$k]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4123)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4124)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4125)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4126) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4127)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4128)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4129) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4130)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4131)      * Replace a custom header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4132)      * $name value can be overloaded to contain
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4133)      * both header name and value (name:value).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4134)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4135)      * @param string      $name  Custom header name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4136)      * @param string|null $value Header value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4137)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4138)      * @return bool True if a header was replaced successfully
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4139)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4140)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4141)     public function replaceCustomHeader($name, $value = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4142)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4143)         if (null === $value && strpos($name, ':') !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4144)             //Value passed in as name:value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4145)             list($name, $value) = explode(':', $name, 2);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4146)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4147)         $name = trim($name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4148)         $value = (null === $value) ? '' : trim($value);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4149) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4150)         $replaced = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4151)         foreach ($this->CustomHeader as $k => $pair) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4152)             if ($pair[0] == $name) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4153)                 if ($replaced) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4154)                     unset($this->CustomHeader[$k]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4155)                     continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4156)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4157)                 if (strpbrk($name . $value, "\r\n") !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4158)                     if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4159)                         throw new Exception($this->lang('invalid_header'));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4160)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4161) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4162)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4163)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4164)                 $this->CustomHeader[$k] = [$name, $value];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4165)                 $replaced = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4166)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4167)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4168) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4169)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4170)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4171) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4172)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4173)      * Add an error message to the error container.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4174)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4175)      * @param string $msg
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4176)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4177)     protected function setError($msg)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4178)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4179)         ++$this->error_count;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4180)         if ('smtp' === $this->Mailer && null !== $this->smtp) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4181)             $lasterror = $this->smtp->getError();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4182)             if (!empty($lasterror['error'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4183)                 $msg .= $this->lang('smtp_error') . $lasterror['error'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4184)                 if (!empty($lasterror['detail'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4185)                     $msg .= ' ' . $this->lang('smtp_detail') . $lasterror['detail'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4186)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4187)                 if (!empty($lasterror['smtp_code'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4188)                     $msg .= ' ' . $this->lang('smtp_code') . $lasterror['smtp_code'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4189)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4190)                 if (!empty($lasterror['smtp_code_ex'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4191)                     $msg .= ' ' . $this->lang('smtp_code_ex') . $lasterror['smtp_code_ex'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4192)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4193)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4194)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4195)         $this->ErrorInfo = $msg;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4196)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4197) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4198)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4199)      * Return an RFC 822 formatted date.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4200)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4201)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4202)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4203)     public static function rfcDate()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4204)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4205)         //Set the time zone to whatever the default is to avoid 500 errors
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4206)         //Will default to UTC if it's not set properly in php.ini
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4207)         date_default_timezone_set(@date_default_timezone_get());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4208) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4209)         return date('D, j M Y H:i:s O');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4210)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4211) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4212)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4213)      * Get the server hostname.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4214)      * Returns 'localhost.localdomain' if unknown.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4215)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4216)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4217)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4218)     protected function serverHostname()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4219)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4220)         $result = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4221)         if (!empty($this->Hostname)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4222)             $result = $this->Hostname;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4223)         } elseif (isset($_SERVER) && array_key_exists('SERVER_NAME', $_SERVER)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4224)             $result = $_SERVER['SERVER_NAME'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4225)         } elseif (function_exists('gethostname') && gethostname() !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4226)             $result = gethostname();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4227)         } elseif (php_uname('n') !== '') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4228)             $result = php_uname('n');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4229)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4230)         if (!static::isValidHost($result)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4231)             return 'localhost.localdomain';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4232)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4233) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4234)         return $result;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4235)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4236) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4237)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4238)      * Validate whether a string contains a valid value to use as a hostname or IP address.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4239)      * IPv6 addresses must include [], e.g. `[::1]`, not just `::1`.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4240)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4241)      * @param string $host The host name or IP address to check
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4242)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4243)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4244)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4245)     public static function isValidHost($host)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4246)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4247)         //Simple syntax limits
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4248)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4249)             empty($host)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4250)             || !is_string($host)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4251)             || strlen($host) > 256
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4252)             || !preg_match('/^([a-z\d.-]*|\[[a-f\d:]+\])$/i', $host)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4253)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4254)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4255)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4256)         //Looks like a bracketed IPv6 address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4257)         if (strlen($host) > 2 && substr($host, 0, 1) === '[' && substr($host, -1, 1) === ']') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4258)             return filter_var(substr($host, 1, -1), FILTER_VALIDATE_IP, FILTER_FLAG_IPV6) !== false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4259)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4260)         //If removing all the dots results in a numeric string, it must be an IPv4 address.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4261)         //Need to check this first because otherwise things like `999.0.0.0` are considered valid host names
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4262)         if (is_numeric(str_replace('.', '', $host))) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4263)             //Is it a valid IPv4 address?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4264)             return filter_var($host, FILTER_VALIDATE_IP, FILTER_FLAG_IPV4) !== false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4265)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4266)         //Is it a syntactically valid hostname (when embedded in a URL)?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4267)         return filter_var('https://' . $host, FILTER_VALIDATE_URL) !== false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4268)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4269) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4270)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4271)      * Get an error message in the current language.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4272)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4273)      * @param string $key
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4274)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4275)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4276)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4277)     protected function lang($key)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4278)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4279)         if (count($this->language) < 1) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4280)             $this->setLanguage(); //Set the default language
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4281)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4282) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4283)         if (array_key_exists($key, $this->language)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4284)             if ('smtp_connect_failed' === $key) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4285)                 //Include a link to troubleshooting docs on SMTP connection failure.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4286)                 //This is by far the biggest cause of support questions
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4287)                 //but it's usually not PHPMailer's fault.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4288)                 return $this->language[$key] . ' https://github.com/PHPMailer/PHPMailer/wiki/Troubleshooting';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4289)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4290) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4291)             return $this->language[$key];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4292)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4293) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4294)         //Return the key as a fallback
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4295)         return $key;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4296)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4297) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4298)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4299)      * Build an error message starting with a generic one and adding details if possible.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4300)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4301)      * @param string $base_key
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4302)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4303)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4304)     private function getSmtpErrorMessage($base_key)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4305)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4306)         $message = $this->lang($base_key);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4307)         $error = $this->smtp->getError();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4308)         if (!empty($error['error'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4309)             $message .= ' ' . $error['error'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4310)             if (!empty($error['detail'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4311)                 $message .= ' ' . $error['detail'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4312)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4313)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4314) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4315)         return $message;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4316)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4317) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4318)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4319)      * Check if an error occurred.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4320)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4321)      * @return bool True if an error did occur
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4322)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4323)     public function isError()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4324)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4325)         return $this->error_count > 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4326)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4327) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4328)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4329)      * Add a custom header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4330)      * $name value can be overloaded to contain
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4331)      * both header name and value (name:value).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4332)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4333)      * @param string      $name  Custom header name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4334)      * @param string|null $value Header value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4335)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4336)      * @return bool True if a header was set successfully
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4337)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4338)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4339)     public function addCustomHeader($name, $value = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4340)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4341)         if (null === $value && strpos($name, ':') !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4342)             //Value passed in as name:value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4343)             list($name, $value) = explode(':', $name, 2);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4344)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4345)         $name = trim($name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4346)         $value = (null === $value) ? '' : trim($value);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4347)         //Ensure name is not empty, and that neither name nor value contain line breaks
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4348)         if (empty($name) || strpbrk($name . $value, "\r\n") !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4349)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4350)                 throw new Exception($this->lang('invalid_header'));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4351)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4352) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4353)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4354)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4355)         $this->CustomHeader[] = [$name, $value];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4356) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4357)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4358)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4359) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4360)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4361)      * Returns all custom headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4362)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4363)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4364)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4365)     public function getCustomHeaders()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4366)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4367)         return $this->CustomHeader;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4368)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4369) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4370)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4371)      * Create a message body from an HTML string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4372)      * Automatically inlines images and creates a plain-text version by converting the HTML,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4373)      * overwriting any existing values in Body and AltBody.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4374)      * Do not source $message content from user input!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4375)      * $basedir is prepended when handling relative URLs, e.g. <img src="/images/a.png"> and must not be empty
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4376)      * will look for an image file in $basedir/images/a.png and convert it to inline.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4377)      * If you don't provide a $basedir, relative paths will be left untouched (and thus probably break in email)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4378)      * Converts data-uri images into embedded attachments.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4379)      * If you don't want to apply these transformations to your HTML, just set Body and AltBody directly.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4380)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4381)      * @param string        $message  HTML message string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4382)      * @param string        $basedir  Absolute path to a base directory to prepend to relative paths to images
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4383)      * @param bool|callable $advanced Whether to use the internal HTML to text converter
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4384)      *                                or your own custom converter
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4385)      * @return string The transformed message body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4386)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4387)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4388)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4389)      * @see PHPMailer::html2text()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4390)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4391)     public function msgHTML($message, $basedir = '', $advanced = false)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4392)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4393)         preg_match_all('/(?<!-)(src|background)=["\'](.*)["\']/Ui', $message, $images);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4394)         if (array_key_exists(2, $images)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4395)             if (strlen($basedir) > 1 && '/' !== substr($basedir, -1)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4396)                 //Ensure $basedir has a trailing /
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4397)                 $basedir .= '/';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4398)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4399)             foreach ($images[2] as $imgindex => $url) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4400)                 //Convert data URIs into embedded images
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4401)                 //e.g. "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4402)                 $match = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4403)                 if (preg_match('#^data:(image/(?:jpe?g|gif|png));?(base64)?,(.+)#', $url, $match)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4404)                     if (count($match) === 4 && static::ENCODING_BASE64 === $match[2]) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4405)                         $data = base64_decode($match[3]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4406)                     } elseif ('' === $match[2]) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4407)                         $data = rawurldecode($match[3]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4408)                     } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4409)                         //Not recognised so leave it alone
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4410)                         continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4411)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4412)                     //Hash the decoded data, not the URL, so that the same data-URI image used in multiple places
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4413)                     //will only be embedded once, even if it used a different encoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4414)                     $cid = substr(hash('sha256', $data), 0, 32) . '@phpmailer.0'; //RFC2392 S 2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4415) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4416)                     if (!$this->cidExists($cid)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4417)                         $this->addStringEmbeddedImage(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4418)                             $data,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4419)                             $cid,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4420)                             'embed' . $imgindex,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4421)                             static::ENCODING_BASE64,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4422)                             $match[1]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4423)                         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4424)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4425)                     $message = str_replace(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4426)                         $images[0][$imgindex],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4427)                         $images[1][$imgindex] . '="cid:' . $cid . '"',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4428)                         $message
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4429)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4430)                     continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4431)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4432)                 if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4433)                     //Only process relative URLs if a basedir is provided (i.e. no absolute local paths)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4434)                     !empty($basedir)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4435)                     //Ignore URLs containing parent dir traversal (..)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4436)                     && (strpos($url, '..') === false)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4437)                     //Do not change urls that are already inline images
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4438)                     && 0 !== strpos($url, 'cid:')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4439)                     //Do not change absolute URLs, including anonymous protocol
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4440)                     && !preg_match('#^[a-z][a-z0-9+.-]*:?//#i', $url)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4441)                 ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4442)                     $filename = static::mb_pathinfo($url, PATHINFO_BASENAME);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4443)                     $directory = dirname($url);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4444)                     if ('.' === $directory) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4445)                         $directory = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4446)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4447)                     //RFC2392 S 2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4448)                     $cid = substr(hash('sha256', $url), 0, 32) . '@phpmailer.0';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4449)                     if (strlen($basedir) > 1 && '/' !== substr($basedir, -1)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4450)                         $basedir .= '/';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4451)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4452)                     if (strlen($directory) > 1 && '/' !== substr($directory, -1)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4453)                         $directory .= '/';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4454)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4455)                     if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4456)                         $this->addEmbeddedImage(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4457)                             $basedir . $directory . $filename,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4458)                             $cid,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4459)                             $filename,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4460)                             static::ENCODING_BASE64,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4461)                             static::_mime_types((string) static::mb_pathinfo($filename, PATHINFO_EXTENSION))
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4462)                         )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4463)                     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4464)                         $message = preg_replace(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4465)                             '/' . $images[1][$imgindex] . '=["\']' . preg_quote($url, '/') . '["\']/Ui',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4466)                             $images[1][$imgindex] . '="cid:' . $cid . '"',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4467)                             $message
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4468)                         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4469)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4470)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4471)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4472)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4473)         $this->isHTML();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4474)         //Convert all message body line breaks to LE, makes quoted-printable encoding work much better
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4475)         $this->Body = static::normalizeBreaks($message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4476)         $this->AltBody = static::normalizeBreaks($this->html2text($message, $advanced));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4477)         if (!$this->alternativeExists()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4478)             $this->AltBody = 'This is an HTML-only message. To view it, activate HTML in your email application.'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4479)                 . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4480)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4481) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4482)         return $this->Body;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4483)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4484) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4485)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4486)      * Convert an HTML string into plain text.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4487)      * This is used by msgHTML().
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4488)      * Note - older versions of this function used a bundled advanced converter
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4489)      * which was removed for license reasons in #232.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4490)      * Example usage:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4491)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4492)      * ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4493)      * //Use default conversion
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4494)      * $plain = $mail->html2text($html);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4495)      * //Use your own custom converter
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4496)      * $plain = $mail->html2text($html, function($html) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4497)      *     $converter = new MyHtml2text($html);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4498)      *     return $converter->get_text();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4499)      * });
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4500)      * ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4501)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4502)      * @param string        $html     The HTML text to convert
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4503)      * @param bool|callable $advanced Any boolean value to use the internal converter,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4504)      *                                or provide your own callable for custom conversion.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4505)      *                                *Never* pass user-supplied data into this parameter
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4506)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4507)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4508)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4509)     public function html2text($html, $advanced = false)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4510)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4511)         if (is_callable($advanced)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4512)             return call_user_func($advanced, $html);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4513)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4514) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4515)         return html_entity_decode(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4516)             trim(strip_tags(preg_replace('/<(head|title|style|script)[^>]*>.*?<\/\\1>/si', '', $html))),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4517)             ENT_QUOTES,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4518)             $this->CharSet
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4519)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4520)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4521) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4522)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4523)      * Get the MIME type for a file extension.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4524)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4525)      * @param string $ext File extension
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4526)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4527)      * @return string MIME type of file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4528)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4529)     public static function _mime_types($ext = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4530)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4531)         $mimes = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4532)             'xl' => 'application/excel',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4533)             'js' => 'application/javascript',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4534)             'hqx' => 'application/mac-binhex40',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4535)             'cpt' => 'application/mac-compactpro',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4536)             'bin' => 'application/macbinary',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4537)             'doc' => 'application/msword',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4538)             'word' => 'application/msword',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4539)             'xlsx' => 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4540)             'xltx' => 'application/vnd.openxmlformats-officedocument.spreadsheetml.template',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4541)             'potx' => 'application/vnd.openxmlformats-officedocument.presentationml.template',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4542)             'ppsx' => 'application/vnd.openxmlformats-officedocument.presentationml.slideshow',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4543)             'pptx' => 'application/vnd.openxmlformats-officedocument.presentationml.presentation',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4544)             'sldx' => 'application/vnd.openxmlformats-officedocument.presentationml.slide',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4545)             'docx' => 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4546)             'dotx' => 'application/vnd.openxmlformats-officedocument.wordprocessingml.template',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4547)             'xlam' => 'application/vnd.ms-excel.addin.macroEnabled.12',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4548)             'xlsb' => 'application/vnd.ms-excel.sheet.binary.macroEnabled.12',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4549)             'class' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4550)             'dll' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4551)             'dms' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4552)             'exe' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4553)             'lha' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4554)             'lzh' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4555)             'psd' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4556)             'sea' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4557)             'so' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4558)             'oda' => 'application/oda',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4559)             'pdf' => 'application/pdf',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4560)             'ai' => 'application/postscript',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4561)             'eps' => 'application/postscript',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4562)             'ps' => 'application/postscript',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4563)             'smi' => 'application/smil',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4564)             'smil' => 'application/smil',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4565)             'mif' => 'application/vnd.mif',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4566)             'xls' => 'application/vnd.ms-excel',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4567)             'ppt' => 'application/vnd.ms-powerpoint',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4568)             'wbxml' => 'application/vnd.wap.wbxml',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4569)             'wmlc' => 'application/vnd.wap.wmlc',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4570)             'dcr' => 'application/x-director',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4571)             'dir' => 'application/x-director',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4572)             'dxr' => 'application/x-director',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4573)             'dvi' => 'application/x-dvi',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4574)             'gtar' => 'application/x-gtar',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4575)             'php3' => 'application/x-httpd-php',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4576)             'php4' => 'application/x-httpd-php',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4577)             'php' => 'application/x-httpd-php',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4578)             'phtml' => 'application/x-httpd-php',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4579)             'phps' => 'application/x-httpd-php-source',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4580)             'swf' => 'application/x-shockwave-flash',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4581)             'sit' => 'application/x-stuffit',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4582)             'tar' => 'application/x-tar',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4583)             'tgz' => 'application/x-tar',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4584)             'xht' => 'application/xhtml+xml',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4585)             'xhtml' => 'application/xhtml+xml',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4586)             'zip' => 'application/zip',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4587)             'mid' => 'audio/midi',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4588)             'midi' => 'audio/midi',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4589)             'mp2' => 'audio/mpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4590)             'mp3' => 'audio/mpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4591)             'm4a' => 'audio/mp4',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4592)             'mpga' => 'audio/mpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4593)             'aif' => 'audio/x-aiff',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4594)             'aifc' => 'audio/x-aiff',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4595)             'aiff' => 'audio/x-aiff',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4596)             'ram' => 'audio/x-pn-realaudio',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4597)             'rm' => 'audio/x-pn-realaudio',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4598)             'rpm' => 'audio/x-pn-realaudio-plugin',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4599)             'ra' => 'audio/x-realaudio',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4600)             'wav' => 'audio/x-wav',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4601)             'mka' => 'audio/x-matroska',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4602)             'bmp' => 'image/bmp',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4603)             'gif' => 'image/gif',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4604)             'jpeg' => 'image/jpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4605)             'jpe' => 'image/jpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4606)             'jpg' => 'image/jpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4607)             'png' => 'image/png',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4608)             'tiff' => 'image/tiff',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4609)             'tif' => 'image/tiff',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4610)             'webp' => 'image/webp',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4611)             'avif' => 'image/avif',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4612)             'heif' => 'image/heif',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4613)             'heifs' => 'image/heif-sequence',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4614)             'heic' => 'image/heic',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4615)             'heics' => 'image/heic-sequence',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4616)             'eml' => 'message/rfc822',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4617)             'css' => 'text/css',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4618)             'html' => 'text/html',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4619)             'htm' => 'text/html',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4620)             'shtml' => 'text/html',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4621)             'log' => 'text/plain',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4622)             'text' => 'text/plain',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4623)             'txt' => 'text/plain',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4624)             'rtx' => 'text/richtext',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4625)             'rtf' => 'text/rtf',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4626)             'vcf' => 'text/vcard',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4627)             'vcard' => 'text/vcard',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4628)             'ics' => 'text/calendar',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4629)             'xml' => 'text/xml',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4630)             'xsl' => 'text/xml',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4631)             'csv' => 'text/csv',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4632)             'wmv' => 'video/x-ms-wmv',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4633)             'mpeg' => 'video/mpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4634)             'mpe' => 'video/mpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4635)             'mpg' => 'video/mpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4636)             'mp4' => 'video/mp4',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4637)             'm4v' => 'video/mp4',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4638)             'mov' => 'video/quicktime',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4639)             'qt' => 'video/quicktime',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4640)             'rv' => 'video/vnd.rn-realvideo',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4641)             'avi' => 'video/x-msvideo',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4642)             'movie' => 'video/x-sgi-movie',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4643)             'webm' => 'video/webm',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4644)             'mkv' => 'video/x-matroska',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4645)         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4646)         $ext = strtolower($ext);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4647)         if (array_key_exists($ext, $mimes)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4648)             return $mimes[$ext];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4649)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4650) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4651)         return 'application/octet-stream';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4652)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4653) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4654)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4655)      * Map a file name to a MIME type.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4656)      * Defaults to 'application/octet-stream', i.e.. arbitrary binary data.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4657)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4658)      * @param string $filename A file name or full path, does not need to exist as a file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4659)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4660)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4661)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4662)     public static function filenameToType($filename)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4663)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4664)         //In case the path is a URL, strip any query string before getting extension
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4665)         $qpos = strpos($filename, '?');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4666)         if (false !== $qpos) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4667)             $filename = substr($filename, 0, $qpos);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4668)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4669)         $ext = static::mb_pathinfo($filename, PATHINFO_EXTENSION);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4670) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4671)         return static::_mime_types($ext);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4672)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4673) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4674)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4675)      * Multi-byte-safe pathinfo replacement.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4676)      * Drop-in replacement for pathinfo(), but multibyte- and cross-platform-safe.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4677)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4678)      * @see https://www.php.net/manual/en/function.pathinfo.php#107461
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4679)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4680)      * @param string     $path    A filename or path, does not need to exist as a file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4681)      * @param int|string $options Either a PATHINFO_* constant,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4682)      *                            or a string name to return only the specified piece
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4683)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4684)      * @return string|array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4685)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4686)     public static function mb_pathinfo($path, $options = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4687)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4688)         $ret = ['dirname' => '', 'basename' => '', 'extension' => '', 'filename' => ''];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4689)         $pathinfo = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4690)         if (preg_match('#^(.*?)[\\\\/]*(([^/\\\\]*?)(\.([^.\\\\/]+?)|))[\\\\/.]*$#m', $path, $pathinfo)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4691)             if (array_key_exists(1, $pathinfo)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4692)                 $ret['dirname'] = $pathinfo[1];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4693)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4694)             if (array_key_exists(2, $pathinfo)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4695)                 $ret['basename'] = $pathinfo[2];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4696)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4697)             if (array_key_exists(5, $pathinfo)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4698)                 $ret['extension'] = $pathinfo[5];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4699)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4700)             if (array_key_exists(3, $pathinfo)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4701)                 $ret['filename'] = $pathinfo[3];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4702)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4703)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4704)         switch ($options) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4705)             case PATHINFO_DIRNAME:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4706)             case 'dirname':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4707)                 return $ret['dirname'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4708)             case PATHINFO_BASENAME:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4709)             case 'basename':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4710)                 return $ret['basename'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4711)             case PATHINFO_EXTENSION:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4712)             case 'extension':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4713)                 return $ret['extension'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4714)             case PATHINFO_FILENAME:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4715)             case 'filename':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4716)                 return $ret['filename'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4717)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4718)                 return $ret;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4719)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4720)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4721) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4722)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4723)      * Set or reset instance properties.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4724)      * You should avoid this function - it's more verbose, less efficient, more error-prone and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4725)      * harder to debug than setting properties directly.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4726)      * Usage Example:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4727)      * `$mail->set('SMTPSecure', static::ENCRYPTION_STARTTLS);`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4728)      *   is the same as:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4729)      * `$mail->SMTPSecure = static::ENCRYPTION_STARTTLS;`.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4730)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4731)      * @param string $name  The property name to set
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4732)      * @param mixed  $value The value to set the property to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4733)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4734)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4735)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4736)     public function set($name, $value = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4737)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4738)         if (property_exists($this, $name)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4739)             $this->{$name} = $value;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4740) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4741)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4742)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4743)         $this->setError($this->lang('variable_set') . $name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4744) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4745)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4746)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4747) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4748)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4749)      * Strip newlines to prevent header injection.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4750)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4751)      * @param string $str
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4752)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4753)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4754)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4755)     public function secureHeader($str)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4756)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4757)         return trim(str_replace(["\r", "\n"], '', $str));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4758)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4759) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4760)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4761)      * Normalize line breaks in a string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4762)      * Converts UNIX LF, Mac CR and Windows CRLF line breaks into a single line break format.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4763)      * Defaults to CRLF (for message bodies) and preserves consecutive breaks.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4764)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4765)      * @param string $text
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4766)      * @param string $breaktype What kind of line break to use; defaults to static::$LE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4767)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4768)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4769)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4770)     public static function normalizeBreaks($text, $breaktype = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4771)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4772)         if (null === $breaktype) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4773)             $breaktype = static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4774)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4775)         //Normalise to \n
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4776)         $text = str_replace([self::CRLF, "\r"], "\n", $text);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4777)         //Now convert LE as needed
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4778)         if ("\n" !== $breaktype) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4779)             $text = str_replace("\n", $breaktype, $text);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4780)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4781) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4782)         return $text;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4783)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4784) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4785)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4786)      * Remove trailing whitespace from a string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4787)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4788)      * @param string $text
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4789)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4790)      * @return string The text to remove whitespace from
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4791)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4792)     public static function stripTrailingWSP($text)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4793)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4794)         return rtrim($text, " \r\n\t");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4795)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4796) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4797)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4798)      * Strip trailing line breaks from a string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4799)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4800)      * @param string $text
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4801)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4802)      * @return string The text to remove breaks from
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4803)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4804)     public static function stripTrailingBreaks($text)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4805)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4806)         return rtrim($text, "\r\n");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4807)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4808) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4809)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4810)      * Return the current line break format string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4811)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4812)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4813)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4814)     public static function getLE()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4815)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4816)         return static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4817)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4818) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4819)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4820)      * Set the line break format string, e.g. "\r\n".
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4821)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4822)      * @param string $le
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4823)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4824)     protected static function setLE($le)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4825)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4826)         static::$LE = $le;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4827)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4828) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4829)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4830)      * Set the public and private key files and password for S/MIME signing.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4831)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4832)      * @param string $cert_filename
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4833)      * @param string $key_filename
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4834)      * @param string $key_pass            Password for private key
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4835)      * @param string $extracerts_filename Optional path to chain certificate
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4836)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4837)     public function sign($cert_filename, $key_filename, $key_pass, $extracerts_filename = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4838)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4839)         $this->sign_cert_file = $cert_filename;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4840)         $this->sign_key_file = $key_filename;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4841)         $this->sign_key_pass = $key_pass;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4842)         $this->sign_extracerts_file = $extracerts_filename;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4843)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4844) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4845)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4846)      * Quoted-Printable-encode a DKIM header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4847)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4848)      * @param string $txt
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4849)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4850)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4851)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4852)     public function DKIM_QP($txt)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4853)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4854)         $line = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4855)         $len = strlen($txt);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4856)         for ($i = 0; $i < $len; ++$i) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4857)             $ord = ord($txt[$i]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4858)             if (((0x21 <= $ord) && ($ord <= 0x3A)) || $ord === 0x3C || ((0x3E <= $ord) && ($ord <= 0x7E))) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4859)                 $line .= $txt[$i];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4860)             } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4861)                 $line .= '=' . sprintf('%02X', $ord);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4862)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4863)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4864) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4865)         return $line;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4866)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4867) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4868)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4869)      * Generate a DKIM signature.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4870)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4871)      * @param string $signHeader
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4872)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4873)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4874)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4875)      * @return string The DKIM signature value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4876)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4877)     public function DKIM_Sign($signHeader)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4878)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4879)         if (!defined('PKCS7_TEXT')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4880)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4881)                 throw new Exception($this->lang('extension_missing') . 'openssl');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4882)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4883) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4884)             return '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4885)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4886)         $privKeyStr = !empty($this->DKIM_private_string) ?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4887)             $this->DKIM_private_string :
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4888)             file_get_contents($this->DKIM_private);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4889)         if ('' !== $this->DKIM_passphrase) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4890)             $privKey = openssl_pkey_get_private($privKeyStr, $this->DKIM_passphrase);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4891)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4892)             $privKey = openssl_pkey_get_private($privKeyStr);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4893)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4894)         if (openssl_sign($signHeader, $signature, $privKey, 'sha256WithRSAEncryption')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4895)             if (\PHP_MAJOR_VERSION < 8) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4896)                 openssl_pkey_free($privKey);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4897)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4898) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4899)             return base64_encode($signature);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4900)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4901)         if (\PHP_MAJOR_VERSION < 8) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4902)             openssl_pkey_free($privKey);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4903)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4904) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4905)         return '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4906)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4907) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4908)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4909)      * Generate a DKIM canonicalization header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4910)      * Uses the 'relaxed' algorithm from RFC6376 section 3.4.2.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4911)      * Canonicalized headers should *always* use CRLF, regardless of mailer setting.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4912)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4913)      * @see https://tools.ietf.org/html/rfc6376#section-3.4.2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4914)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4915)      * @param string $signHeader Header
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4916)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4917)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4918)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4919)     public function DKIM_HeaderC($signHeader)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4920)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4921)         //Normalize breaks to CRLF (regardless of the mailer)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4922)         $signHeader = static::normalizeBreaks($signHeader, self::CRLF);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4923)         //Unfold header lines
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4924)         //Note PCRE \s is too broad a definition of whitespace; RFC5322 defines it as `[ \t]`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4925)         //@see https://tools.ietf.org/html/rfc5322#section-2.2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4926)         //That means this may break if you do something daft like put vertical tabs in your headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4927)         $signHeader = preg_replace('/\r\n[ \t]+/', ' ', $signHeader);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4928)         //Break headers out into an array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4929)         $lines = explode(self::CRLF, $signHeader);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4930)         foreach ($lines as $key => $line) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4931)             //If the header is missing a :, skip it as it's invalid
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4932)             //This is likely to happen because the explode() above will also split
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4933)             //on the trailing LE, leaving an empty line
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4934)             if (strpos($line, ':') === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4935)                 continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4936)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4937)             list($heading, $value) = explode(':', $line, 2);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4938)             //Lower-case header name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4939)             $heading = strtolower($heading);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4940)             //Collapse white space within the value, also convert WSP to space
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4941)             $value = preg_replace('/[ \t]+/', ' ', $value);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4942)             //RFC6376 is slightly unclear here - it says to delete space at the *end* of each value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4943)             //But then says to delete space before and after the colon.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4944)             //Net result is the same as trimming both ends of the value.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4945)             //By elimination, the same applies to the field name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4946)             $lines[$key] = trim($heading, " \t") . ':' . trim($value, " \t");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4947)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4948) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4949)         return implode(self::CRLF, $lines);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4950)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4951) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4952)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4953)      * Generate a DKIM canonicalization body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4954)      * Uses the 'simple' algorithm from RFC6376 section 3.4.3.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4955)      * Canonicalized bodies should *always* use CRLF, regardless of mailer setting.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4956)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4957)      * @see https://tools.ietf.org/html/rfc6376#section-3.4.3
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4958)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4959)      * @param string $body Message Body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4960)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4961)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4962)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4963)     public function DKIM_BodyC($body)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4964)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4965)         if (empty($body)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4966)             return self::CRLF;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4967)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4968)         //Normalize line endings to CRLF
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4969)         $body = static::normalizeBreaks($body, self::CRLF);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4970) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4971)         //Reduce multiple trailing line breaks to a single one
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4972)         return static::stripTrailingBreaks($body) . self::CRLF;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4973)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4974) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4975)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4976)      * Create the DKIM header and body in a new message header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4977)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4978)      * @param string $headers_line Header lines
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4979)      * @param string $subject      Subject
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4980)      * @param string $body         Body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4981)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4982)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4983)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4984)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4985)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4986)     public function DKIM_Add($headers_line, $subject, $body)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4987)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4988)         $DKIMsignatureType = 'rsa-sha256'; //Signature & hash algorithms
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4989)         $DKIMcanonicalization = 'relaxed/simple'; //Canonicalization methods of header & body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4990)         $DKIMquery = 'dns/txt'; //Query method
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4991)         $DKIMtime = time();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4992)         //Always sign these headers without being asked
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4993)         //Recommended list from https://tools.ietf.org/html/rfc6376#section-5.4.1
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4994)         $autoSignHeaders = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4995)             'from',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4996)             'to',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4997)             'cc',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4998)             'date',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4999)             'subject',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5000)             'reply-to',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5001)             'message-id',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5002)             'content-type',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5003)             'mime-version',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5004)             'x-mailer',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5005)         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5006)         if (stripos($headers_line, 'Subject') === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5007)             $headers_line .= 'Subject: ' . $subject . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5008)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5009)         $headerLines = explode(static::$LE, $headers_line);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5010)         $currentHeaderLabel = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5011)         $currentHeaderValue = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5012)         $parsedHeaders = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5013)         $headerLineIndex = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5014)         $headerLineCount = count($headerLines);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5015)         foreach ($headerLines as $headerLine) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5016)             $matches = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5017)             if (preg_match('/^([^ \t]*?)(?::[ \t]*)(.*)$/', $headerLine, $matches)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5018)                 if ($currentHeaderLabel !== '') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5019)                     //We were previously in another header; This is the start of a new header, so save the previous one
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5020)                     $parsedHeaders[] = ['label' => $currentHeaderLabel, 'value' => $currentHeaderValue];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5021)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5022)                 $currentHeaderLabel = $matches[1];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5023)                 $currentHeaderValue = $matches[2];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5024)             } elseif (preg_match('/^[ \t]+(.*)$/', $headerLine, $matches)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5025)                 //This is a folded continuation of the current header, so unfold it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5026)                 $currentHeaderValue .= ' ' . $matches[1];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5027)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5028)             ++$headerLineIndex;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5029)             if ($headerLineIndex >= $headerLineCount) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5030)                 //This was the last line, so finish off this header
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5031)                 $parsedHeaders[] = ['label' => $currentHeaderLabel, 'value' => $currentHeaderValue];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5032)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5033)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5034)         $copiedHeaders = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5035)         $headersToSignKeys = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5036)         $headersToSign = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5037)         foreach ($parsedHeaders as $header) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5038)             //Is this header one that must be included in the DKIM signature?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5039)             if (in_array(strtolower($header['label']), $autoSignHeaders, true)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5040)                 $headersToSignKeys[] = $header['label'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5041)                 $headersToSign[] = $header['label'] . ': ' . $header['value'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5042)                 if ($this->DKIM_copyHeaderFields) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5043)                     $copiedHeaders[] = $header['label'] . ':' . //Note no space after this, as per RFC
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5044)                         str_replace('|', '=7C', $this->DKIM_QP($header['value']));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5045)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5046)                 continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5047)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5048)             //Is this an extra custom header we've been asked to sign?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5049)             if (in_array($header['label'], $this->DKIM_extraHeaders, true)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5050)                 //Find its value in custom headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5051)                 foreach ($this->CustomHeader as $customHeader) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5052)                     if ($customHeader[0] === $header['label']) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5053)                         $headersToSignKeys[] = $header['label'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5054)                         $headersToSign[] = $header['label'] . ': ' . $header['value'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5055)                         if ($this->DKIM_copyHeaderFields) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5056)                             $copiedHeaders[] = $header['label'] . ':' . //Note no space after this, as per RFC
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5057)                                 str_replace('|', '=7C', $this->DKIM_QP($header['value']));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5058)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5059)                         //Skip straight to the next header
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5060)                         continue 2;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5061)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5062)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5063)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5064)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5065)         $copiedHeaderFields = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5066)         if ($this->DKIM_copyHeaderFields && count($copiedHeaders) > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5067)             //Assemble a DKIM 'z' tag
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5068)             $copiedHeaderFields = ' z=';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5069)             $first = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5070)             foreach ($copiedHeaders as $copiedHeader) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5071)                 if (!$first) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5072)                     $copiedHeaderFields .= static::$LE . ' |';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5073)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5074)                 //Fold long values
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5075)                 if (strlen($copiedHeader) > self::STD_LINE_LENGTH - 3) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5076)                     $copiedHeaderFields .= substr(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5077)                         chunk_split($copiedHeader, self::STD_LINE_LENGTH - 3, static::$LE . self::FWS),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5078)                         0,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5079)                         -strlen(static::$LE . self::FWS)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5080)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5081)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5082)                     $copiedHeaderFields .= $copiedHeader;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5083)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5084)                 $first = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5085)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5086)             $copiedHeaderFields .= ';' . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5087)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5088)         $headerKeys = ' h=' . implode(':', $headersToSignKeys) . ';' . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5089)         $headerValues = implode(static::$LE, $headersToSign);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5090)         $body = $this->DKIM_BodyC($body);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5091)         //Base64 of packed binary SHA-256 hash of body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5092)         $DKIMb64 = base64_encode(pack('H*', hash('sha256', $body)));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5093)         $ident = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5094)         if ('' !== $this->DKIM_identity) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5095)             $ident = ' i=' . $this->DKIM_identity . ';' . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5096)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5097)         //The DKIM-Signature header is included in the signature *except for* the value of the `b` tag
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5098)         //which is appended after calculating the signature
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5099)         //https://tools.ietf.org/html/rfc6376#section-3.5
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5100)         $dkimSignatureHeader = 'DKIM-Signature: v=1;' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5101)             ' d=' . $this->DKIM_domain . ';' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5102)             ' s=' . $this->DKIM_selector . ';' . static::$LE .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5103)             ' a=' . $DKIMsignatureType . ';' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5104)             ' q=' . $DKIMquery . ';' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5105)             ' t=' . $DKIMtime . ';' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5106)             ' c=' . $DKIMcanonicalization . ';' . static::$LE .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5107)             $headerKeys .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5108)             $ident .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5109)             $copiedHeaderFields .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5110)             ' bh=' . $DKIMb64 . ';' . static::$LE .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5111)             ' b=';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5112)         //Canonicalize the set of headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5113)         $canonicalizedHeaders = $this->DKIM_HeaderC(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5114)             $headerValues . static::$LE . $dkimSignatureHeader
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5115)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5116)         $signature = $this->DKIM_Sign($canonicalizedHeaders);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5117)         $signature = trim(chunk_split($signature, self::STD_LINE_LENGTH - 3, static::$LE . self::FWS));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5118) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5119)         return static::normalizeBreaks($dkimSignatureHeader . $signature);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5120)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5121) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5122)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5123)      * Detect if a string contains a line longer than the maximum line length
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5124)      * allowed by RFC 2822 section 2.1.1.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5125)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5126)      * @param string $str
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5127)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5128)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5129)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5130)     public static function hasLineLongerThanMax($str)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5131)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5132)         return (bool) preg_match('/^(.{' . (self::MAX_LINE_LENGTH + strlen(static::$LE)) . ',})/m', $str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5133)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5134) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5135)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5136)      * If a string contains any "special" characters, double-quote the name,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5137)      * and escape any double quotes with a backslash.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5138)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5139)      * @param string $str
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5140)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5141)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5142)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5143)      * @see RFC822 3.4.1
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5144)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5145)     public static function quotedString($str)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5146)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5147)         if (preg_match('/[ ()<>@,;:"\/\[\]?=]/', $str)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5148)             //If the string contains any of these chars, it must be double-quoted
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5149)             //and any double quotes must be escaped with a backslash
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5150)             return '"' . str_replace('"', '\\"', $str) . '"';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5151)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5152) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5153)         //Return the string untouched, it doesn't need quoting
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5154)         return $str;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5155)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5156) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5157)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5158)      * Allows for public read access to 'to' property.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5159)      * Before the send() call, queued addresses (i.e. with IDN) are not yet included.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5160)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5161)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5162)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5163)     public function getToAddresses()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5164)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5165)         return $this->to;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5166)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5167) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5168)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5169)      * Allows for public read access to 'cc' property.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5170)      * Before the send() call, queued addresses (i.e. with IDN) are not yet included.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5171)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5172)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5173)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5174)     public function getCcAddresses()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5175)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5176)         return $this->cc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5177)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5178) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5179)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5180)      * Allows for public read access to 'bcc' property.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5181)      * Before the send() call, queued addresses (i.e. with IDN) are not yet included.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5182)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5183)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5184)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5185)     public function getBccAddresses()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5186)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5187)         return $this->bcc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5188)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5189) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5190)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5191)      * Allows for public read access to 'ReplyTo' property.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5192)      * Before the send() call, queued addresses (i.e. with IDN) are not yet included.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5193)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5194)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5195)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5196)     public function getReplyToAddresses()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5197)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5198)         return $this->ReplyTo;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5199)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5200) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5201)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5202)      * Allows for public read access to 'all_recipients' property.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5203)      * Before the send() call, queued addresses (i.e. with IDN) are not yet included.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5204)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5205)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5206)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5207)     public function getAllRecipientAddresses()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5208)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5209)         return $this->all_recipients;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5210)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5211) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5212)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5213)      * Perform a callback.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5214)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5215)      * @param bool   $isSent
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5216)      * @param array  $to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5217)      * @param array  $cc
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5218)      * @param array  $bcc
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5219)      * @param string $subject
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5220)      * @param string $body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5221)      * @param string $from
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5222)      * @param array  $extra
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5223)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5224)     protected function doCallback($isSent, $to, $cc, $bcc, $subject, $body, $from, $extra)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5225)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5226)         if (!empty($this->action_function) && is_callable($this->action_function)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5227)             call_user_func($this->action_function, $isSent, $to, $cc, $bcc, $subject, $body, $from, $extra);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5228)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5229)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5230) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5231)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5232)      * Get the OAuthTokenProvider instance.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5233)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5234)      * @return OAuthTokenProvider
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5235)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5236)     public function getOAuth()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5237)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5238)         return $this->oauth;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5239)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5240) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5241)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5242)      * Set an OAuthTokenProvider instance.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5243)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5244)     public function setOAuth(OAuthTokenProvider $oauth)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5245)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5246)         $this->oauth = $oauth;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5247)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5248) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   4)  * PHPMailer POP-Before-SMTP Authentication Class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   5)  * PHP Version 5.5.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   6)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   7)  * @see https://github.com/PHPMailer/PHPMailer/ The PHPMailer GitHub project
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   8)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   9)  * @author    Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  10)  * @author    Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  11)  * @author    Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  12)  * @author    Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  13)  * @copyright 2012 - 2020 Marcus Bointon
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  14)  * @copyright 2010 - 2012 Jim Jagielski
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  15)  * @copyright 2004 - 2009 Andy Prevost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  16)  * @license   https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html GNU Lesser General Public License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  17)  * @note      This program is distributed in the hope that it will be useful - WITHOUT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  18)  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  19)  * FITNESS FOR A PARTICULAR PURPOSE.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  20)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  21) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  22) namespace PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  23) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  24) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  25)  * PHPMailer POP-Before-SMTP Authentication Class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  26)  * Specifically for PHPMailer to use for RFC1939 POP-before-SMTP authentication.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  27)  * 1) This class does not support APOP authentication.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  28)  * 2) Opening and closing lots of POP3 connections can be quite slow. If you need
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  29)  *   to send a batch of emails then just perform the authentication once at the start,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  30)  *   and then loop through your mail sending script. Providing this process doesn't
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  31)  *   take longer than the verification period lasts on your POP3 server, you should be fine.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  32)  * 3) This is really ancient technology; you should only need to use it to talk to very old systems.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  33)  * 4) This POP3 class is deliberately lightweight and incomplete, implementing just
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  34)  *   enough to do authentication.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  35)  *   If you want a more complete class there are other POP3 classes for PHP available.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  36)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  37)  * @author Richard Davey (original author) <rich@corephp.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  38)  * @author Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  39)  * @author Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  40)  * @author Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  41)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  42) class POP3
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  43) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  44)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  45)      * The POP3 PHPMailer Version number.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  46)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  47)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  48)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  49)     const VERSION = '6.9.2';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  50) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  51)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  52)      * Default POP3 port number.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  53)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  54)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  55)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  56)     const DEFAULT_PORT = 110;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  57) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  58)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  59)      * Default timeout in seconds.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  60)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  61)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  62)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  63)     const DEFAULT_TIMEOUT = 30;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  64) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  65)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  66)      * POP3 class debug output mode.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  67)      * Debug output level.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  68)      * Options:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  69)      * @see POP3::DEBUG_OFF: No output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  70)      * @see POP3::DEBUG_SERVER: Server messages, connection/server errors
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  71)      * @see POP3::DEBUG_CLIENT: Client and Server messages, connection/server errors
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  72)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  73)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  74)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  75)     public $do_debug = self::DEBUG_OFF;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  76) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  77)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  78)      * POP3 mail server hostname.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  79)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  80)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  81)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  82)     public $host;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  83) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  84)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  85)      * POP3 port number.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  86)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  87)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  88)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  89)     public $port;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  90) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  91)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  92)      * POP3 Timeout Value in seconds.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  93)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  94)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  95)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  96)     public $tval;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  97) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  98)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  99)      * POP3 username.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 100)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 101)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 102)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 103)     public $username;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 104) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 105)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 106)      * POP3 password.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 107)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 108)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 109)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 110)     public $password;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 111) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 112)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 113)      * Resource handle for the POP3 connection socket.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 114)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 115)      * @var resource
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 116)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 117)     protected $pop_conn;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 118) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 119)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 120)      * Are we connected?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 121)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 122)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 123)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 124)     protected $connected = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 125) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 126)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 127)      * Error container.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 128)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 129)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 130)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 131)     protected $errors = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 132) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 133)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 134)      * Line break constant.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 135)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 136)     const LE = "\r\n";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 137) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 138)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 139)      * Debug level for no output.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 140)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 141)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 142)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 143)     const DEBUG_OFF = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 144) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 145)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 146)      * Debug level to show server -> client messages
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 147)      * also shows clients connection errors or errors from server
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 148)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 149)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 150)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 151)     const DEBUG_SERVER = 1;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 152) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 153)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 154)      * Debug level to show client -> server and server -> client messages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 155)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 156)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 157)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 158)     const DEBUG_CLIENT = 2;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 159) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 160)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 161)      * Simple static wrapper for all-in-one POP before SMTP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 162)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 163)      * @param string   $host        The hostname to connect to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 164)      * @param int|bool $port        The port number to connect to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 165)      * @param int|bool $timeout     The timeout value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 166)      * @param string   $username
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 167)      * @param string   $password
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 168)      * @param int      $debug_level
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 169)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 170)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 171)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 172)     public static function popBeforeSmtp(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 173)         $host,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 174)         $port = false,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 175)         $timeout = false,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 176)         $username = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 177)         $password = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 178)         $debug_level = 0
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 179)     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 180)         $pop = new self();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 181) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 182)         return $pop->authorise($host, $port, $timeout, $username, $password, $debug_level);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 183)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 184) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 185)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 186)      * Authenticate with a POP3 server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 187)      * A connect, login, disconnect sequence
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 188)      * appropriate for POP-before SMTP authorisation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 189)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 190)      * @param string   $host        The hostname to connect to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 191)      * @param int|bool $port        The port number to connect to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 192)      * @param int|bool $timeout     The timeout value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 193)      * @param string   $username
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 194)      * @param string   $password
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 195)      * @param int      $debug_level
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 196)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 197)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 198)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 199)     public function authorise($host, $port = false, $timeout = false, $username = '', $password = '', $debug_level = 0)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 200)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 201)         $this->host = $host;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 202)         //If no port value provided, use default
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 203)         if (false === $port) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 204)             $this->port = static::DEFAULT_PORT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 205)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 206)             $this->port = (int) $port;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 207)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 208)         //If no timeout value provided, use default
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 209)         if (false === $timeout) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 210)             $this->tval = static::DEFAULT_TIMEOUT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 211)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 212)             $this->tval = (int) $timeout;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 213)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 214)         $this->do_debug = $debug_level;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 215)         $this->username = $username;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 216)         $this->password = $password;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 217)         //Reset the error log
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 218)         $this->errors = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 219)         //Connect
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 220)         $result = $this->connect($this->host, $this->port, $this->tval);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 221)         if ($result) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 222)             $login_result = $this->login($this->username, $this->password);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 223)             if ($login_result) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 224)                 $this->disconnect();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 225) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 226)                 return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 227)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 228)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 229)         //We need to disconnect regardless of whether the login succeeded
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 230)         $this->disconnect();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 231) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 232)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 233)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 234) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 235)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 236)      * Connect to a POP3 server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 237)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 238)      * @param string   $host
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 239)      * @param int|bool $port
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 240)      * @param int      $tval
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 241)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 242)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 243)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 244)     public function connect($host, $port = false, $tval = 30)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 245)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 246)         //Are we already connected?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 247)         if ($this->connected) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 248)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 249)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 250) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 251)         //On Windows this will raise a PHP Warning error if the hostname doesn't exist.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 252)         //Rather than suppress it with @fsockopen, capture it cleanly instead
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 253)         set_error_handler(function () {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 254)             call_user_func_array([$this, 'catchWarning'], func_get_args());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 255)         });
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 256) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 257)         if (false === $port) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 258)             $port = static::DEFAULT_PORT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 259)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 260) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 261)         //Connect to the POP3 server
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 262)         $errno = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 263)         $errstr = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 264)         $this->pop_conn = fsockopen(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 265)             $host, //POP3 Host
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 266)             $port, //Port #
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 267)             $errno, //Error Number
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 268)             $errstr, //Error Message
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 269)             $tval
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 270)         ); //Timeout (seconds)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 271)         //Restore the error handler
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 272)         restore_error_handler();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 273) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 274)         //Did we connect?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 275)         if (false === $this->pop_conn) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 276)             //It would appear not...
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 277)             $this->setError(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 278)                 "Failed to connect to server $host on port $port. errno: $errno; errstr: $errstr"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 279)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 280) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 281)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 282)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 283) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 284)         //Increase the stream time-out
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 285)         stream_set_timeout($this->pop_conn, $tval, 0);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 286) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 287)         //Get the POP3 server response
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 288)         $pop3_response = $this->getResponse();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 289)         //Check for the +OK
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 290)         if ($this->checkResponse($pop3_response)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 291)             //The connection is established and the POP3 server is talking
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 292)             $this->connected = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 293) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 294)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 295)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 296) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 297)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 298)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 299) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 300)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 301)      * Log in to the POP3 server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 302)      * Does not support APOP (RFC 2828, 4949).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 303)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 304)      * @param string $username
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 305)      * @param string $password
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 306)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 307)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 308)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 309)     public function login($username = '', $password = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 310)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 311)         if (!$this->connected) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 312)             $this->setError('Not connected to POP3 server');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 313)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 314)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 315)         if (empty($username)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 316)             $username = $this->username;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 317)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 318)         if (empty($password)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 319)             $password = $this->password;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 320)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 321) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 322)         //Send the Username
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 323)         $this->sendString("USER $username" . static::LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 324)         $pop3_response = $this->getResponse();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 325)         if ($this->checkResponse($pop3_response)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 326)             //Send the Password
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 327)             $this->sendString("PASS $password" . static::LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 328)             $pop3_response = $this->getResponse();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 329)             if ($this->checkResponse($pop3_response)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 330)                 return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 331)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 332)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 333) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 334)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 335)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 336) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 337)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 338)      * Disconnect from the POP3 server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 339)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 340)     public function disconnect()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 341)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 342)         // If could not connect at all, no need to disconnect
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 343)         if ($this->pop_conn === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 344)             return;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 345)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 346) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 347)         $this->sendString('QUIT' . static::LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 348) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 349)         // RFC 1939 shows POP3 server sending a +OK response to the QUIT command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 350)         // Try to get it.  Ignore any failures here.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 351)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 352)             $this->getResponse();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 353)         } catch (Exception $e) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 354)             //Do nothing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 355)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 356) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 357)         //The QUIT command may cause the daemon to exit, which will kill our connection
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 358)         //So ignore errors here
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 359)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 360)             @fclose($this->pop_conn);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 361)         } catch (Exception $e) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 362)             //Do nothing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 363)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 364) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 365)         // Clean up attributes.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 366)         $this->connected = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 367)         $this->pop_conn  = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 368)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 369) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 370)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 371)      * Get a response from the POP3 server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 372)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 373)      * @param int $size The maximum number of bytes to retrieve
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 374)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 375)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 376)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 377)     protected function getResponse($size = 128)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 378)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 379)         $response = fgets($this->pop_conn, $size);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 380)         if ($this->do_debug >= self::DEBUG_SERVER) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 381)             echo 'Server -> Client: ', $response;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 382)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 383) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 384)         return $response;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 385)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 386) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 387)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 388)      * Send raw data to the POP3 server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 389)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 390)      * @param string $string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 391)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 392)      * @return int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 393)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 394)     protected function sendString($string)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 395)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 396)         if ($this->pop_conn) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 397)             if ($this->do_debug >= self::DEBUG_CLIENT) { //Show client messages when debug >= 2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 398)                 echo 'Client -> Server: ', $string;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 399)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 400) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 401)             return fwrite($this->pop_conn, $string, strlen($string));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 402)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 403) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 404)         return 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 405)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 406) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 407)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 408)      * Checks the POP3 server response.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 409)      * Looks for for +OK or -ERR.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 410)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 411)      * @param string $string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 412)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 413)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 414)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 415)     protected function checkResponse($string)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 416)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 417)         if (strpos($string, '+OK') !== 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 418)             $this->setError("Server reported an error: $string");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 419) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 420)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 421)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 422) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 423)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 424)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 425) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 426)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 427)      * Add an error to the internal error store.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 428)      * Also display debug output if it's enabled.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 429)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 430)      * @param string $error
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 431)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 432)     protected function setError($error)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 433)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 434)         $this->errors[] = $error;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 435)         if ($this->do_debug >= self::DEBUG_SERVER) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 436)             echo '<pre>';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 437)             foreach ($this->errors as $e) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 438)                 print_r($e);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 439)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 440)             echo '</pre>';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 441)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 442)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 443) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 444)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 445)      * Get an array of error messages, if any.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 446)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 447)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 448)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 449)     public function getErrors()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 450)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 451)         return $this->errors;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 452)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 453) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 454)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 455)      * POP3 connection error handler.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 456)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 457)      * @param int    $errno
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 458)      * @param string $errstr
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 459)      * @param string $errfile
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 460)      * @param int    $errline
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 461)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 462)     protected function catchWarning($errno, $errstr, $errfile, $errline)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 463)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 464)         $this->setError(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 465)             'Connecting to the POP3 server raised a PHP warning:' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 466)             "errno: $errno errstr: $errstr; errfile: $errfile; errline: $errline"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 467)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 468)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 469) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    4)  * PHPMailer RFC821 SMTP email transport class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    5)  * PHP Version 5.5.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    6)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    7)  * @see       https://github.com/PHPMailer/PHPMailer/ The PHPMailer GitHub project
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    8)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    9)  * @author    Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   10)  * @author    Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   11)  * @author    Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   12)  * @author    Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   13)  * @copyright 2012 - 2020 Marcus Bointon
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   14)  * @copyright 2010 - 2012 Jim Jagielski
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   15)  * @copyright 2004 - 2009 Andy Prevost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   16)  * @license   https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html GNU Lesser General Public License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   17)  * @note      This program is distributed in the hope that it will be useful - WITHOUT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   18)  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   19)  * FITNESS FOR A PARTICULAR PURPOSE.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   20)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   21) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   22) namespace PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   23) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   24) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   25)  * PHPMailer RFC821 SMTP email transport class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   26)  * Implements RFC 821 SMTP commands and provides some utility methods for sending mail to an SMTP server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   27)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   28)  * @author Chris Ryan
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   29)  * @author Marcus Bointon <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   30)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   31) class SMTP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   32) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   33)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   34)      * The PHPMailer SMTP version number.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   35)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   36)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   37)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   38)     const VERSION = '6.9.2';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   39) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   40)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   41)      * SMTP line break constant.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   42)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   43)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   44)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   45)     const LE = "\r\n";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   46) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   47)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   48)      * The SMTP port to use if one is not specified.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   49)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   50)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   51)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   52)     const DEFAULT_PORT = 25;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   53) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   54)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   55)      * The SMTPs port to use if one is not specified.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   56)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   57)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   58)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   59)     const DEFAULT_SECURE_PORT = 465;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   60) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   61)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   62)      * The maximum line length allowed by RFC 5321 section 4.5.3.1.6,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   63)      * *excluding* a trailing CRLF break.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   64)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   65)      * @see https://tools.ietf.org/html/rfc5321#section-4.5.3.1.6
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   66)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   67)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   68)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   69)     const MAX_LINE_LENGTH = 998;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   70) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   71)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   72)      * The maximum line length allowed for replies in RFC 5321 section 4.5.3.1.5,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   73)      * *including* a trailing CRLF line break.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   74)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   75)      * @see https://tools.ietf.org/html/rfc5321#section-4.5.3.1.5
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   76)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   77)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   78)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   79)     const MAX_REPLY_LENGTH = 512;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   80) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   81)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   82)      * Debug level for no output.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   83)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   84)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   85)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   86)     const DEBUG_OFF = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   87) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   88)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   89)      * Debug level to show client -> server messages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   90)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   91)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   92)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   93)     const DEBUG_CLIENT = 1;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   94) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   95)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   96)      * Debug level to show client -> server and server -> client messages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   97)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   98)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   99)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  100)     const DEBUG_SERVER = 2;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  101) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  102)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  103)      * Debug level to show connection status, client -> server and server -> client messages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  104)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  105)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  106)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  107)     const DEBUG_CONNECTION = 3;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  108) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  109)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  110)      * Debug level to show all messages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  111)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  112)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  113)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  114)     const DEBUG_LOWLEVEL = 4;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  115) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  116)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  117)      * Debug output level.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  118)      * Options:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  119)      * * self::DEBUG_OFF (`0`) No debug output, default
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  120)      * * self::DEBUG_CLIENT (`1`) Client commands
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  121)      * * self::DEBUG_SERVER (`2`) Client commands and server responses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  122)      * * self::DEBUG_CONNECTION (`3`) As DEBUG_SERVER plus connection status
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  123)      * * self::DEBUG_LOWLEVEL (`4`) Low-level data output, all messages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  124)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  125)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  126)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  127)     public $do_debug = self::DEBUG_OFF;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  128) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  129)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  130)      * How to handle debug output.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  131)      * Options:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  132)      * * `echo` Output plain-text as-is, appropriate for CLI
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  133)      * * `html` Output escaped, line breaks converted to `<br>`, appropriate for browser output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  134)      * * `error_log` Output to error log as configured in php.ini
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  135)      * Alternatively, you can provide a callable expecting two params: a message string and the debug level:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  136)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  137)      * ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  138)      * $smtp->Debugoutput = function($str, $level) {echo "debug level $level; message: $str";};
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  139)      * ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  140)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  141)      * Alternatively, you can pass in an instance of a PSR-3 compatible logger, though only `debug`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  142)      * level output is used:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  143)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  144)      * ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  145)      * $mail->Debugoutput = new myPsr3Logger;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  146)      * ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  147)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  148)      * @var string|callable|\Psr\Log\LoggerInterface
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  149)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  150)     public $Debugoutput = 'echo';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  151) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  152)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  153)      * Whether to use VERP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  154)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  155)      * @see https://en.wikipedia.org/wiki/Variable_envelope_return_path
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  156)      * @see https://www.postfix.org/VERP_README.html Info on VERP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  157)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  158)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  159)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  160)     public $do_verp = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  161) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  162)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  163)      * The timeout value for connection, in seconds.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  164)      * Default of 5 minutes (300sec) is from RFC2821 section 4.5.3.2.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  165)      * This needs to be quite high to function correctly with hosts using greetdelay as an anti-spam measure.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  166)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  167)      * @see https://www.rfc-editor.org/rfc/rfc2821#section-4.5.3.2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  168)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  169)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  170)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  171)     public $Timeout = 300;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  172) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  173)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  174)      * How long to wait for commands to complete, in seconds.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  175)      * Default of 5 minutes (300sec) is from RFC2821 section 4.5.3.2.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  176)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  177)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  178)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  179)     public $Timelimit = 300;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  180) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  181)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  182)      * Patterns to extract an SMTP transaction id from reply to a DATA command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  183)      * The first capture group in each regex will be used as the ID.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  184)      * MS ESMTP returns the message ID, which may not be correct for internal tracking.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  185)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  186)      * @var string[]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  187)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  188)     protected $smtp_transaction_id_patterns = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  189)         'exim' => '/[\d]{3} OK id=(.*)/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  190)         'sendmail' => '/[\d]{3} 2\.0\.0 (.*) Message/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  191)         'postfix' => '/[\d]{3} 2\.0\.0 Ok: queued as (.*)/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  192)         'Microsoft_ESMTP' => '/[0-9]{3} 2\.[\d]\.0 (.*)@(?:.*) Queued mail for delivery/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  193)         'Amazon_SES' => '/[\d]{3} Ok (.*)/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  194)         'SendGrid' => '/[\d]{3} Ok: queued as (.*)/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  195)         'CampaignMonitor' => '/[\d]{3} 2\.0\.0 OK:([a-zA-Z\d]{48})/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  196)         'Haraka' => '/[\d]{3} Message Queued \((.*)\)/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  197)         'ZoneMTA' => '/[\d]{3} Message queued as (.*)/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  198)         'Mailjet' => '/[\d]{3} OK queued as (.*)/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  199)     ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  200) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  201)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  202)      * Allowed SMTP XCLIENT attributes.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  203)      * Must be allowed by the SMTP server. EHLO response is not checked.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  204)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  205)      * @see https://www.postfix.org/XCLIENT_README.html
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  206)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  207)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  208)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  209)     public static $xclient_allowed_attributes = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  210)         'NAME', 'ADDR', 'PORT', 'PROTO', 'HELO', 'LOGIN', 'DESTADDR', 'DESTPORT'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  211)     ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  212) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  213)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  214)      * The last transaction ID issued in response to a DATA command,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  215)      * if one was detected.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  216)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  217)      * @var string|bool|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  218)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  219)     protected $last_smtp_transaction_id;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  220) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  221)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  222)      * The socket for the server connection.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  223)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  224)      * @var ?resource
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  225)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  226)     protected $smtp_conn;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  227) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  228)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  229)      * Error information, if any, for the last SMTP command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  230)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  231)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  232)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  233)     protected $error = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  234)         'error' => '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  235)         'detail' => '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  236)         'smtp_code' => '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  237)         'smtp_code_ex' => '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  238)     ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  239) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  240)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  241)      * The reply the server sent to us for HELO.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  242)      * If null, no HELO string has yet been received.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  243)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  244)      * @var string|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  245)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  246)     protected $helo_rply;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  247) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  248)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  249)      * The set of SMTP extensions sent in reply to EHLO command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  250)      * Indexes of the array are extension names.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  251)      * Value at index 'HELO' or 'EHLO' (according to command that was sent)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  252)      * represents the server name. In case of HELO it is the only element of the array.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  253)      * Other values can be boolean TRUE or an array containing extension options.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  254)      * If null, no HELO/EHLO string has yet been received.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  255)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  256)      * @var array|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  257)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  258)     protected $server_caps;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  259) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  260)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  261)      * The most recent reply received from the server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  262)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  263)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  264)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  265)     protected $last_reply = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  266) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  267)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  268)      * Output debugging info via a user-selected method.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  269)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  270)      * @param string $str   Debug string to output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  271)      * @param int    $level The debug level of this message; see DEBUG_* constants
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  272)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  273)      * @see SMTP::$Debugoutput
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  274)      * @see SMTP::$do_debug
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  275)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  276)     protected function edebug($str, $level = 0)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  277)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  278)         if ($level > $this->do_debug) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  279)             return;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  280)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  281)         //Is this a PSR-3 logger?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  282)         if ($this->Debugoutput instanceof \Psr\Log\LoggerInterface) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  283)             //Remove trailing line breaks potentially added by calls to SMTP::client_send()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  284)             $this->Debugoutput->debug(rtrim($str, "\r\n"));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  285) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  286)             return;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  287)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  288)         //Avoid clash with built-in function names
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  289)         if (is_callable($this->Debugoutput) && !in_array($this->Debugoutput, ['error_log', 'html', 'echo'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  290)             call_user_func($this->Debugoutput, $str, $level);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  291) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  292)             return;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  293)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  294)         switch ($this->Debugoutput) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  295)             case 'error_log':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  296)                 //Don't output, just log
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  297)                 /** @noinspection ForgottenDebugOutputInspection */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  298)                 error_log($str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  299)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  300)             case 'html':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  301)                 //Cleans up output a bit for a better looking, HTML-safe output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  302)                 echo gmdate('Y-m-d H:i:s'), ' ', htmlentities(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  303)                     preg_replace('/[\r\n]+/', '', $str),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  304)                     ENT_QUOTES,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  305)                     'UTF-8'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  306)                 ), "<br>\n";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  307)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  308)             case 'echo':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  309)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  310)                 //Normalize line breaks
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  311)                 $str = preg_replace('/\r\n|\r/m', "\n", $str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  312)                 echo gmdate('Y-m-d H:i:s'),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  313)                 "\t",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  314)                     //Trim trailing space
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  315)                 trim(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  316)                     //Indent for readability, except for trailing break
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  317)                     str_replace(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  318)                         "\n",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  319)                         "\n                   \t                  ",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  320)                         trim($str)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  321)                     )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  322)                 ),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  323)                 "\n";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  324)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  325)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  326) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  327)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  328)      * Connect to an SMTP server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  329)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  330)      * @param string $host    SMTP server IP or host name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  331)      * @param int    $port    The port number to connect to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  332)      * @param int    $timeout How long to wait for the connection to open
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  333)      * @param array  $options An array of options for stream_context_create()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  334)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  335)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  336)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  337)     public function connect($host, $port = null, $timeout = 30, $options = [])
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  338)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  339)         //Clear errors to avoid confusion
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  340)         $this->setError('');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  341)         //Make sure we are __not__ connected
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  342)         if ($this->connected()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  343)             //Already connected, generate error
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  344)             $this->setError('Already connected to a server');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  345) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  346)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  347)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  348)         if (empty($port)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  349)             $port = self::DEFAULT_PORT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  350)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  351)         //Connect to the SMTP server
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  352)         $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  353)             "Connection: opening to $host:$port, timeout=$timeout, options=" .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  354)             (count($options) > 0 ? var_export($options, true) : 'array()'),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  355)             self::DEBUG_CONNECTION
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  356)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  357) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  358)         $this->smtp_conn = $this->getSMTPConnection($host, $port, $timeout, $options);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  359) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  360)         if ($this->smtp_conn === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  361)             //Error info already set inside `getSMTPConnection()`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  362)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  363)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  364) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  365)         $this->edebug('Connection: opened', self::DEBUG_CONNECTION);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  366) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  367)         //Get any announcement
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  368)         $this->last_reply = $this->get_lines();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  369)         $this->edebug('SERVER -> CLIENT: ' . $this->last_reply, self::DEBUG_SERVER);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  370)         $responseCode = (int)substr($this->last_reply, 0, 3);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  371)         if ($responseCode === 220) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  372)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  373)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  374)         //Anything other than a 220 response means something went wrong
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  375)         //RFC 5321 says the server will wait for us to send a QUIT in response to a 554 error
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  376)         //https://tools.ietf.org/html/rfc5321#section-3.1
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  377)         if ($responseCode === 554) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  378)             $this->quit();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  379)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  380)         //This will handle 421 responses which may not wait for a QUIT (e.g. if the server is being shut down)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  381)         $this->edebug('Connection: closing due to error', self::DEBUG_CONNECTION);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  382)         $this->close();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  383)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  384)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  385) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  386)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  387)      * Create connection to the SMTP server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  388)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  389)      * @param string $host    SMTP server IP or host name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  390)      * @param int    $port    The port number to connect to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  391)      * @param int    $timeout How long to wait for the connection to open
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  392)      * @param array  $options An array of options for stream_context_create()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  393)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  394)      * @return false|resource
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  395)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  396)     protected function getSMTPConnection($host, $port = null, $timeout = 30, $options = [])
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  397)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  398)         static $streamok;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  399)         //This is enabled by default since 5.0.0 but some providers disable it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  400)         //Check this once and cache the result
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  401)         if (null === $streamok) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  402)             $streamok = function_exists('stream_socket_client');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  403)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  404) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  405)         $errno = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  406)         $errstr = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  407)         if ($streamok) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  408)             $socket_context = stream_context_create($options);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  409)             set_error_handler(function () {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  410)                 call_user_func_array([$this, 'errorHandler'], func_get_args());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  411)             });
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  412)             $connection = stream_socket_client(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  413)                 $host . ':' . $port,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  414)                 $errno,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  415)                 $errstr,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  416)                 $timeout,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  417)                 STREAM_CLIENT_CONNECT,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  418)                 $socket_context
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  419)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  420)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  421)             //Fall back to fsockopen which should work in more places, but is missing some features
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  422)             $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  423)                 'Connection: stream_socket_client not available, falling back to fsockopen',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  424)                 self::DEBUG_CONNECTION
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  425)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  426)             set_error_handler(function () {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  427)                 call_user_func_array([$this, 'errorHandler'], func_get_args());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  428)             });
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  429)             $connection = fsockopen(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  430)                 $host,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  431)                 $port,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  432)                 $errno,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  433)                 $errstr,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  434)                 $timeout
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  435)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  436)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  437)         restore_error_handler();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  438) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  439)         //Verify we connected properly
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  440)         if (!is_resource($connection)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  441)             $this->setError(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  442)                 'Failed to connect to server',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  443)                 '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  444)                 (string) $errno,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  445)                 $errstr
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  446)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  447)             $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  448)                 'SMTP ERROR: ' . $this->error['error']
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  449)                 . ": $errstr ($errno)",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  450)                 self::DEBUG_CLIENT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  451)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  452) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  453)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  454)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  455) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  456)         //SMTP server can take longer to respond, give longer timeout for first read
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  457)         //Windows does not have support for this timeout function
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  458)         if (strpos(PHP_OS, 'WIN') !== 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  459)             $max = (int)ini_get('max_execution_time');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  460)             //Don't bother if unlimited, or if set_time_limit is disabled
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  461)             if (0 !== $max && $timeout > $max && strpos(ini_get('disable_functions'), 'set_time_limit') === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  462)                 @set_time_limit($timeout);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  463)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  464)             stream_set_timeout($connection, $timeout, 0);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  465)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  466) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  467)         return $connection;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  468)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  469) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  470)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  471)      * Initiate a TLS (encrypted) session.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  472)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  473)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  474)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  475)     public function startTLS()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  476)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  477)         if (!$this->sendCommand('STARTTLS', 'STARTTLS', 220)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  478)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  479)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  480) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  481)         //Allow the best TLS version(s) we can
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  482)         $crypto_method = STREAM_CRYPTO_METHOD_TLS_CLIENT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  483) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  484)         //PHP 5.6.7 dropped inclusion of TLS 1.1 and 1.2 in STREAM_CRYPTO_METHOD_TLS_CLIENT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  485)         //so add them back in manually if we can
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  486)         if (defined('STREAM_CRYPTO_METHOD_TLSv1_2_CLIENT')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  487)             $crypto_method |= STREAM_CRYPTO_METHOD_TLSv1_2_CLIENT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  488)             $crypto_method |= STREAM_CRYPTO_METHOD_TLSv1_1_CLIENT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  489)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  490) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  491)         //Begin encrypted connection
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  492)             set_error_handler(function () {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  493)                 call_user_func_array([$this, 'errorHandler'], func_get_args());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  494)             });
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  495)         $crypto_ok = stream_socket_enable_crypto(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  496)             $this->smtp_conn,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  497)             true,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  498)             $crypto_method
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  499)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  500)         restore_error_handler();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  501) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  502)         return (bool) $crypto_ok;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  503)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  504) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  505)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  506)      * Perform SMTP authentication.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  507)      * Must be run after hello().
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  508)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  509)      * @see    hello()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  510)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  511)      * @param string $username The user name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  512)      * @param string $password The password
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  513)      * @param string $authtype The auth type (CRAM-MD5, PLAIN, LOGIN, XOAUTH2)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  514)      * @param OAuthTokenProvider $OAuth An optional OAuthTokenProvider instance for XOAUTH2 authentication
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  515)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  516)      * @return bool True if successfully authenticated
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  517)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  518)     public function authenticate(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  519)         $username,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  520)         $password,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  521)         $authtype = null,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  522)         $OAuth = null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  523)     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  524)         if (!$this->server_caps) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  525)             $this->setError('Authentication is not allowed before HELO/EHLO');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  526) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  527)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  528)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  529) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  530)         if (array_key_exists('EHLO', $this->server_caps)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  531)             //SMTP extensions are available; try to find a proper authentication method
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  532)             if (!array_key_exists('AUTH', $this->server_caps)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  533)                 $this->setError('Authentication is not allowed at this stage');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  534)                 //'at this stage' means that auth may be allowed after the stage changes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  535)                 //e.g. after STARTTLS
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  536) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  537)                 return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  538)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  539) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  540)             $this->edebug('Auth method requested: ' . ($authtype ?: 'UNSPECIFIED'), self::DEBUG_LOWLEVEL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  541)             $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  542)                 'Auth methods available on the server: ' . implode(',', $this->server_caps['AUTH']),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  543)                 self::DEBUG_LOWLEVEL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  544)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  545) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  546)             //If we have requested a specific auth type, check the server supports it before trying others
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  547)             if (null !== $authtype && !in_array($authtype, $this->server_caps['AUTH'], true)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  548)                 $this->edebug('Requested auth method not available: ' . $authtype, self::DEBUG_LOWLEVEL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  549)                 $authtype = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  550)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  551) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  552)             if (empty($authtype)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  553)                 //If no auth mechanism is specified, attempt to use these, in this order
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  554)                 //Try CRAM-MD5 first as it's more secure than the others
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  555)                 foreach (['CRAM-MD5', 'LOGIN', 'PLAIN', 'XOAUTH2'] as $method) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  556)                     if (in_array($method, $this->server_caps['AUTH'], true)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  557)                         $authtype = $method;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  558)                         break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  559)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  560)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  561)                 if (empty($authtype)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  562)                     $this->setError('No supported authentication methods found');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  563) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  564)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  565)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  566)                 $this->edebug('Auth method selected: ' . $authtype, self::DEBUG_LOWLEVEL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  567)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  568) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  569)             if (!in_array($authtype, $this->server_caps['AUTH'], true)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  570)                 $this->setError("The requested authentication method \"$authtype\" is not supported by the server");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  571) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  572)                 return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  573)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  574)         } elseif (empty($authtype)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  575)             $authtype = 'LOGIN';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  576)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  577)         switch ($authtype) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  578)             case 'PLAIN':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  579)                 //Start authentication
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  580)                 if (!$this->sendCommand('AUTH', 'AUTH PLAIN', 334)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  581)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  582)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  583)                 //Send encoded username and password
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  584)                 if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  585)                     //Format from https://tools.ietf.org/html/rfc4616#section-2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  586)                     //We skip the first field (it's forgery), so the string starts with a null byte
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  587)                     !$this->sendCommand(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  588)                         'User & Password',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  589)                         base64_encode("\0" . $username . "\0" . $password),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  590)                         235
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  591)                     )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  592)                 ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  593)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  594)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  595)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  596)             case 'LOGIN':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  597)                 //Start authentication
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  598)                 if (!$this->sendCommand('AUTH', 'AUTH LOGIN', 334)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  599)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  600)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  601)                 if (!$this->sendCommand('Username', base64_encode($username), 334)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  602)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  603)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  604)                 if (!$this->sendCommand('Password', base64_encode($password), 235)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  605)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  606)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  607)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  608)             case 'CRAM-MD5':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  609)                 //Start authentication
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  610)                 if (!$this->sendCommand('AUTH CRAM-MD5', 'AUTH CRAM-MD5', 334)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  611)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  612)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  613)                 //Get the challenge
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  614)                 $challenge = base64_decode(substr($this->last_reply, 4));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  615) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  616)                 //Build the response
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  617)                 $response = $username . ' ' . $this->hmac($challenge, $password);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  618) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  619)                 //send encoded credentials
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  620)                 return $this->sendCommand('Username', base64_encode($response), 235);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  621)             case 'XOAUTH2':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  622)                 //The OAuth instance must be set up prior to requesting auth.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  623)                 if (null === $OAuth) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  624)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  625)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  626)                 $oauth = $OAuth->getOauth64();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  627) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  628)                 //Start authentication
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  629)                 if (!$this->sendCommand('AUTH', 'AUTH XOAUTH2 ' . $oauth, 235)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  630)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  631)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  632)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  633)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  634)                 $this->setError("Authentication method \"$authtype\" is not supported");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  635) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  636)                 return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  637)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  638) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  639)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  640)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  641) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  642)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  643)      * Calculate an MD5 HMAC hash.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  644)      * Works like hash_hmac('md5', $data, $key)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  645)      * in case that function is not available.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  646)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  647)      * @param string $data The data to hash
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  648)      * @param string $key  The key to hash with
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  649)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  650)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  651)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  652)     protected function hmac($data, $key)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  653)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  654)         if (function_exists('hash_hmac')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  655)             return hash_hmac('md5', $data, $key);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  656)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  657) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  658)         //The following borrowed from
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  659)         //https://www.php.net/manual/en/function.mhash.php#27225
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  660) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  661)         //RFC 2104 HMAC implementation for php.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  662)         //Creates an md5 HMAC.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  663)         //Eliminates the need to install mhash to compute a HMAC
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  664)         //by Lance Rushing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  665) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  666)         $bytelen = 64; //byte length for md5
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  667)         if (strlen($key) > $bytelen) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  668)             $key = pack('H*', md5($key));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  669)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  670)         $key = str_pad($key, $bytelen, chr(0x00));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  671)         $ipad = str_pad('', $bytelen, chr(0x36));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  672)         $opad = str_pad('', $bytelen, chr(0x5c));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  673)         $k_ipad = $key ^ $ipad;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  674)         $k_opad = $key ^ $opad;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  675) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  676)         return md5($k_opad . pack('H*', md5($k_ipad . $data)));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  677)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  678) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  679)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  680)      * Check connection state.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  681)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  682)      * @return bool True if connected
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  683)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  684)     public function connected()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  685)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  686)         if (is_resource($this->smtp_conn)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  687)             $sock_status = stream_get_meta_data($this->smtp_conn);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  688)             if ($sock_status['eof']) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  689)                 //The socket is valid but we are not connected
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  690)                 $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  691)                     'SMTP NOTICE: EOF caught while checking if connected',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  692)                     self::DEBUG_CLIENT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  693)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  694)                 $this->close();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  695) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  696)                 return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  697)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  698) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  699)             return true; //everything looks good
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  700)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  701) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  702)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  703)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  704) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  705)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  706)      * Close the socket and clean up the state of the class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  707)      * Don't use this function without first trying to use QUIT.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  708)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  709)      * @see quit()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  710)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  711)     public function close()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  712)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  713)         $this->server_caps = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  714)         $this->helo_rply = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  715)         if (is_resource($this->smtp_conn)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  716)             //Close the connection and cleanup
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  717)             fclose($this->smtp_conn);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  718)             $this->smtp_conn = null; //Makes for cleaner serialization
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  719)             $this->edebug('Connection: closed', self::DEBUG_CONNECTION);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  720)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  721)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  722) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  723)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  724)      * Send an SMTP DATA command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  725)      * Issues a data command and sends the msg_data to the server,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  726)      * finalizing the mail transaction. $msg_data is the message
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  727)      * that is to be sent with the headers. Each header needs to be
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  728)      * on a single line followed by a <CRLF> with the message headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  729)      * and the message body being separated by an additional <CRLF>.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  730)      * Implements RFC 821: DATA <CRLF>.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  731)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  732)      * @param string $msg_data Message data to send
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  733)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  734)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  735)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  736)     public function data($msg_data)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  737)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  738)         //This will use the standard timelimit
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  739)         if (!$this->sendCommand('DATA', 'DATA', 354)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  740)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  741)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  742) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  743)         /* The server is ready to accept data!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  744)          * According to rfc821 we should not send more than 1000 characters on a single line (including the LE)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  745)          * so we will break the data up into lines by \r and/or \n then if needed we will break each of those into
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  746)          * smaller lines to fit within the limit.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  747)          * We will also look for lines that start with a '.' and prepend an additional '.'.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  748)          * NOTE: this does not count towards line-length limit.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  749)          */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  750) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  751)         //Normalize line breaks before exploding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  752)         $lines = explode("\n", str_replace(["\r\n", "\r"], "\n", $msg_data));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  753) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  754)         /* To distinguish between a complete RFC822 message and a plain message body, we check if the first field
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  755)          * of the first line (':' separated) does not contain a space then it _should_ be a header, and we will
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  756)          * process all lines before a blank line as headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  757)          */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  758) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  759)         $field = substr($lines[0], 0, strpos($lines[0], ':'));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  760)         $in_headers = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  761)         if (!empty($field) && strpos($field, ' ') === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  762)             $in_headers = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  763)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  764) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  765)         foreach ($lines as $line) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  766)             $lines_out = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  767)             if ($in_headers && $line === '') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  768)                 $in_headers = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  769)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  770)             //Break this line up into several smaller lines if it's too long
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  771)             //Micro-optimisation: isset($str[$len]) is faster than (strlen($str) > $len),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  772)             while (isset($line[self::MAX_LINE_LENGTH])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  773)                 //Working backwards, try to find a space within the last MAX_LINE_LENGTH chars of the line to break on
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  774)                 //so as to avoid breaking in the middle of a word
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  775)                 $pos = strrpos(substr($line, 0, self::MAX_LINE_LENGTH), ' ');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  776)                 //Deliberately matches both false and 0
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  777)                 if (!$pos) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  778)                     //No nice break found, add a hard break
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  779)                     $pos = self::MAX_LINE_LENGTH - 1;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  780)                     $lines_out[] = substr($line, 0, $pos);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  781)                     $line = substr($line, $pos);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  782)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  783)                     //Break at the found point
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  784)                     $lines_out[] = substr($line, 0, $pos);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  785)                     //Move along by the amount we dealt with
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  786)                     $line = substr($line, $pos + 1);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  787)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  788)                 //If processing headers add a LWSP-char to the front of new line RFC822 section 3.1.1
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  789)                 if ($in_headers) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  790)                     $line = "\t" . $line;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  791)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  792)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  793)             $lines_out[] = $line;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  794) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  795)             //Send the lines to the server
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  796)             foreach ($lines_out as $line_out) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  797)                 //Dot-stuffing as per RFC5321 section 4.5.2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  798)                 //https://tools.ietf.org/html/rfc5321#section-4.5.2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  799)                 if (!empty($line_out) && $line_out[0] === '.') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  800)                     $line_out = '.' . $line_out;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  801)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  802)                 $this->client_send($line_out . static::LE, 'DATA');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  803)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  804)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  805) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  806)         //Message data has been sent, complete the command
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  807)         //Increase timelimit for end of DATA command
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  808)         $savetimelimit = $this->Timelimit;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  809)         $this->Timelimit *= 2;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  810)         $result = $this->sendCommand('DATA END', '.', 250);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  811)         $this->recordLastTransactionID();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  812)         //Restore timelimit
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  813)         $this->Timelimit = $savetimelimit;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  814) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  815)         return $result;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  816)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  817) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  818)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  819)      * Send an SMTP HELO or EHLO command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  820)      * Used to identify the sending server to the receiving server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  821)      * This makes sure that client and server are in a known state.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  822)      * Implements RFC 821: HELO <SP> <domain> <CRLF>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  823)      * and RFC 2821 EHLO.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  824)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  825)      * @param string $host The host name or IP to connect to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  826)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  827)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  828)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  829)     public function hello($host = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  830)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  831)         //Try extended hello first (RFC 2821)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  832)         if ($this->sendHello('EHLO', $host)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  833)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  834)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  835) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  836)         //Some servers shut down the SMTP service here (RFC 5321)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  837)         if (substr($this->helo_rply, 0, 3) == '421') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  838)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  839)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  840) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  841)         return $this->sendHello('HELO', $host);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  842)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  843) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  844)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  845)      * Send an SMTP HELO or EHLO command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  846)      * Low-level implementation used by hello().
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  847)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  848)      * @param string $hello The HELO string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  849)      * @param string $host  The hostname to say we are
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  850)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  851)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  852)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  853)      * @see hello()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  854)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  855)     protected function sendHello($hello, $host)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  856)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  857)         $noerror = $this->sendCommand($hello, $hello . ' ' . $host, 250);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  858)         $this->helo_rply = $this->last_reply;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  859)         if ($noerror) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  860)             $this->parseHelloFields($hello);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  861)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  862)             $this->server_caps = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  863)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  864) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  865)         return $noerror;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  866)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  867) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  868)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  869)      * Parse a reply to HELO/EHLO command to discover server extensions.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  870)      * In case of HELO, the only parameter that can be discovered is a server name.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  871)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  872)      * @param string $type `HELO` or `EHLO`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  873)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  874)     protected function parseHelloFields($type)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  875)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  876)         $this->server_caps = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  877)         $lines = explode("\n", $this->helo_rply);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  878) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  879)         foreach ($lines as $n => $s) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  880)             //First 4 chars contain response code followed by - or space
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  881)             $s = trim(substr($s, 4));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  882)             if (empty($s)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  883)                 continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  884)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  885)             $fields = explode(' ', $s);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  886)             if (!empty($fields)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  887)                 if (!$n) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  888)                     $name = $type;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  889)                     $fields = $fields[0];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  890)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  891)                     $name = array_shift($fields);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  892)                     switch ($name) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  893)                         case 'SIZE':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  894)                             $fields = ($fields ? $fields[0] : 0);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  895)                             break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  896)                         case 'AUTH':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  897)                             if (!is_array($fields)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  898)                                 $fields = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  899)                             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  900)                             break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  901)                         default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  902)                             $fields = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  903)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  904)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  905)                 $this->server_caps[$name] = $fields;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  906)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  907)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  908)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  909) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  910)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  911)      * Send an SMTP MAIL command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  912)      * Starts a mail transaction from the email address specified in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  913)      * $from. Returns true if successful or false otherwise. If True
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  914)      * the mail transaction is started and then one or more recipient
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  915)      * commands may be called followed by a data command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  916)      * Implements RFC 821: MAIL <SP> FROM:<reverse-path> <CRLF>.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  917)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  918)      * @param string $from Source address of this message
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  919)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  920)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  921)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  922)     public function mail($from)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  923)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  924)         $useVerp = ($this->do_verp ? ' XVERP' : '');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  925) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  926)         return $this->sendCommand(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  927)             'MAIL FROM',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  928)             'MAIL FROM:<' . $from . '>' . $useVerp,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  929)             250
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  930)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  931)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  932) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  933)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  934)      * Send an SMTP QUIT command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  935)      * Closes the socket if there is no error or the $close_on_error argument is true.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  936)      * Implements from RFC 821: QUIT <CRLF>.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  937)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  938)      * @param bool $close_on_error Should the connection close if an error occurs?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  939)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  940)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  941)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  942)     public function quit($close_on_error = true)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  943)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  944)         $noerror = $this->sendCommand('QUIT', 'QUIT', 221);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  945)         $err = $this->error; //Save any error
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  946)         if ($noerror || $close_on_error) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  947)             $this->close();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  948)             $this->error = $err; //Restore any error from the quit command
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  949)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  950) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  951)         return $noerror;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  952)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  953) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  954)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  955)      * Send an SMTP RCPT command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  956)      * Sets the TO argument to $toaddr.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  957)      * Returns true if the recipient was accepted false if it was rejected.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  958)      * Implements from RFC 821: RCPT <SP> TO:<forward-path> <CRLF>.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  959)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  960)      * @param string $address The address the message is being sent to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  961)      * @param string $dsn     Comma separated list of DSN notifications. NEVER, SUCCESS, FAILURE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  962)      *                        or DELAY. If you specify NEVER all other notifications are ignored.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  963)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  964)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  965)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  966)     public function recipient($address, $dsn = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  967)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  968)         if (empty($dsn)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  969)             $rcpt = 'RCPT TO:<' . $address . '>';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  970)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  971)             $dsn = strtoupper($dsn);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  972)             $notify = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  973) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  974)             if (strpos($dsn, 'NEVER') !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  975)                 $notify[] = 'NEVER';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  976)             } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  977)                 foreach (['SUCCESS', 'FAILURE', 'DELAY'] as $value) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  978)                     if (strpos($dsn, $value) !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  979)                         $notify[] = $value;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  980)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  981)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  982)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  983) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  984)             $rcpt = 'RCPT TO:<' . $address . '> NOTIFY=' . implode(',', $notify);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  985)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  986) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  987)         return $this->sendCommand(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  988)             'RCPT TO',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  989)             $rcpt,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  990)             [250, 251]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  991)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  992)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  993) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  994)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  995)      * Send SMTP XCLIENT command to server and check its return code.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  996)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  997)      * @return bool True on success
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  998)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  999)     public function xclient(array $vars)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1000)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1001)         $xclient_options = "";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1002)         foreach ($vars as $key => $value) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1003)             if (in_array($key, SMTP::$xclient_allowed_attributes)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1004)                 $xclient_options .= " {$key}={$value}";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1005)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1006)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1007)         if (!$xclient_options) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1008)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1009)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1010)         return $this->sendCommand('XCLIENT', 'XCLIENT' . $xclient_options, 250);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1011)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1012) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1013)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1014)      * Send an SMTP RSET command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1015)      * Abort any transaction that is currently in progress.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1016)      * Implements RFC 821: RSET <CRLF>.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1017)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1018)      * @return bool True on success
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1019)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1020)     public function reset()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1021)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1022)         return $this->sendCommand('RSET', 'RSET', 250);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1023)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1024) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1025)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1026)      * Send a command to an SMTP server and check its return code.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1027)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1028)      * @param string    $command       The command name - not sent to the server
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1029)      * @param string    $commandstring The actual command to send
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1030)      * @param int|array $expect        One or more expected integer success codes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1031)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1032)      * @return bool True on success
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1033)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1034)     protected function sendCommand($command, $commandstring, $expect)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1035)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1036)         if (!$this->connected()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1037)             $this->setError("Called $command without being connected");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1038) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1039)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1040)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1041)         //Reject line breaks in all commands
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1042)         if ((strpos($commandstring, "\n") !== false) || (strpos($commandstring, "\r") !== false)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1043)             $this->setError("Command '$command' contained line breaks");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1044) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1045)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1046)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1047)         $this->client_send($commandstring . static::LE, $command);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1048) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1049)         $this->last_reply = $this->get_lines();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1050)         //Fetch SMTP code and possible error code explanation
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1051)         $matches = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1052)         if (preg_match('/^([\d]{3})[ -](?:([\d]\\.[\d]\\.[\d]{1,2}) )?/', $this->last_reply, $matches)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1053)             $code = (int) $matches[1];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1054)             $code_ex = (count($matches) > 2 ? $matches[2] : null);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1055)             //Cut off error code from each response line
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1056)             $detail = preg_replace(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1057)                 "/{$code}[ -]" .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1058)                 ($code_ex ? str_replace('.', '\\.', $code_ex) . ' ' : '') . '/m',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1059)                 '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1060)                 $this->last_reply
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1061)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1062)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1063)             //Fall back to simple parsing if regex fails
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1064)             $code = (int) substr($this->last_reply, 0, 3);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1065)             $code_ex = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1066)             $detail = substr($this->last_reply, 4);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1067)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1068) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1069)         $this->edebug('SERVER -> CLIENT: ' . $this->last_reply, self::DEBUG_SERVER);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1070) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1071)         if (!in_array($code, (array) $expect, true)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1072)             $this->setError(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1073)                 "$command command failed",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1074)                 $detail,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1075)                 $code,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1076)                 $code_ex
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1077)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1078)             $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1079)                 'SMTP ERROR: ' . $this->error['error'] . ': ' . $this->last_reply,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1080)                 self::DEBUG_CLIENT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1081)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1082) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1083)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1084)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1085) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1086)         //Don't clear the error store when using keepalive
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1087)         if ($command !== 'RSET') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1088)             $this->setError('');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1089)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1090) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1091)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1092)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1093) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1094)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1095)      * Send an SMTP SAML command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1096)      * Starts a mail transaction from the email address specified in $from.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1097)      * Returns true if successful or false otherwise. If True
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1098)      * the mail transaction is started and then one or more recipient
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1099)      * commands may be called followed by a data command. This command
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1100)      * will send the message to the users terminal if they are logged
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1101)      * in and send them an email.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1102)      * Implements RFC 821: SAML <SP> FROM:<reverse-path> <CRLF>.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1103)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1104)      * @param string $from The address the message is from
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1105)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1106)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1107)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1108)     public function sendAndMail($from)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1109)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1110)         return $this->sendCommand('SAML', "SAML FROM:$from", 250);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1111)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1112) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1113)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1114)      * Send an SMTP VRFY command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1115)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1116)      * @param string $name The name to verify
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1117)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1118)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1119)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1120)     public function verify($name)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1121)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1122)         return $this->sendCommand('VRFY', "VRFY $name", [250, 251]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1123)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1124) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1125)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1126)      * Send an SMTP NOOP command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1127)      * Used to keep keep-alives alive, doesn't actually do anything.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1128)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1129)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1130)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1131)     public function noop()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1132)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1133)         return $this->sendCommand('NOOP', 'NOOP', 250);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1134)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1135) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1136)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1137)      * Send an SMTP TURN command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1138)      * This is an optional command for SMTP that this class does not support.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1139)      * This method is here to make the RFC821 Definition complete for this class
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1140)      * and _may_ be implemented in future.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1141)      * Implements from RFC 821: TURN <CRLF>.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1142)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1143)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1144)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1145)     public function turn()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1146)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1147)         $this->setError('The SMTP TURN command is not implemented');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1148)         $this->edebug('SMTP NOTICE: ' . $this->error['error'], self::DEBUG_CLIENT);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1149) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1150)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1151)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1152) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1153)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1154)      * Send raw data to the server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1155)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1156)      * @param string $data    The data to send
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1157)      * @param string $command Optionally, the command this is part of, used only for controlling debug output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1158)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1159)      * @return int|bool The number of bytes sent to the server or false on error
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1160)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1161)     public function client_send($data, $command = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1162)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1163)         //If SMTP transcripts are left enabled, or debug output is posted online
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1164)         //it can leak credentials, so hide credentials in all but lowest level
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1165)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1166)             self::DEBUG_LOWLEVEL > $this->do_debug &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1167)             in_array($command, ['User & Password', 'Username', 'Password'], true)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1168)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1169)             $this->edebug('CLIENT -> SERVER: [credentials hidden]', self::DEBUG_CLIENT);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1170)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1171)             $this->edebug('CLIENT -> SERVER: ' . $data, self::DEBUG_CLIENT);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1172)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1173)         set_error_handler(function () {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1174)             call_user_func_array([$this, 'errorHandler'], func_get_args());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1175)         });
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1176)         $result = fwrite($this->smtp_conn, $data);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1177)         restore_error_handler();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1178) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1179)         return $result;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1180)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1181) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1182)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1183)      * Get the latest error.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1184)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1185)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1186)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1187)     public function getError()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1188)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1189)         return $this->error;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1190)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1191) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1192)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1193)      * Get SMTP extensions available on the server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1194)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1195)      * @return array|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1196)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1197)     public function getServerExtList()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1198)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1199)         return $this->server_caps;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1200)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1201) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1202)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1203)      * Get metadata about the SMTP server from its HELO/EHLO response.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1204)      * The method works in three ways, dependent on argument value and current state:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1205)      *   1. HELO/EHLO has not been sent - returns null and populates $this->error.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1206)      *   2. HELO has been sent -
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1207)      *     $name == 'HELO': returns server name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1208)      *     $name == 'EHLO': returns boolean false
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1209)      *     $name == any other string: returns null and populates $this->error
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1210)      *   3. EHLO has been sent -
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1211)      *     $name == 'HELO'|'EHLO': returns the server name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1212)      *     $name == any other string: if extension $name exists, returns True
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1213)      *       or its options (e.g. AUTH mechanisms supported). Otherwise returns False.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1214)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1215)      * @param string $name Name of SMTP extension or 'HELO'|'EHLO'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1216)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1217)      * @return string|bool|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1218)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1219)     public function getServerExt($name)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1220)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1221)         if (!$this->server_caps) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1222)             $this->setError('No HELO/EHLO was sent');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1223) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1224)             return null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1225)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1226) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1227)         if (!array_key_exists($name, $this->server_caps)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1228)             if ('HELO' === $name) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1229)                 return $this->server_caps['EHLO'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1230)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1231)             if ('EHLO' === $name || array_key_exists('EHLO', $this->server_caps)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1232)                 return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1233)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1234)             $this->setError('HELO handshake was used; No information about server extensions available');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1235) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1236)             return null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1237)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1238) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1239)         return $this->server_caps[$name];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1240)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1241) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1242)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1243)      * Get the last reply from the server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1244)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1245)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1246)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1247)     public function getLastReply()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1248)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1249)         return $this->last_reply;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1250)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1251) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1252)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1253)      * Read the SMTP server's response.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1254)      * Either before eof or socket timeout occurs on the operation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1255)      * With SMTP we can tell if we have more lines to read if the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1256)      * 4th character is '-' symbol. If it is a space then we don't
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1257)      * need to read anything else.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1258)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1259)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1260)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1261)     protected function get_lines()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1262)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1263)         //If the connection is bad, give up straight away
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1264)         if (!is_resource($this->smtp_conn)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1265)             return '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1266)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1267)         $data = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1268)         $endtime = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1269)         stream_set_timeout($this->smtp_conn, $this->Timeout);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1270)         if ($this->Timelimit > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1271)             $endtime = time() + $this->Timelimit;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1272)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1273)         $selR = [$this->smtp_conn];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1274)         $selW = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1275)         while (is_resource($this->smtp_conn) && !feof($this->smtp_conn)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1276)             //Must pass vars in here as params are by reference
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1277)             //solution for signals inspired by https://github.com/symfony/symfony/pull/6540
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1278)             set_error_handler(function () {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1279)                 call_user_func_array([$this, 'errorHandler'], func_get_args());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1280)             });
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1281)             $n = stream_select($selR, $selW, $selW, $this->Timelimit);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1282)             restore_error_handler();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1283) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1284)             if ($n === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1285)                 $message = $this->getError()['detail'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1286) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1287)                 $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1288)                     'SMTP -> get_lines(): select failed (' . $message . ')',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1289)                     self::DEBUG_LOWLEVEL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1290)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1291) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1292)                 //stream_select returns false when the `select` system call is interrupted
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1293)                 //by an incoming signal, try the select again
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1294)                 if (stripos($message, 'interrupted system call') !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1295)                     $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1296)                         'SMTP -> get_lines(): retrying stream_select',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1297)                         self::DEBUG_LOWLEVEL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1298)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1299)                     $this->setError('');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1300)                     continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1301)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1302) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1303)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1304)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1305) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1306)             if (!$n) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1307)                 $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1308)                     'SMTP -> get_lines(): select timed-out in (' . $this->Timelimit . ' sec)',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1309)                     self::DEBUG_LOWLEVEL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1310)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1311)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1312)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1313) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1314)             //Deliberate noise suppression - errors are handled afterwards
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1315)             $str = @fgets($this->smtp_conn, self::MAX_REPLY_LENGTH);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1316)             $this->edebug('SMTP INBOUND: "' . trim($str) . '"', self::DEBUG_LOWLEVEL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1317)             $data .= $str;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1318)             //If response is only 3 chars (not valid, but RFC5321 S4.2 says it must be handled),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1319)             //or 4th character is a space or a line break char, we are done reading, break the loop.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1320)             //String array access is a significant micro-optimisation over strlen
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1321)             if (!isset($str[3]) || $str[3] === ' ' || $str[3] === "\r" || $str[3] === "\n") {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1322)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1323)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1324)             //Timed-out? Log and break
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1325)             $info = stream_get_meta_data($this->smtp_conn);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1326)             if ($info['timed_out']) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1327)                 $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1328)                     'SMTP -> get_lines(): stream timed-out (' . $this->Timeout . ' sec)',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1329)                     self::DEBUG_LOWLEVEL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1330)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1331)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1332)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1333)             //Now check if reads took too long
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1334)             if ($endtime && time() > $endtime) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1335)                 $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1336)                     'SMTP -> get_lines(): timelimit reached (' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1337)                     $this->Timelimit . ' sec)',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1338)                     self::DEBUG_LOWLEVEL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1339)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1340)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1341)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1342)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1343) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1344)         return $data;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1345)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1346) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1347)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1348)      * Enable or disable VERP address generation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1349)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1350)      * @param bool $enabled
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1351)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1352)     public function setVerp($enabled = false)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1353)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1354)         $this->do_verp = $enabled;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1355)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1356) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1357)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1358)      * Get VERP address generation mode.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1359)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1360)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1361)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1362)     public function getVerp()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1363)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1364)         return $this->do_verp;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1365)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1366) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1367)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1368)      * Set error messages and codes.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1369)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1370)      * @param string $message      The error message
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1371)      * @param string $detail       Further detail on the error
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1372)      * @param string $smtp_code    An associated SMTP error code
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1373)      * @param string $smtp_code_ex Extended SMTP code
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1374)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1375)     protected function setError($message, $detail = '', $smtp_code = '', $smtp_code_ex = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1376)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1377)         $this->error = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1378)             'error' => $message,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1379)             'detail' => $detail,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1380)             'smtp_code' => $smtp_code,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1381)             'smtp_code_ex' => $smtp_code_ex,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1382)         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1383)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1384) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1385)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1386)      * Set debug output method.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1387)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1388)      * @param string|callable $method The name of the mechanism to use for debugging output, or a callable to handle it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1389)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1390)     public function setDebugOutput($method = 'echo')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1391)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1392)         $this->Debugoutput = $method;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1393)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1394) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1395)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1396)      * Get debug output method.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1397)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1398)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1399)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1400)     public function getDebugOutput()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1401)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1402)         return $this->Debugoutput;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1403)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1404) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1405)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1406)      * Set debug output level.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1407)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1408)      * @param int $level
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1409)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1410)     public function setDebugLevel($level = 0)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1411)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1412)         $this->do_debug = $level;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1413)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1414) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1415)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1416)      * Get debug output level.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1417)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1418)      * @return int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1419)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1420)     public function getDebugLevel()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1421)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1422)         return $this->do_debug;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1423)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1424) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1425)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1426)      * Set SMTP timeout.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1427)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1428)      * @param int $timeout The timeout duration in seconds
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1429)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1430)     public function setTimeout($timeout = 0)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1431)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1432)         $this->Timeout = $timeout;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1433)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1434) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1435)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1436)      * Get SMTP timeout.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1437)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1438)      * @return int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1439)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1440)     public function getTimeout()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1441)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1442)         return $this->Timeout;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1443)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1444) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1445)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1446)      * Reports an error number and string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1447)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1448)      * @param int    $errno   The error number returned by PHP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1449)      * @param string $errmsg  The error message returned by PHP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1450)      * @param string $errfile The file the error occurred in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1451)      * @param int    $errline The line number the error occurred on
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1452)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1453)     protected function errorHandler($errno, $errmsg, $errfile = '', $errline = 0)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1454)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1455)         $notice = 'Connection failed.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1456)         $this->setError(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1457)             $notice,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1458)             $errmsg,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1459)             (string) $errno
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1460)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1461)         $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1462)             "$notice Error #$errno: $errmsg [$errfile line $errline]",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1463)             self::DEBUG_CONNECTION
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1464)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1465)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1466) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1467)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1468)      * Extract and return the ID of the last SMTP transaction based on
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1469)      * a list of patterns provided in SMTP::$smtp_transaction_id_patterns.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1470)      * Relies on the host providing the ID in response to a DATA command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1471)      * If no reply has been received yet, it will return null.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1472)      * If no pattern was matched, it will return false.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1473)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1474)      * @return bool|string|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1475)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1476)     protected function recordLastTransactionID()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1477)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1478)         $reply = $this->getLastReply();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1479) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1480)         if (empty($reply)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1481)             $this->last_smtp_transaction_id = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1482)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1483)             $this->last_smtp_transaction_id = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1484)             foreach ($this->smtp_transaction_id_patterns as $smtp_transaction_id_pattern) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1485)                 $matches = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1486)                 if (preg_match($smtp_transaction_id_pattern, $reply, $matches)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1487)                     $this->last_smtp_transaction_id = trim($matches[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1488)                     break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1489)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1490)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1491)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1492) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1493)         return $this->last_smtp_transaction_id;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1494)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1495) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1496)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1497)      * Get the queue/transaction ID of the last SMTP transaction
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1498)      * If no reply has been received yet, it will return null.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1499)      * If no pattern was matched, it will return false.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1500)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1501)      * @return bool|string|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1502)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1503)      * @see recordLastTransactionID()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1504)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1505)     public function getLastTransactionID()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1506)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1507)         return $this->last_smtp_transaction_id;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1508)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1509) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1) 6.9.2
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  1) ### Gmail Account Information
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  2) 
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  3) login: PickUrPlace904@gmail.com
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  4) password: PickUrPl@ce904!
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  5) 
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  6) ### AWS Account Information
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  7) 
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  8) email: PickUrPlace904@gmail.com
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  9) account name: PickUrPlace904
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 10) password: PickUrPl@ce904!
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  1) <!-- 
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  2)  SMTP endpoint address: 
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  3)  email-smtp.us-east-2.amazonaws.com
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  4)  email-smtp-fips.us-east-2.amazonaws.com  
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  5) 
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  6) Amazon SES SMTP interface port number:
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  7) STARTTLS Port
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  8) 25, 587 or 2587
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  9) -->
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 10) 
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 11) <?php
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 12) //Import PHPMailer classes into the global namespace
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 13) //These must be at the top of your script, not inside a function
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 14) use PHPMailer\PHPMailer\PHPMailer;
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 15) use PHPMailer\PHPMailer\SMTP;
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 16) use PHPMailer\PHPMailer\Exception;
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 17) 
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 18) //Load Composer's autoloader
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 19) require 'path/to/PHPMailer/src/Exception.php';
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 20) require 'path/to/PHPMailer/src/PHPMailer.php';
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 21) require 'path/to/PHPMailer/src/SMTP.php';
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 22) require 'vendor/autoload.php';
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 23) 
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 24) //Create an instance; passing `true` enables exceptions
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 25) $mail = new PHPMailer(true);
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 26) 
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 27) try {
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 28)     // Server settings
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 29)     $mail->SMTPDebug = SMTP::DEBUG_SERVER;                      // Enable verbose debug output
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 30)     $mail->isSMTP();                           // Send using SMTP
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 31)     $mail->Host       = 'smtp.gmail.com';    // Set the SMTP server to send through
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 32)     $mail->SMTPAuth   = true;                  // Enable SMTP authentication
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 33)     $mail->Username   = 'your_email@example.com'; // SMTP username
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 34)     $mail->Password   = 'your_email_password';   // SMTP password
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 35)     $mail->SMTPSecure = PHPMailer::ENCRYPTION_STARTTLS; // Enable TLS encryption; `PHPMailer::ENCRYPTION_SMTPS` also accepted
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 36)     $mail->Port       = 587;                   // TCP port to connect to
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 37) 
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 38)     // Recipients
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 39)     $mail->setFrom('your_email@example.com', 'Your Name');
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 40)     $mail->addAddress('recipient@example.com', 'Recipient Name');  // Add a recipient
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 41) 
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 42)     // Content
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 43)     $mail->isHTML(true);  // Set email format to HTML
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 44)     $mail->Subject = 'Test Email using PHPMailer';
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 45)     $mail->Body    = 'This is the HTML message body <b>in bold!</b>';
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 46)     $mail->AltBody = 'This is the plain text body for non-HTML email clients';
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 47) 
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 48)     // Send email
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 49)     $mail->send();
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 50)     echo 'Message has been sent';
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 51) } catch (Exception $e) {
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 52)     echo "Message could not be sent. Mailer Error: {$mail->ErrorInfo}";
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 53) }
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 54) 
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 55) ?>
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 1) ﻿IAM user name,SMTP user name,SMTP password
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 2) ses-smtp-user.20241014-090135,AKIAU5LH5V5QZPX7Z7IG,BM1CSFmMkzlRqyK+oX74XIGneD3Hg1BLrZ7Oej6vjw+X
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) GPL Cooperation Commitment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) Version 1.0
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4) Before filing or continuing to prosecute any legal proceeding or claim
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5) (other than a Defensive Action) arising from termination of a Covered
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6) License, we commit to extend to the person or entity ('you') accused
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) of violating the Covered License the following provisions regarding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) cure and reinstatement, taken from GPL version 3. As used here, the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) term 'this License' refers to the specific Covered License being
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) enforced.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12)     However, if you cease all violation of this License, then your
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13)     license from a particular copyright holder is reinstated (a)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14)     provisionally, unless and until the copyright holder explicitly
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15)     and finally terminates your license, and (b) permanently, if the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16)     copyright holder fails to notify you of the violation by some
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17)     reasonable means prior to 60 days after the cessation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19)     Moreover, your license from a particular copyright holder is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20)     reinstated permanently if the copyright holder notifies you of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21)     violation by some reasonable means, this is the first time you
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22)     have received notice of violation of this License (for any work)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23)     from that copyright holder, and you cure the violation prior to 30
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24)     days after your receipt of the notice.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) We intend this Commitment to be irrevocable, and binding and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) enforceable against us and assignees of or successors to our
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) copyrights.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) Definitions
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) 'Covered License' means the GNU General Public License, version 2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) (GPLv2), the GNU Lesser General Public License, version 2.1
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) (LGPLv2.1), or the GNU Library General Public License, version 2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) (LGPLv2), all as published by the Free Software Foundation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 37) 'Defensive Action' means a legal proceeding or claim that We bring
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 38) against you in response to a prior proceeding or claim initiated by
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 39) you or your affiliate.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 40) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 41) 'We' means each contributor to this repository as of the date of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 42) inclusion of this file, including subsidiaries of a corporate
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 43) contributor.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 44) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 45) This work is available under a Creative Commons Attribution-ShareAlike
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 46) 4.0 International license (https://creativecommons.org/licenses/by-sa/4.0/).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2)     "name": "phpmailer/phpmailer",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3)     "type": "library",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)     "description": "PHPMailer is a full-featured email creation and transfer class for PHP",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)     "authors": [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)         {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)             "name": "Marcus Bointon",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)             "email": "phpmailer@synchromedia.co.uk"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)         },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10)         {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11)             "name": "Jim Jagielski",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12)             "email": "jimjag@gmail.com"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13)         },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14)         {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15)             "name": "Andy Prevost",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16)             "email": "codeworxtech@users.sourceforge.net"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17)         },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18)         {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19)             "name": "Brent R. Matzelle"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21)     ],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22)     "funding": [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23)         {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24)             "url": "https://github.com/Synchro",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25)             "type": "github"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27)     ],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28)     "config": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29)         "allow-plugins": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30)             "dealerdirect/phpcodesniffer-composer-installer": true
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31)         },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32)         "lock": false
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33)     },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34)     "require": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35)         "php": ">=5.5.0",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36)         "ext-ctype": "*",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 37)         "ext-filter": "*",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 38)         "ext-hash": "*"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 39)     },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 40)     "require-dev": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 41)         "dealerdirect/phpcodesniffer-composer-installer": "^1.0",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 42)         "doctrine/annotations": "^1.2.6 || ^1.13.3",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 43)         "php-parallel-lint/php-console-highlighter": "^1.0.0",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 44)         "php-parallel-lint/php-parallel-lint": "^1.3.2",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 45)         "phpcompatibility/php-compatibility": "^9.3.5",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 46)         "roave/security-advisories": "dev-latest",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 47)         "squizlabs/php_codesniffer": "^3.7.2",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 48)         "yoast/phpunit-polyfills": "^1.0.4"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 49)     },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 50)     "suggest": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 51)         "decomplexity/SendOauth2": "Adapter for using XOAUTH2 authentication",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 52)         "ext-mbstring": "Needed to send email in multibyte encoding charset or decode encoded addresses",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 53)         "ext-openssl": "Needed for secure SMTP sending and DKIM signing",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 54)         "greew/oauth2-azure-provider": "Needed for Microsoft Azure XOAUTH2 authentication",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 55)         "hayageek/oauth2-yahoo": "Needed for Yahoo XOAUTH2 authentication",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 56)         "league/oauth2-google": "Needed for Google XOAUTH2 authentication",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 57)         "psr/log": "For optional PSR-3 debug logging",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 58)         "thenetworg/oauth2-azure": "Needed for Microsoft XOAUTH2 authentication",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 59)         "symfony/polyfill-mbstring": "To support UTF-8 if the Mbstring PHP extension is not enabled (^1.2)"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 60)     },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 61)     "autoload": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 62)         "psr-4": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 63)             "PHPMailer\\PHPMailer\\": "src/"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 64)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 65)     },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 66)     "autoload-dev": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 67)         "psr-4": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 68)             "PHPMailer\\Test\\": "test/"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 69)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 70)     },
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 71)     "license": "LGPL-2.1-only",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 72)     "scripts": {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 73)         "check": "./vendor/bin/phpcs",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 74)         "test": "./vendor/bin/phpunit --no-coverage",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 75)         "coverage": "./vendor/bin/phpunit",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 76)         "lint": [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 77)             "@php ./vendor/php-parallel-lint/php-parallel-lint/parallel-lint . --show-deprecated -e php,phps --exclude vendor --exclude .git --exclude build"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 78)         ]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 79)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 80) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) root = true
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) [*]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4) charset = utf-8
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5) indent_size = 4
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6) indent_style = space
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) end_of_line = lf
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) insert_final_newline = true
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) trim_trailing_whitespace = true
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) [*.md]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) trim_trailing_whitespace = false
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) [*.{yml,yaml}]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) indent_size = 2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   4)  * PHPMailer - PHP email creation and transport class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   5)  * PHP Version 5.5
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   6)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   7)  * @see https://github.com/PHPMailer/PHPMailer/ The PHPMailer GitHub project
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   8)  * @author Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   9)  * @author Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  10)  * @author Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  11)  * @author Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  12)  * @copyright 2012 - 2020 Marcus Bointon
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  13)  * @copyright 2010 - 2012 Jim Jagielski
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  14)  * @copyright 2004 - 2009 Andy Prevost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  15)  * @license https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html GNU Lesser General Public License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  16)  * @note This program is distributed in the hope that it will be useful - WITHOUT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  17)  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  18)  * FITNESS FOR A PARTICULAR PURPOSE.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  19)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  20) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  21) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  22)  * Get an OAuth2 token from an OAuth2 provider.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  23)  * * Install this script on your server so that it's accessible
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  24)  * as [https/http]://<yourdomain>/<folder>/get_oauth_token.php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  25)  * e.g.: http://localhost/phpmailer/get_oauth_token.php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  26)  * * Ensure dependencies are installed with 'composer install'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  27)  * * Set up an app in your Google/Yahoo/Microsoft account
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  28)  * * Set the script address as the app's redirect URL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  29)  * If no refresh token is obtained when running this file,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  30)  * revoke access to your app and run the script again.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  31)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  32) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  33) namespace PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  34) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  35) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  36)  * Aliases for League Provider Classes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  37)  * Make sure you have added these to your composer.json and run `composer install`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  38)  * Plenty to choose from here:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  39)  * @see https://oauth2-client.thephpleague.com/providers/thirdparty/
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  40)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  41) //@see https://github.com/thephpleague/oauth2-google
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  42) use League\OAuth2\Client\Provider\Google;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  43) //@see https://packagist.org/packages/hayageek/oauth2-yahoo
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  44) use Hayageek\OAuth2\Client\Provider\Yahoo;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  45) //@see https://github.com/stevenmaguire/oauth2-microsoft
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  46) use Stevenmaguire\OAuth2\Client\Provider\Microsoft;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  47) //@see https://github.com/greew/oauth2-azure-provider
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  48) use Greew\OAuth2\Client\Provider\Azure;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  49) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  50) if (!isset($_GET['code']) && !isset($_POST['provider'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  51)     ?>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  52) <html>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  53) <body>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  54) <form method="post">
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  55)     <h1>Select Provider</h1>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  56)     <input type="radio" name="provider" value="Google" id="providerGoogle">
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  57)     <label for="providerGoogle">Google</label><br>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  58)     <input type="radio" name="provider" value="Yahoo" id="providerYahoo">
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  59)     <label for="providerYahoo">Yahoo</label><br>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  60)     <input type="radio" name="provider" value="Microsoft" id="providerMicrosoft">
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  61)     <label for="providerMicrosoft">Microsoft</label><br>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  62)     <input type="radio" name="provider" value="Azure" id="providerAzure">
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  63)     <label for="providerAzure">Azure</label><br>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  64)     <h1>Enter id and secret</h1>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  65)     <p>These details are obtained by setting up an app in your provider's developer console.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  66)     </p>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  67)     <p>ClientId: <input type="text" name="clientId"><p>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  68)     <p>ClientSecret: <input type="text" name="clientSecret"></p>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  69)     <p>TenantID (only relevant for Azure): <input type="text" name="tenantId"></p>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  70)     <input type="submit" value="Continue">
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  71) </form>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  72) </body>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  73) </html>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  74)     <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  75)     exit;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  76) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  77) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  78) require 'vendor/autoload.php';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  79) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  80) session_start();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  81) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  82) $providerName = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  83) $clientId = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  84) $clientSecret = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  85) $tenantId = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  86) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  87) if (array_key_exists('provider', $_POST)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  88)     $providerName = $_POST['provider'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  89)     $clientId = $_POST['clientId'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  90)     $clientSecret = $_POST['clientSecret'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  91)     $tenantId = $_POST['tenantId'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  92)     $_SESSION['provider'] = $providerName;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  93)     $_SESSION['clientId'] = $clientId;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  94)     $_SESSION['clientSecret'] = $clientSecret;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  95)     $_SESSION['tenantId'] = $tenantId;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  96) } elseif (array_key_exists('provider', $_SESSION)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  97)     $providerName = $_SESSION['provider'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  98)     $clientId = $_SESSION['clientId'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  99)     $clientSecret = $_SESSION['clientSecret'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 100)     $tenantId = $_SESSION['tenantId'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 101) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 102) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 103) //If you don't want to use the built-in form, set your client id and secret here
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 104) //$clientId = 'RANDOMCHARS-----duv1n2.apps.googleusercontent.com';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 105) //$clientSecret = 'RANDOMCHARS-----lGyjPcRtvP';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 106) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 107) //If this automatic URL doesn't work, set it yourself manually to the URL of this script
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 108) $redirectUri = (isset($_SERVER['HTTPS']) ? 'https://' : 'http://') . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 109) //$redirectUri = 'http://localhost/PHPMailer/redirect';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 110) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 111) $params = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 112)     'clientId' => $clientId,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 113)     'clientSecret' => $clientSecret,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 114)     'redirectUri' => $redirectUri,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 115)     'accessType' => 'offline'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 116) ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 117) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 118) $options = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 119) $provider = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 120) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 121) switch ($providerName) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 122)     case 'Google':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 123)         $provider = new Google($params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 124)         $options = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 125)             'scope' => [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 126)                 'https://mail.google.com/'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 127)             ]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 128)         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 129)         break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 130)     case 'Yahoo':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 131)         $provider = new Yahoo($params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 132)         break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 133)     case 'Microsoft':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 134)         $provider = new Microsoft($params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 135)         $options = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 136)             'scope' => [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 137)                 'wl.imap',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 138)                 'wl.offline_access'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 139)             ]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 140)         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 141)         break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 142)     case 'Azure':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 143)         $params['tenantId'] = $tenantId;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 144) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 145)         $provider = new Azure($params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 146)         $options = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 147)             'scope' => [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 148)                 'https://outlook.office.com/SMTP.Send',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 149)                 'offline_access'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 150)             ]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 151)         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 152)         break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 153) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 154) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 155) if (null === $provider) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 156)     exit('Provider missing');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 157) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 158) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 159) if (!isset($_GET['code'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 160)     //If we don't have an authorization code then get one
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 161)     $authUrl = $provider->getAuthorizationUrl($options);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 162)     $_SESSION['oauth2state'] = $provider->getState();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 163)     header('Location: ' . $authUrl);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 164)     exit;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 165)     //Check given state against previously stored one to mitigate CSRF attack
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 166) } elseif (empty($_GET['state']) || ($_GET['state'] !== $_SESSION['oauth2state'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 167)     unset($_SESSION['oauth2state']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 168)     unset($_SESSION['provider']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 169)     exit('Invalid state');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 170) } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 171)     unset($_SESSION['provider']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 172)     //Try to get an access token (using the authorization code grant)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 173)     $token = $provider->getAccessToken(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 174)         'authorization_code',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 175)         [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 176)             'code' => $_GET['code']
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 177)         ]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 178)     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 179)     //Use this to interact with an API on the users behalf
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 180)     //Use this to get a new access token if the old one expires
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 181)     echo 'Refresh Token: ', htmlspecialchars($token->getRefreshToken());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 182) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Afrikaans PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) $PHPMAILER_LANG['authenticate']         = 'SMTP-fout: kon nie geverifieer word nie.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['connect_host']         = 'SMTP-fout: kon nie aan SMTP-verbind nie.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP-fout: data nie aanvaar nie.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['empty_message']        = 'Boodskapliggaam leeg.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['encoding']             = 'Onbekende kodering: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['execute']              = 'Kon nie uitvoer nie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['file_access']          = 'Kon nie lêer oopmaak nie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_open']            = 'Lêerfout: Kon nie lêer oopmaak nie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['from_failed']          = 'Die volgende Van adres misluk: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['instantiate']          = 'Kon nie posfunksie instansieer nie.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['invalid_address']      = 'Ongeldige adres: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer word nie ondersteun nie.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['provide_address']      = 'U moet ten minste een ontvanger e-pos adres verskaf.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['recipients_failed']    = 'SMTP-fout: Die volgende ontvangers het misluk: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['signing']              = 'Ondertekening Fout: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP-verbinding () misluk.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_error']           = 'SMTP-bediener fout: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['variable_set']         = 'Kan nie veranderlike instel of herstel nie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['extension_missing']    = 'Uitbreiding ontbreek: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Arabic PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author bahjat al mostafa <bahjat983@hotmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'خطأ SMTP : لا يمكن تأكيد الهوية.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'خطأ SMTP: لا يمكن الاتصال بالخادم SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'خطأ SMTP: لم يتم قبول المعلومات .';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'نص الرسالة فارغ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'ترميز غير معروف: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'لا يمكن تنفيذ : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'لا يمكن الوصول للملف: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'خطأ في الملف: لا يمكن فتحه: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'خطأ على مستوى عنوان المرسل : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'لا يمكن توفير خدمة البريد.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'الإرسال غير ممكن لأن عنوان البريد الإلكتروني غير صالح: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' برنامج الإرسال غير مدعوم.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'يجب توفير عنوان البريد الإلكتروني لمستلم واحد على الأقل.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'خطأ SMTP: الأخطاء التالية فشل في الارسال لكل من : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'خطأ في التوقيع: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() غير ممكن.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'خطأ على مستوى الخادم SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'لا يمكن تعيين أو إعادة تعيين متغير: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'الإضافة غير موجودة: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Assamese PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Manish Sarkar <manish.n.manish@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP ত্ৰুটি: প্ৰমাণীকৰণ কৰিব নোৱাৰি';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['buggy_php']            = 'আপোনাৰ PHP সংস্কৰণ এটা বাগৰ দ্বাৰা প্ৰভাৱিত হয় যাৰ ফলত নষ্ট বাৰ্তা হব পাৰে । ইয়াক সমাধান কৰিবলে, প্ৰেৰণ কৰিবলে SMTP ব্যৱহাৰ কৰক, আপোনাৰ php.ini ত mail.add_x_header বিকল্প নিষ্ক্ৰিয় কৰক, MacOS বা Linux লৈ সলনি কৰক, বা আপোনাৰ PHP সংস্কৰণ 7.0.17+ বা 7.1.3+ লৈ সলনি কৰক ।';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP ত্ৰুটি: SMTP চাৰ্ভাৰৰ সৈতে সংযোগ কৰিবলে অক্ষম';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP ত্ৰুটি: তথ্য গ্ৰহণ কৰা হোৱা নাই';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'বাৰ্তাৰ মূখ্য অংশ খালী।';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'অজ্ঞাত এনকোডিং: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'এক্সিকিউট কৰিব নোৱাৰি: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['extension_missing']    = 'সম্প্ৰসাৰণ নোহোৱা হৈছে: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_access']          = 'ফাইল অভিগম কৰিবলে অক্ষম: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['file_open']            = 'ফাইল ত্ৰুটি: ফাইল খোলিবলৈ অক্ষম: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['from_failed']          = 'নিম্নলিখিত প্ৰেৰকৰ ঠিকনা(সমূহ) ব্যৰ্থ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['instantiate']          = 'মেইল ফাংচনৰ এটা উদাহৰণ সৃষ্টি কৰিবলে অক্ষম';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_address']      = 'প্ৰেৰণ কৰিব নোৱাৰি: অবৈধ ইমেইল ঠিকনা: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_header']       = 'অবৈধ হেডাৰৰ নাম বা মান';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_hostentry']    = 'অবৈধ হোষ্টেন্ট্ৰি: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_host']         = 'অবৈধ হস্ট:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['mailer_not_supported'] = 'মেইলাৰ সমৰ্থিত নহয়।';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['provide_address']      = 'আপুনি অন্ততঃ এটা গন্তব্য ইমেইল ঠিকনা দিব লাগিব';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['recipients_failed']    = 'SMTP ত্ৰুটি: নিম্নলিখিত গন্তব্যস্থানসমূহ ব্যৰ্থ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['signing']              = 'স্বাক্ষৰ কৰাত ব্যৰ্থ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_code']            = 'SMTP কড: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['smtp_code_ex']         = 'অতিৰিক্ত SMTP তথ্য: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_detail']          = 'বিৱৰণ:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP সংযোগ() ব্যৰ্থ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_error']           = 'SMTP চাৰ্ভাৰৰ ত্ৰুটি: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['variable_set']         = 'চলক নিৰ্ধাৰণ কৰিব পৰা নগল: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['extension_missing']    = 'অনুপস্থিত সম্প্ৰসাৰণ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Azerbaijani PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author @mirjalal
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP xətası: Giriş uğursuz oldu.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP xətası: SMTP serverinə qoşulma uğursuz oldu.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP xətası: Verilənlər qəbul edilməyib.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Boş mesaj göndərilə bilməz.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Qeyri-müəyyən kodlaşdırma: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Əmr yerinə yetirilmədi: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Fayla giriş yoxdur: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Fayl xətası: Fayl açıla bilmədi: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Göstərilən poçtlara göndərmə uğursuz oldu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Mail funksiyası işə salına bilmədi.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Düzgün olmayan e-mail adresi: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' - e-mail kitabxanası dəstəklənmir.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Ən azı bir e-mail adresi daxil edilməlidir.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP xətası: Aşağıdakı ünvanlar üzrə alıcılara göndərmə uğursuzdur: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'İmzalama xətası: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP serverinə qoşulma uğursuz oldu.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP serveri xətası: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Dəyişənin quraşdırılması uğursuz oldu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Bosnian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Ermin Islamagić <ermin@islamagic.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP Greška: Neuspjela prijava.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP Greška: Nije moguće spojiti se sa SMTP serverom.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP Greška: Podatci nisu prihvaćeni.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Sadržaj poruke je prazan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Nepoznata kriptografija: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Nije moguće izvršiti naredbu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Nije moguće pristupiti datoteci: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Nije moguće otvoriti datoteku: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'SMTP Greška: Slanje sa navedenih e-mail adresa nije uspjelo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Greška: Slanje na navedene e-mail adrese nije uspjelo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'Ne mogu pokrenuti mail funkcionalnost.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'E-mail nije poslan. Neispravna e-mail adresa: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer nije podržan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['provide_address']      = 'Definišite barem jednu adresu primaoca.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Greška prilikom prijave: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'Spajanje na SMTP server nije uspjelo.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP greška: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Nije moguće postaviti varijablu ili je vratiti nazad: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Nedostaje ekstenzija: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Belarusian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Aleksander Maksymiuk <info@setpro.pl>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'Памылка SMTP: памылка ідэнтыфікацыі.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Памылка SMTP: нельга ўстанавіць сувязь з SMTP-серверам.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Памылка SMTP: звесткі непрынятыя.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Пустое паведамленне.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Невядомая кадыроўка тэксту: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Нельга выканаць каманду: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Няма доступу да файла: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Нельга адкрыць файл: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Няправільны адрас адпраўніка: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Нельга прымяніць функцыю mail().';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Нельга даслаць паведамленне, няправільны email атрымальніка: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['provide_address']      = 'Запоўніце, калі ласка, правільны email атрымальніка.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['mailer_not_supported'] = ' - паштовы сервер не падтрымліваецца.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'Памылка SMTP: няправільныя атрымальнікі: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Памылка подпісу паведамлення: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'Памылка сувязі з SMTP-серверам.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'Памылка SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Нельга ўстанавіць або перамяніць значэнне пераменнай: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Bulgarian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Mikhail Kyosev <mialygk@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP грешка: Не може да се удостовери пред сървъра.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP грешка: Не може да се свърже с SMTP хоста.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP грешка: данните не са приети.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Съдържанието на съобщението е празно';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Неизвестно кодиране: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Не може да се изпълни: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Няма достъп до файл: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Файлова грешка: Не може да се отвори файл: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Следните адреси за подател са невалидни: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Не може да се инстанцира функцията mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Невалиден адрес: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' - пощенски сървър не се поддържа.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Трябва да предоставите поне един email адрес за получател.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP грешка: Следните адреси за Получател са невалидни: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Грешка при подписване: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP провален connect().';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP сървърна грешка: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Не може да се установи или възстанови променлива: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Липсва разширение: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Bengali PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Manish Sarkar <manish.n.manish@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP ত্রুটি: প্রমাণীকরণ করতে অক্ষম৷';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['buggy_php']            = 'আপনার PHP সংস্করণ একটি বাগ দ্বারা প্রভাবিত হয় যার ফলে দূষিত বার্তা হতে পারে। এটি ঠিক করতে, পাঠাতে SMTP ব্যবহার করুন, আপনার php.ini এ mail.add_x_header বিকল্পটি নিষ্ক্রিয় করুন, MacOS বা Linux-এ স্যুইচ করুন, অথবা আপনার PHP সংস্করণকে 7.0.17+ বা 7.1.3+ এ পরিবর্তন করুন।';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP ত্রুটি: SMTP সার্ভারের সাথে সংযোগ করতে অক্ষম৷';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP ত্রুটি: ডেটা গ্রহণ করা হয়নি৷';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'বার্তার অংশটি খালি।';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'অজানা এনকোডিং: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'নির্বাহ করতে অক্ষম: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['extension_missing']    = 'এক্সটেনশন অনুপস্থিত:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_access']          = 'ফাইল অ্যাক্সেস করতে অক্ষম: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['file_open']            = 'ফাইল ত্রুটি: ফাইল খুলতে অক্ষম: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['from_failed']          = 'নিম্নলিখিত প্রেরকের ঠিকানা(গুলি) ব্যর্থ হয়েছে: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['instantiate']          = 'মেল ফাংশনের একটি উদাহরণ তৈরি করতে অক্ষম৷';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_address']      = 'পাঠাতে অক্ষম: অবৈধ ইমেল ঠিকানা: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_header']       = 'অবৈধ হেডার নাম বা মান';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_hostentry']    = 'অবৈধ হোস্টেন্ট্রি: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_host']         = 'অবৈধ হোস্ট:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['mailer_not_supported'] = 'মেইলার সমর্থিত নয়।';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['provide_address']      = 'আপনাকে অবশ্যই অন্তত একটি গন্তব্য ইমেল ঠিকানা প্রদান করতে হবে৷';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['recipients_failed']    = 'SMTP ত্রুটি: নিম্নলিখিত গন্তব্যগুলি ব্যর্থ হয়েছে: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['signing']              = 'স্বাক্ষর করতে ব্যর্থ হয়েছে: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_code']            = 'SMTP কোড: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['smtp_code_ex']         = 'অতিরিক্ত SMTP তথ্য:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_detail']          = 'বর্ণনা: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP সংযোগ() ব্যর্থ হয়েছে৷';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_error']           = 'SMTP সার্ভার ত্রুটি: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['variable_set']         = 'পরিবর্তনশীল সেট করা যায়নি: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['extension_missing']    = 'অনুপস্থিত এক্সটেনশন: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Catalan PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Ivan <web AT microstudi DOT com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'Error SMTP: No s’ha pogut autenticar.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Error SMTP: No es pot connectar al servidor SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Error SMTP: Dades no acceptades.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'El cos del missatge està buit.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Codificació desconeguda: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'No es pot executar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'No es pot accedir a l’arxiu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Error d’Arxiu: No es pot obrir l’arxiu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'La(s) següent(s) adreces de remitent han fallat: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'No s’ha pogut crear una instància de la funció Mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Adreça d’email invalida: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer no està suportat';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'S’ha de proveir almenys una adreça d’email com a destinatari.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'Error SMTP: Els següents destinataris han fallat: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Error al signar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'Ha fallat el SMTP Connect().';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'Error del servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'No s’ha pogut establir o restablir la variable: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Czech PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) $PHPMAILER_LANG['authenticate']         = 'Chyba SMTP: Autentizace selhala.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['connect_host']         = 'Chyba SMTP: Nelze navázat spojení se SMTP serverem.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['data_not_accepted']    = 'Chyba SMTP: Data nebyla přijata.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['empty_message']        = 'Prázdné tělo zprávy';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['encoding']             = 'Neznámé kódování: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['execute']              = 'Nelze provést: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['file_access']          = 'Nelze získat přístup k souboru: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_open']            = 'Chyba souboru: Nelze otevřít soubor pro čtení: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['from_failed']          = 'Následující adresa odesílatele je nesprávná: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['instantiate']          = 'Nelze vytvořit instanci emailové funkce.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['invalid_address']      = 'Neplatná adresa: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_hostentry']    = 'Záznam hostitele je nesprávný: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_host']         = 'Hostitel je nesprávný: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer není podporován.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['provide_address']      = 'Musíte zadat alespoň jednu emailovou adresu příjemce.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['recipients_failed']    = 'Chyba SMTP: Následující adresy příjemců nejsou správně: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['signing']              = 'Chyba přihlašování: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() selhal.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'Chyba SMTP serveru: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'Nelze nastavit nebo změnit proměnnou: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'Chybí rozšíření: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Danish PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author John Sebastian <jms@iwb.dk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * Rewrite and extension of the work by Mikael Stokkebro <info@stokkebro.dk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['authenticate']         = 'SMTP fejl: Login mislykkedes.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['buggy_php']            = 'Din version af PHP er berørt af en fejl, som gør at dine beskeder muligvis vises forkert. For at rette dette kan du skifte til SMTP, slå mail.add_x_header headeren i din php.ini fil fra, skifte til MacOS eller Linux eller opgradere din version af PHP til 7.0.17+ eller 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['connect_host']         = 'SMTP fejl: Forbindelse til SMTP serveren kunne ikke oprettes.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP fejl: Data blev ikke accepteret.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['empty_message']        = 'Meddelelsen er uden indhold';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['encoding']             = 'Ukendt encode-format: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['execute']              = 'Kunne ikke afvikle: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['extension_missing']    = 'Udvidelse mangler: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['file_access']          = 'Kunne ikke tilgå filen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['file_open']            = 'Fil fejl: Kunne ikke åbne filen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['from_failed']          = 'Følgende afsenderadresse er forkert: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['instantiate']          = 'Email funktionen kunne ikke initialiseres.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_address']      = 'Udgyldig adresse: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_header']       = 'Ugyldig header navn eller værdi';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_hostentry']    = 'Ugyldig hostentry: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['invalid_host']         = 'Ugyldig vært: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer understøttes ikke.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['provide_address']      = 'Indtast mindst en modtagers email adresse.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['recipients_failed']    = 'SMTP fejl: Følgende modtagere fejlede: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['signing']              = 'Signeringsfejl: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_code']            = 'SMTP kode: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_code_ex']         = 'Yderligere SMTP info: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() fejlede.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_detail']          = 'Detalje: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_error']           = 'SMTP server fejl: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['variable_set']         = 'Kunne ikke definere eller nulstille variablen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * German PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) $PHPMAILER_LANG['authenticate']         = 'SMTP-Fehler: Authentifizierung fehlgeschlagen.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['connect_host']         = 'SMTP-Fehler: Konnte keine Verbindung zum SMTP-Host herstellen.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP-Fehler: Daten werden nicht akzeptiert.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['empty_message']        = 'E-Mail-Inhalt ist leer.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['encoding']             = 'Unbekannte Kodierung: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['execute']              = 'Konnte folgenden Befehl nicht ausführen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['file_access']          = 'Zugriff auf folgende Datei fehlgeschlagen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_open']            = 'Dateifehler: Konnte folgende Datei nicht öffnen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['from_failed']          = 'Die folgende Absenderadresse ist nicht korrekt: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['instantiate']          = 'Mail-Funktion konnte nicht initialisiert werden.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['invalid_address']      = 'Die Adresse ist ungültig: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_hostentry']    = 'Ungültiger Hosteintrag: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_host']         = 'Ungültiger Host: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer wird nicht unterstützt.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['provide_address']      = 'Bitte geben Sie mindestens eine Empfängeradresse an.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['recipients_failed']    = 'SMTP-Fehler: Die folgenden Empfänger sind nicht korrekt: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['signing']              = 'Fehler beim Signieren: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'Verbindung zum SMTP-Server fehlgeschlagen.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'Fehler vom SMTP-Server: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'Kann Variable nicht setzen oder zurücksetzen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'Fehlende Erweiterung: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Greek PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) $PHPMAILER_LANG['authenticate']         = 'Σφάλμα SMTP: Αδυναμία πιστοποίησης.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['buggy_php']            = 'Η έκδοση PHP που χρησιμοποιείτε παρουσιάζει σφάλμα που μπορεί να έχει ως αποτέλεσμα κατεστραμένα μηνύματα. Για να το διορθώσετε, αλλάξτε τον τρόπο αποστολής σε SMTP, απενεργοποιήστε την επιλογή mail.add_x_header στο αρχείο php.ini, αλλάξτε λειτουργικό σε MacOS ή Linux ή αναβαθμίστε την PHP σε έκδοση 7.0.17+ ή 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Σφάλμα SMTP: Αδυναμία σύνδεσης με τον φιλοξενητή SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Σφάλμα SMTP: Μη αποδεκτά δεδομένα.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Η ηλεκτρονική επιστολή δεν έχει περιεχόμενο.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Άγνωστη μορφή κωδικοποίησης: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Αδυναμία εκτέλεσης: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['extension_missing']    = 'Απουσία επέκτασης: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Αδυναμία πρόσβασης στο αρχείο: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'Σφάλμα Αρχείου: Αδυναμία ανοίγματος αρχείου: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'Η ακόλουθη διεύθυνση αποστολέα δεν είναι σωστή: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'Αδυναμία εκκίνησης συνάρτησης Mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'Μη έγκυρη διεύθυνση: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_header']       = 'Μη έγκυρο όνομα κεφαλίδας ή τιμή';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_hostentry']    = 'Μη έγκυρη εισαγωγή φιλοξενητή: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_host']         = 'Μη έγκυρος φιλοξενητής: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer δεν υποστηρίζεται.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['provide_address']      = 'Δώστε τουλάχιστον μια ηλεκτρονική διεύθυνση παραλήπτη.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['recipients_failed']    = 'Σφάλμα SMTP: Οι παρακάτω διευθύνσεις παραλήπτη δεν είναι έγκυρες: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['signing']              = 'Σφάλμα υπογραφής: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['smtp_code']            = 'Κώδικάς SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_code_ex']         = 'Πρόσθετες πληροφορίες SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['smtp_connect_failed']  = 'Αποτυχία σύνδεσης SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_detail']          = 'Λεπτομέρεια: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_error']           = 'Σφάλμα με τον διακομιστή SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['variable_set']         = 'Αδυναμία ορισμού ή επαναφοράς μεταβλητής: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Esperanto PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) $PHPMAILER_LANG['authenticate']         = 'Eraro de servilo SMTP : aŭtentigo malsukcesis.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['connect_host']         = 'Eraro de servilo SMTP : konektado al servilo malsukcesis.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['data_not_accepted']    = 'Eraro de servilo SMTP : neĝustaj datumoj.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['empty_message']        = 'Teksto de mesaĝo mankas.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['encoding']             = 'Nekonata kodoprezento: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['execute']              = 'Lanĉi rulumadon ne eblis: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['file_access']          = 'Aliro al dosiero ne sukcesis: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_open']            = 'Eraro de dosiero: malfermo neeblas: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['from_failed']          = 'Jena adreso de sendinto malsukcesis: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['instantiate']          = 'Genero de retmesaĝa funkcio neeblis.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['invalid_address']      = 'Retadreso ne validas: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['mailer_not_supported'] = ' mesaĝilo ne subtenata.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['provide_address']      = 'Vi devas tajpi almenaŭ unu recevontan retadreson.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['recipients_failed']    = 'Eraro de servilo SMTP : la jenaj poŝtrecivuloj kaŭzis eraron: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['signing']              = 'Eraro de subskribo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP konektado malsukcesis.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_error']           = 'Eraro de servilo SMTP : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['variable_set']         = 'Variablo ne pravalorizeblas aŭ ne repravalorizeblas: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['extension_missing']    = 'Mankas etendo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Spanish PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Matt Sturdy <matt.sturdy@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Crystopher Glodzienski Cardoso <crystopher.glodzienski@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author Daniel Cruz <danicruz0415@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['authenticate']         = 'Error SMTP: Imposible autentificar.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['buggy_php']            = 'Tu versión de PHP está afectada por un bug que puede resultar en mensajes corruptos. Para arreglarlo, cambia a enviar usando SMTP, deshabilita la opción mail.add_x_header en tu php.ini, cambia a MacOS o Linux, o actualiza tu PHP a la versión 7.0.17+ o 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['connect_host']         = 'Error SMTP: Imposible conectar al servidor SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['data_not_accepted']    = 'Error SMTP: Datos no aceptados.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['empty_message']        = 'El cuerpo del mensaje está vacío.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['encoding']             = 'Codificación desconocida: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['execute']              = 'Imposible ejecutar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['extension_missing']    = 'Extensión faltante: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['file_access']          = 'Imposible acceder al archivo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['file_open']            = 'Error de Archivo: Imposible abrir el archivo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['from_failed']          = 'La(s) siguiente(s) direcciones de remitente fallaron: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['instantiate']          = 'Imposible crear una instancia de la función Mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_address']      = 'Imposible enviar: dirección de email inválido: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_header']       = 'Nombre o valor de encabezado no válido';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_hostentry']    = 'Hostentry inválido: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['invalid_host']         = 'Host inválido: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer no está soportado.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['provide_address']      = 'Debe proporcionar al menos una dirección de email de destino.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['recipients_failed']    = 'Error SMTP: Los siguientes destinos fallaron: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['signing']              = 'Error al firmar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_code']            = 'Código del servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_code_ex']         = 'Información adicional del servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() falló.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_detail']          = 'Detalle: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_error']           = 'Error del servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['variable_set']         = 'No se pudo configurar la variable: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Estonian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Indrek Päri
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Elan Ruusamäe <glen@delfi.ee>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'SMTP Viga: Autoriseerimise viga.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP Viga: Ei õnnestunud luua ühendust SMTP serveriga.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP Viga: Vigased andmed.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'Tühi kirja sisu';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG["encoding"]             = 'Tundmatu kodeering: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'Tegevus ebaõnnestus: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Pole piisavalt õiguseid järgneva faili avamiseks: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'Faili Viga: Faili avamine ebaõnnestus: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'Järgnev saatja e-posti aadress on vigane: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'mail funktiooni käivitamine ebaõnnestus.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'Saatmine peatatud, e-posti address vigane: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Te peate määrama vähemalt ühe saaja e-posti aadressi.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['mailer_not_supported'] = ' maileri tugi puudub.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Viga: Järgnevate saajate e-posti aadressid on vigased: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG["signing"]              = 'Viga allkirjastamisel: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() ebaõnnestus.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'SMTP serveri viga: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'Ei õnnestunud määrata või lähtestada muutujat: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'Nõutud laiendus on puudu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Persian/Farsi PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Ali Jazayeri <jaza.ali@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Mohammad Hossein Mojtahedi <mhm5000@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'خطای SMTP: احراز هویت با شکست مواجه شد.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'خطای SMTP: اتصال به سرور SMTP برقرار نشد.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'خطای SMTP: داده‌ها نا‌درست هستند.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'بخش متن پیام خالی است.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'کد‌گذاری نا‌شناخته: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'امکان اجرا وجود ندارد: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'امکان دسترسی به فایل وجود ندارد: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'خطای File: امکان بازکردن فایل وجود ندارد: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'آدرس فرستنده اشتباه است: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'امکان معرفی تابع ایمیل وجود ندارد.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'آدرس ایمیل معتبر نیست: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer پشتیبانی نمی‌شود.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['provide_address']      = 'باید حداقل یک آدرس گیرنده وارد کنید.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['recipients_failed']    = 'خطای SMTP: ارسال به آدرس گیرنده با خطا مواجه شد: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['signing']              = 'خطا در امضا: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'خطا در اتصال به SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'خطا در SMTP Server: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'امکان ارسال یا ارسال مجدد متغیر‌ها وجود ندارد: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'افزونه موجود نیست: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Finnish PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Jyry Kuukanen
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP-virhe: käyttäjätunnistus epäonnistui.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP-virhe: yhteys palvelimeen ei onnistu.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP-virhe: data on virheellinen.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) //$PHPMAILER_LANG['empty_message']        = 'Message body empty';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Tuntematon koodaustyyppi: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Suoritus epäonnistui: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Seuraavaan tiedostoon ei ole oikeuksia: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Tiedostovirhe: Ei voida avata tiedostoa: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Seuraava lähettäjän osoite on virheellinen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'mail-funktion luonti epäonnistui.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) //$PHPMAILER_LANG['invalid_address']      = 'Invalid address: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = 'postivälitintyyppiä ei tueta.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Aseta vähintään yksi vastaanottajan sähk&ouml;postiosoite.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP-virhe: seuraava vastaanottaja osoite on virheellinen.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) //$PHPMAILER_LANG['signing']              = 'Signing Error: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) //$PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() failed.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) //$PHPMAILER_LANG['smtp_error']           = 'SMTP server error: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) //$PHPMAILER_LANG['variable_set']         = 'Cannot set or reset variable: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Faroese PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Dávur Sørensen <http://www.profo-webdesign.dk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP feilur: Kundi ikki góðkenna.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP feilur: Kundi ikki knýta samband við SMTP vert.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP feilur: Data ikki góðkent.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) //$PHPMAILER_LANG['empty_message']        = 'Message body empty';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Ókend encoding: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Kundi ikki útføra: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Kundi ikki tilganga fílu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Fílu feilur: Kundi ikki opna fílu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'fylgjandi Frá/From adressa miseydnaðist: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Kuni ikki instantiera mail funktión.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) //$PHPMAILER_LANG['invalid_address']      = 'Invalid address: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' er ikki supporterað.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Tú skal uppgeva minst móttakara-emailadressu(r).';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Feilur: Fylgjandi móttakarar miseydnaðust: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) //$PHPMAILER_LANG['signing']              = 'Signing Error: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) //$PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() failed.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) //$PHPMAILER_LANG['smtp_error']           = 'SMTP server error: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) //$PHPMAILER_LANG['variable_set']         = 'Cannot set or reset variable: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * French PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * Some French punctuation requires a thin non-breaking space (U+202F) character before it,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * for example before a colon or exclamation mark.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * There is one of these characters between these quotes: " "
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['authenticate']         = 'Erreur SMTP : échec de l’authentification.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['buggy_php']            = 'Votre version de PHP est affectée par un bug qui peut entraîner des messages corrompus. Pour résoudre ce problème, passez à l’envoi par SMTP, désactivez l’option mail.add_x_header dans le fichier php.ini, passez à MacOS ou Linux, ou passez PHP à la version 7.0.17+ ou 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['connect_host']         = 'Erreur SMTP : impossible de se connecter au serveur SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['data_not_accepted']    = 'Erreur SMTP : données incorrectes.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['empty_message']        = 'Corps du message vide.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['encoding']             = 'Encodage inconnu : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['execute']              = 'Impossible de lancer l’exécution : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['extension_missing']    = 'Extension manquante : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['file_access']          = 'Impossible d’accéder au fichier : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['file_open']            = 'Ouverture du fichier impossible : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['from_failed']          = 'L’adresse d’expéditeur suivante a échoué : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['instantiate']          = 'Impossible d’instancier la fonction mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_address']      = 'Adresse courriel non valide : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_header']       = 'Nom ou valeur de l’en-tête non valide';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_hostentry']    = 'Entrée d’hôte non valide : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['invalid_host']         = 'Hôte non valide : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['mailer_not_supported'] = ' client de messagerie non supporté.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['provide_address']      = 'Vous devez fournir au moins une adresse de destinataire.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['recipients_failed']    = 'Erreur SMTP : les destinataires suivants ont échoué : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['signing']              = 'Erreur de signature : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_code']            = 'Code SMTP : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_code_ex']         = 'Informations supplémentaires SMTP : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_connect_failed']  = 'La fonction SMTP connect() a échoué.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_detail']          = 'Détails : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_error']           = 'Erreur du serveur SMTP : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['variable_set']         = 'Impossible d’initialiser ou de réinitialiser une variable : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Galician PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author by Donato Rouco <donatorouco@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'Erro SMTP: Non puido ser autentificado.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Erro SMTP: Non puido conectar co servidor SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Erro SMTP: Datos non aceptados.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Corpo da mensaxe vacía';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Codificación descoñecida: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Non puido ser executado: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Nob puido acceder ó arquivo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Erro de Arquivo: No puido abrir o arquivo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'A(s) seguinte(s) dirección(s) de remitente(s) deron erro: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Non puido crear unha instancia da función Mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Non puido envia-lo correo: dirección de email inválida: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer non está soportado.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Debe engadir polo menos unha dirección de email coma destino.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'Erro SMTP: Os seguintes destinos fallaron: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Erro ó firmar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() fallou.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'Erro do servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Non puidemos axustar ou reaxustar a variábel: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Hebrew PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Ronny Sherer <ronny@hoojima.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'שגיאת SMTP: פעולת האימות נכשלה.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'שגיאת SMTP: לא הצלחתי להתחבר לשרת SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'שגיאת SMTP: מידע לא התקבל.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'גוף ההודעה ריק';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['invalid_address']      = 'כתובת שגויה: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'קידוד לא מוכר: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'לא הצלחתי להפעיל את: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'לא ניתן לגשת לקובץ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'שגיאת קובץ: לא ניתן לגשת לקובץ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'כתובות הנמענים הבאות נכשלו: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'לא הצלחתי להפעיל את פונקציית המייל.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' אינה נתמכת.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'חובה לספק לפחות כתובת אחת של מקבל המייל.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'שגיאת SMTP: הנמענים הבאים נכשלו: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'שגיאת חתימה: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() failed.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'שגיאת שרת SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'לא ניתן לקבוע או לשנות את המשתנה: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Hindi PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Yash Karanke <mr.karanke@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * Rewrite and extension of the work by Jayanti Suthar <suthar.jayanti93@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'SMTP त्रुटि: प्रामाणिकता की जांच नहीं हो सका। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['buggy_php']            = 'PHP का आपका संस्करण एक बग से प्रभावित है जिसके परिणामस्वरूप संदेश दूषित हो सकते हैं. इसे ठीक करने हेतु, भेजने के लिए SMTP का उपयोग करे, अपने php.ini में mail.add_x_header विकल्प को अक्षम करें, MacOS या Linux पर जाए, या अपने PHP संस्करण को 7.0.17+ या 7.1.3+ बदले.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['connect_host']         = 'SMTP त्रुटि: SMTP सर्वर से कनेक्ट नहीं हो सका। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP त्रुटि: डेटा स्वीकार नहीं किया जाता है। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['empty_message']        = 'संदेश खाली है। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['encoding']             = 'अज्ञात एन्कोडिंग प्रकार। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['execute']              = 'आदेश को निष्पादित करने में विफल। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['extension_missing']    = 'एक्सटेन्षन गायब है: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['file_access']          = 'फ़ाइल उपलब्ध नहीं है। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['file_open']            = 'फ़ाइल त्रुटि: फाइल को खोला नहीं जा सका। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['from_failed']          = 'प्रेषक का पता गलत है। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['instantiate']          = 'मेल फ़ंक्शन कॉल नहीं कर सकता है।';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_address']      = 'पता गलत है। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_header']       = 'अमान्य हेडर नाम या मान';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_hostentry']    = 'अमान्य hostentry: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_host']         = 'अमान्य होस्ट: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['mailer_not_supported'] = 'मेल सर्वर के साथ काम नहीं करता है। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['provide_address']      = 'आपको कम से कम एक प्राप्तकर्ता का ई-मेल पता प्रदान करना होगा।';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['recipients_failed']    = 'SMTP त्रुटि: निम्न प्राप्तकर्ताओं को पते भेजने में विफल। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['signing']              = 'साइनअप त्रुटि: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['smtp_code']            = 'SMTP कोड: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_code_ex']         = 'अतिरिक्त SMTP जानकारी: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP का connect () फ़ंक्शन विफल हुआ। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_detail']          = 'विवरण: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_error']           = 'SMTP सर्वर त्रुटि। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['variable_set']         = 'चर को बना या संशोधित नहीं किया जा सकता। ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Croatian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Hrvoj3e <hrvoj3e@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP Greška: Neuspjela autentikacija.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP Greška: Ne mogu se spojiti na SMTP poslužitelj.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP Greška: Podatci nisu prihvaćeni.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Sadržaj poruke je prazan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Nepoznati encoding: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Nije moguće izvršiti naredbu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Nije moguće pristupiti datoteci: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Nije moguće otvoriti datoteku: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'SMTP Greška: Slanje s navedenih e-mail adresa nije uspjelo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Greška: Slanje na navedenih e-mail adresa nije uspjelo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'Ne mogu pokrenuti mail funkcionalnost.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'E-mail nije poslan. Neispravna e-mail adresa: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer nije podržan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['provide_address']      = 'Definirajte barem jednu adresu primatelja.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Greška prilikom prijave: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'Spajanje na SMTP poslužitelj nije uspjelo.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'Greška SMTP poslužitelja: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Ne mogu postaviti varijablu niti ju vratiti nazad: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Nedostaje proširenje: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Hungarian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author @dominicus-75
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP hiba: az azonosítás sikertelen.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP hiba: nem lehet kapcsolódni az SMTP-szerverhez.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP hiba: adatok visszautasítva.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Üres az üzenettörzs.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Ismeretlen kódolás: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Nem lehet végrehajtani: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'A következő fájl nem elérhető: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Fájl hiba: a következő fájlt nem lehet megnyitni: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'A feladóként megadott következő cím hibás: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'A PHP mail() függvényt nem sikerült végrehajtani.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Érvénytelen cím: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' a mailer-osztály nem támogatott.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Legalább egy címzettet fel kell tüntetni.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP hiba: a címzettként megadott következő címek hibásak: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Hibás aláírás: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'Hiba az SMTP-kapcsolatban.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP-szerver hiba: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'A következő változók beállítása nem sikerült: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Bővítmény hiányzik: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Armenian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Hrayr Grigoryan <hrayr@bits.am>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP -ի սխալ: չհաջողվեց ստուգել իսկությունը.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP -ի սխալ: չհաջողվեց կապ հաստատել SMTP սերվերի հետ.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP -ի սխալ: տվյալները ընդունված չեն.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Հաղորդագրությունը դատարկ է';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Կոդավորման անհայտ տեսակ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Չհաջողվեց իրականացնել հրամանը: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Ֆայլը հասանելի չէ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Ֆայլի սխալ: ֆայլը չհաջողվեց բացել: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Ուղարկողի հետևյալ հասցեն սխալ է: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Հնարավոր չէ կանչել mail ֆունկցիան.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Հասցեն սխալ է: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' փոստային սերվերի հետ չի աշխատում.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Անհրաժեշտ է տրամադրել գոնե մեկ ստացողի e-mail հասցե.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP -ի սխալ: չի հաջողվել ուղարկել հետևյալ ստացողների հասցեներին: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Ստորագրման սխալ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP -ի connect() ֆունկցիան չի հաջողվել';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP սերվերի սխալ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Չի հաջողվում ստեղծել կամ վերափոխել փոփոխականը: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Հավելվածը բացակայում է: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Indonesian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Cecep Prawiro <cecep.prawiro@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author @januridp
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author Ian Mustafa <mail@ianmustafa.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['authenticate']         = 'Kesalahan SMTP: Tidak dapat mengotentikasi.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['connect_host']         = 'Kesalahan SMTP: Tidak dapat terhubung ke host SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['data_not_accepted']    = 'Kesalahan SMTP: Data tidak diterima.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['empty_message']        = 'Isi pesan kosong';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['encoding']             = 'Pengkodean karakter tidak dikenali: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['execute']              = 'Tidak dapat menjalankan proses: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_access']          = 'Tidak dapat mengakses berkas: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['file_open']            = 'Kesalahan Berkas: Berkas tidak dapat dibuka: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['from_failed']          = 'Alamat pengirim berikut mengakibatkan kesalahan: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['instantiate']          = 'Tidak dapat menginisialisasi fungsi surel.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_address']      = 'Gagal terkirim, alamat surel tidak sesuai: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_hostentry']    = 'Gagal terkirim, entri host tidak sesuai: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_host']         = 'Gagal terkirim, host tidak sesuai: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['provide_address']      = 'Harus tersedia minimal satu alamat tujuan';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer tidak didukung';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['recipients_failed']    = 'Kesalahan SMTP: Alamat tujuan berikut menyebabkan kesalahan: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['signing']              = 'Kesalahan dalam penandatangan SSL: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() gagal.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_error']           = 'Kesalahan pada pelayan SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['variable_set']         = 'Tidak dapat mengatur atau mengatur ulang variabel: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['extension_missing']    = 'Ekstensi PHP tidak tersedia: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Italian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Ilias Bartolini <brain79@inwind.it>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Stefano Sabatini <sabas88@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'SMTP Error: Impossibile autenticarsi.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP Error: Impossibile connettersi all\'host SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP Error: Dati non accettati dal server.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'Il corpo del messaggio è vuoto';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'Codifica dei caratteri sconosciuta: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'Impossibile eseguire l\'operazione: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Impossibile accedere al file: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'File Error: Impossibile aprire il file: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'I seguenti indirizzi mittenti hanno generato errore: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'Impossibile istanziare la funzione mail';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'Impossibile inviare, l\'indirizzo email non è valido: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Deve essere fornito almeno un indirizzo ricevente';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['mailer_not_supported'] = 'Mailer non supportato';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Error: I seguenti indirizzi destinatari hanno generato un errore: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['signing']              = 'Errore nella firma: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() fallita.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'Errore del server SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'Impossibile impostare o resettare la variabile: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'Estensione mancante: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Japanese PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Mitsuhiro Yoshida <https://mitstek.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Yoshi Sakai <http://bluemooninc.jp/>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author Arisophy <https://github.com/arisophy/>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  * @author ARAKI Musashi <https://github.com/arakim/>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['authenticate']         = 'SMTPエラー: 認証できませんでした。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['buggy_php']            = 'ご利用のバージョンのPHPには不具合があり、メッセージが破損するおそれがあります。問題の解決は以下のいずれかを行ってください。SMTPでの送信に切り替える。php.iniのmail.add_x_headerをoffにする。MacOSまたはLinuxに切り替える。PHPバージョン7.0.17以降または7.1.3以降にアップグレードする。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['connect_host']         = 'SMTPエラー: SMTPホストに接続できませんでした。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['data_not_accepted']    = 'SMTPエラー: データが受け付けられませんでした。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['empty_message']        = 'メール本文が空です。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['encoding']             = '不明なエンコーディング: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['execute']              = '実行できませんでした: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['extension_missing']    = '拡張機能が見つかりません: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['file_access']          = 'ファイルにアクセスできません: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['file_open']            = 'ファイルエラー: ファイルを開けません: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['from_failed']          = 'Fromアドレスを登録する際にエラーが発生しました: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['instantiate']          = 'メール関数が正常に動作しませんでした。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_address']      = '不正なメールアドレス: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_header']       = '不正なヘッダー名またはその内容';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['invalid_hostentry']    = '不正なホストエントリー: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['invalid_host']         = '不正なホスト: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['mailer_not_supported'] = ' メーラーがサポートされていません。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['provide_address']      = '少なくとも1つメールアドレスを 指定する必要があります。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['recipients_failed']    = 'SMTPエラー: 次の受信者アドレスに 間違いがあります: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['signing']              = '署名エラー: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_code']            = 'SMTPコード: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_code_ex']         = 'SMTP追加情報: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP接続に失敗しました。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_detail']          = '詳細: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['smtp_error']           = 'SMTPサーバーエラー: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 37) $PHPMAILER_LANG['variable_set']         = '変数が存在しません: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Georgian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Avtandil Kikabidze aka LONGMAN <akalongman@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP შეცდომა: ავტორიზაცია შეუძლებელია.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP შეცდომა: SMTP სერვერთან დაკავშირება შეუძლებელია.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP შეცდომა: მონაცემები არ იქნა მიღებული.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['encoding']             = 'კოდირების უცნობი ტიპი: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['execute']              = 'შეუძლებელია შემდეგი ბრძანების შესრულება: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['file_access']          = 'შეუძლებელია წვდომა ფაილთან: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_open']            = 'ფაილური სისტემის შეცდომა: არ იხსნება ფაილი: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['from_failed']          = 'გამგზავნის არასწორი მისამართი: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['instantiate']          = 'mail ფუნქციის გაშვება ვერ ხერხდება.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['provide_address']      = 'გთხოვთ მიუთითოთ ერთი ადრესატის e-mail მისამართი მაინც.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['mailer_not_supported'] = ' - საფოსტო სერვერის მხარდაჭერა არ არის.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['recipients_failed']    = 'SMTP შეცდომა: შემდეგ მისამართებზე გაგზავნა ვერ მოხერხდა: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['empty_message']        = 'შეტყობინება ცარიელია';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_address']      = 'არ გაიგზავნა, e-mail მისამართის არასწორი ფორმატი: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'ხელმოწერის შეცდომა: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'შეცდომა SMTP სერვერთან დაკავშირებისას';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP სერვერის შეცდომა: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'შეუძლებელია შემდეგი ცვლადის შექმნა ან შეცვლა: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'ბიბლიოთეკა არ არსებობს: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Korean PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author ChalkPE <amato0617@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP 오류: 인증할 수 없습니다.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP 오류: SMTP 호스트에 접속할 수 없습니다.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP 오류: 데이터가 받아들여지지 않았습니다.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = '메세지 내용이 없습니다';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = '알 수 없는 인코딩: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = '실행 불가: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = '파일 접근 불가: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = '파일 오류: 파일을 열 수 없습니다: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = '다음 From 주소에서 오류가 발생했습니다: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'mail 함수를 인스턴스화할 수 없습니다';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = '잘못된 주소: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' 메일러는 지원되지 않습니다.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = '적어도 한 개 이상의 수신자 메일 주소를 제공해야 합니다.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP 오류: 다음 수신자에서 오류가 발생했습니다: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = '서명 오류: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP 연결을 실패하였습니다.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP 서버 오류: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = '변수 설정 및 초기화 불가: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = '확장자 없음: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Kurdish (Sorani) PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Halo Salman <halo@home4t.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'هەڵەی SMTP : نەتوانرا کۆدەکە پشتڕاست بکرێتەوە ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'هەڵەی SMTP: نەتوانرا پەیوەندی بە سێرڤەرەوە بکات SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'هەڵەی SMTP: ئەو زانیاریانە قبوڵ نەکرا.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'پەیامەکە بەتاڵە';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'کۆدکردنی نەزانراو : ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'ناتوانرێت جێبەجێ بکرێت: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'ناتوانرێت دەستت بگات بە فایلەکە: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'هەڵەی پەڕگە(فایل): ناتوانرێت بکرێتەوە: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'هەڵە لە ئاستی ناونیشانی نێرەر: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'ناتوانرێت خزمەتگوزاری پۆستە پێشکەش بکرێت.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'نەتوانرا بنێردرێت ، چونکە ناونیشانی ئیمەیڵەکە نادروستە: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' مەیلەر پشتگیری ناکات';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'دەبێت ناونیشانی ئیمەیڵی لانیکەم یەک وەرگر دابین بکرێت.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = ' هەڵەی SMTP: ئەم هەڵانەی خوارەوەشکستی هێنا لە ناردن بۆ هەردووکیان: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'هەڵەی واژۆ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect()پەیوەندی شکستی هێنا .';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'هەڵەی ئاستی سێرڤەری SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'ناتوانرێت بیگۆڕیت یان دوبارە بینێریتەوە: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'درێژکراوە نەماوە: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Lithuanian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Dainius Kaupaitis <dk@sum.lt>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP klaida: autentifikacija nepavyko.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP klaida: nepavyksta prisijungti prie SMTP stoties.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP klaida: duomenys nepriimti.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Laiško turinys tuščias';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Neatpažinta koduotė: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Nepavyko įvykdyti komandos: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Byla nepasiekiama: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Bylos klaida: Nepavyksta atidaryti: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Neteisingas siuntėjo adresas: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Nepavyko paleisti mail funkcijos.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Neteisingas adresas: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' pašto stotis nepalaikoma.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Nurodykite bent vieną gavėjo adresą.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP klaida: nepavyko išsiųsti šiems gavėjams: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Prisijungimo klaida: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP susijungimo klaida';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP stoties klaida: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Nepavyko priskirti reikšmės kintamajam: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Latvian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Eduards M. <e@npd.lv>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP kļūda: Autorizācija neizdevās.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP Kļūda: Nevar izveidot savienojumu ar SMTP serveri.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP Kļūda: Nepieņem informāciju.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Ziņojuma teksts ir tukšs';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Neatpazīts kodējums: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Neizdevās izpildīt komandu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Fails nav pieejams: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Faila kļūda: Nevar atvērt failu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Nepareiza sūtītāja adrese: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Nevar palaist sūtīšanas funkciju.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Nepareiza adrese: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' sūtītājs netiek atbalstīts.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Lūdzu, norādiet vismaz vienu adresātu.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP kļūda: neizdevās nosūtīt šādiem saņēmējiem: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Autorizācijas kļūda: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP savienojuma kļūda';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP servera kļūda: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Nevar piešķirt mainīgā vērtību: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Malagasy PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Hackinet <piyushjha8164@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'Hadisoana SMTP: Tsy nahomby ny fanamarinana.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP Error: Tsy afaka mampifandray amin\'ny mpampiantrano SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP diso: tsy voarakitra ny angona.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Tsy misy ny votoaty mailaka.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Tsy fantatra encoding: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Tsy afaka manatanteraka ity baiko manaraka ity: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Tsy nahomby ny fidirana amin\'ity rakitra ity: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Hadisoana diso: Tsy afaka nanokatra ity file manaraka ity: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Ny adiresy iraka manaraka dia diso: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Tsy afaka nanomboka ny hetsika mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Tsy mety ny adiresy: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer tsy manohana.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Alefaso azafady iray adiresy iray farafahakeliny.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Error: Tsy mety ireo mpanaraka ireto: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Error nandritra ny sonia:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'Tsy nahomby ny fifandraisana tamin\'ny server SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'Fahadisoana tamin\'ny server SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Tsy azo atao ny mametraka na mamerina ny variable: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Tsy hita ny ampahany: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Mongolian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author @wispas
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'Алдаа SMTP: Холбогдож чадсангүй.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Алдаа SMTP: SMTP- сервертэй холбогдож болохгүй байна.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Алдаа SMTP: зөвшөөрөгдсөнгүй.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['encoding']             = 'Тодорхойгүй кодчилол: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['execute']              = 'Коммандыг гүйцэтгэх боломжгүй байна: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['file_access']          = 'Файлд хандах боломжгүй байна: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_open']            = 'Файлын алдаа: файлыг нээх боломжгүй байна: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['from_failed']          = 'Илгээгчийн хаяг буруу байна: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['instantiate']          = 'Mail () функцийг ажиллуулах боломжгүй байна.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['provide_address']      = 'Хүлээн авагчийн имэйл хаягийг оруулна уу.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['mailer_not_supported'] = ' — мэйл серверийг дэмжсэнгүй.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['recipients_failed']    = 'Алдаа SMTP: ийм хаягийг илгээж чадсангүй: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['empty_message']        = 'Хоосон мессэж';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_address']      = 'И-Мэйл буруу форматтай тул илгээх боломжгүй: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Гарын үсгийн алдаа: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP сервертэй холбогдоход алдаа гарлаа';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP серверийн алдаа: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Хувьсагчийг тохируулах эсвэл дахин тохируулах боломжгүй байна: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Өргөтгөл байхгүй: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Malaysian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Nawawi Jamili <nawawi@rutweb.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'Ralat SMTP: Tidak dapat pengesahan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Ralat SMTP: Tidak dapat menghubungi hos pelayan SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Ralat SMTP: Data tidak diterima oleh pelayan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Tiada isi untuk mesej';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Pengekodan tidak diketahui: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Tidak dapat melaksanakan: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Tidak dapat mengakses fail: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Ralat Fail: Tidak dapat membuka fail: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Berikut merupakan ralat dari alamat e-mel: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Tidak dapat memberi contoh fungsi e-mel.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Alamat emel tidak sah: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' jenis penghantar emel tidak disokong.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Anda perlu menyediakan sekurang-kurangnya satu alamat e-mel penerima.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'Ralat SMTP: Penerima e-mel berikut telah gagal: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Ralat pada tanda tangan: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() telah gagal.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'Ralat pada pelayan SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Tidak boleh menetapkan atau menetapkan semula pembolehubah: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Sambungan hilang: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Norwegian Bokmål PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  $PHPMAILER_LANG['authenticate']         = 'SMTP-feil: Kunne ikke autentiseres.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  $PHPMAILER_LANG['buggy_php']            = 'Din versjon av PHP er berørt av en feil som kan føre til ødelagte meldinger. For å løse problemet kan du bytte til SMTP, deaktivere alternativet mail.add_x_header i php.ini, bytte til MacOS eller Linux eller oppgradere PHP til versjon 7.0.17+ eller 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10)  $PHPMAILER_LANG['connect_host']         = 'SMTP-feil: Kunne ikke koble til SMTP-vert.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11)  $PHPMAILER_LANG['data_not_accepted']    = 'SMTP-feil: data ikke akseptert.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12)  $PHPMAILER_LANG['empty_message']        = 'Meldingstekst mangler';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13)  $PHPMAILER_LANG['encoding']             = 'Ukjent koding: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14)  $PHPMAILER_LANG['execute']              = 'Kunne ikke utføres: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15)  $PHPMAILER_LANG['extension_missing']    = 'Utvidelse mangler: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16)  $PHPMAILER_LANG['file_access']          = 'Kunne ikke få tilgang til filen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17)  $PHPMAILER_LANG['file_open']            = 'Feil i fil: Kunne ikke åpne filen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18)  $PHPMAILER_LANG['from_failed']          = 'Følgende Fra-adresse mislyktes: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19)  $PHPMAILER_LANG['instantiate']          = 'Kunne ikke instansiere e-postfunksjonen.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20)  $PHPMAILER_LANG['invalid_address']      = 'Ugyldig adresse: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21)  $PHPMAILER_LANG['invalid_header']       = 'Ugyldig headernavn eller verdi';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22)  $PHPMAILER_LANG['invalid_hostentry']    = 'Ugyldig vertsinngang: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23)  $PHPMAILER_LANG['invalid_host']         = 'Ugyldig vert: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24)  $PHPMAILER_LANG['mailer_not_supported'] = ' sender er ikke støttet.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25)  $PHPMAILER_LANG['provide_address']      = 'Du må oppgi minst én mottaker-e-postadresse.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26)  $PHPMAILER_LANG['recipients_failed']    = 'SMTP Feil: Følgende mottakeradresse feilet: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27)  $PHPMAILER_LANG['signing']              = 'Signeringsfeil: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28)  $PHPMAILER_LANG['smtp_code']            = 'SMTP-kode: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29)  $PHPMAILER_LANG['smtp_code_ex']         = 'Ytterligere SMTP-info: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30)  $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP connect() mislyktes.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31)  $PHPMAILER_LANG['smtp_detail']          = 'Detaljer: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32)  $PHPMAILER_LANG['smtp_error']           = 'SMTP-serverfeil: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33)  $PHPMAILER_LANG['variable_set']         = 'Kan ikke angi eller tilbakestille variabel: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Dutch PHPMailer language file: refer to PHPMailer.php for definitive list.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Tuxion <team@tuxion.nl>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP-fout: authenticatie mislukt.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['buggy_php']            = 'PHP versie gededecteerd die onderhavig is aan een bug die kan resulteren in gecorrumpeerde berichten. Om dit te voorkomen, gebruik SMTP voor het verzenden van berichten, zet de mail.add_x_header optie in uw php.ini file uit, gebruik MacOS of Linux, of pas de gebruikte PHP versie aan naar versie 7.0.17+ or 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP-fout: kon niet verbinden met SMTP-host.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP-fout: data niet geaccepteerd.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'Berichttekst is leeg';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'Onbekende codering: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'Kon niet uitvoeren: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['extension_missing']    = 'Extensie afwezig: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_access']          = 'Kreeg geen toegang tot bestand: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['file_open']            = 'Bestandsfout: kon bestand niet openen: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['from_failed']          = 'Het volgende afzendersadres is mislukt: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['instantiate']          = 'Kon mailfunctie niet initialiseren.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_address']      = 'Ongeldig adres: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_header']       = 'Ongeldige header naam of waarde';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_hostentry']    = 'Ongeldige hostentry: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_host']         = 'Ongeldige host: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer wordt niet ondersteund.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['provide_address']      = 'Er moet minstens één ontvanger worden opgegeven.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['recipients_failed']    = 'SMTP-fout: de volgende ontvangers zijn mislukt: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['signing']              = 'Signeerfout: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_code']            = 'SMTP code: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['smtp_code_ex']         = 'Aanvullende SMTP informatie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Verbinding mislukt.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_detail']          = 'Detail: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_error']           = 'SMTP-serverfout: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['variable_set']         = 'Kan de volgende variabele niet instellen of resetten: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Polish PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) $PHPMAILER_LANG['authenticate']         = 'Błąd SMTP: Nie można przeprowadzić uwierzytelnienia.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['buggy_php']            = 'Twoja wersja PHP zawiera błąd, który może powodować uszkodzenie wiadomości. Aby go naprawić, przełącz się na wysyłanie za pomocą SMTP, wyłącz opcję mail.add_x_header w php.ini, przełącz się na MacOS lub Linux lub zaktualizuj PHP do wersji 7.0.17+ lub 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Błąd SMTP: Nie można połączyć się z wybranym hostem.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Błąd SMTP: Dane nie zostały przyjęte.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Wiadomość jest pusta.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Błędny sposób kodowania znaków: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Nie można uruchomić: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['extension_missing']    = 'Brakujące rozszerzenie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Brak dostępu do pliku: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'Nie można otworzyć pliku: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'Następujący adres nadawcy jest nieprawidłowy lub nie istnieje: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'Nie można wywołać funkcji mail(). Sprawdź konfigurację serwera.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'Nie można wysłać wiadomości, ' . 'następujący adres odbiorcy jest nieprawidłowy lub nie istnieje: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_header']       = 'Nieprawidłowa nazwa lub wartość nagłówka';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_hostentry']    = 'Nieprawidłowy wpis hosta: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_host']         = 'Nieprawidłowy host: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['provide_address']      = 'Należy podać prawidłowy adres email odbiorcy.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['mailer_not_supported'] = 'Wybrana metoda wysyłki wiadomości nie jest obsługiwana.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['recipients_failed']    = 'Błąd SMTP: Następujący odbiorcy są nieprawidłowi lub nie istnieją: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['signing']              = 'Błąd podpisywania wiadomości: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['smtp_code']            = 'Kod SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_code_ex']         = 'Dodatkowe informacje SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['smtp_connect_failed']  = 'Wywołanie funkcji SMTP Connect() zostało zakończone niepowodzeniem.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_detail']          = 'Szczegóły: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_error']           = 'Błąd SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['variable_set']         = 'Nie można ustawić lub zmodyfikować zmiennej: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Brazilian Portuguese PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Paulo Henrique Garcia <paulo@controllerweb.com.br>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Lucas Guimarães <lucas@lucasguimaraes.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author Phelipe Alves <phelipealvesdesouza@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  * @author Fabio Beneditto <fabiobeneditto@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10)  * @author Geidson Benício Coelho <geidsonc@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['authenticate']         = 'Erro de SMTP: Não foi possível autenticar.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['buggy_php']            = 'Sua versão do PHP é afetada por um bug que por resultar em messagens corrompidas. Para corrigir, mude para enviar usando SMTP, desative a opção mail.add_x_header em seu php.ini, mude para MacOS ou Linux, ou atualize seu PHP para versão 7.0.17+ ou 7.1.3+ ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['connect_host']         = 'Erro de SMTP: Não foi possível conectar ao servidor SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['data_not_accepted']    = 'Erro de SMTP: Dados rejeitados.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['empty_message']        = 'Mensagem vazia';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['encoding']             = 'Codificação desconhecida: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['execute']              = 'Não foi possível executar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['extension_missing']    = 'Extensão não existe: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['file_access']          = 'Não foi possível acessar o arquivo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['file_open']            = 'Erro de Arquivo: Não foi possível abrir o arquivo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['from_failed']          = 'Os seguintes remetentes falharam: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['instantiate']          = 'Não foi possível instanciar a função mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_address']      = 'Endereço de e-mail inválido: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['invalid_header']       = 'Nome ou valor de cabeçalho inválido';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['invalid_hostentry']    = 'hostentry inválido: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['invalid_host']         = 'host inválido: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer não é suportado.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['provide_address']      = 'Você deve informar pelo menos um destinatário.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['recipients_failed']    = 'Erro de SMTP: Os seguintes destinatários falharam: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['signing']              = 'Erro de Assinatura: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() falhou.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_code']            = 'Código do servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_error']           = 'Erro de servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['smtp_code_ex']         = 'Informações adicionais do servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 37) $PHPMAILER_LANG['smtp_detail']          = 'Detalhes do servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 38) $PHPMAILER_LANG['variable_set']         = 'Não foi possível definir ou redefinir a variável: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Portuguese (European) PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Jonadabe <jonadabe@hotmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'Erro do SMTP: Não foi possível realizar a autenticação.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Erro do SMTP: Não foi possível realizar ligação com o servidor SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Erro do SMTP: Os dados foram rejeitados.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'A mensagem no e-mail está vazia.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Codificação desconhecida: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Não foi possível executar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Não foi possível aceder o ficheiro: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Abertura do ficheiro: Não foi possível abrir o ficheiro: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Ocorreram falhas nos endereços dos seguintes remententes: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Não foi possível iniciar uma instância da função mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Não foi enviado nenhum e-mail para o endereço de e-mail inválido: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer não é suportado.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Tem de fornecer pelo menos um endereço como destinatário do e-mail.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'Erro do SMTP: O endereço do seguinte destinatário falhou: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Erro ao assinar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() falhou.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'Erro de servidor SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Não foi possível definir ou redefinir a variável: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Extensão em falta: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Romanian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) $PHPMAILER_LANG['authenticate']         = 'Eroare SMTP: Autentificarea a eșuat.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['buggy_php']            = 'Versiunea instalată de PHP este afectată de o problemă care poate duce la coruperea mesajelor Pentru a preveni această problemă, folosiți SMTP, dezactivați opțiunea mail.add_x_header din php.ini, folosiți MacOS/Linux sau actualizați versiunea de PHP la 7.0.17+ sau 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Eroare SMTP: Conectarea la serverul SMTP a eșuat.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Eroare SMTP: Datele nu au fost acceptate.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Mesajul este gol.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Encodare necunoscută: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Nu se poate executa următoarea comandă:  ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['extension_missing']    = 'Lipsește extensia: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Nu se poate accesa următorul fișier: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'Eroare fișier: Nu se poate deschide următorul fișier: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'Următoarele adrese From au dat eroare: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'Funcția mail nu a putut fi inițializată.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'Adresa de email nu este validă: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_header']       = 'Numele sau valoarea header-ului nu este validă: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_hostentry']    = 'Hostentry invalid: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_host']         = 'Host invalid: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer nu este suportat.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['provide_address']      = 'Trebuie să adăugați cel puțin o adresă de email.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['recipients_failed']    = 'Eroare SMTP: Următoarele adrese de email au eșuat: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['signing']              = 'A aparut o problemă la semnarea emailului. ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['smtp_code']            = 'Cod SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_code_ex']         = 'Informații SMTP adiționale: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['smtp_connect_failed']  = 'Conectarea la serverul SMTP a eșuat.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_detail']          = 'Detalii SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_error']           = 'Eroare server SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['variable_set']         = 'Nu se poate seta/reseta variabila. ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Russian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Alexey Chumakov <alex@chumakov.ru>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Foster Snowhill <i18n@forstwoof.ru>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author ProjectSoft <projectsoft2009@yandex.ru>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['authenticate']         = 'Ошибка SMTP: не удалось пройти аутентификацию.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['buggy_php']            = 'В вашей версии PHP есть ошибка, которая может привести к повреждению сообщений. Чтобы исправить, переключитесь на отправку по SMTP, отключите опцию mail.add_x_header в ваш php.ini, переключитесь на MacOS или Linux или обновите PHP до версии 7.0.17+ или 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['connect_host']         = 'Ошибка SMTP: не удается подключиться к SMTP-серверу.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['data_not_accepted']    = 'Ошибка SMTP: данные не приняты.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['empty_message']        = 'Пустое сообщение';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['encoding']             = 'Неизвестная кодировка: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['execute']              = 'Невозможно выполнить команду: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['extension_missing']    = 'Расширение отсутствует: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['file_access']          = 'Нет доступа к файлу: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['file_open']            = 'Файловая ошибка: не удаётся открыть файл: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['from_failed']          = 'Неверный адрес отправителя: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['instantiate']          = 'Невозможно запустить функцию mail().';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_address']      = 'Не отправлено из-за неправильного формата email-адреса: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_header']       = 'Неверное имя или значение заголовка';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_hostentry']    = 'Неверная запись хоста: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['invalid_host']         = 'Неверный хост: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['mailer_not_supported'] = ' — почтовый сервер не поддерживается.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['provide_address']      = 'Вы должны указать хотя бы один адрес электронной почты получателя.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['recipients_failed']    = 'Ошибка SMTP: Ошибка следующих получателей: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['signing']              = 'Ошибка подписи: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_code']            = 'Код SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_code_ex']         = 'Дополнительная информация SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_connect_failed']  = 'Ошибка соединения с SMTP-сервером.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_detail']          = 'Детали: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_error']           = 'Ошибка SMTP-сервера: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['variable_set']         = 'Невозможно установить или сбросить переменную: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Sinhalese PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Ayesh Karunaratne <ayesh@aye.sh>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP දෝෂය: සත්‍යාපනය අසාර්ථක විය.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['buggy_php']            = 'ඔබගේ PHP version එකෙහි පවතින දෝෂයක් නිසා email පණිවිඩ දෝෂ සහගත වීමේ හැකියාවක් ඇත. මෙය විසදීම සදහා SMTP භාවිතා කිරීම, mail.add_x_header INI setting එක අක්‍රීය කිරීම, MacOS හෝ Linux වලට මාරු වීම, හෝ ඔබගේ PHP version එක 7.0.17+ හෝ 7.1.3+ වලට අලුත් කිරීම කරගන්න.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP දෝෂය: සම්බන්ධ වීමට නොහැකි විය.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP දෝෂය: දත්ත පිළිගනු නොලැබේ.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'පණිවිඩ අන්තර්ගතය හිස්';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'නොදන්නා කේතනය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'ක්‍රියාත්මක කළ නොහැකි විය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['extension_missing']    = 'Extension එක නොමැත: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_access']          = 'File එකට ප්‍රවේශ විය නොහැකි විය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['file_open']            = 'File දෝෂය: File එක විවෘත කළ නොහැක: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['from_failed']          = 'පහත From ලිපිනයන් අසාර්ථක විය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['instantiate']          = 'mail function එක ක්‍රියාත්මක කළ නොහැක.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_address']      = 'වලංගු නොවන ලිපිනය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_header']       = 'වලංගු නොවන header නාමයක් හෝ අගයක්';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_hostentry']    = 'වලංගු නොවන hostentry එකක්: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_host']         = 'වලංගු නොවන host එකක්: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer සහාය නොදක්වයි.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['provide_address']      = 'ඔබ අවම වශයෙන් එක් ලබන්නෙකුගේ ඊමේල් ලිපිනයක් සැපයිය යුතුය.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['recipients_failed']    = 'SMTP දෝෂය: පහත ලබන්නන් අසමත් විය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['signing']              = 'Sign කිරීමේ දෝෂය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_code']            = 'SMTP කේතය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['smtp_code_ex']         = 'අමතර SMTP තොරතුරු: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP සම්බන්ධය අසාර්ථක විය.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_detail']          = 'තොරතුරු: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_error']           = 'SMTP දෝෂය: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['variable_set']         = 'Variable එක සැකසීමට හෝ නැවත සැකසීමට නොහැක: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Slovak PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Michal Tinka <michaltinka@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Peter Orlický <pcmanik91@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'SMTP Error: Chyba autentifikácie.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP Error: Nebolo možné nadviazať spojenie so SMTP serverom.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP Error: Dáta neboli prijaté';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'Prázdne telo správy.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'Neznáme kódovanie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'Nedá sa vykonať: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Súbor nebol nájdený: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'File Error: Súbor sa otvoriť pre čítanie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'Následujúca adresa From je nesprávna: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'Nedá sa vytvoriť inštancia emailovej funkcie.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'Neodoslané, emailová adresa je nesprávna: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_hostentry']    = 'Záznam hostiteľa je nesprávny: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['invalid_host']         = 'Hostiteľ je nesprávny: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['mailer_not_supported'] = ' emailový klient nieje podporovaný.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['provide_address']      = 'Musíte zadať aspoň jednu emailovú adresu príjemcu.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Error: Adresy príjemcov niesu správne ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['signing']              = 'Chyba prihlasovania: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() zlyhalo.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['smtp_error']           = 'SMTP chyba serveru: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['variable_set']         = 'Nemožno nastaviť alebo resetovať premennú: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['extension_missing']    = 'Chýba rozšírenie: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Slovene PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Klemen Tušar <techouse@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Filip Š <projects@filips.si>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author Blaž Oražem <blaz@orazem.si>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['authenticate']         = 'SMTP napaka: Avtentikacija ni uspela.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['buggy_php']            = 'Na vašo PHP različico vpliva napaka, ki lahko povzroči poškodovana sporočila. Če želite težavo odpraviti, preklopite na pošiljanje prek SMTP, onemogočite možnost mail.add_x_header v vaši php.ini datoteki, preklopite na MacOS ali Linux, ali nadgradite vašo PHP zaličico na 7.0.17+ ali 7.1.3+.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['connect_host']         = 'SMTP napaka: Vzpostavljanje povezave s SMTP gostiteljem ni uspelo.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP napaka: Strežnik zavrača podatke.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['empty_message']        = 'E-poštno sporočilo nima vsebine.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['encoding']             = 'Nepoznan tip kodiranja: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['execute']              = 'Operacija ni uspela: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['extension_missing']    = 'Manjkajoča razširitev: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['file_access']          = 'Nimam dostopa do datoteke: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['file_open']            = 'Ne morem odpreti datoteke: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['from_failed']          = 'Neveljaven e-naslov pošiljatelja: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['instantiate']          = 'Ne morem inicializirati mail funkcije.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_address']      = 'E-poštno sporočilo ni bilo poslano. E-naslov je neveljaven: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['invalid_header']       = 'Neveljavno ime ali vrednost glave';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_hostentry']    = 'Neveljaven vnos gostitelja: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['invalid_host']         = 'Neveljaven gostitelj: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer ni podprt.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['provide_address']      = 'Prosimo, vnesite vsaj enega naslovnika.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['recipients_failed']    = 'SMTP napaka: Sledeči naslovniki so neveljavni: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['signing']              = 'Napaka pri podpisovanju: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['smtp_code']            = 'SMTP koda: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['smtp_code_ex']         = 'Dodatne informacije o SMTP: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_connect_failed']  = 'Ne morem vzpostaviti povezave s SMTP strežnikom.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_detail']          = 'Podrobnosti: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_error']           = 'Napaka SMTP strežnika: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['variable_set']         = 'Ne morem nastaviti oz. ponastaviti spremenljivke: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Serbian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Александар Јевремовић <ajevremovic@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Miloš Milanović <mmilanovic016@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'SMTP greška: autentifikacija nije uspela.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP greška: povezivanje sa SMTP serverom nije uspelo.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP greška: podaci nisu prihvaćeni.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'Sadržaj poruke je prazan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'Nepoznato kodiranje: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'Nije moguće izvršiti naredbu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Nije moguće pristupiti datoteci: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'Nije moguće otvoriti datoteku: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'SMTP greška: slanje sa sledećih adresa nije uspelo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['recipients_failed']    = 'SMTP greška: slanje na sledeće adrese nije uspelo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['instantiate']          = 'Nije moguće pokrenuti mail funkciju.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_address']      = 'Poruka nije poslata. Neispravna adresa: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['mailer_not_supported'] = ' majler nije podržan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['provide_address']      = 'Definišite bar jednu adresu primaoca.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['signing']              = 'Greška prilikom prijave: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'Povezivanje sa SMTP serverom nije uspelo.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'Greška SMTP servera: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'Nije moguće zadati niti resetovati promenljivu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'Nedostaje proširenje: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Serbian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Александар Јевремовић <ajevremovic@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Miloš Milanović <mmilanovic016@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'SMTP грешка: аутентификација није успела.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP грешка: повезивање са SMTP сервером није успело.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP грешка: подаци нису прихваћени.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'Садржај поруке је празан.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'Непознато кодирање: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'Није могуће извршити наредбу: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Није могуће приступити датотеци: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'Није могуће отворити датотеку: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'SMTP грешка: слање са следећих адреса није успело: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['recipients_failed']    = 'SMTP грешка: слање на следеће адресе није успело: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['instantiate']          = 'Није могуће покренути mail функцију.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_address']      = 'Порука није послата. Неисправна адреса: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['mailer_not_supported'] = ' мејлер није подржан.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['provide_address']      = 'Дефинишите бар једну адресу примаоца.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['signing']              = 'Грешка приликом пријаве: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'Повезивање са SMTP сервером није успело.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'Грешка SMTP сервера: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'Није могуће задати нити ресетовати променљиву: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'Недостаје проширење: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Swedish PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Johan Linnér <johan@linner.biz>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP fel: Kunde inte autentisera.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP fel: Kunde inte ansluta till SMTP-server.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP fel: Data accepterades inte.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) //$PHPMAILER_LANG['empty_message']        = 'Message body empty';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Okänt encode-format: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Kunde inte köra: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Ingen åtkomst till fil: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Fil fel: Kunde inte öppna fil: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Följande avsändaradress är felaktig: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Kunde inte initiera e-postfunktion.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Felaktig adress: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['provide_address']      = 'Du måste ange minst en mottagares e-postadress.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['mailer_not_supported'] = ' mailer stöds inte.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP fel: Följande mottagare är felaktig: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Signeringsfel: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP Connect() misslyckades.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP serverfel: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Kunde inte definiera eller återställa variabel: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'Tillägg ej tillgängligt: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Tagalog PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  *   @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  *   @author Adriane Justine Tan <eidoriantan@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'SMTP Error: Hindi mapatotohanan.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'SMTP Error: Hindi makakonekta sa SMTP host.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP Error: Ang datos ay hindi naitanggap.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['empty_message']        = 'Walang laman ang mensahe';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['encoding']             = 'Hindi alam ang encoding: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['execute']              = 'Hindi maisasagawa: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_access']          = 'Hindi ma-access ang file: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_open']            = 'File Error: Hindi mabuksan ang file: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['from_failed']          = 'Ang sumusunod na address ay nabigo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['instantiate']          = 'Hindi maisimulan ang instance ng mail function.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['invalid_address']      = 'Hindi wasto ang address na naibigay: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['mailer_not_supported'] = 'Ang mailer ay hindi suportado.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['provide_address']      = 'Kailangan mong magbigay ng kahit isang email address na tatanggap.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Error: Ang mga sumusunod na tatanggap ay nabigo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['signing']              = 'Hindi ma-sign: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'Ang SMTP connect() ay nabigo.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'Ang server ng SMTP ay nabigo: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'Hindi matatakda o ma-reset ang mga variables: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'Nawawala ang extension: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Turkish PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Elçin Özel
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Can Yılmaz
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author Mehmet Benlioğlu
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  * @author @yasinaydin
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10)  * @author Ogün Karakuş
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['authenticate']         = 'SMTP Hatası: Oturum açılamadı.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['buggy_php']            = 'PHP sürümünüz iletilerin bozulmasına neden olabilecek bir hatadan etkileniyor. Bunu düzeltmek için, SMTP kullanarak göndermeye geçin, mail.add_x_header seçeneğini devre dışı bırakın php.ini dosyanızdaki mail.add_x_header seçeneğini devre dışı bırakın, MacOS veya Linux geçin veya PHP sürümünü 7.0.17+ veya 7.1.3+ sürümüne yükseltin,';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['connect_host']         = 'SMTP Hatası: SMTP sunucusuna bağlanılamadı.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP Hatası: Veri kabul edilmedi.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['empty_message']        = 'Mesajın içeriği boş';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['encoding']             = 'Bilinmeyen karakter kodlama: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['execute']              = 'Çalıştırılamadı: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['extension_missing']    = 'Eklenti bulunamadı: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['file_access']          = 'Dosyaya erişilemedi: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['file_open']            = 'Dosya Hatası: Dosya açılamadı: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['from_failed']          = 'Belirtilen adreslere gönderme başarısız: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['instantiate']          = 'Örnek e-posta fonksiyonu oluşturulamadı.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['invalid_address']      = 'Geçersiz e-posta adresi: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['invalid_header']       = 'Geçersiz başlık adı veya değeri: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['invalid_hostentry']    = 'Geçersiz ana bilgisayar girişi: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['invalid_host']         = 'Geçersiz ana bilgisayar: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['mailer_not_supported'] = ' e-posta kütüphanesi desteklenmiyor.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['provide_address']      = 'En az bir alıcı e-posta adresi belirtmelisiniz.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['recipients_failed']    = 'SMTP Hatası: Belirtilen alıcılara ulaşılamadı: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['signing']              = 'İmzalama hatası: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['smtp_code']            = 'SMTP kodu: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_code_ex']         = 'ek SMTP bilgileri: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP connect() fonksiyonu başarısız.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['smtp_detail']          = 'SMTP SMTP Detayı: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 37) $PHPMAILER_LANG['smtp_error']           = 'SMTP sunucu hatası: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 38) $PHPMAILER_LANG['variable_set']         = 'Değişken ayarlanamadı ya da sıfırlanamadı: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Ukrainian PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Yuriy Rudyy <yrudyy@prs.net.ua>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @fixed by Boris Yurchenko <boris@yurchenko.pp.ua>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['authenticate']         = 'Помилка SMTP: помилка авторизації.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['connect_host']         = 'Помилка SMTP: не вдається під\'єднатися до SMTP-серверу.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['data_not_accepted']    = 'Помилка SMTP: дані не прийнято.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Невідоме кодування: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Неможливо виконати команду: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Немає доступу до файлу: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Помилка файлової системи: не вдається відкрити файл: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Невірна адреса відправника: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Неможливо запустити функцію mail().';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['provide_address']      = 'Будь ласка, введіть хоча б одну email-адресу отримувача.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' - поштовий сервер не підтримується.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['recipients_failed']    = 'Помилка SMTP: не вдалося відправлення для таких отримувачів: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['empty_message']        = 'Пусте повідомлення';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_address']      = 'Не відправлено через неправильний формат email-адреси: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['signing']              = 'Помилка підпису: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_connect_failed']  = 'Помилка з\'єднання з SMTP-сервером';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_error']           = 'Помилка SMTP-сервера: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['variable_set']         = 'Неможливо встановити або скинути змінну: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['extension_missing']    = 'Розширення відсутнє: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Urdu PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author Saqib Ali Siddiqui <saqibsra@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'SMTP خرابی: تصدیق کرنے سے قاصر۔';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'SMTP خرابی: سرور سے منسلک ہونے سے قاصر۔';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP خرابی: ڈیٹا قبول نہیں کیا گیا۔';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'پیغام کی باڈی خالی ہے۔';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'نامعلوم انکوڈنگ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'عمل کرنے کے قابل نہیں ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'فائل تک رسائی سے قاصر:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'فائل کی خرابی: فائل کو کھولنے سے قاصر:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'درج ذیل بھیجنے والے کا پتہ ناکام ہو گیا:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'میل فنکشن کی مثال بنانے سے قاصر۔';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'بھیجنے سے قاصر: غلط ای میل پتہ:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' میلر تعاون یافتہ نہیں ہے۔';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'آپ کو کم از کم ایک منزل کا ای میل پتہ فراہم کرنا چاہیے۔';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'SMTP خرابی: درج ذیل پتہ پر نہیں بھیجا جاسکا: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'دستخط کی خرابی: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP ملنا ناکام ہوا';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'SMTP سرور کی خرابی: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'متغیر سیٹ نہیں کیا جا سکا: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['extension_missing']    = 'ایکٹینشن موجود نہیں ہے۔ ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['smtp_code']            = 'SMTP سرور کوڈ: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['smtp_code_ex']         = 'اضافی SMTP سرور کی معلومات:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['invalid_header']       = 'غلط ہیڈر کا نام یا قدر';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Vietnamese (Tiếng Việt) PHPMailer language file: refer to English translation for definitive list.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author VINADES.,JSC <contact@vinades.vn>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) $PHPMAILER_LANG['authenticate']         = 'Lỗi SMTP: Không thể xác thực.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) $PHPMAILER_LANG['connect_host']         = 'Lỗi SMTP: Không thể kết nối máy chủ SMTP.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['data_not_accepted']    = 'Lỗi SMTP: Dữ liệu không được chấp nhận.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['empty_message']        = 'Không có nội dung';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['encoding']             = 'Mã hóa không xác định: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['execute']              = 'Không thực hiện được: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['file_access']          = 'Không thể truy cập tệp tin ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['file_open']            = 'Lỗi Tập tin: Không thể mở tệp tin: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['from_failed']          = 'Lỗi địa chỉ gửi đi: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['instantiate']          = 'Không dùng được các hàm gửi thư.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['invalid_address']      = 'Đại chỉ emai không đúng: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['mailer_not_supported'] = ' trình gửi thư không được hỗ trợ.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['provide_address']      = 'Bạn phải cung cấp ít nhất một địa chỉ người nhận.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['recipients_failed']    = 'Lỗi SMTP: lỗi địa chỉ người nhận: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['signing']              = 'Lỗi đăng nhập: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['smtp_connect_failed']  = 'Lỗi kết nối với SMTP';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['smtp_error']           = 'Lỗi máy chủ smtp ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['variable_set']         = 'Không thể thiết lập hoặc thiết lập lại biến: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) //$PHPMAILER_LANG['extension_missing']    = 'Extension missing: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Simplified Chinese PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author liqwei <liqwei@liqwei.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author young <masxy@foxmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author Teddysun <i@teddysun.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['authenticate']         = 'SMTP 错误：登录失败。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['buggy_php']            = '您的 PHP 版本存在漏洞，可能会导致消息损坏。为修复此问题，请切换到使用 SMTP 发送，在您的 php.ini 中禁用 mail.add_x_header 选项。切换到 MacOS 或 Linux，或将您的 PHP 升级到 7.0.17+ 或 7.1.3+ 版本。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['connect_host']         = 'SMTP 错误：无法连接到 SMTP 主机。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP 错误：数据不被接受。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['empty_message']        = '邮件正文为空。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['encoding']             = '未知编码：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['execute']              = '无法执行：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['extension_missing']    = '缺少扩展名：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['file_access']          = '无法访问文件：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['file_open']            = '文件错误：无法打开文件：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['from_failed']          = '发送地址错误：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['instantiate']          = '未知函数调用。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['invalid_address']      = '发送失败，电子邮箱地址是无效的：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['mailer_not_supported'] = '发信客户端不被支持。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['provide_address']      = '必须提供至少一个收件人地址。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['recipients_failed']    = 'SMTP 错误：收件人地址错误：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP服务器连接失败。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['smtp_error']           = 'SMTP服务器出错：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['variable_set']         = '无法设置或重置变量：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) $PHPMAILER_LANG['invalid_header']       = '无效的标题名称或值';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) $PHPMAILER_LANG['invalid_hostentry']    = '无效的hostentry： ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) $PHPMAILER_LANG['invalid_host']         = '无效的主机：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) $PHPMAILER_LANG['signing']              = '签名错误：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) $PHPMAILER_LANG['smtp_code']            = 'SMTP代码： ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) $PHPMAILER_LANG['smtp_code_ex']         = '附加SMTP信息： ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) $PHPMAILER_LANG['smtp_detail']          = '详情:';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * Traditional Chinese PHPMailer language file: refer to English translation for definitive list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * @package PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  * @author liqwei <liqwei@liqwei.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @author Peter Dave Hello <@PeterDaveHello/>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  * @author Jason Chiang <xcojad@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) $PHPMAILER_LANG['authenticate']         = 'SMTP 錯誤：登入失敗。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) $PHPMAILER_LANG['connect_host']         = 'SMTP 錯誤：無法連線到 SMTP 主機。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) $PHPMAILER_LANG['data_not_accepted']    = 'SMTP 錯誤：無法接受的資料。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) $PHPMAILER_LANG['empty_message']        = '郵件內容為空';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) $PHPMAILER_LANG['encoding']             = '未知編碼: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) $PHPMAILER_LANG['execute']              = '無法執行：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) $PHPMAILER_LANG['file_access']          = '無法存取檔案：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) $PHPMAILER_LANG['file_open']            = '檔案錯誤：無法開啟檔案：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) $PHPMAILER_LANG['from_failed']          = '發送地址錯誤：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) $PHPMAILER_LANG['instantiate']          = '未知函數呼叫。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) $PHPMAILER_LANG['invalid_address']      = '因為電子郵件地址無效，無法傳送: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) $PHPMAILER_LANG['mailer_not_supported'] = '不支援的發信客戶端。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) $PHPMAILER_LANG['provide_address']      = '必須提供至少一個收件人地址。';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) $PHPMAILER_LANG['recipients_failed']    = 'SMTP 錯誤：以下收件人地址錯誤：';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) $PHPMAILER_LANG['signing']              = '電子簽章錯誤: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) $PHPMAILER_LANG['smtp_connect_failed']  = 'SMTP 連線失敗';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) $PHPMAILER_LANG['smtp_error']           = 'SMTP 伺服器錯誤: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) $PHPMAILER_LANG['variable_set']         = '無法設定或重設變數: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) $PHPMAILER_LANG['extension_missing']    = '遺失模組 Extension: ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   1)                   GNU LESSER GENERAL PUBLIC LICENSE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   2)                        Version 2.1, February 1999
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   3) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   4)  Copyright (C) 1991, 1999 Free Software Foundation, Inc.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   5)  51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   6)  Everyone is permitted to copy and distribute verbatim copies
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   7)  of this license document, but changing it is not allowed.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   8) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   9) [This is the first released version of the Lesser GPL.  It also counts
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  10)  as the successor of the GNU Library Public License, version 2, hence
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  11)  the version number 2.1.]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  12) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  13)                             Preamble
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  14) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  15)   The licenses for most software are designed to take away your
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  16) freedom to share and change it.  By contrast, the GNU General Public
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  17) Licenses are intended to guarantee your freedom to share and change
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  18) free software--to make sure the software is free for all its users.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  19) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  20)   This license, the Lesser General Public License, applies to some
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  21) specially designated software packages--typically libraries--of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  22) Free Software Foundation and other authors who decide to use it.  You
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  23) can use it too, but we suggest you first think carefully about whether
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  24) this license or the ordinary General Public License is the better
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  25) strategy to use in any particular case, based on the explanations below.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  26) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  27)   When we speak of free software, we are referring to freedom of use,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  28) not price.  Our General Public Licenses are designed to make sure that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  29) you have the freedom to distribute copies of free software (and charge
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  30) for this service if you wish); that you receive source code or can get
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  31) it if you want it; that you can change the software and use pieces of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  32) it in new free programs; and that you are informed that you can do
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  33) these things.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  34) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  35)   To protect your rights, we need to make restrictions that forbid
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  36) distributors to deny you these rights or to ask you to surrender these
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  37) rights.  These restrictions translate to certain responsibilities for
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  38) you if you distribute copies of the library or if you modify it.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  39) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  40)   For example, if you distribute copies of the library, whether gratis
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  41) or for a fee, you must give the recipients all the rights that we gave
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  42) you.  You must make sure that they, too, receive or can get the source
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  43) code.  If you link other code with the library, you must provide
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  44) complete object files to the recipients, so that they can relink them
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  45) with the library after making changes to the library and recompiling
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  46) it.  And you must show them these terms so they know their rights.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  47) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  48)   We protect your rights with a two-step method: (1) we copyright the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  49) library, and (2) we offer you this license, which gives you legal
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  50) permission to copy, distribute and/or modify the library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  51) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  52)   To protect each distributor, we want to make it very clear that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  53) there is no warranty for the free library.  Also, if the library is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  54) modified by someone else and passed on, the recipients should know
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  55) that what they have is not the original version, so that the original
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  56) author's reputation will not be affected by problems that might be
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  57) introduced by others.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  58) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  59)   Finally, software patents pose a constant threat to the existence of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  60) any free program.  We wish to make sure that a company cannot
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  61) effectively restrict the users of a free program by obtaining a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  62) restrictive license from a patent holder.  Therefore, we insist that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  63) any patent license obtained for a version of the library must be
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  64) consistent with the full freedom of use specified in this license.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  65) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  66)   Most GNU software, including some libraries, is covered by the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  67) ordinary GNU General Public License.  This license, the GNU Lesser
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  68) General Public License, applies to certain designated libraries, and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  69) is quite different from the ordinary General Public License.  We use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  70) this license for certain libraries in order to permit linking those
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  71) libraries into non-free programs.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  72) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  73)   When a program is linked with a library, whether statically or using
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  74) a shared library, the combination of the two is legally speaking a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  75) combined work, a derivative of the original library.  The ordinary
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  76) General Public License therefore permits such linking only if the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  77) entire combination fits its criteria of freedom.  The Lesser General
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  78) Public License permits more lax criteria for linking other code with
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  79) the library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  80) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  81)   We call this license the "Lesser" General Public License because it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  82) does Less to protect the user's freedom than the ordinary General
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  83) Public License.  It also provides other free software developers Less
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  84) of an advantage over competing non-free programs.  These disadvantages
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  85) are the reason we use the ordinary General Public License for many
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  86) libraries.  However, the Lesser license provides advantages in certain
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  87) special circumstances.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  88) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  89)   For example, on rare occasions, there may be a special need to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  90) encourage the widest possible use of a certain library, so that it becomes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  91) a de-facto standard.  To achieve this, non-free programs must be
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  92) allowed to use the library.  A more frequent case is that a free
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  93) library does the same job as widely used non-free libraries.  In this
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  94) case, there is little to gain by limiting the free library to free
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  95) software only, so we use the Lesser General Public License.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  96) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  97)   In other cases, permission to use a particular library in non-free
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  98) programs enables a greater number of people to use a large body of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  99) free software.  For example, permission to use the GNU C Library in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 100) non-free programs enables many more people to use the whole GNU
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 101) operating system, as well as its variant, the GNU/Linux operating
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 102) system.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 103) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 104)   Although the Lesser General Public License is Less protective of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 105) users' freedom, it does ensure that the user of a program that is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 106) linked with the Library has the freedom and the wherewithal to run
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 107) that program using a modified version of the Library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 108) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 109)   The precise terms and conditions for copying, distribution and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 110) modification follow.  Pay close attention to the difference between a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 111) "work based on the library" and a "work that uses the library".  The
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 112) former contains code derived from the library, whereas the latter must
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 113) be combined with the library in order to run.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 114) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 115)                   GNU LESSER GENERAL PUBLIC LICENSE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 116)    TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 117) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 118)   0. This License Agreement applies to any software library or other
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 119) program which contains a notice placed by the copyright holder or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 120) other authorized party saying it may be distributed under the terms of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 121) this Lesser General Public License (also called "this License").
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 122) Each licensee is addressed as "you".
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 123) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 124)   A "library" means a collection of software functions and/or data
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 125) prepared so as to be conveniently linked with application programs
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 126) (which use some of those functions and data) to form executables.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 127) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 128)   The "Library", below, refers to any such software library or work
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 129) which has been distributed under these terms.  A "work based on the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 130) Library" means either the Library or any derivative work under
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 131) copyright law: that is to say, a work containing the Library or a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 132) portion of it, either verbatim or with modifications and/or translated
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 133) straightforwardly into another language.  (Hereinafter, translation is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 134) included without limitation in the term "modification".)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 135) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 136)   "Source code" for a work means the preferred form of the work for
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 137) making modifications to it.  For a library, complete source code means
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 138) all the source code for all modules it contains, plus any associated
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 139) interface definition files, plus the scripts used to control compilation
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 140) and installation of the library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 141) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 142)   Activities other than copying, distribution and modification are not
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 143) covered by this License; they are outside its scope.  The act of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 144) running a program using the Library is not restricted, and output from
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 145) such a program is covered only if its contents constitute a work based
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 146) on the Library (independent of the use of the Library in a tool for
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 147) writing it).  Whether that is true depends on what the Library does
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 148) and what the program that uses the Library does.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 149) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 150)   1. You may copy and distribute verbatim copies of the Library's
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 151) complete source code as you receive it, in any medium, provided that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 152) you conspicuously and appropriately publish on each copy an
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 153) appropriate copyright notice and disclaimer of warranty; keep intact
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 154) all the notices that refer to this License and to the absence of any
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 155) warranty; and distribute a copy of this License along with the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 156) Library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 157) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 158)   You may charge a fee for the physical act of transferring a copy,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 159) and you may at your option offer warranty protection in exchange for a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 160) fee.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 161) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 162)   2. You may modify your copy or copies of the Library or any portion
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 163) of it, thus forming a work based on the Library, and copy and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 164) distribute such modifications or work under the terms of Section 1
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 165) above, provided that you also meet all of these conditions:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 166) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 167)     a) The modified work must itself be a software library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 168) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 169)     b) You must cause the files modified to carry prominent notices
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 170)     stating that you changed the files and the date of any change.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 171) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 172)     c) You must cause the whole of the work to be licensed at no
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 173)     charge to all third parties under the terms of this License.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 174) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 175)     d) If a facility in the modified Library refers to a function or a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 176)     table of data to be supplied by an application program that uses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 177)     the facility, other than as an argument passed when the facility
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 178)     is invoked, then you must make a good faith effort to ensure that,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 179)     in the event an application does not supply such function or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 180)     table, the facility still operates, and performs whatever part of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 181)     its purpose remains meaningful.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 182) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 183)     (For example, a function in a library to compute square roots has
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 184)     a purpose that is entirely well-defined independent of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 185)     application.  Therefore, Subsection 2d requires that any
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 186)     application-supplied function or table used by this function must
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 187)     be optional: if the application does not supply it, the square
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 188)     root function must still compute square roots.)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 189) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 190) These requirements apply to the modified work as a whole.  If
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 191) identifiable sections of that work are not derived from the Library,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 192) and can be reasonably considered independent and separate works in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 193) themselves, then this License, and its terms, do not apply to those
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 194) sections when you distribute them as separate works.  But when you
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 195) distribute the same sections as part of a whole which is a work based
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 196) on the Library, the distribution of the whole must be on the terms of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 197) this License, whose permissions for other licensees extend to the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 198) entire whole, and thus to each and every part regardless of who wrote
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 199) it.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 200) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 201) Thus, it is not the intent of this section to claim rights or contest
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 202) your rights to work written entirely by you; rather, the intent is to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 203) exercise the right to control the distribution of derivative or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 204) collective works based on the Library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 205) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 206) In addition, mere aggregation of another work not based on the Library
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 207) with the Library (or with a work based on the Library) on a volume of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 208) a storage or distribution medium does not bring the other work under
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 209) the scope of this License.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 210) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 211)   3. You may opt to apply the terms of the ordinary GNU General Public
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 212) License instead of this License to a given copy of the Library.  To do
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 213) this, you must alter all the notices that refer to this License, so
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 214) that they refer to the ordinary GNU General Public License, version 2,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 215) instead of to this License.  (If a newer version than version 2 of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 216) ordinary GNU General Public License has appeared, then you can specify
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 217) that version instead if you wish.)  Do not make any other change in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 218) these notices.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 219) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 220)   Once this change is made in a given copy, it is irreversible for
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 221) that copy, so the ordinary GNU General Public License applies to all
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 222) subsequent copies and derivative works made from that copy.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 223) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 224)   This option is useful when you wish to copy part of the code of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 225) the Library into a program that is not a library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 226) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 227)   4. You may copy and distribute the Library (or a portion or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 228) derivative of it, under Section 2) in object code or executable form
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 229) under the terms of Sections 1 and 2 above provided that you accompany
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 230) it with the complete corresponding machine-readable source code, which
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 231) must be distributed under the terms of Sections 1 and 2 above on a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 232) medium customarily used for software interchange.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 233) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 234)   If distribution of object code is made by offering access to copy
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 235) from a designated place, then offering equivalent access to copy the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 236) source code from the same place satisfies the requirement to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 237) distribute the source code, even though third parties are not
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 238) compelled to copy the source along with the object code.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 239) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 240)   5. A program that contains no derivative of any portion of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 241) Library, but is designed to work with the Library by being compiled or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 242) linked with it, is called a "work that uses the Library".  Such a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 243) work, in isolation, is not a derivative work of the Library, and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 244) therefore falls outside the scope of this License.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 245) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 246)   However, linking a "work that uses the Library" with the Library
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 247) creates an executable that is a derivative of the Library (because it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 248) contains portions of the Library), rather than a "work that uses the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 249) library".  The executable is therefore covered by this License.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 250) Section 6 states terms for distribution of such executables.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 251) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 252)   When a "work that uses the Library" uses material from a header file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 253) that is part of the Library, the object code for the work may be a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 254) derivative work of the Library even though the source code is not.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 255) Whether this is true is especially significant if the work can be
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 256) linked without the Library, or if the work is itself a library.  The
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 257) threshold for this to be true is not precisely defined by law.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 258) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 259)   If such an object file uses only numerical parameters, data
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 260) structure layouts and accessors, and small macros and small inline
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 261) functions (ten lines or less in length), then the use of the object
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 262) file is unrestricted, regardless of whether it is legally a derivative
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 263) work.  (Executables containing this object code plus portions of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 264) Library will still fall under Section 6.)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 265) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 266)   Otherwise, if the work is a derivative of the Library, you may
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 267) distribute the object code for the work under the terms of Section 6.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 268) Any executables containing that work also fall under Section 6,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 269) whether or not they are linked directly with the Library itself.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 270) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 271)   6. As an exception to the Sections above, you may also combine or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 272) link a "work that uses the Library" with the Library to produce a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 273) work containing portions of the Library, and distribute that work
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 274) under terms of your choice, provided that the terms permit
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 275) modification of the work for the customer's own use and reverse
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 276) engineering for debugging such modifications.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 277) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 278)   You must give prominent notice with each copy of the work that the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 279) Library is used in it and that the Library and its use are covered by
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 280) this License.  You must supply a copy of this License.  If the work
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 281) during execution displays copyright notices, you must include the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 282) copyright notice for the Library among them, as well as a reference
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 283) directing the user to the copy of this License.  Also, you must do one
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 284) of these things:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 285) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 286)     a) Accompany the work with the complete corresponding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 287)     machine-readable source code for the Library including whatever
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 288)     changes were used in the work (which must be distributed under
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 289)     Sections 1 and 2 above); and, if the work is an executable linked
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 290)     with the Library, with the complete machine-readable "work that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 291)     uses the Library", as object code and/or source code, so that the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 292)     user can modify the Library and then relink to produce a modified
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 293)     executable containing the modified Library.  (It is understood
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 294)     that the user who changes the contents of definitions files in the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 295)     Library will not necessarily be able to recompile the application
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 296)     to use the modified definitions.)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 297) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 298)     b) Use a suitable shared library mechanism for linking with the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 299)     Library.  A suitable mechanism is one that (1) uses at run time a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 300)     copy of the library already present on the user's computer system,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 301)     rather than copying library functions into the executable, and (2)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 302)     will operate properly with a modified version of the library, if
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 303)     the user installs one, as long as the modified version is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 304)     interface-compatible with the version that the work was made with.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 305) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 306)     c) Accompany the work with a written offer, valid for at
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 307)     least three years, to give the same user the materials
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 308)     specified in Subsection 6a, above, for a charge no more
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 309)     than the cost of performing this distribution.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 310) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 311)     d) If distribution of the work is made by offering access to copy
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 312)     from a designated place, offer equivalent access to copy the above
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 313)     specified materials from the same place.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 314) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 315)     e) Verify that the user has already received a copy of these
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 316)     materials or that you have already sent this user a copy.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 317) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 318)   For an executable, the required form of the "work that uses the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 319) Library" must include any data and utility programs needed for
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 320) reproducing the executable from it.  However, as a special exception,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 321) the materials to be distributed need not include anything that is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 322) normally distributed (in either source or binary form) with the major
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 323) components (compiler, kernel, and so on) of the operating system on
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 324) which the executable runs, unless that component itself accompanies
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 325) the executable.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 326) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 327)   It may happen that this requirement contradicts the license
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 328) restrictions of other proprietary libraries that do not normally
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 329) accompany the operating system.  Such a contradiction means you cannot
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 330) use both them and the Library together in an executable that you
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 331) distribute.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 332) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 333)   7. You may place library facilities that are a work based on the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 334) Library side-by-side in a single library together with other library
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 335) facilities not covered by this License, and distribute such a combined
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 336) library, provided that the separate distribution of the work based on
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 337) the Library and of the other library facilities is otherwise
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 338) permitted, and provided that you do these two things:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 339) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 340)     a) Accompany the combined library with a copy of the same work
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 341)     based on the Library, uncombined with any other library
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 342)     facilities.  This must be distributed under the terms of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 343)     Sections above.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 344) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 345)     b) Give prominent notice with the combined library of the fact
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 346)     that part of it is a work based on the Library, and explaining
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 347)     where to find the accompanying uncombined form of the same work.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 348) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 349)   8. You may not copy, modify, sublicense, link with, or distribute
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 350) the Library except as expressly provided under this License.  Any
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 351) attempt otherwise to copy, modify, sublicense, link with, or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 352) distribute the Library is void, and will automatically terminate your
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 353) rights under this License.  However, parties who have received copies,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 354) or rights, from you under this License will not have their licenses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 355) terminated so long as such parties remain in full compliance.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 356) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 357)   9. You are not required to accept this License, since you have not
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 358) signed it.  However, nothing else grants you permission to modify or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 359) distribute the Library or its derivative works.  These actions are
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 360) prohibited by law if you do not accept this License.  Therefore, by
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 361) modifying or distributing the Library (or any work based on the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 362) Library), you indicate your acceptance of this License to do so, and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 363) all its terms and conditions for copying, distributing or modifying
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 364) the Library or works based on it.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 365) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 366)   10. Each time you redistribute the Library (or any work based on the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 367) Library), the recipient automatically receives a license from the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 368) original licensor to copy, distribute, link with or modify the Library
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 369) subject to these terms and conditions.  You may not impose any further
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 370) restrictions on the recipients' exercise of the rights granted herein.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 371) You are not responsible for enforcing compliance by third parties with
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 372) this License.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 373) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 374)   11. If, as a consequence of a court judgment or allegation of patent
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 375) infringement or for any other reason (not limited to patent issues),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 376) conditions are imposed on you (whether by court order, agreement or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 377) otherwise) that contradict the conditions of this License, they do not
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 378) excuse you from the conditions of this License.  If you cannot
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 379) distribute so as to satisfy simultaneously your obligations under this
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 380) License and any other pertinent obligations, then as a consequence you
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 381) may not distribute the Library at all.  For example, if a patent
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 382) license would not permit royalty-free redistribution of the Library by
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 383) all those who receive copies directly or indirectly through you, then
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 384) the only way you could satisfy both it and this License would be to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 385) refrain entirely from distribution of the Library.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 386) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 387) If any portion of this section is held invalid or unenforceable under any
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 388) particular circumstance, the balance of the section is intended to apply,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 389) and the section as a whole is intended to apply in other circumstances.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 390) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 391) It is not the purpose of this section to induce you to infringe any
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 392) patents or other property right claims or to contest validity of any
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 393) such claims; this section has the sole purpose of protecting the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 394) integrity of the free software distribution system which is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 395) implemented by public license practices.  Many people have made
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 396) generous contributions to the wide range of software distributed
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 397) through that system in reliance on consistent application of that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 398) system; it is up to the author/donor to decide if he or she is willing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 399) to distribute software through any other system and a licensee cannot
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 400) impose that choice.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 401) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 402) This section is intended to make thoroughly clear what is believed to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 403) be a consequence of the rest of this License.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 404) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 405)   12. If the distribution and/or use of the Library is restricted in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 406) certain countries either by patents or by copyrighted interfaces, the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 407) original copyright holder who places the Library under this License may add
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 408) an explicit geographical distribution limitation excluding those countries,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 409) so that distribution is permitted only in or among countries not thus
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 410) excluded.  In such case, this License incorporates the limitation as if
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 411) written in the body of this License.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 412) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 413)   13. The Free Software Foundation may publish revised and/or new
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 414) versions of the Lesser General Public License from time to time.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 415) Such new versions will be similar in spirit to the present version,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 416) but may differ in detail to address new problems or concerns.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 417) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 418) Each version is given a distinguishing version number.  If the Library
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 419) specifies a version number of this License which applies to it and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 420) "any later version", you have the option of following the terms and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 421) conditions either of that version or of any later version published by
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 422) the Free Software Foundation.  If the Library does not specify a
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 423) license version number, you may choose any version ever published by
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 424) the Free Software Foundation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 425) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 426)   14. If you wish to incorporate parts of the Library into other free
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 427) programs whose distribution conditions are incompatible with these,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 428) write to the author to ask for permission.  For software which is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 429) copyrighted by the Free Software Foundation, write to the Free
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 430) Software Foundation; we sometimes make exceptions for this.  Our
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 431) decision will be guided by the two goals of preserving the free status
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 432) of all derivatives of our free software and of promoting the sharing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 433) and reuse of software generally.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 434) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 435)                             NO WARRANTY
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 436) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 437)   15. BECAUSE THE LIBRARY IS LICENSED FREE OF CHARGE, THERE IS NO
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 438) WARRANTY FOR THE LIBRARY, TO THE EXTENT PERMITTED BY APPLICABLE LAW.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 439) EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 440) OTHER PARTIES PROVIDE THE LIBRARY "AS IS" WITHOUT WARRANTY OF ANY
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 441) KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 442) IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 443) PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 444) LIBRARY IS WITH YOU.  SHOULD THE LIBRARY PROVE DEFECTIVE, YOU ASSUME
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 445) THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 446) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 447)   16. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 448) WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 449) AND/OR REDISTRIBUTE THE LIBRARY AS PERMITTED ABOVE, BE LIABLE TO YOU
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 450) FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 451) CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 452) LIBRARY (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 453) RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 454) FAILURE OF THE LIBRARY TO OPERATE WITH ANY OTHER SOFTWARE), EVEN IF
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 455) SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 456) DAMAGES.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 457) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 458)                      END OF TERMS AND CONDITIONS
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 459) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 460)            How to Apply These Terms to Your New Libraries
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 461) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 462)   If you develop a new library, and you want it to be of the greatest
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 463) possible use to the public, we recommend making it free software that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 464) everyone can redistribute and change.  You can do so by permitting
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 465) redistribution under these terms (or, alternatively, under the terms of the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 466) ordinary General Public License).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 467) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 468)   To apply these terms, attach the following notices to the library.  It is
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 469) safest to attach them to the start of each source file to most effectively
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 470) convey the exclusion of warranty; and each file should have at least the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 471) "copyright" line and a pointer to where the full notice is found.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 472) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 473)     <one line to give the library's name and a brief idea of what it does.>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 474)     Copyright (C) <year>  <name of author>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 475) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 476)     This library is free software; you can redistribute it and/or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 477)     modify it under the terms of the GNU Lesser General Public
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 478)     License as published by the Free Software Foundation; either
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 479)     version 2.1 of the License, or (at your option) any later version.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 480) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 481)     This library is distributed in the hope that it will be useful,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 482)     but WITHOUT ANY WARRANTY; without even the implied warranty of
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 483)     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 484)     Lesser General Public License for more details.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 485) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 486)     You should have received a copy of the GNU Lesser General Public
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 487)     License along with this library; if not, write to the Free Software
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 488)     Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 489) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 490) Also add information on how to contact you by electronic and paper mail.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 491) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 492) You should also get your employer (if you work as a programmer) or your
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 493) school, if any, to sign a "copyright disclaimer" for the library, if
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 494) necessary.  Here is a sample; alter the names:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 495) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 496)   Yoyodyne, Inc., hereby disclaims all copyright interest in the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 497)   library `Frob' (a library for tweaking knobs) written by James Random Hacker.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 498) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 499)   <signature of Ty Coon>, 1 April 1990
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 500)   Ty Coon, President of Vice
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 501) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 502) That's all there is to it!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   1) [![SWUbanner](https://raw.githubusercontent.com/vshymanskyy/StandWithUkraine/main/banner2-direct.svg)](https://supportukrainenow.org/)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   3) ![PHPMailer](https://raw.github.com/PHPMailer/PHPMailer/master/examples/images/phpmailer.png)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   4) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   5) # PHPMailer – A full-featured email creation and transfer class for PHP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   6) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   7) [![Test status](https://github.com/PHPMailer/PHPMailer/workflows/Tests/badge.svg)](https://github.com/PHPMailer/PHPMailer/actions)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   8) [![codecov.io](https://codecov.io/gh/PHPMailer/PHPMailer/branch/master/graph/badge.svg?token=iORZpwmYmM)](https://codecov.io/gh/PHPMailer/PHPMailer)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   9) [![Latest Stable Version](https://poser.pugx.org/phpmailer/phpmailer/v/stable.svg)](https://packagist.org/packages/phpmailer/phpmailer)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  10) [![Total Downloads](https://poser.pugx.org/phpmailer/phpmailer/downloads)](https://packagist.org/packages/phpmailer/phpmailer)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  11) [![License](https://poser.pugx.org/phpmailer/phpmailer/license.svg)](https://packagist.org/packages/phpmailer/phpmailer)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  12) [![API Docs](https://github.com/phpmailer/phpmailer/workflows/Docs/badge.svg)](https://phpmailer.github.io/PHPMailer/)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  13) [![OpenSSF Scorecard](https://api.securityscorecards.dev/projects/github.com/PHPMailer/PHPMailer/badge)](https://api.securityscorecards.dev/projects/github.com/PHPMailer/PHPMailer)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  14) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  15) ## Features
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  16) - Probably the world's most popular code for sending email from PHP!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  17) - Used by many open-source projects: WordPress, Drupal, 1CRM, SugarCRM, Yii, Joomla! and many more
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  18) - Integrated SMTP support – send without a local mail server
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  19) - Send emails with multiple To, CC, BCC, and Reply-to addresses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  20) - Multipart/alternative emails for mail clients that do not read HTML email
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  21) - Add attachments, including inline
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  22) - Support for UTF-8 content and 8bit, base64, binary, and quoted-printable encodings
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  23) - SMTP authentication with LOGIN, PLAIN, CRAM-MD5, and XOAUTH2 mechanisms over SMTPS and SMTP+STARTTLS transports
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  24) - Validates email addresses automatically
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  25) - Protects against header injection attacks
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  26) - Error messages in over 50 languages!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  27) - DKIM and S/MIME signing support
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  28) - Compatible with PHP 5.5 and later, including PHP 8.2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  29) - Namespaced to prevent name clashes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  30) - Much more!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  31) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  32) ## Why you might need it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  33) Many PHP developers need to send email from their code. The only PHP function that supports this directly is [`mail()`](https://www.php.net/manual/en/function.mail.php). However, it does not provide any assistance for making use of popular features such as encryption, authentication, HTML messages, and attachments.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  34) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  35) Formatting email correctly is surprisingly difficult. There are myriad overlapping (and conflicting) standards, requiring tight adherence to horribly complicated formatting and encoding rules – the vast majority of code that you'll find online that uses the `mail()` function directly is just plain wrong, if not unsafe!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  36) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  37) The PHP `mail()` function usually sends via a local mail server, typically fronted by a `sendmail` binary on Linux, BSD, and macOS platforms, however, Windows usually doesn't include a local mail server; PHPMailer's integrated SMTP client allows email sending on all platforms without needing a local mail server. Be aware though, that the `mail()` function should be avoided when possible; it's both faster and [safer](https://exploitbox.io/paper/Pwning-PHP-Mail-Function-For-Fun-And-RCE.html) to use SMTP to localhost.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  38) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  39) *Please* don't be tempted to do it yourself – if you don't use PHPMailer, there are many other excellent libraries that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  40) you should look at before rolling your own. Try [SwiftMailer](https://swiftmailer.symfony.com/)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  41) , [Laminas/Mail](https://docs.laminas.dev/laminas-mail/), [ZetaComponents](https://github.com/zetacomponents/Mail), etc.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  42) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  43) ## License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  44) This software is distributed under the [LGPL 2.1](https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html) license, along with the [GPL Cooperation Commitment](https://gplcc.github.io/gplcc/). Please read [LICENSE](https://github.com/PHPMailer/PHPMailer/blob/master/LICENSE) for information on the software availability and distribution.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  45) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  46) ## Installation & loading
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  47) PHPMailer is available on [Packagist](https://packagist.org/packages/phpmailer/phpmailer) (using semantic versioning), and installation via [Composer](https://getcomposer.org) is the recommended way to install PHPMailer. Just add this line to your `composer.json` file:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  48) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  49) ```json
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  50) "phpmailer/phpmailer": "^6.9.2"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  51) ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  52) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  53) or run
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  54) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  55) ```sh
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  56) composer require phpmailer/phpmailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  57) ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  58) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  59) Note that the `vendor` folder and the `vendor/autoload.php` script are generated by Composer; they are not part of PHPMailer.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  60) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  61) If you want to use XOAUTH2 authentication, you will also need to add a dependency on the `league/oauth2-client` and appropriate service adapters package in your `composer.json`, or take a look at
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  62) by @decomplexity's [SendOauth2 wrapper](https://github.com/decomplexity/SendOauth2), especially if you're using Microsoft services.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  63) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  64) Alternatively, if you're not using Composer, you
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  65) can [download PHPMailer as a zip file](https://github.com/PHPMailer/PHPMailer/archive/master.zip), (note that docs and examples are not included in the zip file), then copy the contents of the PHPMailer folder into one of the `include_path` directories specified in your PHP configuration and load each class file manually:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  66) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  67) ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  68) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  69) use PHPMailer\PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  70) use PHPMailer\PHPMailer\Exception;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  71) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  72) require 'path/to/PHPMailer/src/Exception.php';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  73) require 'path/to/PHPMailer/src/PHPMailer.php';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  74) require 'path/to/PHPMailer/src/SMTP.php';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  75) ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  76) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  77) If you're not using the `SMTP` class explicitly (you're probably not), you don't need a `use` line for the SMTP class. Even if you're not using exceptions, you do still need to load the `Exception` class as it is used internally.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  78) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  79) ## Legacy versions
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  80) PHPMailer 5.2 (which is compatible with PHP 5.0 — 7.0) is no longer supported, even for security updates. You will find the latest version of 5.2 in the [5.2-stable branch](https://github.com/PHPMailer/PHPMailer/tree/5.2-stable). If you're using PHP 5.5 or later (which you should be), switch to the 6.x releases.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  81) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  82) ### Upgrading from 5.2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  83) The biggest changes are that source files are now in the `src/` folder, and PHPMailer now declares the namespace `PHPMailer\PHPMailer`. This has several important effects – [read the upgrade guide](https://github.com/PHPMailer/PHPMailer/tree/master/UPGRADING.md) for more details.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  84) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  85) ### Minimal installation
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  86) While installing the entire package manually or with Composer is simple, convenient, and reliable, you may want to include only vital files in your project. At the very least you will need [src/PHPMailer.php](https://github.com/PHPMailer/PHPMailer/tree/master/src/PHPMailer.php). If you're using SMTP, you'll need [src/SMTP.php](https://github.com/PHPMailer/PHPMailer/tree/master/src/SMTP.php), and if you're using POP-before SMTP (*very* unlikely!), you'll need [src/POP3.php](https://github.com/PHPMailer/PHPMailer/tree/master/src/POP3.php). You can skip the [language](https://github.com/PHPMailer/PHPMailer/tree/master/language/) folder if you're not showing errors to users and can make do with English-only errors. If you're using XOAUTH2 you will need [src/OAuth.php](https://github.com/PHPMailer/PHPMailer/tree/master/src/OAuth.php) as well as the Composer dependencies for the services you wish to authenticate with. Really, it's much easier to use Composer!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  87) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  88) ## A Simple Example
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  89) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  90) ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  91) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  92) //Import PHPMailer classes into the global namespace
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  93) //These must be at the top of your script, not inside a function
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  94) use PHPMailer\PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  95) use PHPMailer\PHPMailer\SMTP;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  96) use PHPMailer\PHPMailer\Exception;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  97) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  98) //Load Composer's autoloader
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  99) require 'vendor/autoload.php';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 100) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 101) //Create an instance; passing `true` enables exceptions
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 102) $mail = new PHPMailer(true);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 103) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 104) try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 105)     //Server settings
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 106)     $mail->SMTPDebug = SMTP::DEBUG_SERVER;                      //Enable verbose debug output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 107)     $mail->isSMTP();                                            //Send using SMTP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 108)     $mail->Host       = 'smtp.example.com';                     //Set the SMTP server to send through
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 109)     $mail->SMTPAuth   = true;                                   //Enable SMTP authentication
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 110)     $mail->Username   = 'user@example.com';                     //SMTP username
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 111)     $mail->Password   = 'secret';                               //SMTP password
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 112)     $mail->SMTPSecure = PHPMailer::ENCRYPTION_SMTPS;            //Enable implicit TLS encryption
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 113)     $mail->Port       = 465;                                    //TCP port to connect to; use 587 if you have set `SMTPSecure = PHPMailer::ENCRYPTION_STARTTLS`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 114) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 115)     //Recipients
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 116)     $mail->setFrom('from@example.com', 'Mailer');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 117)     $mail->addAddress('joe@example.net', 'Joe User');     //Add a recipient
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 118)     $mail->addAddress('ellen@example.com');               //Name is optional
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 119)     $mail->addReplyTo('info@example.com', 'Information');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 120)     $mail->addCC('cc@example.com');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 121)     $mail->addBCC('bcc@example.com');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 122) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 123)     //Attachments
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 124)     $mail->addAttachment('/var/tmp/file.tar.gz');         //Add attachments
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 125)     $mail->addAttachment('/tmp/image.jpg', 'new.jpg');    //Optional name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 126) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 127)     //Content
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 128)     $mail->isHTML(true);                                  //Set email format to HTML
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 129)     $mail->Subject = 'Here is the subject';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 130)     $mail->Body    = 'This is the HTML message body <b>in bold!</b>';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 131)     $mail->AltBody = 'This is the body in plain text for non-HTML mail clients';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 132) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 133)     $mail->send();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 134)     echo 'Message has been sent';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 135) } catch (Exception $e) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 136)     echo "Message could not be sent. Mailer Error: {$mail->ErrorInfo}";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 137) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 138) ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 139) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 140) You'll find plenty to play with in the [examples](https://github.com/PHPMailer/PHPMailer/tree/master/examples) folder, which covers many common scenarios including sending through Gmail, building contact forms, sending to mailing lists, and more.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 141) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 142) If you are re-using the instance (e.g. when sending to a mailing list), you may need to clear the recipient list to avoid sending duplicate messages. See [the mailing list example](https://github.com/PHPMailer/PHPMailer/blob/master/examples/mailing_list.phps) for further guidance.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 143) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 144) That's it. You should now be ready to use PHPMailer!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 145) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 146) ## Localization
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 147) PHPMailer defaults to English, but in the [language](https://github.com/PHPMailer/PHPMailer/tree/master/language/) folder, you'll find many translations for PHPMailer error messages that you may encounter. Their filenames contain [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) language code for the translations, for example `fr` for French. To specify a language, you need to tell PHPMailer which one to use, like this:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 148) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 149) ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 150) //To load the French version
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 151) $mail->setLanguage('fr', '/optional/path/to/language/directory/');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 152) ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 153) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 154) We welcome corrections and new languages – if you're looking for corrections, run the [Language/TranslationCompletenessTest.php](https://github.com/PHPMailer/PHPMailer/blob/master/test/Language/TranslationCompletenessTest.php) script in the tests folder and it will show any missing translations.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 155) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 156) ## Documentation
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 157) Start reading at the [GitHub wiki](https://github.com/PHPMailer/PHPMailer/wiki). If you're having trouble, head for [the troubleshooting guide](https://github.com/PHPMailer/PHPMailer/wiki/Troubleshooting) as it's frequently updated.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 158) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 159) Examples of how to use PHPMailer for common scenarios can be found in the [examples](https://github.com/PHPMailer/PHPMailer/tree/master/examples) folder. If you're looking for a good starting point, we recommend you start with [the Gmail example](https://github.com/PHPMailer/PHPMailer/tree/master/examples/gmail.phps).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 160) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 161) To reduce PHPMailer's deployed code footprint, examples are not included if you load PHPMailer via Composer or via [GitHub's zip file download](https://github.com/PHPMailer/PHPMailer/archive/master.zip), so you'll need to either clone the git repository or use the above links to get to the examples directly.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 162) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 163) Complete generated API documentation is [available online](https://phpmailer.github.io/PHPMailer/).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 164) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 165) You can generate complete API-level documentation by running `phpdoc` in the top-level folder, and documentation will appear in the `docs` folder, though you'll need to have [PHPDocumentor](https://www.phpdoc.org) installed. You may find [the unit tests](https://github.com/PHPMailer/PHPMailer/blob/master/test/PHPMailerTest.php) a good reference for how to do various operations such as encryption.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 166) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 167) If the documentation doesn't cover what you need, search the [many questions on Stack Overflow](https://stackoverflow.com/questions/tagged/phpmailer), and before you ask a question about "SMTP Error: Could not connect to SMTP host.", [read the troubleshooting guide](https://github.com/PHPMailer/PHPMailer/wiki/Troubleshooting).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 168) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 169) ## Tests
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 170) [PHPMailer tests](https://github.com/PHPMailer/PHPMailer/tree/master/test/) use PHPUnit 9, with [a polyfill](https://github.com/Yoast/PHPUnit-Polyfills) to let 9-style tests run on older PHPUnit and PHP versions.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 171) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 172) [![Test status](https://github.com/PHPMailer/PHPMailer/workflows/Tests/badge.svg)](https://github.com/PHPMailer/PHPMailer/actions)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 173) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 174) If this isn't passing, is there something you can do to help?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 175) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 176) ## Security
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 177) Please disclose any vulnerabilities found responsibly – report security issues to the maintainers privately.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 178) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 179) See [SECURITY](https://github.com/PHPMailer/PHPMailer/tree/master/SECURITY.md) and [PHPMailer's security advisories on GitHub](https://github.com/PHPMailer/PHPMailer/security). 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 180) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 181) ## Contributing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 182) Please submit bug reports, suggestions, and pull requests to the [GitHub issue tracker](https://github.com/PHPMailer/PHPMailer/issues).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 183) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 184) We're particularly interested in fixing edge cases, expanding test coverage, and updating translations.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 185) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 186) If you found a mistake in the docs, or want to add something, go ahead and amend the wiki – anyone can edit it.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 187) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 188) If you have git clones from prior to the move to the PHPMailer GitHub organisation, you'll need to update any remote URLs referencing the old GitHub location with a command like this from within your clone:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 189) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 190) ```sh
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 191) git remote set-url upstream https://github.com/PHPMailer/PHPMailer.git
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 192) ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 193) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 194) Please *don't* use the SourceForge or Google Code projects any more; they are obsolete and no longer maintained.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 195) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 196) ## Sponsorship
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 197) Development time and resources for PHPMailer are provided by [Smartmessages.net](https://info.smartmessages.net/), the world's only privacy-first email marketing system.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 198) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 199) <a href="https://info.smartmessages.net/"><img src="https://www.smartmessages.net/img/smartmessages-logo.svg" width="550" alt="Smartmessages.net privacy-first email marketing logo"></a>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 200) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 201) Donations are very welcome, whether in beer 🍺, T-shirts 👕, or cold, hard cash 💰. Sponsorship through GitHub is a simple and convenient way to say "thank you" to PHPMailer's maintainers and contributors – just click the "Sponsor" button [on the project page](https://github.com/PHPMailer/PHPMailer). If your company uses PHPMailer, consider taking part in Tidelift's enterprise support programme.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 202) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 203) ## PHPMailer For Enterprise
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 204) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 205) Available as part of the Tidelift Subscription.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 206) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 207) The maintainers of PHPMailer and thousands of other packages are working with Tidelift to deliver commercial
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 208) support and maintenance for the open-source packages you use to build your applications. Save time, reduce risk, and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 209) improve code health, while paying the maintainers of the exact packages you
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 210) use. [Learn more.](https://tidelift.com/subscription/pkg/packagist-phpmailer-phpmailer?utm_source=packagist-phpmailer-phpmailer&utm_medium=referral&utm_campaign=enterprise&utm_term=repo)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 211) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 212) ## Changelog
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 213) See [changelog](changelog.md).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 214) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 215) ## History
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 216) - PHPMailer was originally written in 2001 by Brent R. Matzelle as a [SourceForge project](https://sourceforge.net/projects/phpmailer/).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 217) - [Marcus Bointon](https://github.com/Synchro) (`coolbru` on SF) and Andy Prevost (`codeworxtech`) took over the project in 2004.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 218) - Became an Apache incubator project on Google Code in 2010, managed by Jim Jagielski.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 219) - Marcus created [his fork on GitHub](https://github.com/Synchro/PHPMailer) in 2008.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 220) - Jim and Marcus decide to join forces and use GitHub as the canonical and official repo for PHPMailer in 2013.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 221) - PHPMailer moves to [the PHPMailer organisation](https://github.com/PHPMailer) on GitHub in 2013.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 222) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 223) ### What's changed since moving from SourceForge?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 224) - Official successor to the SourceForge and Google Code projects.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 225) - Test suite.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 226) - Continuous integration with GitHub Actions.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 227) - Composer support.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 228) - Public development.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 229) - Additional languages and language strings.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 230) - CRAM-MD5 authentication support.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 231) - Preserves full repo history of authors, commits, and branches from the original SourceForge project.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) # Security notices relating to PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) Please disclose any security issues or vulnerabilities found through [Tidelift's coordinated disclosure system](https://tidelift.com/security) or to the maintainers privately.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5) PHPMailer 6.4.1 and earlier contain a vulnerability that can result in untrusted code being called (if such code is injected into the host project's scope by other means). If the `$patternselect` parameter to `validateAddress()` is set to `'php'` (the default, defined by `PHPMailer::$validator`), and the global namespace contains a function called `php`, it will be called in preference to the built-in validator of the same name. Mitigated in PHPMailer 6.5.0 by denying the use of simple strings as validator function names. Recorded as [CVE-2021-3603](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2021-3603). Reported by [Vikrant Singh Chauhan](mailto:vi@hackberry.xyz) via [huntr.dev](https://www.huntr.dev/).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7) PHPMailer versions 6.4.1 and earlier contain a possible remote code execution vulnerability through the `$lang_path` parameter of the `setLanguage()` method. If the `$lang_path` parameter is passed unfiltered from user input, it can be set to [a UNC path](https://docs.microsoft.com/en-us/dotnet/standard/io/file-path-formats#unc-paths), and if an attacker is also able to persuade the server to load a file from that UNC path, a script file under their control may be executed. This vulnerability only applies to systems that resolve UNC paths, typically only Microsoft Windows.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8) PHPMailer 6.5.0 mitigates this by no longer treating translation files as PHP code, but by parsing their text content directly. This approach avoids the possibility of executing unknown code while retaining backward compatibility. This isn't ideal, so the current translation format is deprecated and will be replaced in the next major release. Recorded as [CVE-2021-34551](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2021-34551). Reported by [Jilin Diting Information Technology Co., Ltd](https://listensec.com) via Tidelift.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10) PHPMailer versions between 6.1.8 and 6.4.0 contain a regression of the earlier CVE-2018-19296 object injection vulnerability as a result of [a fix for Windows UNC paths in 6.1.8](https://github.com/PHPMailer/PHPMailer/commit/e2e07a355ee8ff36aba21d0242c5950c56e4c6f9). Recorded as [CVE-2020-36326](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2020-36326). Reported by Fariskhi Vidyan via Tidelift. 6.4.1 fixes this issue, and also enforces stricter checks for URL schemes in local path contexts.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12) PHPMailer versions 6.1.5 and earlier contain an output escaping bug that occurs in `Content-Type` and `Content-Disposition` when filenames passed into `addAttachment` and other methods that accept attachment names contain double quote characters, in contravention of RFC822 3.4.1. No specific vulnerability has been found relating to this, but it could allow file attachments to bypass attachment filters that are based on matching filename extensions. Recorded as [CVE-2020-13625](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2020-13625). Reported by Elar Lang of Clarified Security.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14) PHPMailer versions prior to 6.0.6 and 5.2.27 are vulnerable to an object injection attack by passing `phar://` paths into `addAttachment()` and other functions that may receive unfiltered local paths, possibly leading to RCE. Recorded as [CVE-2018-19296](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2018-19296). See [this article](https://knasmueller.net/5-answers-about-php-phar-exploitation) for more info on this type of vulnerability. Mitigated by blocking the use of paths containing URL-protocol style prefixes such as `phar://`. Reported by Sehun Oh of cyberone.kr.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16) PHPMailer versions prior to 5.2.24 (released July 26th 2017) have an XSS vulnerability in one of the code examples, [CVE-2017-11503](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2017-11503). The `code_generator.phps` example did not filter user input prior to output. This file is distributed with a `.phps` extension, so it is not normally executable unless it is explicitly renamed, and the file is not included when PHPMailer is loaded through composer, so it is safe by default. There was also an undisclosed potential XSS vulnerability in the default exception handler (unused by default). Patches for both issues kindly provided by Patrick Monnerat of the Fedora Project.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18) PHPMailer versions prior to 5.2.22 (released January 9th 2017) have a local file disclosure vulnerability, [CVE-2017-5223](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2017-5223). If content passed into `msgHTML()` is sourced from unfiltered user input, relative paths can map to absolute local file paths and added as attachments. Also note that `addAttachment` (just like `file_get_contents`, `passthru`, `unlink`, etc) should not be passed user-sourced params either! Reported by Yongxiang Li of Asiasecurity.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20) PHPMailer versions prior to 5.2.20 (released December 28th 2016) are vulnerable to [CVE-2016-10045](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2016-10045) a remote code execution vulnerability, responsibly reported by [Dawid Golunski](https://legalhackers.com/advisories/PHPMailer-Exploit-Remote-Code-Exec-CVE-2016-10045-Vuln-Patch-Bypass.html), and patched by Paul Buonopane (@Zenexer).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) PHPMailer versions prior to 5.2.18 (released December 2016) are vulnerable to [CVE-2016-10033](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2016-10033) a remote code execution vulnerability, responsibly reported by [Dawid Golunski](https://legalhackers.com/advisories/PHPMailer-Exploit-Remote-Code-Exec-CVE-2016-10033-Vuln.html).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) PHPMailer versions prior to 5.2.14 (released November 2015) are vulnerable to [CVE-2015-8476](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2015-8476) an SMTP CRLF injection bug permitting arbitrary message sending.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26) PHPMailer versions prior to 5.2.10 (released May 2015) are vulnerable to [CVE-2008-5619](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2008-5619), a remote code execution vulnerability in the bundled html2text library. This file was removed in 5.2.10, so if you are using a version prior to that and make use of the html2text function, it's vitally important that you upgrade and remove this file.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28) PHPMailer versions prior to 2.0.7 and 2.2.1 are vulnerable to [CVE-2012-0796](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2012-0796), an email header injection attack.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) Joomla 1.6.0 uses PHPMailer in an unsafe way, allowing it to reveal local file paths, reported in [CVE-2011-3747](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2011-3747).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32) PHPMailer didn't sanitise the `$lang_path` parameter in `SetLanguage`. This wasn't a problem in itself, but some apps (PHPClassifieds, ATutor) also failed to sanitise user-provided parameters passed to it, permitting semi-arbitrary local file inclusion, reported in [CVE-2010-4914](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2010-4914), [CVE-2007-2021](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2007-2021) and [CVE-2006-5734](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2006-5734).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) PHPMailer 1.7.2 and earlier contained a possible DDoS vulnerability reported in [CVE-2005-1807](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2005-1807).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36) PHPMailer 1.7 and earlier (June 2003) have a possible vulnerability in the `SendmailSend` method where shell commands may not be sanitised. Reported in [CVE-2007-3215](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2007-3215).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 37) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   4)  * PHPMailer - PHP email creation and transport class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   5)  * PHP Version 5.5.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   6)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   7)  * @see https://github.com/PHPMailer/PHPMailer/ The PHPMailer GitHub project
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   8)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   9)  * @author    Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  10)  * @author    Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  11)  * @author    Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  12)  * @author    Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  13)  * @copyright 2012 - 2023 Marcus Bointon
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  14)  * @copyright 2010 - 2012 Jim Jagielski
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  15)  * @copyright 2004 - 2009 Andy Prevost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  16)  * @license   https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html GNU Lesser General Public License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  17)  * @note      This program is distributed in the hope that it will be useful - WITHOUT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  18)  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  19)  * FITNESS FOR A PARTICULAR PURPOSE.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  20)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  21) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  22) namespace PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  23) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  24) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  25)  * Configure PHPMailer with DSN string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  26)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  27)  * @see https://en.wikipedia.org/wiki/Data_source_name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  28)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  29)  * @author Oleg Voronkovich <oleg-voronkovich@yandex.ru>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  30)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  31) class DSNConfigurator
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  32) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  33)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  34)      * Create new PHPMailer instance configured by DSN.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  35)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  36)      * @param string $dsn        DSN
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  37)      * @param bool   $exceptions Should we throw external exceptions?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  38)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  39)      * @return PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  40)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  41)     public static function mailer($dsn, $exceptions = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  42)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  43)         static $configurator = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  44) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  45)         if (null === $configurator) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  46)             $configurator = new DSNConfigurator();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  47)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  48) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  49)         return $configurator->configure(new PHPMailer($exceptions), $dsn);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  50)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  51) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  52)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  53)      * Configure PHPMailer instance with DSN string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  54)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  55)      * @param PHPMailer $mailer PHPMailer instance
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  56)      * @param string    $dsn    DSN
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  57)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  58)      * @return PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  59)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  60)     public function configure(PHPMailer $mailer, $dsn)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  61)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  62)         $config = $this->parseDSN($dsn);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  63) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  64)         $this->applyConfig($mailer, $config);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  65) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  66)         return $mailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  67)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  68) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  69)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  70)      * Parse DSN string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  71)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  72)      * @param string $dsn DSN
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  73)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  74)      * @throws Exception If DSN is malformed
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  75)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  76)      * @return array Configuration
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  77)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  78)     private function parseDSN($dsn)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  79)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  80)         $config = $this->parseUrl($dsn);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  81) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  82)         if (false === $config || !isset($config['scheme']) || !isset($config['host'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  83)             throw new Exception('Malformed DSN');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  84)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  85) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  86)         if (isset($config['query'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  87)             parse_str($config['query'], $config['query']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  88)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  89) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  90)         return $config;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  91)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  92) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  93)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  94)      * Apply configuration to mailer.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  95)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  96)      * @param PHPMailer $mailer PHPMailer instance
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  97)      * @param array     $config Configuration
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  98)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  99)      * @throws Exception If scheme is invalid
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 100)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 101)     private function applyConfig(PHPMailer $mailer, $config)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 102)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 103)         switch ($config['scheme']) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 104)             case 'mail':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 105)                 $mailer->isMail();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 106)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 107)             case 'sendmail':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 108)                 $mailer->isSendmail();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 109)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 110)             case 'qmail':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 111)                 $mailer->isQmail();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 112)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 113)             case 'smtp':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 114)             case 'smtps':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 115)                 $mailer->isSMTP();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 116)                 $this->configureSMTP($mailer, $config);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 117)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 118)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 119)                 throw new Exception(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 120)                     sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 121)                         'Invalid scheme: "%s". Allowed values: "mail", "sendmail", "qmail", "smtp", "smtps".',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 122)                         $config['scheme']
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 123)                     )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 124)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 125)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 126) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 127)         if (isset($config['query'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 128)             $this->configureOptions($mailer, $config['query']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 129)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 130)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 131) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 132)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 133)      * Configure SMTP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 134)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 135)      * @param PHPMailer $mailer PHPMailer instance
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 136)      * @param array     $config Configuration
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 137)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 138)     private function configureSMTP($mailer, $config)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 139)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 140)         $isSMTPS = 'smtps' === $config['scheme'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 141) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 142)         if ($isSMTPS) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 143)             $mailer->SMTPSecure = PHPMailer::ENCRYPTION_STARTTLS;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 144)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 145) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 146)         $mailer->Host = $config['host'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 147) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 148)         if (isset($config['port'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 149)             $mailer->Port = $config['port'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 150)         } elseif ($isSMTPS) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 151)             $mailer->Port = SMTP::DEFAULT_SECURE_PORT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 152)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 153) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 154)         $mailer->SMTPAuth = isset($config['user']) || isset($config['pass']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 155) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 156)         if (isset($config['user'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 157)             $mailer->Username = $config['user'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 158)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 159) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 160)         if (isset($config['pass'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 161)             $mailer->Password = $config['pass'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 162)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 163)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 164) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 165)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 166)      * Configure options.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 167)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 168)      * @param PHPMailer $mailer  PHPMailer instance
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 169)      * @param array     $options Options
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 170)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 171)      * @throws Exception If option is unknown
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 172)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 173)     private function configureOptions(PHPMailer $mailer, $options)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 174)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 175)         $allowedOptions = get_object_vars($mailer);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 176) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 177)         unset($allowedOptions['Mailer']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 178)         unset($allowedOptions['SMTPAuth']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 179)         unset($allowedOptions['Username']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 180)         unset($allowedOptions['Password']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 181)         unset($allowedOptions['Hostname']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 182)         unset($allowedOptions['Port']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 183)         unset($allowedOptions['ErrorInfo']);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 184) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 185)         $allowedOptions = \array_keys($allowedOptions);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 186) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 187)         foreach ($options as $key => $value) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 188)             if (!in_array($key, $allowedOptions)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 189)                 throw new Exception(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 190)                     sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 191)                         'Unknown option: "%s". Allowed values: "%s"',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 192)                         $key,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 193)                         implode('", "', $allowedOptions)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 194)                     )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 195)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 196)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 197) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 198)             switch ($key) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 199)                 case 'AllowEmpty':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 200)                 case 'SMTPAutoTLS':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 201)                 case 'SMTPKeepAlive':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 202)                 case 'SingleTo':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 203)                 case 'UseSendmailOptions':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 204)                 case 'do_verp':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 205)                 case 'DKIM_copyHeaderFields':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 206)                     $mailer->$key = (bool) $value;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 207)                     break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 208)                 case 'Priority':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 209)                 case 'SMTPDebug':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 210)                 case 'WordWrap':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 211)                     $mailer->$key = (int) $value;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 212)                     break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 213)                 default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 214)                     $mailer->$key = $value;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 215)                     break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 216)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 217)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 218)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 219) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 220)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 221)      * Parse a URL.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 222)      * Wrapper for the built-in parse_url function to work around a bug in PHP 5.5.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 223)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 224)      * @param string $url URL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 225)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 226)      * @return array|false
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 227)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 228)     protected function parseUrl($url)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 229)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 230)         if (\PHP_VERSION_ID >= 50600 || false === strpos($url, '?')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 231)             return parse_url($url);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 232)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 233) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 234)         $chunks = explode('?', $url);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 235)         if (is_array($chunks)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 236)             $result = parse_url($chunks[0]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 237)             if (is_array($result)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 238)                 $result['query'] = $chunks[1];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 239)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 240)             return $result;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 241)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 242) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 243)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 244)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 245) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * PHPMailer Exception class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * PHP Version 5.5.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @see       https://github.com/PHPMailer/PHPMailer/ The PHPMailer GitHub project
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  * @author    Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10)  * @author    Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11)  * @author    Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12)  * @author    Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13)  * @copyright 2012 - 2020 Marcus Bointon
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14)  * @copyright 2010 - 2012 Jim Jagielski
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15)  * @copyright 2004 - 2009 Andy Prevost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16)  * @license   https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html GNU Lesser General Public License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17)  * @note      This program is distributed in the hope that it will be useful - WITHOUT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18)  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19)  * FITNESS FOR A PARTICULAR PURPOSE.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) namespace PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25)  * PHPMailer exception handler.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27)  * @author Marcus Bointon <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29) class Exception extends \Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32)      * Prettify error message output.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36)     public function errorMessage()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 37)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 38)         return '<strong>' . htmlspecialchars($this->getMessage(), ENT_COMPAT | ENT_HTML401) . "</strong><br />\n";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 39)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 40) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   4)  * PHPMailer - PHP email creation and transport class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   5)  * PHP Version 5.5.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   6)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   7)  * @see       https://github.com/PHPMailer/PHPMailer/ The PHPMailer GitHub project
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   8)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   9)  * @author    Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  10)  * @author    Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  11)  * @author    Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  12)  * @author    Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  13)  * @copyright 2012 - 2020 Marcus Bointon
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  14)  * @copyright 2010 - 2012 Jim Jagielski
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  15)  * @copyright 2004 - 2009 Andy Prevost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  16)  * @license   https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html GNU Lesser General Public License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  17)  * @note      This program is distributed in the hope that it will be useful - WITHOUT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  18)  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  19)  * FITNESS FOR A PARTICULAR PURPOSE.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  20)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  21) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  22) namespace PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  23) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  24) use League\OAuth2\Client\Grant\RefreshToken;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  25) use League\OAuth2\Client\Provider\AbstractProvider;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  26) use League\OAuth2\Client\Token\AccessToken;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  27) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  28) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  29)  * OAuth - OAuth2 authentication wrapper class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  30)  * Uses the oauth2-client package from the League of Extraordinary Packages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  31)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  32)  * @see     https://oauth2-client.thephpleague.com
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  33)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  34)  * @author  Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  35)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  36) class OAuth implements OAuthTokenProvider
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  37) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  38)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  39)      * An instance of the League OAuth Client Provider.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  40)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  41)      * @var AbstractProvider
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  42)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  43)     protected $provider;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  44) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  45)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  46)      * The current OAuth access token.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  47)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  48)      * @var AccessToken
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  49)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  50)     protected $oauthToken;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  51) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  52)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  53)      * The user's email address, usually used as the login ID
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  54)      * and also the from address when sending email.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  55)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  56)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  57)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  58)     protected $oauthUserEmail = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  59) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  60)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  61)      * The client secret, generated in the app definition of the service you're connecting to.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  62)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  63)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  64)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  65)     protected $oauthClientSecret = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  66) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  67)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  68)      * The client ID, generated in the app definition of the service you're connecting to.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  69)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  70)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  71)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  72)     protected $oauthClientId = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  73) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  74)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  75)      * The refresh token, used to obtain new AccessTokens.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  76)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  77)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  78)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  79)     protected $oauthRefreshToken = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  80) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  81)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  82)      * OAuth constructor.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  83)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  84)      * @param array $options Associative array containing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  85)      *                       `provider`, `userName`, `clientSecret`, `clientId` and `refreshToken` elements
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  86)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  87)     public function __construct($options)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  88)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  89)         $this->provider = $options['provider'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  90)         $this->oauthUserEmail = $options['userName'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  91)         $this->oauthClientSecret = $options['clientSecret'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  92)         $this->oauthClientId = $options['clientId'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  93)         $this->oauthRefreshToken = $options['refreshToken'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  94)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  95) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  96)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  97)      * Get a new RefreshToken.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  98)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  99)      * @return RefreshToken
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 100)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 101)     protected function getGrant()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 102)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 103)         return new RefreshToken();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 104)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 105) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 106)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 107)      * Get a new AccessToken.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 108)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 109)      * @return AccessToken
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 110)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 111)     protected function getToken()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 112)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 113)         return $this->provider->getAccessToken(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 114)             $this->getGrant(),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 115)             ['refresh_token' => $this->oauthRefreshToken]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 116)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 117)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 118) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 119)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 120)      * Generate a base64-encoded OAuth token.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 121)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 122)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 123)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 124)     public function getOauth64()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 125)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 126)         //Get a new token if it's not available or has expired
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 127)         if (null === $this->oauthToken || $this->oauthToken->hasExpired()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 128)             $this->oauthToken = $this->getToken();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 129)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 130) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 131)         return base64_encode(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 132)             'user=' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 133)             $this->oauthUserEmail .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 134)             "\001auth=Bearer " .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 135)             $this->oauthToken .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 136)             "\001\001"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 137)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 138)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 139) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  4)  * PHPMailer - PHP email creation and transport class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  5)  * PHP Version 5.5.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  6)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  7)  * @see https://github.com/PHPMailer/PHPMailer/ The PHPMailer GitHub project
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  8)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  9)  * @author    Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 10)  * @author    Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 11)  * @author    Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 12)  * @author    Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 13)  * @copyright 2012 - 2020 Marcus Bointon
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 14)  * @copyright 2010 - 2012 Jim Jagielski
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 15)  * @copyright 2004 - 2009 Andy Prevost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 16)  * @license   https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html GNU Lesser General Public License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 17)  * @note      This program is distributed in the hope that it will be useful - WITHOUT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 18)  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 19)  * FITNESS FOR A PARTICULAR PURPOSE.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 20)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 21) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 22) namespace PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 23) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 24) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 25)  * OAuthTokenProvider - OAuth2 token provider interface.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 26)  * Provides base64 encoded OAuth2 auth strings for SMTP authentication.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 27)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 28)  * @see     OAuth
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 29)  * @see     SMTP::authenticate()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 30)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 31)  * @author  Peter Scopes (pdscopes)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 32)  * @author  Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 33)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 34) interface OAuthTokenProvider
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 35) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 36)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 37)      * Generate a base64-encoded OAuth token ensuring that the access token has not expired.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 38)      * The string to be base 64 encoded should be in the form:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 39)      * "user=<user_email_address>\001auth=Bearer <access_token>\001\001"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 40)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 41)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 42)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 43)     public function getOauth64();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 44) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    4)  * PHPMailer - PHP email creation and transport class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    5)  * PHP Version 5.5.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    6)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    7)  * @see https://github.com/PHPMailer/PHPMailer/ The PHPMailer GitHub project
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    8)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    9)  * @author    Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   10)  * @author    Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   11)  * @author    Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   12)  * @author    Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   13)  * @copyright 2012 - 2020 Marcus Bointon
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   14)  * @copyright 2010 - 2012 Jim Jagielski
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   15)  * @copyright 2004 - 2009 Andy Prevost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   16)  * @license   https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html GNU Lesser General Public License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   17)  * @note      This program is distributed in the hope that it will be useful - WITHOUT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   18)  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   19)  * FITNESS FOR A PARTICULAR PURPOSE.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   20)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   21) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   22) namespace PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   23) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   24) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   25)  * PHPMailer - PHP email creation and transport class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   26)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   27)  * @author Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   28)  * @author Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   29)  * @author Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   30)  * @author Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   31)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   32) class PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   33) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   34)     const CHARSET_ASCII = 'us-ascii';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   35)     const CHARSET_ISO88591 = 'iso-8859-1';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   36)     const CHARSET_UTF8 = 'utf-8';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   37) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   38)     const CONTENT_TYPE_PLAINTEXT = 'text/plain';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   39)     const CONTENT_TYPE_TEXT_CALENDAR = 'text/calendar';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   40)     const CONTENT_TYPE_TEXT_HTML = 'text/html';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   41)     const CONTENT_TYPE_MULTIPART_ALTERNATIVE = 'multipart/alternative';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   42)     const CONTENT_TYPE_MULTIPART_MIXED = 'multipart/mixed';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   43)     const CONTENT_TYPE_MULTIPART_RELATED = 'multipart/related';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   44) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   45)     const ENCODING_7BIT = '7bit';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   46)     const ENCODING_8BIT = '8bit';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   47)     const ENCODING_BASE64 = 'base64';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   48)     const ENCODING_BINARY = 'binary';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   49)     const ENCODING_QUOTED_PRINTABLE = 'quoted-printable';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   50) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   51)     const ENCRYPTION_STARTTLS = 'tls';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   52)     const ENCRYPTION_SMTPS = 'ssl';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   53) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   54)     const ICAL_METHOD_REQUEST = 'REQUEST';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   55)     const ICAL_METHOD_PUBLISH = 'PUBLISH';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   56)     const ICAL_METHOD_REPLY = 'REPLY';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   57)     const ICAL_METHOD_ADD = 'ADD';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   58)     const ICAL_METHOD_CANCEL = 'CANCEL';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   59)     const ICAL_METHOD_REFRESH = 'REFRESH';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   60)     const ICAL_METHOD_COUNTER = 'COUNTER';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   61)     const ICAL_METHOD_DECLINECOUNTER = 'DECLINECOUNTER';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   62) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   63)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   64)      * Email priority.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   65)      * Options: null (default), 1 = High, 3 = Normal, 5 = low.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   66)      * When null, the header is not set at all.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   67)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   68)      * @var int|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   69)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   70)     public $Priority;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   71) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   72)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   73)      * The character set of the message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   74)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   75)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   76)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   77)     public $CharSet = self::CHARSET_ISO88591;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   78) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   79)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   80)      * The MIME Content-type of the message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   81)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   82)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   83)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   84)     public $ContentType = self::CONTENT_TYPE_PLAINTEXT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   85) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   86)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   87)      * The message encoding.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   88)      * Options: "8bit", "7bit", "binary", "base64", and "quoted-printable".
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   89)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   90)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   91)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   92)     public $Encoding = self::ENCODING_8BIT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   93) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   94)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   95)      * Holds the most recent mailer error message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   96)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   97)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   98)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   99)     public $ErrorInfo = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  100) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  101)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  102)      * The From email address for the message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  103)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  104)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  105)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  106)     public $From = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  107) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  108)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  109)      * The From name of the message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  110)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  111)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  112)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  113)     public $FromName = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  114) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  115)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  116)      * The envelope sender of the message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  117)      * This will usually be turned into a Return-Path header by the receiver,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  118)      * and is the address that bounces will be sent to.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  119)      * If not empty, will be passed via `-f` to sendmail or as the 'MAIL FROM' value over SMTP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  120)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  121)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  122)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  123)     public $Sender = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  124) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  125)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  126)      * The Subject of the message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  127)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  128)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  129)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  130)     public $Subject = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  131) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  132)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  133)      * An HTML or plain text message body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  134)      * If HTML then call isHTML(true).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  135)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  136)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  137)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  138)     public $Body = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  139) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  140)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  141)      * The plain-text message body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  142)      * This body can be read by mail clients that do not have HTML email
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  143)      * capability such as mutt & Eudora.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  144)      * Clients that can read HTML will view the normal Body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  145)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  146)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  147)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  148)     public $AltBody = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  149) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  150)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  151)      * An iCal message part body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  152)      * Only supported in simple alt or alt_inline message types
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  153)      * To generate iCal event structures, use classes like EasyPeasyICS or iCalcreator.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  154)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  155)      * @see https://kigkonsult.se/iCalcreator/
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  156)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  157)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  158)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  159)     public $Ical = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  160) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  161)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  162)      * Value-array of "method" in Contenttype header "text/calendar"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  163)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  164)      * @var string[]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  165)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  166)     protected static $IcalMethods = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  167)         self::ICAL_METHOD_REQUEST,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  168)         self::ICAL_METHOD_PUBLISH,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  169)         self::ICAL_METHOD_REPLY,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  170)         self::ICAL_METHOD_ADD,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  171)         self::ICAL_METHOD_CANCEL,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  172)         self::ICAL_METHOD_REFRESH,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  173)         self::ICAL_METHOD_COUNTER,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  174)         self::ICAL_METHOD_DECLINECOUNTER,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  175)     ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  176) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  177)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  178)      * The complete compiled MIME message body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  179)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  180)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  181)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  182)     protected $MIMEBody = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  183) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  184)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  185)      * The complete compiled MIME message headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  186)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  187)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  188)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  189)     protected $MIMEHeader = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  190) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  191)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  192)      * Extra headers that createHeader() doesn't fold in.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  193)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  194)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  195)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  196)     protected $mailHeader = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  197) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  198)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  199)      * Word-wrap the message body to this number of chars.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  200)      * Set to 0 to not wrap. A useful value here is 78, for RFC2822 section 2.1.1 compliance.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  201)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  202)      * @see static::STD_LINE_LENGTH
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  203)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  204)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  205)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  206)     public $WordWrap = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  207) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  208)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  209)      * Which method to use to send mail.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  210)      * Options: "mail", "sendmail", or "smtp".
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  211)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  212)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  213)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  214)     public $Mailer = 'mail';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  215) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  216)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  217)      * The path to the sendmail program.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  218)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  219)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  220)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  221)     public $Sendmail = '/usr/sbin/sendmail';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  222) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  223)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  224)      * Whether mail() uses a fully sendmail-compatible MTA.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  225)      * One which supports sendmail's "-oi -f" options.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  226)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  227)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  228)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  229)     public $UseSendmailOptions = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  230) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  231)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  232)      * The email address that a reading confirmation should be sent to, also known as read receipt.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  233)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  234)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  235)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  236)     public $ConfirmReadingTo = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  237) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  238)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  239)      * The hostname to use in the Message-ID header and as default HELO string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  240)      * If empty, PHPMailer attempts to find one with, in order,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  241)      * $_SERVER['SERVER_NAME'], gethostname(), php_uname('n'), or the value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  242)      * 'localhost.localdomain'.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  243)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  244)      * @see PHPMailer::$Helo
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  245)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  246)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  247)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  248)     public $Hostname = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  249) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  250)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  251)      * An ID to be used in the Message-ID header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  252)      * If empty, a unique id will be generated.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  253)      * You can set your own, but it must be in the format "<id@domain>",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  254)      * as defined in RFC5322 section 3.6.4 or it will be ignored.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  255)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  256)      * @see https://tools.ietf.org/html/rfc5322#section-3.6.4
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  257)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  258)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  259)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  260)     public $MessageID = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  261) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  262)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  263)      * The message Date to be used in the Date header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  264)      * If empty, the current date will be added.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  265)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  266)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  267)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  268)     public $MessageDate = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  269) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  270)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  271)      * SMTP hosts.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  272)      * Either a single hostname or multiple semicolon-delimited hostnames.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  273)      * You can also specify a different port
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  274)      * for each host by using this format: [hostname:port]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  275)      * (e.g. "smtp1.example.com:25;smtp2.example.com").
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  276)      * You can also specify encryption type, for example:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  277)      * (e.g. "tls://smtp1.example.com:587;ssl://smtp2.example.com:465").
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  278)      * Hosts will be tried in order.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  279)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  280)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  281)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  282)     public $Host = 'localhost';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  283) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  284)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  285)      * The default SMTP server port.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  286)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  287)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  288)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  289)     public $Port = 25;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  290) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  291)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  292)      * The SMTP HELO/EHLO name used for the SMTP connection.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  293)      * Default is $Hostname. If $Hostname is empty, PHPMailer attempts to find
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  294)      * one with the same method described above for $Hostname.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  295)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  296)      * @see PHPMailer::$Hostname
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  297)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  298)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  299)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  300)     public $Helo = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  301) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  302)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  303)      * What kind of encryption to use on the SMTP connection.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  304)      * Options: '', static::ENCRYPTION_STARTTLS, or static::ENCRYPTION_SMTPS.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  305)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  306)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  307)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  308)     public $SMTPSecure = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  309) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  310)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  311)      * Whether to enable TLS encryption automatically if a server supports it,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  312)      * even if `SMTPSecure` is not set to 'tls'.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  313)      * Be aware that in PHP >= 5.6 this requires that the server's certificates are valid.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  314)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  315)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  316)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  317)     public $SMTPAutoTLS = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  318) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  319)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  320)      * Whether to use SMTP authentication.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  321)      * Uses the Username and Password properties.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  322)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  323)      * @see PHPMailer::$Username
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  324)      * @see PHPMailer::$Password
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  325)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  326)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  327)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  328)     public $SMTPAuth = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  329) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  330)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  331)      * Options array passed to stream_context_create when connecting via SMTP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  332)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  333)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  334)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  335)     public $SMTPOptions = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  336) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  337)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  338)      * SMTP username.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  339)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  340)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  341)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  342)     public $Username = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  343) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  344)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  345)      * SMTP password.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  346)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  347)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  348)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  349)     public $Password = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  350) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  351)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  352)      * SMTP authentication type. Options are CRAM-MD5, LOGIN, PLAIN, XOAUTH2.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  353)      * If not specified, the first one from that list that the server supports will be selected.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  354)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  355)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  356)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  357)     public $AuthType = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  358) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  359)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  360)      * SMTP SMTPXClient command attributes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  361)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  362)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  363)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  364)     protected $SMTPXClient = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  365) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  366)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  367)      * An implementation of the PHPMailer OAuthTokenProvider interface.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  368)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  369)      * @var OAuthTokenProvider
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  370)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  371)     protected $oauth;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  372) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  373)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  374)      * The SMTP server timeout in seconds.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  375)      * Default of 5 minutes (300sec) is from RFC2821 section 4.5.3.2.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  376)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  377)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  378)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  379)     public $Timeout = 300;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  380) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  381)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  382)      * Comma separated list of DSN notifications
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  383)      * 'NEVER' under no circumstances a DSN must be returned to the sender.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  384)      *         If you use NEVER all other notifications will be ignored.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  385)      * 'SUCCESS' will notify you when your mail has arrived at its destination.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  386)      * 'FAILURE' will arrive if an error occurred during delivery.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  387)      * 'DELAY'   will notify you if there is an unusual delay in delivery, but the actual
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  388)      *           delivery's outcome (success or failure) is not yet decided.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  389)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  390)      * @see https://tools.ietf.org/html/rfc3461 See section 4.1 for more information about NOTIFY
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  391)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  392)     public $dsn = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  393) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  394)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  395)      * SMTP class debug output mode.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  396)      * Debug output level.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  397)      * Options:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  398)      * @see SMTP::DEBUG_OFF: No output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  399)      * @see SMTP::DEBUG_CLIENT: Client messages
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  400)      * @see SMTP::DEBUG_SERVER: Client and server messages
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  401)      * @see SMTP::DEBUG_CONNECTION: As SERVER plus connection status
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  402)      * @see SMTP::DEBUG_LOWLEVEL: Noisy, low-level data output, rarely needed
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  403)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  404)      * @see SMTP::$do_debug
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  405)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  406)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  407)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  408)     public $SMTPDebug = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  409) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  410)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  411)      * How to handle debug output.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  412)      * Options:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  413)      * * `echo` Output plain-text as-is, appropriate for CLI
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  414)      * * `html` Output escaped, line breaks converted to `<br>`, appropriate for browser output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  415)      * * `error_log` Output to error log as configured in php.ini
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  416)      * By default PHPMailer will use `echo` if run from a `cli` or `cli-server` SAPI, `html` otherwise.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  417)      * Alternatively, you can provide a callable expecting two params: a message string and the debug level:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  418)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  419)      * ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  420)      * $mail->Debugoutput = function($str, $level) {echo "debug level $level; message: $str";};
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  421)      * ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  422)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  423)      * Alternatively, you can pass in an instance of a PSR-3 compatible logger, though only `debug`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  424)      * level output is used:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  425)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  426)      * ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  427)      * $mail->Debugoutput = new myPsr3Logger;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  428)      * ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  429)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  430)      * @see SMTP::$Debugoutput
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  431)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  432)      * @var string|callable|\Psr\Log\LoggerInterface
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  433)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  434)     public $Debugoutput = 'echo';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  435) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  436)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  437)      * Whether to keep the SMTP connection open after each message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  438)      * If this is set to true then the connection will remain open after a send,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  439)      * and closing the connection will require an explicit call to smtpClose().
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  440)      * It's a good idea to use this if you are sending multiple messages as it reduces overhead.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  441)      * See the mailing list example for how to use it.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  442)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  443)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  444)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  445)     public $SMTPKeepAlive = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  446) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  447)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  448)      * Whether to split multiple to addresses into multiple messages
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  449)      * or send them all in one message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  450)      * Only supported in `mail` and `sendmail` transports, not in SMTP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  451)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  452)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  453)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  454)      * @deprecated 6.0.0 PHPMailer isn't a mailing list manager!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  455)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  456)     public $SingleTo = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  457) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  458)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  459)      * Storage for addresses when SingleTo is enabled.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  460)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  461)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  462)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  463)     protected $SingleToArray = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  464) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  465)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  466)      * Whether to generate VERP addresses on send.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  467)      * Only applicable when sending via SMTP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  468)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  469)      * @see https://en.wikipedia.org/wiki/Variable_envelope_return_path
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  470)      * @see https://www.postfix.org/VERP_README.html Postfix VERP info
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  471)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  472)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  473)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  474)     public $do_verp = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  475) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  476)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  477)      * Whether to allow sending messages with an empty body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  478)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  479)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  480)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  481)     public $AllowEmpty = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  482) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  483)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  484)      * DKIM selector.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  485)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  486)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  487)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  488)     public $DKIM_selector = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  489) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  490)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  491)      * DKIM Identity.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  492)      * Usually the email address used as the source of the email.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  493)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  494)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  495)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  496)     public $DKIM_identity = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  497) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  498)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  499)      * DKIM passphrase.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  500)      * Used if your key is encrypted.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  501)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  502)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  503)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  504)     public $DKIM_passphrase = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  505) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  506)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  507)      * DKIM signing domain name.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  508)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  509)      * @example 'example.com'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  510)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  511)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  512)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  513)     public $DKIM_domain = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  514) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  515)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  516)      * DKIM Copy header field values for diagnostic use.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  517)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  518)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  519)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  520)     public $DKIM_copyHeaderFields = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  521) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  522)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  523)      * DKIM Extra signing headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  524)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  525)      * @example ['List-Unsubscribe', 'List-Help']
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  526)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  527)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  528)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  529)     public $DKIM_extraHeaders = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  530) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  531)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  532)      * DKIM private key file path.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  533)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  534)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  535)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  536)     public $DKIM_private = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  537) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  538)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  539)      * DKIM private key string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  540)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  541)      * If set, takes precedence over `$DKIM_private`.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  542)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  543)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  544)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  545)     public $DKIM_private_string = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  546) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  547)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  548)      * Callback Action function name.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  549)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  550)      * The function that handles the result of the send email action.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  551)      * It is called out by send() for each email sent.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  552)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  553)      * Value can be any php callable: https://www.php.net/is_callable
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  554)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  555)      * Parameters:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  556)      *   bool $result           result of the send action
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  557)      *   array   $to            email addresses of the recipients
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  558)      *   array   $cc            cc email addresses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  559)      *   array   $bcc           bcc email addresses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  560)      *   string  $subject       the subject
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  561)      *   string  $body          the email body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  562)      *   string  $from          email address of sender
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  563)      *   string  $extra         extra information of possible use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  564)      *                          "smtp_transaction_id' => last smtp transaction id
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  565)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  566)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  567)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  568)     public $action_function = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  569) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  570)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  571)      * What to put in the X-Mailer header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  572)      * Options: An empty string for PHPMailer default, whitespace/null for none, or a string to use.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  573)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  574)      * @var string|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  575)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  576)     public $XMailer = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  577) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  578)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  579)      * Which validator to use by default when validating email addresses.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  580)      * May be a callable to inject your own validator, but there are several built-in validators.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  581)      * The default validator uses PHP's FILTER_VALIDATE_EMAIL filter_var option.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  582)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  583)      * @see PHPMailer::validateAddress()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  584)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  585)      * @var string|callable
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  586)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  587)     public static $validator = 'php';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  588) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  589)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  590)      * An instance of the SMTP sender class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  591)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  592)      * @var SMTP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  593)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  594)     protected $smtp;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  595) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  596)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  597)      * The array of 'to' names and addresses.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  598)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  599)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  600)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  601)     protected $to = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  602) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  603)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  604)      * The array of 'cc' names and addresses.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  605)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  606)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  607)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  608)     protected $cc = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  609) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  610)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  611)      * The array of 'bcc' names and addresses.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  612)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  613)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  614)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  615)     protected $bcc = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  616) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  617)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  618)      * The array of reply-to names and addresses.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  619)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  620)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  621)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  622)     protected $ReplyTo = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  623) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  624)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  625)      * An array of all kinds of addresses.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  626)      * Includes all of $to, $cc, $bcc.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  627)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  628)      * @see PHPMailer::$to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  629)      * @see PHPMailer::$cc
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  630)      * @see PHPMailer::$bcc
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  631)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  632)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  633)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  634)     protected $all_recipients = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  635) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  636)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  637)      * An array of names and addresses queued for validation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  638)      * In send(), valid and non duplicate entries are moved to $all_recipients
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  639)      * and one of $to, $cc, or $bcc.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  640)      * This array is used only for addresses with IDN.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  641)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  642)      * @see PHPMailer::$to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  643)      * @see PHPMailer::$cc
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  644)      * @see PHPMailer::$bcc
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  645)      * @see PHPMailer::$all_recipients
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  646)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  647)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  648)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  649)     protected $RecipientsQueue = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  650) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  651)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  652)      * An array of reply-to names and addresses queued for validation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  653)      * In send(), valid and non duplicate entries are moved to $ReplyTo.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  654)      * This array is used only for addresses with IDN.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  655)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  656)      * @see PHPMailer::$ReplyTo
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  657)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  658)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  659)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  660)     protected $ReplyToQueue = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  661) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  662)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  663)      * The array of attachments.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  664)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  665)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  666)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  667)     protected $attachment = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  668) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  669)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  670)      * The array of custom headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  671)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  672)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  673)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  674)     protected $CustomHeader = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  675) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  676)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  677)      * The most recent Message-ID (including angular brackets).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  678)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  679)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  680)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  681)     protected $lastMessageID = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  682) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  683)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  684)      * The message's MIME type.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  685)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  686)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  687)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  688)     protected $message_type = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  689) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  690)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  691)      * The array of MIME boundary strings.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  692)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  693)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  694)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  695)     protected $boundary = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  696) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  697)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  698)      * The array of available text strings for the current language.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  699)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  700)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  701)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  702)     protected $language = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  703) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  704)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  705)      * The number of errors encountered.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  706)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  707)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  708)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  709)     protected $error_count = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  710) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  711)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  712)      * The S/MIME certificate file path.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  713)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  714)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  715)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  716)     protected $sign_cert_file = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  717) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  718)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  719)      * The S/MIME key file path.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  720)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  721)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  722)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  723)     protected $sign_key_file = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  724) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  725)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  726)      * The optional S/MIME extra certificates ("CA Chain") file path.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  727)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  728)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  729)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  730)     protected $sign_extracerts_file = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  731) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  732)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  733)      * The S/MIME password for the key.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  734)      * Used only if the key is encrypted.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  735)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  736)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  737)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  738)     protected $sign_key_pass = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  739) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  740)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  741)      * Whether to throw exceptions for errors.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  742)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  743)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  744)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  745)     protected $exceptions = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  746) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  747)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  748)      * Unique ID used for message ID and boundaries.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  749)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  750)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  751)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  752)     protected $uniqueid = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  753) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  754)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  755)      * The PHPMailer Version number.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  756)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  757)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  758)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  759)     const VERSION = '6.9.2';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  760) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  761)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  762)      * Error severity: message only, continue processing.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  763)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  764)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  765)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  766)     const STOP_MESSAGE = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  767) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  768)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  769)      * Error severity: message, likely ok to continue processing.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  770)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  771)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  772)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  773)     const STOP_CONTINUE = 1;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  774) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  775)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  776)      * Error severity: message, plus full stop, critical error reached.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  777)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  778)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  779)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  780)     const STOP_CRITICAL = 2;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  781) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  782)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  783)      * The SMTP standard CRLF line break.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  784)      * If you want to change line break format, change static::$LE, not this.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  785)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  786)     const CRLF = "\r\n";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  787) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  788)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  789)      * "Folding White Space" a white space string used for line folding.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  790)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  791)     const FWS = ' ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  792) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  793)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  794)      * SMTP RFC standard line ending; Carriage Return, Line Feed.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  795)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  796)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  797)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  798)     protected static $LE = self::CRLF;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  799) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  800)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  801)      * The maximum line length supported by mail().
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  802)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  803)      * Background: mail() will sometimes corrupt messages
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  804)      * with headers longer than 65 chars, see #818.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  805)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  806)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  807)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  808)     const MAIL_MAX_LINE_LENGTH = 63;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  809) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  810)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  811)      * The maximum line length allowed by RFC 2822 section 2.1.1.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  812)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  813)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  814)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  815)     const MAX_LINE_LENGTH = 998;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  816) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  817)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  818)      * The lower maximum line length allowed by RFC 2822 section 2.1.1.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  819)      * This length does NOT include the line break
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  820)      * 76 means that lines will be 77 or 78 chars depending on whether
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  821)      * the line break format is LF or CRLF; both are valid.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  822)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  823)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  824)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  825)     const STD_LINE_LENGTH = 76;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  826) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  827)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  828)      * Constructor.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  829)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  830)      * @param bool $exceptions Should we throw external exceptions?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  831)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  832)     public function __construct($exceptions = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  833)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  834)         if (null !== $exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  835)             $this->exceptions = (bool) $exceptions;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  836)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  837)         //Pick an appropriate debug output format automatically
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  838)         $this->Debugoutput = (strpos(PHP_SAPI, 'cli') !== false ? 'echo' : 'html');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  839)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  840) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  841)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  842)      * Destructor.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  843)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  844)     public function __destruct()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  845)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  846)         //Close any open SMTP connection nicely
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  847)         $this->smtpClose();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  848)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  849) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  850)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  851)      * Call mail() in a safe_mode-aware fashion.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  852)      * Also, unless sendmail_path points to sendmail (or something that
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  853)      * claims to be sendmail), don't pass params (not a perfect fix,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  854)      * but it will do).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  855)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  856)      * @param string      $to      To
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  857)      * @param string      $subject Subject
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  858)      * @param string      $body    Message Body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  859)      * @param string      $header  Additional Header(s)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  860)      * @param string|null $params  Params
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  861)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  862)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  863)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  864)     private function mailPassthru($to, $subject, $body, $header, $params)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  865)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  866)         //Check overloading of mail function to avoid double-encoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  867)         if ((int)ini_get('mbstring.func_overload') & 1) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  868)             $subject = $this->secureHeader($subject);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  869)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  870)             $subject = $this->encodeHeader($this->secureHeader($subject));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  871)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  872)         //Calling mail() with null params breaks
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  873)         $this->edebug('Sending with mail()');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  874)         $this->edebug('Sendmail path: ' . ini_get('sendmail_path'));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  875)         $this->edebug("Envelope sender: {$this->Sender}");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  876)         $this->edebug("To: {$to}");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  877)         $this->edebug("Subject: {$subject}");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  878)         $this->edebug("Headers: {$header}");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  879)         if (!$this->UseSendmailOptions || null === $params) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  880)             $result = @mail($to, $subject, $body, $header);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  881)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  882)             $this->edebug("Additional params: {$params}");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  883)             $result = @mail($to, $subject, $body, $header, $params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  884)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  885)         $this->edebug('Result: ' . ($result ? 'true' : 'false'));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  886)         return $result;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  887)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  888) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  889)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  890)      * Output debugging info via a user-defined method.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  891)      * Only generates output if debug output is enabled.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  892)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  893)      * @see PHPMailer::$Debugoutput
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  894)      * @see PHPMailer::$SMTPDebug
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  895)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  896)      * @param string $str
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  897)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  898)     protected function edebug($str)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  899)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  900)         if ($this->SMTPDebug <= 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  901)             return;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  902)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  903)         //Is this a PSR-3 logger?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  904)         if ($this->Debugoutput instanceof \Psr\Log\LoggerInterface) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  905)             $this->Debugoutput->debug(rtrim($str, "\r\n"));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  906) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  907)             return;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  908)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  909)         //Avoid clash with built-in function names
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  910)         if (is_callable($this->Debugoutput) && !in_array($this->Debugoutput, ['error_log', 'html', 'echo'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  911)             call_user_func($this->Debugoutput, $str, $this->SMTPDebug);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  912) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  913)             return;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  914)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  915)         switch ($this->Debugoutput) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  916)             case 'error_log':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  917)                 //Don't output, just log
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  918)                 /** @noinspection ForgottenDebugOutputInspection */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  919)                 error_log($str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  920)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  921)             case 'html':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  922)                 //Cleans up output a bit for a better looking, HTML-safe output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  923)                 echo htmlentities(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  924)                     preg_replace('/[\r\n]+/', '', $str),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  925)                     ENT_QUOTES,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  926)                     'UTF-8'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  927)                 ), "<br>\n";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  928)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  929)             case 'echo':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  930)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  931)                 //Normalize line breaks
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  932)                 $str = preg_replace('/\r\n|\r/m', "\n", $str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  933)                 echo gmdate('Y-m-d H:i:s'),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  934)                 "\t",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  935)                     //Trim trailing space
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  936)                 trim(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  937)                     //Indent for readability, except for trailing break
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  938)                     str_replace(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  939)                         "\n",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  940)                         "\n                   \t                  ",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  941)                         trim($str)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  942)                     )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  943)                 ),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  944)                 "\n";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  945)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  946)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  947) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  948)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  949)      * Sets message type to HTML or plain.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  950)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  951)      * @param bool $isHtml True for HTML mode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  952)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  953)     public function isHTML($isHtml = true)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  954)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  955)         if ($isHtml) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  956)             $this->ContentType = static::CONTENT_TYPE_TEXT_HTML;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  957)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  958)             $this->ContentType = static::CONTENT_TYPE_PLAINTEXT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  959)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  960)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  961) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  962)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  963)      * Send messages using SMTP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  964)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  965)     public function isSMTP()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  966)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  967)         $this->Mailer = 'smtp';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  968)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  969) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  970)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  971)      * Send messages using PHP's mail() function.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  972)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  973)     public function isMail()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  974)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  975)         $this->Mailer = 'mail';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  976)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  977) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  978)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  979)      * Send messages using $Sendmail.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  980)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  981)     public function isSendmail()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  982)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  983)         $ini_sendmail_path = ini_get('sendmail_path');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  984) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  985)         if (false === stripos($ini_sendmail_path, 'sendmail')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  986)             $this->Sendmail = '/usr/sbin/sendmail';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  987)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  988)             $this->Sendmail = $ini_sendmail_path;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  989)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  990)         $this->Mailer = 'sendmail';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  991)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  992) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  993)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  994)      * Send messages using qmail.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  995)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  996)     public function isQmail()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  997)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  998)         $ini_sendmail_path = ini_get('sendmail_path');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  999) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1000)         if (false === stripos($ini_sendmail_path, 'qmail')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1001)             $this->Sendmail = '/var/qmail/bin/qmail-inject';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1002)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1003)             $this->Sendmail = $ini_sendmail_path;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1004)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1005)         $this->Mailer = 'qmail';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1006)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1007) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1008)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1009)      * Add a "To" address.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1010)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1011)      * @param string $address The email address to send to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1012)      * @param string $name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1013)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1014)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1015)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1016)      * @return bool true on success, false if address already used or invalid in some way
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1017)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1018)     public function addAddress($address, $name = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1019)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1020)         return $this->addOrEnqueueAnAddress('to', $address, $name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1021)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1022) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1023)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1024)      * Add a "CC" address.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1025)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1026)      * @param string $address The email address to send to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1027)      * @param string $name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1028)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1029)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1030)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1031)      * @return bool true on success, false if address already used or invalid in some way
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1032)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1033)     public function addCC($address, $name = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1034)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1035)         return $this->addOrEnqueueAnAddress('cc', $address, $name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1036)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1037) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1038)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1039)      * Add a "BCC" address.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1040)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1041)      * @param string $address The email address to send to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1042)      * @param string $name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1043)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1044)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1045)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1046)      * @return bool true on success, false if address already used or invalid in some way
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1047)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1048)     public function addBCC($address, $name = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1049)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1050)         return $this->addOrEnqueueAnAddress('bcc', $address, $name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1051)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1052) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1053)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1054)      * Add a "Reply-To" address.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1055)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1056)      * @param string $address The email address to reply to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1057)      * @param string $name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1058)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1059)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1060)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1061)      * @return bool true on success, false if address already used or invalid in some way
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1062)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1063)     public function addReplyTo($address, $name = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1064)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1065)         return $this->addOrEnqueueAnAddress('Reply-To', $address, $name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1066)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1067) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1068)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1069)      * Add an address to one of the recipient arrays or to the ReplyTo array. Because PHPMailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1070)      * can't validate addresses with an IDN without knowing the PHPMailer::$CharSet (that can still
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1071)      * be modified after calling this function), addition of such addresses is delayed until send().
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1072)      * Addresses that have been added already return false, but do not throw exceptions.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1073)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1074)      * @param string $kind    One of 'to', 'cc', 'bcc', or 'Reply-To'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1075)      * @param string $address The email address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1076)      * @param string $name    An optional username associated with the address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1077)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1078)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1079)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1080)      * @return bool true on success, false if address already used or invalid in some way
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1081)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1082)     protected function addOrEnqueueAnAddress($kind, $address, $name)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1083)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1084)         $pos = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1085)         if ($address !== null) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1086)             $address = trim($address);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1087)             $pos = strrpos($address, '@');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1088)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1089)         if (false === $pos) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1090)             //At-sign is missing.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1091)             $error_message = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1092)                 '%s (%s): %s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1093)                 $this->lang('invalid_address'),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1094)                 $kind,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1095)                 $address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1096)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1097)             $this->setError($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1098)             $this->edebug($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1099)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1100)                 throw new Exception($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1101)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1102) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1103)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1104)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1105)         if ($name !== null && is_string($name)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1106)             $name = trim(preg_replace('/[\r\n]+/', '', $name)); //Strip breaks and trim
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1107)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1108)             $name = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1109)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1110)         $params = [$kind, $address, $name];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1111)         //Enqueue addresses with IDN until we know the PHPMailer::$CharSet.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1112)         //Domain is assumed to be whatever is after the last @ symbol in the address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1113)         if (static::idnSupported() && $this->has8bitChars(substr($address, ++$pos))) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1114)             if ('Reply-To' !== $kind) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1115)                 if (!array_key_exists($address, $this->RecipientsQueue)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1116)                     $this->RecipientsQueue[$address] = $params;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1117) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1118)                     return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1119)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1120)             } elseif (!array_key_exists($address, $this->ReplyToQueue)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1121)                 $this->ReplyToQueue[$address] = $params;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1122) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1123)                 return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1124)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1125) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1126)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1127)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1128) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1129)         //Immediately add standard addresses without IDN.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1130)         return call_user_func_array([$this, 'addAnAddress'], $params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1131)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1132) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1133)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1134)      * Set the boundaries to use for delimiting MIME parts.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1135)      * If you override this, ensure you set all 3 boundaries to unique values.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1136)      * The default boundaries include a "=_" sequence which cannot occur in quoted-printable bodies,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1137)      * as suggested by https://www.rfc-editor.org/rfc/rfc2045#section-6.7
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1138)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1139)      * @return void
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1140)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1141)     public function setBoundaries()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1142)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1143)         $this->uniqueid = $this->generateId();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1144)         $this->boundary[1] = 'b1=_' . $this->uniqueid;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1145)         $this->boundary[2] = 'b2=_' . $this->uniqueid;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1146)         $this->boundary[3] = 'b3=_' . $this->uniqueid;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1147)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1148) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1149)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1150)      * Add an address to one of the recipient arrays or to the ReplyTo array.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1151)      * Addresses that have been added already return false, but do not throw exceptions.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1152)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1153)      * @param string $kind    One of 'to', 'cc', 'bcc', or 'ReplyTo'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1154)      * @param string $address The email address to send, resp. to reply to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1155)      * @param string $name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1156)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1157)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1158)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1159)      * @return bool true on success, false if address already used or invalid in some way
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1160)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1161)     protected function addAnAddress($kind, $address, $name = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1162)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1163)         if (!in_array($kind, ['to', 'cc', 'bcc', 'Reply-To'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1164)             $error_message = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1165)                 '%s: %s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1166)                 $this->lang('Invalid recipient kind'),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1167)                 $kind
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1168)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1169)             $this->setError($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1170)             $this->edebug($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1171)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1172)                 throw new Exception($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1173)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1174) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1175)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1176)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1177)         if (!static::validateAddress($address)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1178)             $error_message = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1179)                 '%s (%s): %s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1180)                 $this->lang('invalid_address'),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1181)                 $kind,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1182)                 $address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1183)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1184)             $this->setError($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1185)             $this->edebug($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1186)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1187)                 throw new Exception($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1188)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1189) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1190)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1191)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1192)         if ('Reply-To' !== $kind) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1193)             if (!array_key_exists(strtolower($address), $this->all_recipients)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1194)                 $this->{$kind}[] = [$address, $name];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1195)                 $this->all_recipients[strtolower($address)] = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1196) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1197)                 return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1198)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1199)         } elseif (!array_key_exists(strtolower($address), $this->ReplyTo)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1200)             $this->ReplyTo[strtolower($address)] = [$address, $name];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1201) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1202)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1203)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1204) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1205)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1206)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1207) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1208)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1209)      * Parse and validate a string containing one or more RFC822-style comma-separated email addresses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1210)      * of the form "display name <address>" into an array of name/address pairs.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1211)      * Uses the imap_rfc822_parse_adrlist function if the IMAP extension is available.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1212)      * Note that quotes in the name part are removed.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1213)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1214)      * @see https://www.andrew.cmu.edu/user/agreen1/testing/mrbs/web/Mail/RFC822.php A more careful implementation
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1215)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1216)      * @param string $addrstr The address list string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1217)      * @param bool   $useimap Whether to use the IMAP extension to parse the list
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1218)      * @param string $charset The charset to use when decoding the address list string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1219)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1220)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1221)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1222)     public static function parseAddresses($addrstr, $useimap = true, $charset = self::CHARSET_ISO88591)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1223)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1224)         $addresses = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1225)         if ($useimap && function_exists('imap_rfc822_parse_adrlist')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1226)             //Use this built-in parser if it's available
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1227)             $list = imap_rfc822_parse_adrlist($addrstr, '');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1228)             // Clear any potential IMAP errors to get rid of notices being thrown at end of script.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1229)             imap_errors();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1230)             foreach ($list as $address) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1231)                 if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1232)                     '.SYNTAX-ERROR.' !== $address->host &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1233)                     static::validateAddress($address->mailbox . '@' . $address->host)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1234)                 ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1235)                     //Decode the name part if it's present and encoded
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1236)                     if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1237)                         property_exists($address, 'personal') &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1238)                         //Check for a Mbstring constant rather than using extension_loaded, which is sometimes disabled
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1239)                         defined('MB_CASE_UPPER') &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1240)                         preg_match('/^=\?.*\?=$/s', $address->personal)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1241)                     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1242)                         $origCharset = mb_internal_encoding();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1243)                         mb_internal_encoding($charset);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1244)                         //Undo any RFC2047-encoded spaces-as-underscores
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1245)                         $address->personal = str_replace('_', '=20', $address->personal);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1246)                         //Decode the name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1247)                         $address->personal = mb_decode_mimeheader($address->personal);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1248)                         mb_internal_encoding($origCharset);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1249)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1250) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1251)                     $addresses[] = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1252)                         'name' => (property_exists($address, 'personal') ? $address->personal : ''),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1253)                         'address' => $address->mailbox . '@' . $address->host,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1254)                     ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1255)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1256)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1257)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1258)             //Use this simpler parser
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1259)             $list = explode(',', $addrstr);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1260)             foreach ($list as $address) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1261)                 $address = trim($address);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1262)                 //Is there a separate name part?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1263)                 if (strpos($address, '<') === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1264)                     //No separate name, just use the whole thing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1265)                     if (static::validateAddress($address)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1266)                         $addresses[] = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1267)                             'name' => '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1268)                             'address' => $address,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1269)                         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1270)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1271)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1272)                     list($name, $email) = explode('<', $address);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1273)                     $email = trim(str_replace('>', '', $email));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1274)                     $name = trim($name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1275)                     if (static::validateAddress($email)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1276)                         //Check for a Mbstring constant rather than using extension_loaded, which is sometimes disabled
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1277)                         //If this name is encoded, decode it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1278)                         if (defined('MB_CASE_UPPER') && preg_match('/^=\?.*\?=$/s', $name)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1279)                             $origCharset = mb_internal_encoding();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1280)                             mb_internal_encoding($charset);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1281)                             //Undo any RFC2047-encoded spaces-as-underscores
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1282)                             $name = str_replace('_', '=20', $name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1283)                             //Decode the name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1284)                             $name = mb_decode_mimeheader($name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1285)                             mb_internal_encoding($origCharset);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1286)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1287)                         $addresses[] = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1288)                             //Remove any surrounding quotes and spaces from the name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1289)                             'name' => trim($name, '\'" '),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1290)                             'address' => $email,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1291)                         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1292)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1293)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1294)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1295)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1296) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1297)         return $addresses;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1298)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1299) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1300)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1301)      * Set the From and FromName properties.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1302)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1303)      * @param string $address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1304)      * @param string $name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1305)      * @param bool   $auto    Whether to also set the Sender address, defaults to true
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1306)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1307)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1308)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1309)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1310)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1311)     public function setFrom($address, $name = '', $auto = true)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1312)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1313)         $address = trim((string)$address);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1314)         $name = trim(preg_replace('/[\r\n]+/', '', $name)); //Strip breaks and trim
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1315)         //Don't validate now addresses with IDN. Will be done in send().
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1316)         $pos = strrpos($address, '@');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1317)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1318)             (false === $pos)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1319)             || ((!$this->has8bitChars(substr($address, ++$pos)) || !static::idnSupported())
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1320)             && !static::validateAddress($address))
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1321)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1322)             $error_message = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1323)                 '%s (From): %s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1324)                 $this->lang('invalid_address'),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1325)                 $address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1326)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1327)             $this->setError($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1328)             $this->edebug($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1329)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1330)                 throw new Exception($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1331)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1332) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1333)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1334)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1335)         $this->From = $address;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1336)         $this->FromName = $name;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1337)         if ($auto && empty($this->Sender)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1338)             $this->Sender = $address;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1339)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1340) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1341)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1342)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1343) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1344)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1345)      * Return the Message-ID header of the last email.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1346)      * Technically this is the value from the last time the headers were created,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1347)      * but it's also the message ID of the last sent message except in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1348)      * pathological cases.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1349)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1350)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1351)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1352)     public function getLastMessageID()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1353)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1354)         return $this->lastMessageID;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1355)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1356) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1357)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1358)      * Check that a string looks like an email address.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1359)      * Validation patterns supported:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1360)      * * `auto` Pick best pattern automatically;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1361)      * * `pcre8` Use the squiloople.com pattern, requires PCRE > 8.0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1362)      * * `pcre` Use old PCRE implementation;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1363)      * * `php` Use PHP built-in FILTER_VALIDATE_EMAIL;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1364)      * * `html5` Use the pattern given by the HTML5 spec for 'email' type form input elements.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1365)      * * `noregex` Don't use a regex: super fast, really dumb.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1366)      * Alternatively you may pass in a callable to inject your own validator, for example:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1367)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1368)      * ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1369)      * PHPMailer::validateAddress('user@example.com', function($address) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1370)      *     return (strpos($address, '@') !== false);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1371)      * });
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1372)      * ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1373)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1374)      * You can also set the PHPMailer::$validator static to a callable, allowing built-in methods to use your validator.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1375)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1376)      * @param string          $address       The email address to check
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1377)      * @param string|callable $patternselect Which pattern to use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1378)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1379)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1380)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1381)     public static function validateAddress($address, $patternselect = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1382)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1383)         if (null === $patternselect) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1384)             $patternselect = static::$validator;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1385)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1386)         //Don't allow strings as callables, see SECURITY.md and CVE-2021-3603
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1387)         if (is_callable($patternselect) && !is_string($patternselect)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1388)             return call_user_func($patternselect, $address);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1389)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1390)         //Reject line breaks in addresses; it's valid RFC5322, but not RFC5321
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1391)         if (strpos($address, "\n") !== false || strpos($address, "\r") !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1392)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1393)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1394)         switch ($patternselect) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1395)             case 'pcre': //Kept for BC
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1396)             case 'pcre8':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1397)                 /*
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1398)                  * A more complex and more permissive version of the RFC5322 regex on which FILTER_VALIDATE_EMAIL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1399)                  * is based.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1400)                  * In addition to the addresses allowed by filter_var, also permits:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1401)                  *  * dotless domains: `a@b`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1402)                  *  * comments: `1234 @ local(blah) .machine .example`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1403)                  *  * quoted elements: `'"test blah"@example.org'`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1404)                  *  * numeric TLDs: `a@b.123`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1405)                  *  * unbracketed IPv4 literals: `a@192.168.0.1`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1406)                  *  * IPv6 literals: 'first.last@[IPv6:a1::]'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1407)                  * Not all of these will necessarily work for sending!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1408)                  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1409)                  * @copyright 2009-2010 Michael Rushton
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1410)                  * Feel free to use and redistribute this code. But please keep this copyright notice.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1411)                  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1412)                 return (bool) preg_match(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1413)                     '/^(?!(?>(?1)"?(?>\\\[ -~]|[^"])"?(?1)){255,})(?!(?>(?1)"?(?>\\\[ -~]|[^"])"?(?1)){65,}@)' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1414)                     '((?>(?>(?>((?>(?>(?>\x0D\x0A)?[\t ])+|(?>[\t ]*\x0D\x0A)?[\t ]+)?)(\((?>(?2)' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1415)                     '(?>[\x01-\x08\x0B\x0C\x0E-\'*-\[\]-\x7F]|\\\[\x00-\x7F]|(?3)))*(?2)\)))+(?2))|(?2))?)' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1416)                     '([!#-\'*+\/-9=?^-~-]+|"(?>(?2)(?>[\x01-\x08\x0B\x0C\x0E-!#-\[\]-\x7F]|\\\[\x00-\x7F]))*' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1417)                     '(?2)")(?>(?1)\.(?1)(?4))*(?1)@(?!(?1)[a-z0-9-]{64,})(?1)(?>([a-z0-9](?>[a-z0-9-]*[a-z0-9])?)' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1418)                     '(?>(?1)\.(?!(?1)[a-z0-9-]{64,})(?1)(?5)){0,126}|\[(?:(?>IPv6:(?>([a-f0-9]{1,4})(?>:(?6)){7}' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1419)                     '|(?!(?:.*[a-f0-9][:\]]){8,})((?6)(?>:(?6)){0,6})?::(?7)?))|(?>(?>IPv6:(?>(?6)(?>:(?6)){5}:' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1420)                     '|(?!(?:.*[a-f0-9]:){6,})(?8)?::(?>((?6)(?>:(?6)){0,4}):)?))?(25[0-5]|2[0-4][0-9]|1[0-9]{2}' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1421)                     '|[1-9]?[0-9])(?>\.(?9)){3}))\])(?1)$/isD',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1422)                     $address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1423)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1424)             case 'html5':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1425)                 /*
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1426)                  * This is the pattern used in the HTML5 spec for validation of 'email' type form input elements.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1427)                  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1428)                  * @see https://html.spec.whatwg.org/#e-mail-state-(type=email)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1429)                  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1430)                 return (bool) preg_match(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1431)                     '/^[a-zA-Z0-9.!#$%&\'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1432)                     '[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/sD',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1433)                     $address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1434)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1435)             case 'php':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1436)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1437)                 return filter_var($address, FILTER_VALIDATE_EMAIL) !== false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1438)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1439)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1440) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1441)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1442)      * Tells whether IDNs (Internationalized Domain Names) are supported or not. This requires the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1443)      * `intl` and `mbstring` PHP extensions.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1444)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1445)      * @return bool `true` if required functions for IDN support are present
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1446)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1447)     public static function idnSupported()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1448)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1449)         return function_exists('idn_to_ascii') && function_exists('mb_convert_encoding');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1450)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1451) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1452)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1453)      * Converts IDN in given email address to its ASCII form, also known as punycode, if possible.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1454)      * Important: Address must be passed in same encoding as currently set in PHPMailer::$CharSet.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1455)      * This function silently returns unmodified address if:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1456)      * - No conversion is necessary (i.e. domain name is not an IDN, or is already in ASCII form)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1457)      * - Conversion to punycode is impossible (e.g. required PHP functions are not available)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1458)      *   or fails for any reason (e.g. domain contains characters not allowed in an IDN).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1459)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1460)      * @see PHPMailer::$CharSet
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1461)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1462)      * @param string $address The email address to convert
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1463)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1464)      * @return string The encoded address in ASCII form
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1465)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1466)     public function punyencodeAddress($address)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1467)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1468)         //Verify we have required functions, CharSet, and at-sign.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1469)         $pos = strrpos($address, '@');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1470)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1471)             !empty($this->CharSet) &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1472)             false !== $pos &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1473)             static::idnSupported()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1474)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1475)             $domain = substr($address, ++$pos);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1476)             //Verify CharSet string is a valid one, and domain properly encoded in this CharSet.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1477)             if ($this->has8bitChars($domain) && @mb_check_encoding($domain, $this->CharSet)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1478)                 //Convert the domain from whatever charset it's in to UTF-8
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1479)                 $domain = mb_convert_encoding($domain, self::CHARSET_UTF8, $this->CharSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1480)                 //Ignore IDE complaints about this line - method signature changed in PHP 5.4
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1481)                 $errorcode = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1482)                 if (defined('INTL_IDNA_VARIANT_UTS46')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1483)                     //Use the current punycode standard (appeared in PHP 7.2)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1484)                     $punycode = idn_to_ascii(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1485)                         $domain,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1486)                         \IDNA_DEFAULT | \IDNA_USE_STD3_RULES | \IDNA_CHECK_BIDI |
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1487)                             \IDNA_CHECK_CONTEXTJ | \IDNA_NONTRANSITIONAL_TO_ASCII,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1488)                         \INTL_IDNA_VARIANT_UTS46
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1489)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1490)                 } elseif (defined('INTL_IDNA_VARIANT_2003')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1491)                     //Fall back to this old, deprecated/removed encoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1492)                     $punycode = idn_to_ascii($domain, $errorcode, \INTL_IDNA_VARIANT_2003);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1493)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1494)                     //Fall back to a default we don't know about
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1495)                     $punycode = idn_to_ascii($domain, $errorcode);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1496)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1497)                 if (false !== $punycode) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1498)                     return substr($address, 0, $pos) . $punycode;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1499)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1500)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1501)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1502) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1503)         return $address;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1504)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1505) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1506)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1507)      * Create a message and send it.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1508)      * Uses the sending method specified by $Mailer.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1509)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1510)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1511)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1512)      * @return bool false on error - See the ErrorInfo property for details of the error
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1513)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1514)     public function send()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1515)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1516)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1517)             if (!$this->preSend()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1518)                 return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1519)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1520) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1521)             return $this->postSend();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1522)         } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1523)             $this->mailHeader = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1524)             $this->setError($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1525)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1526)                 throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1527)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1528) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1529)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1530)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1531)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1532) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1533)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1534)      * Prepare a message for sending.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1535)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1536)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1537)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1538)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1539)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1540)     public function preSend()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1541)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1542)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1543)             'smtp' === $this->Mailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1544)             || ('mail' === $this->Mailer && (\PHP_VERSION_ID >= 80000 || stripos(PHP_OS, 'WIN') === 0))
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1545)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1546)             //SMTP mandates RFC-compliant line endings
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1547)             //and it's also used with mail() on Windows
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1548)             static::setLE(self::CRLF);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1549)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1550)             //Maintain backward compatibility with legacy Linux command line mailers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1551)             static::setLE(PHP_EOL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1552)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1553)         //Check for buggy PHP versions that add a header with an incorrect line break
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1554)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1555)             'mail' === $this->Mailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1556)             && ((\PHP_VERSION_ID >= 70000 && \PHP_VERSION_ID < 70017)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1557)                 || (\PHP_VERSION_ID >= 70100 && \PHP_VERSION_ID < 70103))
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1558)             && ini_get('mail.add_x_header') === '1'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1559)             && stripos(PHP_OS, 'WIN') === 0
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1560)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1561)             trigger_error($this->lang('buggy_php'), E_USER_WARNING);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1562)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1563) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1564)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1565)             $this->error_count = 0; //Reset errors
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1566)             $this->mailHeader = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1567) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1568)             //Dequeue recipient and Reply-To addresses with IDN
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1569)             foreach (array_merge($this->RecipientsQueue, $this->ReplyToQueue) as $params) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1570)                 $params[1] = $this->punyencodeAddress($params[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1571)                 call_user_func_array([$this, 'addAnAddress'], $params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1572)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1573)             if (count($this->to) + count($this->cc) + count($this->bcc) < 1) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1574)                 throw new Exception($this->lang('provide_address'), self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1575)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1576) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1577)             //Validate From, Sender, and ConfirmReadingTo addresses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1578)             foreach (['From', 'Sender', 'ConfirmReadingTo'] as $address_kind) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1579)                 if ($this->{$address_kind} === null) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1580)                     $this->{$address_kind} = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1581)                     continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1582)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1583)                 $this->{$address_kind} = trim($this->{$address_kind});
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1584)                 if (empty($this->{$address_kind})) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1585)                     continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1586)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1587)                 $this->{$address_kind} = $this->punyencodeAddress($this->{$address_kind});
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1588)                 if (!static::validateAddress($this->{$address_kind})) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1589)                     $error_message = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1590)                         '%s (%s): %s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1591)                         $this->lang('invalid_address'),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1592)                         $address_kind,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1593)                         $this->{$address_kind}
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1594)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1595)                     $this->setError($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1596)                     $this->edebug($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1597)                     if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1598)                         throw new Exception($error_message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1599)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1600) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1601)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1602)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1603)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1604) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1605)             //Set whether the message is multipart/alternative
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1606)             if ($this->alternativeExists()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1607)                 $this->ContentType = static::CONTENT_TYPE_MULTIPART_ALTERNATIVE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1608)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1609) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1610)             $this->setMessageType();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1611)             //Refuse to send an empty message unless we are specifically allowing it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1612)             if (!$this->AllowEmpty && empty($this->Body)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1613)                 throw new Exception($this->lang('empty_message'), self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1614)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1615) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1616)             //Trim subject consistently
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1617)             $this->Subject = trim($this->Subject);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1618)             //Create body before headers in case body makes changes to headers (e.g. altering transfer encoding)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1619)             $this->MIMEHeader = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1620)             $this->MIMEBody = $this->createBody();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1621)             //createBody may have added some headers, so retain them
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1622)             $tempheaders = $this->MIMEHeader;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1623)             $this->MIMEHeader = $this->createHeader();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1624)             $this->MIMEHeader .= $tempheaders;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1625) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1626)             //To capture the complete message when using mail(), create
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1627)             //an extra header list which createHeader() doesn't fold in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1628)             if ('mail' === $this->Mailer) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1629)                 if (count($this->to) > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1630)                     $this->mailHeader .= $this->addrAppend('To', $this->to);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1631)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1632)                     $this->mailHeader .= $this->headerLine('To', 'undisclosed-recipients:;');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1633)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1634)                 $this->mailHeader .= $this->headerLine(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1635)                     'Subject',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1636)                     $this->encodeHeader($this->secureHeader($this->Subject))
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1637)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1638)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1639) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1640)             //Sign with DKIM if enabled
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1641)             if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1642)                 !empty($this->DKIM_domain)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1643)                 && !empty($this->DKIM_selector)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1644)                 && (!empty($this->DKIM_private_string)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1645)                     || (!empty($this->DKIM_private)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1646)                         && static::isPermittedPath($this->DKIM_private)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1647)                         && file_exists($this->DKIM_private)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1648)                     )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1649)                 )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1650)             ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1651)                 $header_dkim = $this->DKIM_Add(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1652)                     $this->MIMEHeader . $this->mailHeader,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1653)                     $this->encodeHeader($this->secureHeader($this->Subject)),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1654)                     $this->MIMEBody
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1655)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1656)                 $this->MIMEHeader = static::stripTrailingWSP($this->MIMEHeader) . static::$LE .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1657)                     static::normalizeBreaks($header_dkim) . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1658)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1659) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1660)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1661)         } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1662)             $this->setError($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1663)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1664)                 throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1665)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1666) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1667)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1668)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1669)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1670) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1671)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1672)      * Actually send a message via the selected mechanism.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1673)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1674)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1675)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1676)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1677)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1678)     public function postSend()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1679)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1680)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1681)             //Choose the mailer and send through it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1682)             switch ($this->Mailer) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1683)                 case 'sendmail':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1684)                 case 'qmail':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1685)                     return $this->sendmailSend($this->MIMEHeader, $this->MIMEBody);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1686)                 case 'smtp':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1687)                     return $this->smtpSend($this->MIMEHeader, $this->MIMEBody);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1688)                 case 'mail':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1689)                     return $this->mailSend($this->MIMEHeader, $this->MIMEBody);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1690)                 default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1691)                     $sendMethod = $this->Mailer . 'Send';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1692)                     if (method_exists($this, $sendMethod)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1693)                         return $this->{$sendMethod}($this->MIMEHeader, $this->MIMEBody);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1694)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1695) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1696)                     return $this->mailSend($this->MIMEHeader, $this->MIMEBody);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1697)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1698)         } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1699)             $this->setError($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1700)             $this->edebug($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1701)             if ($this->Mailer === 'smtp' && $this->SMTPKeepAlive == true && $this->smtp->connected()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1702)                 $this->smtp->reset();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1703)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1704)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1705)                 throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1706)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1707)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1708) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1709)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1710)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1711) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1712)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1713)      * Send mail using the $Sendmail program.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1714)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1715)      * @see PHPMailer::$Sendmail
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1716)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1717)      * @param string $header The message headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1718)      * @param string $body   The message body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1719)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1720)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1721)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1722)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1723)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1724)     protected function sendmailSend($header, $body)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1725)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1726)         if ($this->Mailer === 'qmail') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1727)             $this->edebug('Sending with qmail');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1728)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1729)             $this->edebug('Sending with sendmail');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1730)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1731)         $header = static::stripTrailingWSP($header) . static::$LE . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1732)         //This sets the SMTP envelope sender which gets turned into a return-path header by the receiver
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1733)         //A space after `-f` is optional, but there is a long history of its presence
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1734)         //causing problems, so we don't use one
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1735)         //Exim docs: https://www.exim.org/exim-html-current/doc/html/spec_html/ch-the_exim_command_line.html
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1736)         //Sendmail docs: https://www.sendmail.org/~ca/email/man/sendmail.html
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1737)         //Example problem: https://www.drupal.org/node/1057954
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1738) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1739)         //PHP 5.6 workaround
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1740)         $sendmail_from_value = ini_get('sendmail_from');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1741)         if (empty($this->Sender) && !empty($sendmail_from_value)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1742)             //PHP config has a sender address we can use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1743)             $this->Sender = ini_get('sendmail_from');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1744)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1745)         //CVE-2016-10033, CVE-2016-10045: Don't pass -f if characters will be escaped.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1746)         if (!empty($this->Sender) && static::validateAddress($this->Sender) && self::isShellSafe($this->Sender)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1747)             if ($this->Mailer === 'qmail') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1748)                 $sendmailFmt = '%s -f%s';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1749)             } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1750)                 $sendmailFmt = '%s -oi -f%s -t';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1751)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1752)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1753)             //allow sendmail to choose a default envelope sender. It may
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1754)             //seem preferable to force it to use the From header as with
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1755)             //SMTP, but that introduces new problems (see
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1756)             //<https://github.com/PHPMailer/PHPMailer/issues/2298>), and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1757)             //it has historically worked this way.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1758)             $sendmailFmt = '%s -oi -t';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1759)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1760) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1761)         $sendmail = sprintf($sendmailFmt, escapeshellcmd($this->Sendmail), $this->Sender);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1762)         $this->edebug('Sendmail path: ' . $this->Sendmail);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1763)         $this->edebug('Sendmail command: ' . $sendmail);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1764)         $this->edebug('Envelope sender: ' . $this->Sender);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1765)         $this->edebug("Headers: {$header}");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1766) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1767)         if ($this->SingleTo) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1768)             foreach ($this->SingleToArray as $toAddr) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1769)                 $mail = @popen($sendmail, 'w');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1770)                 if (!$mail) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1771)                     throw new Exception($this->lang('execute') . $this->Sendmail, self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1772)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1773)                 $this->edebug("To: {$toAddr}");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1774)                 fwrite($mail, 'To: ' . $toAddr . "\n");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1775)                 fwrite($mail, $header);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1776)                 fwrite($mail, $body);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1777)                 $result = pclose($mail);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1778)                 $addrinfo = static::parseAddresses($toAddr, true, $this->CharSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1779)                 $this->doCallback(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1780)                     ($result === 0),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1781)                     [[$addrinfo['address'], $addrinfo['name']]],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1782)                     $this->cc,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1783)                     $this->bcc,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1784)                     $this->Subject,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1785)                     $body,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1786)                     $this->From,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1787)                     []
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1788)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1789)                 $this->edebug("Result: " . ($result === 0 ? 'true' : 'false'));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1790)                 if (0 !== $result) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1791)                     throw new Exception($this->lang('execute') . $this->Sendmail, self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1792)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1793)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1794)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1795)             $mail = @popen($sendmail, 'w');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1796)             if (!$mail) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1797)                 throw new Exception($this->lang('execute') . $this->Sendmail, self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1798)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1799)             fwrite($mail, $header);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1800)             fwrite($mail, $body);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1801)             $result = pclose($mail);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1802)             $this->doCallback(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1803)                 ($result === 0),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1804)                 $this->to,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1805)                 $this->cc,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1806)                 $this->bcc,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1807)                 $this->Subject,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1808)                 $body,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1809)                 $this->From,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1810)                 []
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1811)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1812)             $this->edebug("Result: " . ($result === 0 ? 'true' : 'false'));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1813)             if (0 !== $result) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1814)                 throw new Exception($this->lang('execute') . $this->Sendmail, self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1815)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1816)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1817) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1818)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1819)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1820) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1821)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1822)      * Fix CVE-2016-10033 and CVE-2016-10045 by disallowing potentially unsafe shell characters.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1823)      * Note that escapeshellarg and escapeshellcmd are inadequate for our purposes, especially on Windows.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1824)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1825)      * @see https://github.com/PHPMailer/PHPMailer/issues/924 CVE-2016-10045 bug report
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1826)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1827)      * @param string $string The string to be validated
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1828)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1829)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1830)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1831)     protected static function isShellSafe($string)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1832)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1833)         //It's not possible to use shell commands safely (which includes the mail() function) without escapeshellarg,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1834)         //but some hosting providers disable it, creating a security problem that we don't want to have to deal with,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1835)         //so we don't.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1836)         if (!function_exists('escapeshellarg') || !function_exists('escapeshellcmd')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1837)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1838)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1839) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1840)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1841)             escapeshellcmd($string) !== $string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1842)             || !in_array(escapeshellarg($string), ["'$string'", "\"$string\""])
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1843)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1844)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1845)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1846) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1847)         $length = strlen($string);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1848) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1849)         for ($i = 0; $i < $length; ++$i) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1850)             $c = $string[$i];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1851) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1852)             //All other characters have a special meaning in at least one common shell, including = and +.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1853)             //Full stop (.) has a special meaning in cmd.exe, but its impact should be negligible here.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1854)             //Note that this does permit non-Latin alphanumeric characters based on the current locale.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1855)             if (!ctype_alnum($c) && strpos('@_-.', $c) === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1856)                 return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1857)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1858)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1859) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1860)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1861)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1862) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1863)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1864)      * Check whether a file path is of a permitted type.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1865)      * Used to reject URLs and phar files from functions that access local file paths,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1866)      * such as addAttachment.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1867)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1868)      * @param string $path A relative or absolute path to a file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1869)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1870)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1871)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1872)     protected static function isPermittedPath($path)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1873)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1874)         //Matches scheme definition from https://tools.ietf.org/html/rfc3986#section-3.1
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1875)         return !preg_match('#^[a-z][a-z\d+.-]*://#i', $path);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1876)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1877) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1878)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1879)      * Check whether a file path is safe, accessible, and readable.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1880)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1881)      * @param string $path A relative or absolute path to a file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1882)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1883)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1884)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1885)     protected static function fileIsAccessible($path)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1886)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1887)         if (!static::isPermittedPath($path)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1888)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1889)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1890)         $readable = is_file($path);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1891)         //If not a UNC path (expected to start with \\), check read permission, see #2069
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1892)         if (strpos($path, '\\\\') !== 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1893)             $readable = $readable && is_readable($path);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1894)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1895)         return  $readable;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1896)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1897) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1898)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1899)      * Send mail using the PHP mail() function.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1900)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1901)      * @see https://www.php.net/manual/en/book.mail.php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1902)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1903)      * @param string $header The message headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1904)      * @param string $body   The message body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1905)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1906)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1907)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1908)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1909)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1910)     protected function mailSend($header, $body)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1911)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1912)         $header = static::stripTrailingWSP($header) . static::$LE . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1913) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1914)         $toArr = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1915)         foreach ($this->to as $toaddr) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1916)             $toArr[] = $this->addrFormat($toaddr);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1917)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1918)         $to = trim(implode(', ', $toArr));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1919) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1920)         //If there are no To-addresses (e.g. when sending only to BCC-addresses)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1921)         //the following should be added to get a correct DKIM-signature.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1922)         //Compare with $this->preSend()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1923)         if ($to === '') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1924)             $to = 'undisclosed-recipients:;';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1925)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1926) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1927)         $params = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1928)         //This sets the SMTP envelope sender which gets turned into a return-path header by the receiver
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1929)         //A space after `-f` is optional, but there is a long history of its presence
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1930)         //causing problems, so we don't use one
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1931)         //Exim docs: https://www.exim.org/exim-html-current/doc/html/spec_html/ch-the_exim_command_line.html
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1932)         //Sendmail docs: https://www.sendmail.org/~ca/email/man/sendmail.html
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1933)         //Example problem: https://www.drupal.org/node/1057954
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1934)         //CVE-2016-10033, CVE-2016-10045: Don't pass -f if characters will be escaped.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1935) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1936)         //PHP 5.6 workaround
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1937)         $sendmail_from_value = ini_get('sendmail_from');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1938)         if (empty($this->Sender) && !empty($sendmail_from_value)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1939)             //PHP config has a sender address we can use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1940)             $this->Sender = ini_get('sendmail_from');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1941)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1942)         if (!empty($this->Sender) && static::validateAddress($this->Sender)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1943)             if (self::isShellSafe($this->Sender)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1944)                 $params = sprintf('-f%s', $this->Sender);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1945)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1946)             $old_from = ini_get('sendmail_from');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1947)             ini_set('sendmail_from', $this->Sender);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1948)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1949)         $result = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1950)         if ($this->SingleTo && count($toArr) > 1) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1951)             foreach ($toArr as $toAddr) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1952)                 $result = $this->mailPassthru($toAddr, $this->Subject, $body, $header, $params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1953)                 $addrinfo = static::parseAddresses($toAddr, true, $this->CharSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1954)                 $this->doCallback(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1955)                     $result,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1956)                     [[$addrinfo['address'], $addrinfo['name']]],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1957)                     $this->cc,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1958)                     $this->bcc,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1959)                     $this->Subject,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1960)                     $body,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1961)                     $this->From,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1962)                     []
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1963)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1964)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1965)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1966)             $result = $this->mailPassthru($to, $this->Subject, $body, $header, $params);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1967)             $this->doCallback($result, $this->to, $this->cc, $this->bcc, $this->Subject, $body, $this->From, []);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1968)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1969)         if (isset($old_from)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1970)             ini_set('sendmail_from', $old_from);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1971)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1972)         if (!$result) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1973)             throw new Exception($this->lang('instantiate'), self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1974)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1975) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1976)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1977)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1978) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1979)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1980)      * Get an instance to use for SMTP operations.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1981)      * Override this function to load your own SMTP implementation,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1982)      * or set one with setSMTPInstance.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1983)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1984)      * @return SMTP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1985)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1986)     public function getSMTPInstance()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1987)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1988)         if (!is_object($this->smtp)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1989)             $this->smtp = new SMTP();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1990)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1991) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1992)         return $this->smtp;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1993)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1994) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1995)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1996)      * Provide an instance to use for SMTP operations.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1997)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1998)      * @return SMTP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1999)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2000)     public function setSMTPInstance(SMTP $smtp)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2001)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2002)         $this->smtp = $smtp;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2003) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2004)         return $this->smtp;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2005)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2006) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2007)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2008)      * Provide SMTP XCLIENT attributes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2009)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2010)      * @param string $name  Attribute name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2011)      * @param ?string $value Attribute value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2012)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2013)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2014)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2015)     public function setSMTPXclientAttribute($name, $value)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2016)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2017)         if (!in_array($name, SMTP::$xclient_allowed_attributes)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2018)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2019)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2020)         if (isset($this->SMTPXClient[$name]) && $value === null) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2021)             unset($this->SMTPXClient[$name]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2022)         } elseif ($value !== null) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2023)             $this->SMTPXClient[$name] = $value;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2024)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2025) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2026)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2027)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2028) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2029)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2030)      * Get SMTP XCLIENT attributes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2031)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2032)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2033)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2034)     public function getSMTPXclientAttributes()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2035)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2036)         return $this->SMTPXClient;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2037)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2038) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2039)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2040)      * Send mail via SMTP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2041)      * Returns false if there is a bad MAIL FROM, RCPT, or DATA input.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2042)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2043)      * @see PHPMailer::setSMTPInstance() to use a different class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2044)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2045)      * @uses \PHPMailer\PHPMailer\SMTP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2046)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2047)      * @param string $header The message headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2048)      * @param string $body   The message body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2049)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2050)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2051)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2052)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2053)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2054)     protected function smtpSend($header, $body)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2055)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2056)         $header = static::stripTrailingWSP($header) . static::$LE . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2057)         $bad_rcpt = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2058)         if (!$this->smtpConnect($this->SMTPOptions)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2059)             throw new Exception($this->lang('smtp_connect_failed'), self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2060)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2061)         //Sender already validated in preSend()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2062)         if ('' === $this->Sender) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2063)             $smtp_from = $this->From;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2064)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2065)             $smtp_from = $this->Sender;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2066)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2067)         if (count($this->SMTPXClient)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2068)             $this->smtp->xclient($this->SMTPXClient);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2069)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2070)         if (!$this->smtp->mail($smtp_from)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2071)             $this->setError($this->lang('from_failed') . $smtp_from . ' : ' . implode(',', $this->smtp->getError()));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2072)             throw new Exception($this->ErrorInfo, self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2073)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2074) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2075)         $callbacks = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2076)         //Attempt to send to all recipients
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2077)         foreach ([$this->to, $this->cc, $this->bcc] as $togroup) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2078)             foreach ($togroup as $to) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2079)                 if (!$this->smtp->recipient($to[0], $this->dsn)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2080)                     $error = $this->smtp->getError();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2081)                     $bad_rcpt[] = ['to' => $to[0], 'error' => $error['detail']];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2082)                     $isSent = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2083)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2084)                     $isSent = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2085)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2086) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2087)                 $callbacks[] = ['issent' => $isSent, 'to' => $to[0], 'name' => $to[1]];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2088)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2089)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2090) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2091)         //Only send the DATA command if we have viable recipients
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2092)         if ((count($this->all_recipients) > count($bad_rcpt)) && !$this->smtp->data($header . $body)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2093)             throw new Exception($this->lang('data_not_accepted'), self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2094)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2095) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2096)         $smtp_transaction_id = $this->smtp->getLastTransactionID();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2097) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2098)         if ($this->SMTPKeepAlive) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2099)             $this->smtp->reset();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2100)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2101)             $this->smtp->quit();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2102)             $this->smtp->close();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2103)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2104) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2105)         foreach ($callbacks as $cb) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2106)             $this->doCallback(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2107)                 $cb['issent'],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2108)                 [[$cb['to'], $cb['name']]],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2109)                 [],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2110)                 [],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2111)                 $this->Subject,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2112)                 $body,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2113)                 $this->From,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2114)                 ['smtp_transaction_id' => $smtp_transaction_id]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2115)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2116)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2117) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2118)         //Create error message for any bad addresses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2119)         if (count($bad_rcpt) > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2120)             $errstr = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2121)             foreach ($bad_rcpt as $bad) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2122)                 $errstr .= $bad['to'] . ': ' . $bad['error'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2123)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2124)             throw new Exception($this->lang('recipients_failed') . $errstr, self::STOP_CONTINUE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2125)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2126) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2127)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2128)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2129) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2130)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2131)      * Initiate a connection to an SMTP server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2132)      * Returns false if the operation failed.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2133)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2134)      * @param array $options An array of options compatible with stream_context_create()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2135)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2136)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2137)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2138)      * @uses \PHPMailer\PHPMailer\SMTP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2139)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2140)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2141)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2142)     public function smtpConnect($options = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2143)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2144)         if (null === $this->smtp) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2145)             $this->smtp = $this->getSMTPInstance();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2146)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2147) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2148)         //If no options are provided, use whatever is set in the instance
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2149)         if (null === $options) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2150)             $options = $this->SMTPOptions;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2151)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2152) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2153)         //Already connected?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2154)         if ($this->smtp->connected()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2155)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2156)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2157) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2158)         $this->smtp->setTimeout($this->Timeout);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2159)         $this->smtp->setDebugLevel($this->SMTPDebug);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2160)         $this->smtp->setDebugOutput($this->Debugoutput);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2161)         $this->smtp->setVerp($this->do_verp);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2162)         if ($this->Host === null) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2163)             $this->Host = 'localhost';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2164)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2165)         $hosts = explode(';', $this->Host);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2166)         $lastexception = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2167) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2168)         foreach ($hosts as $hostentry) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2169)             $hostinfo = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2170)             if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2171)                 !preg_match(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2172)                     '/^(?:(ssl|tls):\/\/)?(.+?)(?::(\d+))?$/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2173)                     trim($hostentry),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2174)                     $hostinfo
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2175)                 )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2176)             ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2177)                 $this->edebug($this->lang('invalid_hostentry') . ' ' . trim($hostentry));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2178)                 //Not a valid host entry
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2179)                 continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2180)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2181)             //$hostinfo[1]: optional ssl or tls prefix
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2182)             //$hostinfo[2]: the hostname
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2183)             //$hostinfo[3]: optional port number
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2184)             //The host string prefix can temporarily override the current setting for SMTPSecure
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2185)             //If it's not specified, the default value is used
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2186) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2187)             //Check the host name is a valid name or IP address before trying to use it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2188)             if (!static::isValidHost($hostinfo[2])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2189)                 $this->edebug($this->lang('invalid_host') . ' ' . $hostinfo[2]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2190)                 continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2191)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2192)             $prefix = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2193)             $secure = $this->SMTPSecure;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2194)             $tls = (static::ENCRYPTION_STARTTLS === $this->SMTPSecure);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2195)             if ('ssl' === $hostinfo[1] || ('' === $hostinfo[1] && static::ENCRYPTION_SMTPS === $this->SMTPSecure)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2196)                 $prefix = 'ssl://';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2197)                 $tls = false; //Can't have SSL and TLS at the same time
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2198)                 $secure = static::ENCRYPTION_SMTPS;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2199)             } elseif ('tls' === $hostinfo[1]) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2200)                 $tls = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2201)                 //TLS doesn't use a prefix
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2202)                 $secure = static::ENCRYPTION_STARTTLS;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2203)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2204)             //Do we need the OpenSSL extension?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2205)             $sslext = defined('OPENSSL_ALGO_SHA256');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2206)             if (static::ENCRYPTION_STARTTLS === $secure || static::ENCRYPTION_SMTPS === $secure) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2207)                 //Check for an OpenSSL constant rather than using extension_loaded, which is sometimes disabled
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2208)                 if (!$sslext) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2209)                     throw new Exception($this->lang('extension_missing') . 'openssl', self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2210)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2211)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2212)             $host = $hostinfo[2];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2213)             $port = $this->Port;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2214)             if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2215)                 array_key_exists(3, $hostinfo) &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2216)                 is_numeric($hostinfo[3]) &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2217)                 $hostinfo[3] > 0 &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2218)                 $hostinfo[3] < 65536
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2219)             ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2220)                 $port = (int) $hostinfo[3];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2221)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2222)             if ($this->smtp->connect($prefix . $host, $port, $this->Timeout, $options)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2223)                 try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2224)                     if ($this->Helo) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2225)                         $hello = $this->Helo;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2226)                     } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2227)                         $hello = $this->serverHostname();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2228)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2229)                     $this->smtp->hello($hello);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2230)                     //Automatically enable TLS encryption if:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2231)                     //* it's not disabled
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2232)                     //* we are not connecting to localhost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2233)                     //* we have openssl extension
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2234)                     //* we are not already using SSL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2235)                     //* the server offers STARTTLS
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2236)                     if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2237)                         $this->SMTPAutoTLS &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2238)                         $this->Host !== 'localhost' &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2239)                         $sslext &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2240)                         $secure !== 'ssl' &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2241)                         $this->smtp->getServerExt('STARTTLS')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2242)                     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2243)                         $tls = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2244)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2245)                     if ($tls) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2246)                         if (!$this->smtp->startTLS()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2247)                             $message = $this->getSmtpErrorMessage('connect_host');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2248)                             throw new Exception($message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2249)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2250)                         //We must resend EHLO after TLS negotiation
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2251)                         $this->smtp->hello($hello);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2252)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2253)                     if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2254)                         $this->SMTPAuth && !$this->smtp->authenticate(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2255)                             $this->Username,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2256)                             $this->Password,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2257)                             $this->AuthType,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2258)                             $this->oauth
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2259)                         )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2260)                     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2261)                         throw new Exception($this->lang('authenticate'));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2262)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2263) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2264)                     return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2265)                 } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2266)                     $lastexception = $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2267)                     $this->edebug($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2268)                     //We must have connected, but then failed TLS or Auth, so close connection nicely
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2269)                     $this->smtp->quit();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2270)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2271)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2272)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2273)         //If we get here, all connection attempts have failed, so close connection hard
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2274)         $this->smtp->close();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2275)         //As we've caught all exceptions, just report whatever the last one was
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2276)         if ($this->exceptions && null !== $lastexception) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2277)             throw $lastexception;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2278)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2279)         if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2280)             // no exception was thrown, likely $this->smtp->connect() failed
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2281)             $message = $this->getSmtpErrorMessage('connect_host');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2282)             throw new Exception($message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2283)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2284) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2285)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2286)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2287) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2288)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2289)      * Close the active SMTP session if one exists.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2290)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2291)     public function smtpClose()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2292)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2293)         if ((null !== $this->smtp) && $this->smtp->connected()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2294)             $this->smtp->quit();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2295)             $this->smtp->close();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2296)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2297)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2298) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2299)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2300)      * Set the language for error messages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2301)      * The default language is English.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2302)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2303)      * @param string $langcode  ISO 639-1 2-character language code (e.g. French is "fr")
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2304)      *                          Optionally, the language code can be enhanced with a 4-character
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2305)      *                          script annotation and/or a 2-character country annotation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2306)      * @param string $lang_path Path to the language file directory, with trailing separator (slash)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2307)      *                          Do not set this from user input!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2308)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2309)      * @return bool Returns true if the requested language was loaded, false otherwise.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2310)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2311)     public function setLanguage($langcode = 'en', $lang_path = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2312)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2313)         //Backwards compatibility for renamed language codes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2314)         $renamed_langcodes = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2315)             'br' => 'pt_br',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2316)             'cz' => 'cs',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2317)             'dk' => 'da',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2318)             'no' => 'nb',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2319)             'se' => 'sv',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2320)             'rs' => 'sr',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2321)             'tg' => 'tl',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2322)             'am' => 'hy',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2323)         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2324) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2325)         if (array_key_exists($langcode, $renamed_langcodes)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2326)             $langcode = $renamed_langcodes[$langcode];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2327)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2328) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2329)         //Define full set of translatable strings in English
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2330)         $PHPMAILER_LANG = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2331)             'authenticate' => 'SMTP Error: Could not authenticate.',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2332)             'buggy_php' => 'Your version of PHP is affected by a bug that may result in corrupted messages.' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2333)                 ' To fix it, switch to sending using SMTP, disable the mail.add_x_header option in' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2334)                 ' your php.ini, switch to MacOS or Linux, or upgrade your PHP to version 7.0.17+ or 7.1.3+.',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2335)             'connect_host' => 'SMTP Error: Could not connect to SMTP host.',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2336)             'data_not_accepted' => 'SMTP Error: data not accepted.',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2337)             'empty_message' => 'Message body empty',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2338)             'encoding' => 'Unknown encoding: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2339)             'execute' => 'Could not execute: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2340)             'extension_missing' => 'Extension missing: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2341)             'file_access' => 'Could not access file: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2342)             'file_open' => 'File Error: Could not open file: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2343)             'from_failed' => 'The following From address failed: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2344)             'instantiate' => 'Could not instantiate mail function.',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2345)             'invalid_address' => 'Invalid address: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2346)             'invalid_header' => 'Invalid header name or value',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2347)             'invalid_hostentry' => 'Invalid hostentry: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2348)             'invalid_host' => 'Invalid host: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2349)             'mailer_not_supported' => ' mailer is not supported.',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2350)             'provide_address' => 'You must provide at least one recipient email address.',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2351)             'recipients_failed' => 'SMTP Error: The following recipients failed: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2352)             'signing' => 'Signing Error: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2353)             'smtp_code' => 'SMTP code: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2354)             'smtp_code_ex' => 'Additional SMTP info: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2355)             'smtp_connect_failed' => 'SMTP connect() failed.',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2356)             'smtp_detail' => 'Detail: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2357)             'smtp_error' => 'SMTP server error: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2358)             'variable_set' => 'Cannot set or reset variable: ',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2359)         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2360)         if (empty($lang_path)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2361)             //Calculate an absolute path so it can work if CWD is not here
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2362)             $lang_path = dirname(__DIR__) . DIRECTORY_SEPARATOR . 'language' . DIRECTORY_SEPARATOR;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2363)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2364) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2365)         //Validate $langcode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2366)         $foundlang = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2367)         $langcode  = strtolower($langcode);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2368)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2369)             !preg_match('/^(?P<lang>[a-z]{2})(?P<script>_[a-z]{4})?(?P<country>_[a-z]{2})?$/', $langcode, $matches)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2370)             && $langcode !== 'en'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2371)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2372)             $foundlang = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2373)             $langcode = 'en';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2374)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2375) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2376)         //There is no English translation file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2377)         if ('en' !== $langcode) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2378)             $langcodes = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2379)             if (!empty($matches['script']) && !empty($matches['country'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2380)                 $langcodes[] = $matches['lang'] . $matches['script'] . $matches['country'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2381)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2382)             if (!empty($matches['country'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2383)                 $langcodes[] = $matches['lang'] . $matches['country'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2384)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2385)             if (!empty($matches['script'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2386)                 $langcodes[] = $matches['lang'] . $matches['script'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2387)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2388)             $langcodes[] = $matches['lang'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2389) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2390)             //Try and find a readable language file for the requested language.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2391)             $foundFile = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2392)             foreach ($langcodes as $code) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2393)                 $lang_file = $lang_path . 'phpmailer.lang-' . $code . '.php';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2394)                 if (static::fileIsAccessible($lang_file)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2395)                     $foundFile = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2396)                     break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2397)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2398)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2399) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2400)             if ($foundFile === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2401)                 $foundlang = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2402)             } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2403)                 $lines = file($lang_file);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2404)                 foreach ($lines as $line) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2405)                     //Translation file lines look like this:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2406)                     //$PHPMAILER_LANG['authenticate'] = 'SMTP-Fehler: Authentifizierung fehlgeschlagen.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2407)                     //These files are parsed as text and not PHP so as to avoid the possibility of code injection
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2408)                     //See https://blog.stevenlevithan.com/archives/match-quoted-string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2409)                     $matches = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2410)                     if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2411)                         preg_match(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2412)                             '/^\$PHPMAILER_LANG\[\'([a-z\d_]+)\'\]\s*=\s*(["\'])(.+)*?\2;/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2413)                             $line,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2414)                             $matches
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2415)                         ) &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2416)                         //Ignore unknown translation keys
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2417)                         array_key_exists($matches[1], $PHPMAILER_LANG)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2418)                     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2419)                         //Overwrite language-specific strings so we'll never have missing translation keys.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2420)                         $PHPMAILER_LANG[$matches[1]] = (string)$matches[3];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2421)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2422)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2423)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2424)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2425)         $this->language = $PHPMAILER_LANG;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2426) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2427)         return $foundlang; //Returns false if language not found
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2428)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2429) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2430)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2431)      * Get the array of strings for the current language.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2432)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2433)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2434)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2435)     public function getTranslations()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2436)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2437)         if (empty($this->language)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2438)             $this->setLanguage(); // Set the default language.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2439)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2440) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2441)         return $this->language;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2442)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2443) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2444)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2445)      * Create recipient headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2446)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2447)      * @param string $type
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2448)      * @param array  $addr An array of recipients,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2449)      *                     where each recipient is a 2-element indexed array with element 0 containing an address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2450)      *                     and element 1 containing a name, like:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2451)      *                     [['joe@example.com', 'Joe User'], ['zoe@example.com', 'Zoe User']]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2452)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2453)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2454)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2455)     public function addrAppend($type, $addr)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2456)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2457)         $addresses = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2458)         foreach ($addr as $address) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2459)             $addresses[] = $this->addrFormat($address);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2460)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2461) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2462)         return $type . ': ' . implode(', ', $addresses) . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2463)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2464) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2465)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2466)      * Format an address for use in a message header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2467)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2468)      * @param array $addr A 2-element indexed array, element 0 containing an address, element 1 containing a name like
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2469)      *                    ['joe@example.com', 'Joe User']
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2470)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2471)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2472)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2473)     public function addrFormat($addr)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2474)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2475)         if (!isset($addr[1]) || ($addr[1] === '')) { //No name provided
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2476)             return $this->secureHeader($addr[0]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2477)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2478) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2479)         return $this->encodeHeader($this->secureHeader($addr[1]), 'phrase') .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2480)             ' <' . $this->secureHeader($addr[0]) . '>';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2481)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2482) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2483)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2484)      * Word-wrap message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2485)      * For use with mailers that do not automatically perform wrapping
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2486)      * and for quoted-printable encoded messages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2487)      * Original written by philippe.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2488)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2489)      * @param string $message The message to wrap
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2490)      * @param int    $length  The line length to wrap to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2491)      * @param bool   $qp_mode Whether to run in Quoted-Printable mode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2492)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2493)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2494)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2495)     public function wrapText($message, $length, $qp_mode = false)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2496)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2497)         if ($qp_mode) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2498)             $soft_break = sprintf(' =%s', static::$LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2499)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2500)             $soft_break = static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2501)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2502)         //If utf-8 encoding is used, we will need to make sure we don't
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2503)         //split multibyte characters when we wrap
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2504)         $is_utf8 = static::CHARSET_UTF8 === strtolower($this->CharSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2505)         $lelen = strlen(static::$LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2506)         $crlflen = strlen(static::$LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2507) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2508)         $message = static::normalizeBreaks($message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2509)         //Remove a trailing line break
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2510)         if (substr($message, -$lelen) === static::$LE) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2511)             $message = substr($message, 0, -$lelen);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2512)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2513) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2514)         //Split message into lines
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2515)         $lines = explode(static::$LE, $message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2516)         //Message will be rebuilt in here
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2517)         $message = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2518)         foreach ($lines as $line) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2519)             $words = explode(' ', $line);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2520)             $buf = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2521)             $firstword = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2522)             foreach ($words as $word) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2523)                 if ($qp_mode && (strlen($word) > $length)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2524)                     $space_left = $length - strlen($buf) - $crlflen;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2525)                     if (!$firstword) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2526)                         if ($space_left > 20) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2527)                             $len = $space_left;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2528)                             if ($is_utf8) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2529)                                 $len = $this->utf8CharBoundary($word, $len);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2530)                             } elseif ('=' === substr($word, $len - 1, 1)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2531)                                 --$len;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2532)                             } elseif ('=' === substr($word, $len - 2, 1)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2533)                                 $len -= 2;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2534)                             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2535)                             $part = substr($word, 0, $len);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2536)                             $word = substr($word, $len);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2537)                             $buf .= ' ' . $part;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2538)                             $message .= $buf . sprintf('=%s', static::$LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2539)                         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2540)                             $message .= $buf . $soft_break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2541)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2542)                         $buf = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2543)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2544)                     while ($word !== '') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2545)                         if ($length <= 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2546)                             break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2547)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2548)                         $len = $length;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2549)                         if ($is_utf8) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2550)                             $len = $this->utf8CharBoundary($word, $len);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2551)                         } elseif ('=' === substr($word, $len - 1, 1)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2552)                             --$len;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2553)                         } elseif ('=' === substr($word, $len - 2, 1)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2554)                             $len -= 2;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2555)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2556)                         $part = substr($word, 0, $len);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2557)                         $word = (string) substr($word, $len);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2558) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2559)                         if ($word !== '') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2560)                             $message .= $part . sprintf('=%s', static::$LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2561)                         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2562)                             $buf = $part;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2563)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2564)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2565)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2566)                     $buf_o = $buf;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2567)                     if (!$firstword) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2568)                         $buf .= ' ';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2569)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2570)                     $buf .= $word;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2571) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2572)                     if ('' !== $buf_o && strlen($buf) > $length) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2573)                         $message .= $buf_o . $soft_break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2574)                         $buf = $word;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2575)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2576)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2577)                 $firstword = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2578)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2579)             $message .= $buf . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2580)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2581) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2582)         return $message;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2583)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2584) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2585)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2586)      * Find the last character boundary prior to $maxLength in a utf-8
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2587)      * quoted-printable encoded string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2588)      * Original written by Colin Brown.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2589)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2590)      * @param string $encodedText utf-8 QP text
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2591)      * @param int    $maxLength   Find the last character boundary prior to this length
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2592)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2593)      * @return int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2594)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2595)     public function utf8CharBoundary($encodedText, $maxLength)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2596)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2597)         $foundSplitPos = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2598)         $lookBack = 3;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2599)         while (!$foundSplitPos) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2600)             $lastChunk = substr($encodedText, $maxLength - $lookBack, $lookBack);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2601)             $encodedCharPos = strpos($lastChunk, '=');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2602)             if (false !== $encodedCharPos) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2603)                 //Found start of encoded character byte within $lookBack block.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2604)                 //Check the encoded byte value (the 2 chars after the '=')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2605)                 $hex = substr($encodedText, $maxLength - $lookBack + $encodedCharPos + 1, 2);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2606)                 $dec = hexdec($hex);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2607)                 if ($dec < 128) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2608)                     //Single byte character.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2609)                     //If the encoded char was found at pos 0, it will fit
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2610)                     //otherwise reduce maxLength to start of the encoded char
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2611)                     if ($encodedCharPos > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2612)                         $maxLength -= $lookBack - $encodedCharPos;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2613)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2614)                     $foundSplitPos = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2615)                 } elseif ($dec >= 192) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2616)                     //First byte of a multi byte character
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2617)                     //Reduce maxLength to split at start of character
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2618)                     $maxLength -= $lookBack - $encodedCharPos;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2619)                     $foundSplitPos = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2620)                 } elseif ($dec < 192) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2621)                     //Middle byte of a multi byte character, look further back
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2622)                     $lookBack += 3;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2623)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2624)             } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2625)                 //No encoded character found
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2626)                 $foundSplitPos = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2627)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2628)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2629) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2630)         return $maxLength;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2631)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2632) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2633)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2634)      * Apply word wrapping to the message body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2635)      * Wraps the message body to the number of chars set in the WordWrap property.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2636)      * You should only do this to plain-text bodies as wrapping HTML tags may break them.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2637)      * This is called automatically by createBody(), so you don't need to call it yourself.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2638)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2639)     public function setWordWrap()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2640)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2641)         if ($this->WordWrap < 1) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2642)             return;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2643)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2644) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2645)         switch ($this->message_type) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2646)             case 'alt':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2647)             case 'alt_inline':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2648)             case 'alt_attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2649)             case 'alt_inline_attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2650)                 $this->AltBody = $this->wrapText($this->AltBody, $this->WordWrap);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2651)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2652)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2653)                 $this->Body = $this->wrapText($this->Body, $this->WordWrap);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2654)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2655)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2656)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2657) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2658)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2659)      * Assemble message headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2660)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2661)      * @return string The assembled headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2662)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2663)     public function createHeader()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2664)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2665)         $result = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2666) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2667)         $result .= $this->headerLine('Date', '' === $this->MessageDate ? self::rfcDate() : $this->MessageDate);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2668) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2669)         //The To header is created automatically by mail(), so needs to be omitted here
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2670)         if ('mail' !== $this->Mailer) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2671)             if ($this->SingleTo) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2672)                 foreach ($this->to as $toaddr) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2673)                     $this->SingleToArray[] = $this->addrFormat($toaddr);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2674)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2675)             } elseif (count($this->to) > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2676)                 $result .= $this->addrAppend('To', $this->to);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2677)             } elseif (count($this->cc) === 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2678)                 $result .= $this->headerLine('To', 'undisclosed-recipients:;');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2679)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2680)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2681)         $result .= $this->addrAppend('From', [[trim($this->From), $this->FromName]]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2682) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2683)         //sendmail and mail() extract Cc from the header before sending
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2684)         if (count($this->cc) > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2685)             $result .= $this->addrAppend('Cc', $this->cc);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2686)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2687) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2688)         //sendmail and mail() extract Bcc from the header before sending
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2689)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2690)             (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2691)                 'sendmail' === $this->Mailer || 'qmail' === $this->Mailer || 'mail' === $this->Mailer
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2692)             )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2693)             && count($this->bcc) > 0
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2694)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2695)             $result .= $this->addrAppend('Bcc', $this->bcc);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2696)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2697) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2698)         if (count($this->ReplyTo) > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2699)             $result .= $this->addrAppend('Reply-To', $this->ReplyTo);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2700)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2701) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2702)         //mail() sets the subject itself
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2703)         if ('mail' !== $this->Mailer) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2704)             $result .= $this->headerLine('Subject', $this->encodeHeader($this->secureHeader($this->Subject)));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2705)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2706) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2707)         //Only allow a custom message ID if it conforms to RFC 5322 section 3.6.4
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2708)         //https://tools.ietf.org/html/rfc5322#section-3.6.4
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2709)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2710)             '' !== $this->MessageID &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2711)             preg_match(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2712)                 '/^<((([a-z\d!#$%&\'*+\/=?^_`{|}~-]+(\.[a-z\d!#$%&\'*+\/=?^_`{|}~-]+)*)' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2713)                 '|("(([\x01-\x08\x0B\x0C\x0E-\x1F\x7F]|[\x21\x23-\x5B\x5D-\x7E])' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2714)                 '|(\\[\x01-\x09\x0B\x0C\x0E-\x7F]))*"))@(([a-z\d!#$%&\'*+\/=?^_`{|}~-]+' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2715)                 '(\.[a-z\d!#$%&\'*+\/=?^_`{|}~-]+)*)|(\[(([\x01-\x08\x0B\x0C\x0E-\x1F\x7F]' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2716)                 '|[\x21-\x5A\x5E-\x7E])|(\\[\x01-\x09\x0B\x0C\x0E-\x7F]))*\])))>$/Di',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2717)                 $this->MessageID
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2718)             )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2719)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2720)             $this->lastMessageID = $this->MessageID;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2721)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2722)             $this->lastMessageID = sprintf('<%s@%s>', $this->uniqueid, $this->serverHostname());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2723)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2724)         $result .= $this->headerLine('Message-ID', $this->lastMessageID);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2725)         if (null !== $this->Priority) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2726)             $result .= $this->headerLine('X-Priority', $this->Priority);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2727)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2728)         if ('' === $this->XMailer) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2729)             //Empty string for default X-Mailer header
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2730)             $result .= $this->headerLine(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2731)                 'X-Mailer',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2732)                 'PHPMailer ' . self::VERSION . ' (https://github.com/PHPMailer/PHPMailer)'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2733)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2734)         } elseif (is_string($this->XMailer) && trim($this->XMailer) !== '') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2735)             //Some string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2736)             $result .= $this->headerLine('X-Mailer', trim($this->XMailer));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2737)         } //Other values result in no X-Mailer header
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2738) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2739)         if ('' !== $this->ConfirmReadingTo) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2740)             $result .= $this->headerLine('Disposition-Notification-To', '<' . $this->ConfirmReadingTo . '>');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2741)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2742) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2743)         //Add custom headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2744)         foreach ($this->CustomHeader as $header) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2745)             $result .= $this->headerLine(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2746)                 trim($header[0]),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2747)                 $this->encodeHeader(trim($header[1]))
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2748)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2749)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2750)         if (!$this->sign_key_file) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2751)             $result .= $this->headerLine('MIME-Version', '1.0');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2752)             $result .= $this->getMailMIME();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2753)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2754) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2755)         return $result;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2756)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2757) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2758)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2759)      * Get the message MIME type headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2760)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2761)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2762)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2763)     public function getMailMIME()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2764)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2765)         $result = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2766)         $ismultipart = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2767)         switch ($this->message_type) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2768)             case 'inline':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2769)                 $result .= $this->headerLine('Content-Type', static::CONTENT_TYPE_MULTIPART_RELATED . ';');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2770)                 $result .= $this->textLine(' boundary="' . $this->boundary[1] . '"');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2771)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2772)             case 'attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2773)             case 'inline_attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2774)             case 'alt_attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2775)             case 'alt_inline_attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2776)                 $result .= $this->headerLine('Content-Type', static::CONTENT_TYPE_MULTIPART_MIXED . ';');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2777)                 $result .= $this->textLine(' boundary="' . $this->boundary[1] . '"');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2778)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2779)             case 'alt':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2780)             case 'alt_inline':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2781)                 $result .= $this->headerLine('Content-Type', static::CONTENT_TYPE_MULTIPART_ALTERNATIVE . ';');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2782)                 $result .= $this->textLine(' boundary="' . $this->boundary[1] . '"');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2783)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2784)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2785)                 //Catches case 'plain': and case '':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2786)                 $result .= $this->textLine('Content-Type: ' . $this->ContentType . '; charset=' . $this->CharSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2787)                 $ismultipart = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2788)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2789)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2790)         //RFC1341 part 5 says 7bit is assumed if not specified
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2791)         if (static::ENCODING_7BIT !== $this->Encoding) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2792)             //RFC 2045 section 6.4 says multipart MIME parts may only use 7bit, 8bit or binary CTE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2793)             if ($ismultipart) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2794)                 if (static::ENCODING_8BIT === $this->Encoding) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2795)                     $result .= $this->headerLine('Content-Transfer-Encoding', static::ENCODING_8BIT);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2796)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2797)                 //The only remaining alternatives are quoted-printable and base64, which are both 7bit compatible
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2798)             } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2799)                 $result .= $this->headerLine('Content-Transfer-Encoding', $this->Encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2800)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2801)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2802) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2803)         return $result;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2804)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2805) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2806)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2807)      * Returns the whole MIME message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2808)      * Includes complete headers and body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2809)      * Only valid post preSend().
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2810)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2811)      * @see PHPMailer::preSend()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2812)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2813)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2814)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2815)     public function getSentMIMEMessage()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2816)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2817)         return static::stripTrailingWSP($this->MIMEHeader . $this->mailHeader) .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2818)             static::$LE . static::$LE . $this->MIMEBody;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2819)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2820) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2821)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2822)      * Create a unique ID to use for boundaries.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2823)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2824)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2825)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2826)     protected function generateId()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2827)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2828)         $len = 32; //32 bytes = 256 bits
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2829)         $bytes = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2830)         if (function_exists('random_bytes')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2831)             try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2832)                 $bytes = random_bytes($len);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2833)             } catch (\Exception $e) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2834)                 //Do nothing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2835)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2836)         } elseif (function_exists('openssl_random_pseudo_bytes')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2837)             /** @noinspection CryptographicallySecureRandomnessInspection */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2838)             $bytes = openssl_random_pseudo_bytes($len);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2839)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2840)         if ($bytes === '') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2841)             //We failed to produce a proper random string, so make do.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2842)             //Use a hash to force the length to the same as the other methods
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2843)             $bytes = hash('sha256', uniqid((string) mt_rand(), true), true);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2844)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2845) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2846)         //We don't care about messing up base64 format here, just want a random string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2847)         return str_replace(['=', '+', '/'], '', base64_encode(hash('sha256', $bytes, true)));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2848)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2849) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2850)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2851)      * Assemble the message body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2852)      * Returns an empty string on failure.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2853)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2854)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2855)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2856)      * @return string The assembled message body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2857)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2858)     public function createBody()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2859)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2860)         $body = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2861)         //Create unique IDs and preset boundaries
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2862)         $this->setBoundaries();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2863) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2864)         if ($this->sign_key_file) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2865)             $body .= $this->getMailMIME() . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2866)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2867) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2868)         $this->setWordWrap();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2869) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2870)         $bodyEncoding = $this->Encoding;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2871)         $bodyCharSet = $this->CharSet;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2872)         //Can we do a 7-bit downgrade?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2873)         if (static::ENCODING_8BIT === $bodyEncoding && !$this->has8bitChars($this->Body)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2874)             $bodyEncoding = static::ENCODING_7BIT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2875)             //All ISO 8859, Windows codepage and UTF-8 charsets are ascii compatible up to 7-bit
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2876)             $bodyCharSet = static::CHARSET_ASCII;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2877)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2878)         //If lines are too long, and we're not already using an encoding that will shorten them,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2879)         //change to quoted-printable transfer encoding for the body part only
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2880)         if (static::ENCODING_BASE64 !== $this->Encoding && static::hasLineLongerThanMax($this->Body)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2881)             $bodyEncoding = static::ENCODING_QUOTED_PRINTABLE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2882)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2883) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2884)         $altBodyEncoding = $this->Encoding;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2885)         $altBodyCharSet = $this->CharSet;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2886)         //Can we do a 7-bit downgrade?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2887)         if (static::ENCODING_8BIT === $altBodyEncoding && !$this->has8bitChars($this->AltBody)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2888)             $altBodyEncoding = static::ENCODING_7BIT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2889)             //All ISO 8859, Windows codepage and UTF-8 charsets are ascii compatible up to 7-bit
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2890)             $altBodyCharSet = static::CHARSET_ASCII;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2891)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2892)         //If lines are too long, and we're not already using an encoding that will shorten them,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2893)         //change to quoted-printable transfer encoding for the alt body part only
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2894)         if (static::ENCODING_BASE64 !== $altBodyEncoding && static::hasLineLongerThanMax($this->AltBody)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2895)             $altBodyEncoding = static::ENCODING_QUOTED_PRINTABLE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2896)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2897)         //Use this as a preamble in all multipart message types
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2898)         $mimepre = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2899)         switch ($this->message_type) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2900)             case 'inline':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2901)                 $body .= $mimepre;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2902)                 $body .= $this->getBoundary($this->boundary[1], $bodyCharSet, '', $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2903)                 $body .= $this->encodeString($this->Body, $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2904)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2905)                 $body .= $this->attachAll('inline', $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2906)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2907)             case 'attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2908)                 $body .= $mimepre;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2909)                 $body .= $this->getBoundary($this->boundary[1], $bodyCharSet, '', $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2910)                 $body .= $this->encodeString($this->Body, $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2911)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2912)                 $body .= $this->attachAll('attachment', $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2913)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2914)             case 'inline_attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2915)                 $body .= $mimepre;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2916)                 $body .= $this->textLine('--' . $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2917)                 $body .= $this->headerLine('Content-Type', static::CONTENT_TYPE_MULTIPART_RELATED . ';');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2918)                 $body .= $this->textLine(' boundary="' . $this->boundary[2] . '";');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2919)                 $body .= $this->textLine(' type="' . static::CONTENT_TYPE_TEXT_HTML . '"');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2920)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2921)                 $body .= $this->getBoundary($this->boundary[2], $bodyCharSet, '', $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2922)                 $body .= $this->encodeString($this->Body, $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2923)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2924)                 $body .= $this->attachAll('inline', $this->boundary[2]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2925)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2926)                 $body .= $this->attachAll('attachment', $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2927)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2928)             case 'alt':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2929)                 $body .= $mimepre;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2930)                 $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2931)                     $this->boundary[1],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2932)                     $altBodyCharSet,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2933)                     static::CONTENT_TYPE_PLAINTEXT,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2934)                     $altBodyEncoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2935)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2936)                 $body .= $this->encodeString($this->AltBody, $altBodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2937)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2938)                 $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2939)                     $this->boundary[1],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2940)                     $bodyCharSet,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2941)                     static::CONTENT_TYPE_TEXT_HTML,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2942)                     $bodyEncoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2943)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2944)                 $body .= $this->encodeString($this->Body, $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2945)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2946)                 if (!empty($this->Ical)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2947)                     $method = static::ICAL_METHOD_REQUEST;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2948)                     foreach (static::$IcalMethods as $imethod) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2949)                         if (stripos($this->Ical, 'METHOD:' . $imethod) !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2950)                             $method = $imethod;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2951)                             break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2952)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2953)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2954)                     $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2955)                         $this->boundary[1],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2956)                         '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2957)                         static::CONTENT_TYPE_TEXT_CALENDAR . '; method=' . $method,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2958)                         ''
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2959)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2960)                     $body .= $this->encodeString($this->Ical, $this->Encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2961)                     $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2962)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2963)                 $body .= $this->endBoundary($this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2964)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2965)             case 'alt_inline':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2966)                 $body .= $mimepre;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2967)                 $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2968)                     $this->boundary[1],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2969)                     $altBodyCharSet,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2970)                     static::CONTENT_TYPE_PLAINTEXT,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2971)                     $altBodyEncoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2972)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2973)                 $body .= $this->encodeString($this->AltBody, $altBodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2974)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2975)                 $body .= $this->textLine('--' . $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2976)                 $body .= $this->headerLine('Content-Type', static::CONTENT_TYPE_MULTIPART_RELATED . ';');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2977)                 $body .= $this->textLine(' boundary="' . $this->boundary[2] . '";');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2978)                 $body .= $this->textLine(' type="' . static::CONTENT_TYPE_TEXT_HTML . '"');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2979)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2980)                 $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2981)                     $this->boundary[2],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2982)                     $bodyCharSet,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2983)                     static::CONTENT_TYPE_TEXT_HTML,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2984)                     $bodyEncoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2985)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2986)                 $body .= $this->encodeString($this->Body, $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2987)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2988)                 $body .= $this->attachAll('inline', $this->boundary[2]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2989)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2990)                 $body .= $this->endBoundary($this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2991)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2992)             case 'alt_attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2993)                 $body .= $mimepre;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2994)                 $body .= $this->textLine('--' . $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2995)                 $body .= $this->headerLine('Content-Type', static::CONTENT_TYPE_MULTIPART_ALTERNATIVE . ';');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2996)                 $body .= $this->textLine(' boundary="' . $this->boundary[2] . '"');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2997)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2998)                 $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 2999)                     $this->boundary[2],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3000)                     $altBodyCharSet,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3001)                     static::CONTENT_TYPE_PLAINTEXT,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3002)                     $altBodyEncoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3003)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3004)                 $body .= $this->encodeString($this->AltBody, $altBodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3005)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3006)                 $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3007)                     $this->boundary[2],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3008)                     $bodyCharSet,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3009)                     static::CONTENT_TYPE_TEXT_HTML,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3010)                     $bodyEncoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3011)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3012)                 $body .= $this->encodeString($this->Body, $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3013)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3014)                 if (!empty($this->Ical)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3015)                     $method = static::ICAL_METHOD_REQUEST;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3016)                     foreach (static::$IcalMethods as $imethod) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3017)                         if (stripos($this->Ical, 'METHOD:' . $imethod) !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3018)                             $method = $imethod;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3019)                             break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3020)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3021)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3022)                     $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3023)                         $this->boundary[2],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3024)                         '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3025)                         static::CONTENT_TYPE_TEXT_CALENDAR . '; method=' . $method,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3026)                         ''
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3027)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3028)                     $body .= $this->encodeString($this->Ical, $this->Encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3029)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3030)                 $body .= $this->endBoundary($this->boundary[2]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3031)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3032)                 $body .= $this->attachAll('attachment', $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3033)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3034)             case 'alt_inline_attach':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3035)                 $body .= $mimepre;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3036)                 $body .= $this->textLine('--' . $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3037)                 $body .= $this->headerLine('Content-Type', static::CONTENT_TYPE_MULTIPART_ALTERNATIVE . ';');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3038)                 $body .= $this->textLine(' boundary="' . $this->boundary[2] . '"');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3039)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3040)                 $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3041)                     $this->boundary[2],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3042)                     $altBodyCharSet,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3043)                     static::CONTENT_TYPE_PLAINTEXT,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3044)                     $altBodyEncoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3045)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3046)                 $body .= $this->encodeString($this->AltBody, $altBodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3047)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3048)                 $body .= $this->textLine('--' . $this->boundary[2]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3049)                 $body .= $this->headerLine('Content-Type', static::CONTENT_TYPE_MULTIPART_RELATED . ';');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3050)                 $body .= $this->textLine(' boundary="' . $this->boundary[3] . '";');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3051)                 $body .= $this->textLine(' type="' . static::CONTENT_TYPE_TEXT_HTML . '"');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3052)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3053)                 $body .= $this->getBoundary(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3054)                     $this->boundary[3],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3055)                     $bodyCharSet,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3056)                     static::CONTENT_TYPE_TEXT_HTML,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3057)                     $bodyEncoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3058)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3059)                 $body .= $this->encodeString($this->Body, $bodyEncoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3060)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3061)                 $body .= $this->attachAll('inline', $this->boundary[3]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3062)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3063)                 $body .= $this->endBoundary($this->boundary[2]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3064)                 $body .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3065)                 $body .= $this->attachAll('attachment', $this->boundary[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3066)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3067)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3068)                 //Catch case 'plain' and case '', applies to simple `text/plain` and `text/html` body content types
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3069)                 //Reset the `Encoding` property in case we changed it for line length reasons
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3070)                 $this->Encoding = $bodyEncoding;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3071)                 $body .= $this->encodeString($this->Body, $this->Encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3072)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3073)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3074) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3075)         if ($this->isError()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3076)             $body = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3077)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3078)                 throw new Exception($this->lang('empty_message'), self::STOP_CRITICAL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3079)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3080)         } elseif ($this->sign_key_file) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3081)             try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3082)                 if (!defined('PKCS7_TEXT')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3083)                     throw new Exception($this->lang('extension_missing') . 'openssl');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3084)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3085) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3086)                 $file = tempnam(sys_get_temp_dir(), 'srcsign');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3087)                 $signed = tempnam(sys_get_temp_dir(), 'mailsign');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3088)                 file_put_contents($file, $body);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3089) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3090)                 //Workaround for PHP bug https://bugs.php.net/bug.php?id=69197
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3091)                 if (empty($this->sign_extracerts_file)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3092)                     $sign = @openssl_pkcs7_sign(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3093)                         $file,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3094)                         $signed,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3095)                         'file://' . realpath($this->sign_cert_file),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3096)                         ['file://' . realpath($this->sign_key_file), $this->sign_key_pass],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3097)                         []
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3098)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3099)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3100)                     $sign = @openssl_pkcs7_sign(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3101)                         $file,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3102)                         $signed,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3103)                         'file://' . realpath($this->sign_cert_file),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3104)                         ['file://' . realpath($this->sign_key_file), $this->sign_key_pass],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3105)                         [],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3106)                         PKCS7_DETACHED,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3107)                         $this->sign_extracerts_file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3108)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3109)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3110) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3111)                 @unlink($file);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3112)                 if ($sign) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3113)                     $body = file_get_contents($signed);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3114)                     @unlink($signed);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3115)                     //The message returned by openssl contains both headers and body, so need to split them up
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3116)                     $parts = explode("\n\n", $body, 2);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3117)                     $this->MIMEHeader .= $parts[0] . static::$LE . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3118)                     $body = $parts[1];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3119)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3120)                     @unlink($signed);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3121)                     throw new Exception($this->lang('signing') . openssl_error_string());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3122)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3123)             } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3124)                 $body = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3125)                 if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3126)                     throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3127)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3128)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3129)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3130) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3131)         return $body;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3132)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3133) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3134)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3135)      * Get the boundaries that this message will use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3136)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3137)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3138)     public function getBoundaries()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3139)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3140)         if (empty($this->boundary)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3141)             $this->setBoundaries();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3142)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3143)         return $this->boundary;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3144)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3145) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3146)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3147)      * Return the start of a message boundary.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3148)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3149)      * @param string $boundary
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3150)      * @param string $charSet
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3151)      * @param string $contentType
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3152)      * @param string $encoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3153)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3154)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3155)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3156)     protected function getBoundary($boundary, $charSet, $contentType, $encoding)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3157)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3158)         $result = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3159)         if ('' === $charSet) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3160)             $charSet = $this->CharSet;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3161)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3162)         if ('' === $contentType) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3163)             $contentType = $this->ContentType;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3164)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3165)         if ('' === $encoding) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3166)             $encoding = $this->Encoding;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3167)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3168)         $result .= $this->textLine('--' . $boundary);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3169)         $result .= sprintf('Content-Type: %s; charset=%s', $contentType, $charSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3170)         $result .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3171)         //RFC1341 part 5 says 7bit is assumed if not specified
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3172)         if (static::ENCODING_7BIT !== $encoding) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3173)             $result .= $this->headerLine('Content-Transfer-Encoding', $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3174)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3175)         $result .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3176) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3177)         return $result;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3178)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3179) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3180)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3181)      * Return the end of a message boundary.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3182)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3183)      * @param string $boundary
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3184)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3185)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3186)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3187)     protected function endBoundary($boundary)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3188)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3189)         return static::$LE . '--' . $boundary . '--' . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3190)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3191) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3192)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3193)      * Set the message type.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3194)      * PHPMailer only supports some preset message types, not arbitrary MIME structures.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3195)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3196)     protected function setMessageType()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3197)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3198)         $type = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3199)         if ($this->alternativeExists()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3200)             $type[] = 'alt';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3201)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3202)         if ($this->inlineImageExists()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3203)             $type[] = 'inline';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3204)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3205)         if ($this->attachmentExists()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3206)             $type[] = 'attach';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3207)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3208)         $this->message_type = implode('_', $type);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3209)         if ('' === $this->message_type) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3210)             //The 'plain' message_type refers to the message having a single body element, not that it is plain-text
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3211)             $this->message_type = 'plain';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3212)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3213)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3214) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3215)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3216)      * Format a header line.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3217)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3218)      * @param string     $name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3219)      * @param string|int $value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3220)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3221)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3222)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3223)     public function headerLine($name, $value)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3224)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3225)         return $name . ': ' . $value . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3226)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3227) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3228)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3229)      * Return a formatted mail line.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3230)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3231)      * @param string $value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3232)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3233)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3234)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3235)     public function textLine($value)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3236)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3237)         return $value . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3238)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3239) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3240)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3241)      * Add an attachment from a path on the filesystem.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3242)      * Never use a user-supplied path to a file!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3243)      * Returns false if the file could not be found or read.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3244)      * Explicitly *does not* support passing URLs; PHPMailer is not an HTTP client.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3245)      * If you need to do that, fetch the resource yourself and pass it in via a local file or string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3246)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3247)      * @param string $path        Path to the attachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3248)      * @param string $name        Overrides the attachment name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3249)      * @param string $encoding    File encoding (see $Encoding)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3250)      * @param string $type        MIME type, e.g. `image/jpeg`; determined automatically from $path if not specified
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3251)      * @param string $disposition Disposition to use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3252)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3253)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3254)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3255)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3256)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3257)     public function addAttachment(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3258)         $path,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3259)         $name = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3260)         $encoding = self::ENCODING_BASE64,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3261)         $type = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3262)         $disposition = 'attachment'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3263)     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3264)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3265)             if (!static::fileIsAccessible($path)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3266)                 throw new Exception($this->lang('file_access') . $path, self::STOP_CONTINUE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3267)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3268) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3269)             //If a MIME type is not specified, try to work it out from the file name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3270)             if ('' === $type) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3271)                 $type = static::filenameToType($path);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3272)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3273) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3274)             $filename = (string) static::mb_pathinfo($path, PATHINFO_BASENAME);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3275)             if ('' === $name) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3276)                 $name = $filename;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3277)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3278)             if (!$this->validateEncoding($encoding)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3279)                 throw new Exception($this->lang('encoding') . $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3280)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3281) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3282)             $this->attachment[] = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3283)                 0 => $path,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3284)                 1 => $filename,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3285)                 2 => $name,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3286)                 3 => $encoding,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3287)                 4 => $type,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3288)                 5 => false, //isStringAttachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3289)                 6 => $disposition,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3290)                 7 => $name,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3291)             ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3292)         } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3293)             $this->setError($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3294)             $this->edebug($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3295)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3296)                 throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3297)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3298) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3299)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3300)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3301) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3302)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3303)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3304) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3305)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3306)      * Return the array of attachments.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3307)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3308)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3309)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3310)     public function getAttachments()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3311)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3312)         return $this->attachment;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3313)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3314) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3315)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3316)      * Attach all file, string, and binary attachments to the message.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3317)      * Returns an empty string on failure.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3318)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3319)      * @param string $disposition_type
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3320)      * @param string $boundary
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3321)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3322)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3323)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3324)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3325)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3326)     protected function attachAll($disposition_type, $boundary)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3327)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3328)         //Return text of body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3329)         $mime = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3330)         $cidUniq = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3331)         $incl = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3332) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3333)         //Add all attachments
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3334)         foreach ($this->attachment as $attachment) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3335)             //Check if it is a valid disposition_filter
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3336)             if ($attachment[6] === $disposition_type) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3337)                 //Check for string attachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3338)                 $string = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3339)                 $path = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3340)                 $bString = $attachment[5];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3341)                 if ($bString) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3342)                     $string = $attachment[0];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3343)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3344)                     $path = $attachment[0];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3345)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3346) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3347)                 $inclhash = hash('sha256', serialize($attachment));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3348)                 if (in_array($inclhash, $incl, true)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3349)                     continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3350)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3351)                 $incl[] = $inclhash;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3352)                 $name = $attachment[2];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3353)                 $encoding = $attachment[3];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3354)                 $type = $attachment[4];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3355)                 $disposition = $attachment[6];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3356)                 $cid = $attachment[7];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3357)                 if ('inline' === $disposition && array_key_exists($cid, $cidUniq)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3358)                     continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3359)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3360)                 $cidUniq[$cid] = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3361) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3362)                 $mime[] = sprintf('--%s%s', $boundary, static::$LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3363)                 //Only include a filename property if we have one
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3364)                 if (!empty($name)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3365)                     $mime[] = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3366)                         'Content-Type: %s; name=%s%s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3367)                         $type,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3368)                         static::quotedString($this->encodeHeader($this->secureHeader($name))),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3369)                         static::$LE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3370)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3371)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3372)                     $mime[] = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3373)                         'Content-Type: %s%s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3374)                         $type,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3375)                         static::$LE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3376)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3377)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3378)                 //RFC1341 part 5 says 7bit is assumed if not specified
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3379)                 if (static::ENCODING_7BIT !== $encoding) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3380)                     $mime[] = sprintf('Content-Transfer-Encoding: %s%s', $encoding, static::$LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3381)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3382) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3383)                 //Only set Content-IDs on inline attachments
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3384)                 if ((string) $cid !== '' && $disposition === 'inline') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3385)                     $mime[] = 'Content-ID: <' . $this->encodeHeader($this->secureHeader($cid)) . '>' . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3386)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3387) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3388)                 //Allow for bypassing the Content-Disposition header
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3389)                 if (!empty($disposition)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3390)                     $encoded_name = $this->encodeHeader($this->secureHeader($name));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3391)                     if (!empty($encoded_name)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3392)                         $mime[] = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3393)                             'Content-Disposition: %s; filename=%s%s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3394)                             $disposition,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3395)                             static::quotedString($encoded_name),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3396)                             static::$LE . static::$LE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3397)                         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3398)                     } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3399)                         $mime[] = sprintf(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3400)                             'Content-Disposition: %s%s',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3401)                             $disposition,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3402)                             static::$LE . static::$LE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3403)                         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3404)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3405)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3406)                     $mime[] = static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3407)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3408) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3409)                 //Encode as string attachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3410)                 if ($bString) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3411)                     $mime[] = $this->encodeString($string, $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3412)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3413)                     $mime[] = $this->encodeFile($path, $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3414)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3415)                 if ($this->isError()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3416)                     return '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3417)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3418)                 $mime[] = static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3419)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3420)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3421) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3422)         $mime[] = sprintf('--%s--%s', $boundary, static::$LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3423) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3424)         return implode('', $mime);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3425)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3426) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3427)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3428)      * Encode a file attachment in requested format.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3429)      * Returns an empty string on failure.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3430)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3431)      * @param string $path     The full path to the file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3432)      * @param string $encoding The encoding to use; one of 'base64', '7bit', '8bit', 'binary', 'quoted-printable'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3433)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3434)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3435)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3436)     protected function encodeFile($path, $encoding = self::ENCODING_BASE64)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3437)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3438)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3439)             if (!static::fileIsAccessible($path)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3440)                 throw new Exception($this->lang('file_open') . $path, self::STOP_CONTINUE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3441)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3442)             $file_buffer = file_get_contents($path);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3443)             if (false === $file_buffer) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3444)                 throw new Exception($this->lang('file_open') . $path, self::STOP_CONTINUE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3445)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3446)             $file_buffer = $this->encodeString($file_buffer, $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3447) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3448)             return $file_buffer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3449)         } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3450)             $this->setError($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3451)             $this->edebug($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3452)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3453)                 throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3454)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3455) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3456)             return '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3457)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3458)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3459) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3460)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3461)      * Encode a string in requested format.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3462)      * Returns an empty string on failure.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3463)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3464)      * @param string $str      The text to encode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3465)      * @param string $encoding The encoding to use; one of 'base64', '7bit', '8bit', 'binary', 'quoted-printable'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3466)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3467)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3468)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3469)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3470)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3471)     public function encodeString($str, $encoding = self::ENCODING_BASE64)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3472)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3473)         $encoded = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3474)         switch (strtolower($encoding)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3475)             case static::ENCODING_BASE64:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3476)                 $encoded = chunk_split(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3477)                     base64_encode($str),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3478)                     static::STD_LINE_LENGTH,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3479)                     static::$LE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3480)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3481)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3482)             case static::ENCODING_7BIT:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3483)             case static::ENCODING_8BIT:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3484)                 $encoded = static::normalizeBreaks($str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3485)                 //Make sure it ends with a line break
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3486)                 if (substr($encoded, -(strlen(static::$LE))) !== static::$LE) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3487)                     $encoded .= static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3488)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3489)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3490)             case static::ENCODING_BINARY:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3491)                 $encoded = $str;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3492)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3493)             case static::ENCODING_QUOTED_PRINTABLE:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3494)                 $encoded = $this->encodeQP($str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3495)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3496)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3497)                 $this->setError($this->lang('encoding') . $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3498)                 if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3499)                     throw new Exception($this->lang('encoding') . $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3500)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3501)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3502)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3503) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3504)         return $encoded;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3505)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3506) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3507)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3508)      * Encode a header value (not including its label) optimally.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3509)      * Picks shortest of Q, B, or none. Result includes folding if needed.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3510)      * See RFC822 definitions for phrase, comment and text positions.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3511)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3512)      * @param string $str      The header value to encode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3513)      * @param string $position What context the string will be used in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3514)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3515)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3516)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3517)     public function encodeHeader($str, $position = 'text')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3518)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3519)         $matchcount = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3520)         switch (strtolower($position)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3521)             case 'phrase':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3522)                 if (!preg_match('/[\200-\377]/', $str)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3523)                     //Can't use addslashes as we don't know the value of magic_quotes_sybase
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3524)                     $encoded = addcslashes($str, "\0..\37\177\\\"");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3525)                     if (($str === $encoded) && !preg_match('/[^A-Za-z0-9!#$%&\'*+\/=?^_`{|}~ -]/', $str)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3526)                         return $encoded;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3527)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3528) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3529)                     return "\"$encoded\"";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3530)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3531)                 $matchcount = preg_match_all('/[^\040\041\043-\133\135-\176]/', $str, $matches);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3532)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3533)             /* @noinspection PhpMissingBreakStatementInspection */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3534)             case 'comment':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3535)                 $matchcount = preg_match_all('/[()"]/', $str, $matches);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3536)             //fallthrough
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3537)             case 'text':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3538)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3539)                 $matchcount += preg_match_all('/[\000-\010\013\014\016-\037\177-\377]/', $str, $matches);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3540)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3541)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3542) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3543)         if ($this->has8bitChars($str)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3544)             $charset = $this->CharSet;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3545)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3546)             $charset = static::CHARSET_ASCII;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3547)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3548) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3549)         //Q/B encoding adds 8 chars and the charset ("` =?<charset>?[QB]?<content>?=`").
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3550)         $overhead = 8 + strlen($charset);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3551) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3552)         if ('mail' === $this->Mailer) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3553)             $maxlen = static::MAIL_MAX_LINE_LENGTH - $overhead;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3554)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3555)             $maxlen = static::MAX_LINE_LENGTH - $overhead;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3556)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3557) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3558)         //Select the encoding that produces the shortest output and/or prevents corruption.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3559)         if ($matchcount > strlen($str) / 3) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3560)             //More than 1/3 of the content needs encoding, use B-encode.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3561)             $encoding = 'B';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3562)         } elseif ($matchcount > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3563)             //Less than 1/3 of the content needs encoding, use Q-encode.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3564)             $encoding = 'Q';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3565)         } elseif (strlen($str) > $maxlen) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3566)             //No encoding needed, but value exceeds max line length, use Q-encode to prevent corruption.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3567)             $encoding = 'Q';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3568)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3569)             //No reformatting needed
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3570)             $encoding = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3571)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3572) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3573)         switch ($encoding) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3574)             case 'B':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3575)                 if ($this->hasMultiBytes($str)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3576)                     //Use a custom function which correctly encodes and wraps long
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3577)                     //multibyte strings without breaking lines within a character
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3578)                     $encoded = $this->base64EncodeWrapMB($str, "\n");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3579)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3580)                     $encoded = base64_encode($str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3581)                     $maxlen -= $maxlen % 4;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3582)                     $encoded = trim(chunk_split($encoded, $maxlen, "\n"));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3583)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3584)                 $encoded = preg_replace('/^(.*)$/m', ' =?' . $charset . "?$encoding?\\1?=", $encoded);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3585)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3586)             case 'Q':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3587)                 $encoded = $this->encodeQ($str, $position);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3588)                 $encoded = $this->wrapText($encoded, $maxlen, true);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3589)                 $encoded = str_replace('=' . static::$LE, "\n", trim($encoded));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3590)                 $encoded = preg_replace('/^(.*)$/m', ' =?' . $charset . "?$encoding?\\1?=", $encoded);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3591)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3592)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3593)                 return $str;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3594)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3595) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3596)         return trim(static::normalizeBreaks($encoded));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3597)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3598) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3599)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3600)      * Check if a string contains multi-byte characters.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3601)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3602)      * @param string $str multi-byte text to wrap encode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3603)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3604)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3605)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3606)     public function hasMultiBytes($str)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3607)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3608)         if (function_exists('mb_strlen')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3609)             return strlen($str) > mb_strlen($str, $this->CharSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3610)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3611) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3612)         //Assume no multibytes (we can't handle without mbstring functions anyway)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3613)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3614)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3615) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3616)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3617)      * Does a string contain any 8-bit chars (in any charset)?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3618)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3619)      * @param string $text
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3620)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3621)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3622)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3623)     public function has8bitChars($text)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3624)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3625)         return (bool) preg_match('/[\x80-\xFF]/', $text);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3626)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3627) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3628)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3629)      * Encode and wrap long multibyte strings for mail headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3630)      * without breaking lines within a character.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3631)      * Adapted from a function by paravoid.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3632)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3633)      * @see https://www.php.net/manual/en/function.mb-encode-mimeheader.php#60283
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3634)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3635)      * @param string $str       multi-byte text to wrap encode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3636)      * @param string $linebreak string to use as linefeed/end-of-line
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3637)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3638)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3639)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3640)     public function base64EncodeWrapMB($str, $linebreak = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3641)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3642)         $start = '=?' . $this->CharSet . '?B?';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3643)         $end = '?=';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3644)         $encoded = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3645)         if (null === $linebreak) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3646)             $linebreak = static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3647)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3648) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3649)         $mb_length = mb_strlen($str, $this->CharSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3650)         //Each line must have length <= 75, including $start and $end
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3651)         $length = 75 - strlen($start) - strlen($end);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3652)         //Average multi-byte ratio
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3653)         $ratio = $mb_length / strlen($str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3654)         //Base64 has a 4:3 ratio
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3655)         $avgLength = floor($length * $ratio * .75);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3656) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3657)         $offset = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3658)         for ($i = 0; $i < $mb_length; $i += $offset) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3659)             $lookBack = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3660)             do {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3661)                 $offset = $avgLength - $lookBack;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3662)                 $chunk = mb_substr($str, $i, $offset, $this->CharSet);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3663)                 $chunk = base64_encode($chunk);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3664)                 ++$lookBack;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3665)             } while (strlen($chunk) > $length);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3666)             $encoded .= $chunk . $linebreak;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3667)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3668) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3669)         //Chomp the last linefeed
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3670)         return substr($encoded, 0, -strlen($linebreak));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3671)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3672) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3673)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3674)      * Encode a string in quoted-printable format.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3675)      * According to RFC2045 section 6.7.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3676)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3677)      * @param string $string The text to encode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3678)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3679)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3680)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3681)     public function encodeQP($string)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3682)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3683)         return static::normalizeBreaks(quoted_printable_encode($string));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3684)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3685) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3686)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3687)      * Encode a string using Q encoding.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3688)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3689)      * @see https://www.rfc-editor.org/rfc/rfc2047#section-4.2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3690)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3691)      * @param string $str      the text to encode
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3692)      * @param string $position Where the text is going to be used, see the RFC for what that means
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3693)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3694)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3695)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3696)     public function encodeQ($str, $position = 'text')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3697)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3698)         //There should not be any EOL in the string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3699)         $pattern = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3700)         $encoded = str_replace(["\r", "\n"], '', $str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3701)         switch (strtolower($position)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3702)             case 'phrase':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3703)                 //RFC 2047 section 5.3
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3704)                 $pattern = '^A-Za-z0-9!*+\/ -';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3705)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3706)             /*
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3707)              * RFC 2047 section 5.2.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3708)              * Build $pattern without including delimiters and []
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3709)              */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3710)             /* @noinspection PhpMissingBreakStatementInspection */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3711)             case 'comment':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3712)                 $pattern = '\(\)"';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3713)             /* Intentional fall through */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3714)             case 'text':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3715)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3716)                 //RFC 2047 section 5.1
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3717)                 //Replace every high ascii, control, =, ? and _ characters
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3718)                 $pattern = '\000-\011\013\014\016-\037\075\077\137\177-\377' . $pattern;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3719)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3720)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3721)         $matches = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3722)         if (preg_match_all("/[{$pattern}]/", $encoded, $matches)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3723)             //If the string contains an '=', make sure it's the first thing we replace
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3724)             //so as to avoid double-encoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3725)             $eqkey = array_search('=', $matches[0], true);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3726)             if (false !== $eqkey) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3727)                 unset($matches[0][$eqkey]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3728)                 array_unshift($matches[0], '=');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3729)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3730)             foreach (array_unique($matches[0]) as $char) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3731)                 $encoded = str_replace($char, '=' . sprintf('%02X', ord($char)), $encoded);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3732)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3733)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3734)         //Replace spaces with _ (more readable than =20)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3735)         //RFC 2047 section 4.2(2)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3736)         return str_replace(' ', '_', $encoded);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3737)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3738) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3739)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3740)      * Add a string or binary attachment (non-filesystem).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3741)      * This method can be used to attach ascii or binary data,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3742)      * such as a BLOB record from a database.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3743)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3744)      * @param string $string      String attachment data
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3745)      * @param string $filename    Name of the attachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3746)      * @param string $encoding    File encoding (see $Encoding)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3747)      * @param string $type        File extension (MIME) type
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3748)      * @param string $disposition Disposition to use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3749)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3750)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3751)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3752)      * @return bool True on successfully adding an attachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3753)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3754)     public function addStringAttachment(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3755)         $string,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3756)         $filename,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3757)         $encoding = self::ENCODING_BASE64,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3758)         $type = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3759)         $disposition = 'attachment'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3760)     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3761)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3762)             //If a MIME type is not specified, try to work it out from the file name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3763)             if ('' === $type) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3764)                 $type = static::filenameToType($filename);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3765)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3766) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3767)             if (!$this->validateEncoding($encoding)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3768)                 throw new Exception($this->lang('encoding') . $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3769)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3770) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3771)             //Append to $attachment array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3772)             $this->attachment[] = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3773)                 0 => $string,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3774)                 1 => $filename,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3775)                 2 => static::mb_pathinfo($filename, PATHINFO_BASENAME),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3776)                 3 => $encoding,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3777)                 4 => $type,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3778)                 5 => true, //isStringAttachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3779)                 6 => $disposition,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3780)                 7 => 0,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3781)             ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3782)         } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3783)             $this->setError($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3784)             $this->edebug($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3785)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3786)                 throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3787)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3788) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3789)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3790)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3791) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3792)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3793)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3794) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3795)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3796)      * Add an embedded (inline) attachment from a file.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3797)      * This can include images, sounds, and just about any other document type.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3798)      * These differ from 'regular' attachments in that they are intended to be
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3799)      * displayed inline with the message, not just attached for download.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3800)      * This is used in HTML messages that embed the images
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3801)      * the HTML refers to using the `$cid` value in `img` tags, for example `<img src="cid:mylogo">`.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3802)      * Never use a user-supplied path to a file!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3803)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3804)      * @param string $path        Path to the attachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3805)      * @param string $cid         Content ID of the attachment; Use this to reference
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3806)      *                            the content when using an embedded image in HTML
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3807)      * @param string $name        Overrides the attachment filename
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3808)      * @param string $encoding    File encoding (see $Encoding) defaults to `base64`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3809)      * @param string $type        File MIME type (by default mapped from the `$path` filename's extension)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3810)      * @param string $disposition Disposition to use: `inline` (default) or `attachment`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3811)      *                            (unlikely you want this – {@see `addAttachment()`} instead)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3812)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3813)      * @return bool True on successfully adding an attachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3814)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3815)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3816)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3817)     public function addEmbeddedImage(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3818)         $path,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3819)         $cid,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3820)         $name = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3821)         $encoding = self::ENCODING_BASE64,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3822)         $type = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3823)         $disposition = 'inline'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3824)     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3825)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3826)             if (!static::fileIsAccessible($path)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3827)                 throw new Exception($this->lang('file_access') . $path, self::STOP_CONTINUE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3828)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3829) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3830)             //If a MIME type is not specified, try to work it out from the file name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3831)             if ('' === $type) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3832)                 $type = static::filenameToType($path);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3833)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3834) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3835)             if (!$this->validateEncoding($encoding)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3836)                 throw new Exception($this->lang('encoding') . $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3837)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3838) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3839)             $filename = (string) static::mb_pathinfo($path, PATHINFO_BASENAME);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3840)             if ('' === $name) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3841)                 $name = $filename;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3842)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3843) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3844)             //Append to $attachment array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3845)             $this->attachment[] = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3846)                 0 => $path,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3847)                 1 => $filename,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3848)                 2 => $name,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3849)                 3 => $encoding,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3850)                 4 => $type,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3851)                 5 => false, //isStringAttachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3852)                 6 => $disposition,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3853)                 7 => $cid,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3854)             ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3855)         } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3856)             $this->setError($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3857)             $this->edebug($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3858)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3859)                 throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3860)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3861) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3862)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3863)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3864) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3865)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3866)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3867) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3868)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3869)      * Add an embedded stringified attachment.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3870)      * This can include images, sounds, and just about any other document type.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3871)      * If your filename doesn't contain an extension, be sure to set the $type to an appropriate MIME type.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3872)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3873)      * @param string $string      The attachment binary data
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3874)      * @param string $cid         Content ID of the attachment; Use this to reference
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3875)      *                            the content when using an embedded image in HTML
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3876)      * @param string $name        A filename for the attachment. If this contains an extension,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3877)      *                            PHPMailer will attempt to set a MIME type for the attachment.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3878)      *                            For example 'file.jpg' would get an 'image/jpeg' MIME type.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3879)      * @param string $encoding    File encoding (see $Encoding), defaults to 'base64'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3880)      * @param string $type        MIME type - will be used in preference to any automatically derived type
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3881)      * @param string $disposition Disposition to use
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3882)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3883)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3884)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3885)      * @return bool True on successfully adding an attachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3886)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3887)     public function addStringEmbeddedImage(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3888)         $string,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3889)         $cid,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3890)         $name = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3891)         $encoding = self::ENCODING_BASE64,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3892)         $type = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3893)         $disposition = 'inline'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3894)     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3895)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3896)             //If a MIME type is not specified, try to work it out from the name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3897)             if ('' === $type && !empty($name)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3898)                 $type = static::filenameToType($name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3899)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3900) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3901)             if (!$this->validateEncoding($encoding)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3902)                 throw new Exception($this->lang('encoding') . $encoding);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3903)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3904) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3905)             //Append to $attachment array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3906)             $this->attachment[] = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3907)                 0 => $string,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3908)                 1 => $name,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3909)                 2 => $name,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3910)                 3 => $encoding,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3911)                 4 => $type,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3912)                 5 => true, //isStringAttachment
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3913)                 6 => $disposition,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3914)                 7 => $cid,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3915)             ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3916)         } catch (Exception $exc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3917)             $this->setError($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3918)             $this->edebug($exc->getMessage());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3919)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3920)                 throw $exc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3921)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3922) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3923)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3924)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3925) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3926)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3927)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3928) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3929)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3930)      * Validate encodings.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3931)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3932)      * @param string $encoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3933)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3934)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3935)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3936)     protected function validateEncoding($encoding)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3937)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3938)         return in_array(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3939)             $encoding,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3940)             [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3941)                 self::ENCODING_7BIT,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3942)                 self::ENCODING_QUOTED_PRINTABLE,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3943)                 self::ENCODING_BASE64,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3944)                 self::ENCODING_8BIT,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3945)                 self::ENCODING_BINARY,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3946)             ],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3947)             true
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3948)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3949)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3950) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3951)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3952)      * Check if an embedded attachment is present with this cid.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3953)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3954)      * @param string $cid
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3955)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3956)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3957)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3958)     protected function cidExists($cid)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3959)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3960)         foreach ($this->attachment as $attachment) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3961)             if ('inline' === $attachment[6] && $cid === $attachment[7]) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3962)                 return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3963)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3964)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3965) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3966)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3967)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3968) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3969)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3970)      * Check if an inline attachment is present.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3971)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3972)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3973)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3974)     public function inlineImageExists()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3975)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3976)         foreach ($this->attachment as $attachment) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3977)             if ('inline' === $attachment[6]) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3978)                 return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3979)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3980)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3981) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3982)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3983)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3984) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3985)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3986)      * Check if an attachment (non-inline) is present.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3987)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3988)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3989)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3990)     public function attachmentExists()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3991)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3992)         foreach ($this->attachment as $attachment) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3993)             if ('attachment' === $attachment[6]) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3994)                 return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3995)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3996)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3997) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3998)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 3999)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4000) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4001)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4002)      * Check if this message has an alternative body set.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4003)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4004)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4005)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4006)     public function alternativeExists()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4007)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4008)         return !empty($this->AltBody);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4009)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4010) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4011)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4012)      * Clear queued addresses of given kind.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4013)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4014)      * @param string $kind 'to', 'cc', or 'bcc'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4015)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4016)     public function clearQueuedAddresses($kind)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4017)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4018)         $this->RecipientsQueue = array_filter(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4019)             $this->RecipientsQueue,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4020)             static function ($params) use ($kind) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4021)                 return $params[0] !== $kind;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4022)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4023)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4024)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4025) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4026)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4027)      * Clear all To recipients.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4028)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4029)     public function clearAddresses()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4030)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4031)         foreach ($this->to as $to) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4032)             unset($this->all_recipients[strtolower($to[0])]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4033)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4034)         $this->to = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4035)         $this->clearQueuedAddresses('to');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4036)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4037) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4038)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4039)      * Clear all CC recipients.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4040)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4041)     public function clearCCs()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4042)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4043)         foreach ($this->cc as $cc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4044)             unset($this->all_recipients[strtolower($cc[0])]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4045)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4046)         $this->cc = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4047)         $this->clearQueuedAddresses('cc');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4048)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4049) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4050)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4051)      * Clear all BCC recipients.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4052)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4053)     public function clearBCCs()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4054)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4055)         foreach ($this->bcc as $bcc) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4056)             unset($this->all_recipients[strtolower($bcc[0])]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4057)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4058)         $this->bcc = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4059)         $this->clearQueuedAddresses('bcc');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4060)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4061) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4062)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4063)      * Clear all ReplyTo recipients.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4064)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4065)     public function clearReplyTos()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4066)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4067)         $this->ReplyTo = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4068)         $this->ReplyToQueue = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4069)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4070) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4071)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4072)      * Clear all recipient types.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4073)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4074)     public function clearAllRecipients()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4075)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4076)         $this->to = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4077)         $this->cc = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4078)         $this->bcc = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4079)         $this->all_recipients = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4080)         $this->RecipientsQueue = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4081)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4082) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4083)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4084)      * Clear all filesystem, string, and binary attachments.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4085)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4086)     public function clearAttachments()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4087)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4088)         $this->attachment = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4089)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4090) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4091)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4092)      * Clear all custom headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4093)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4094)     public function clearCustomHeaders()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4095)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4096)         $this->CustomHeader = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4097)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4098) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4099)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4100)      * Clear a specific custom header by name or name and value.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4101)      * $name value can be overloaded to contain
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4102)      * both header name and value (name:value).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4103)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4104)      * @param string      $name  Custom header name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4105)      * @param string|null $value Header value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4106)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4107)      * @return bool True if a header was replaced successfully
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4108)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4109)     public function clearCustomHeader($name, $value = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4110)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4111)         if (null === $value && strpos($name, ':') !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4112)             //Value passed in as name:value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4113)             list($name, $value) = explode(':', $name, 2);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4114)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4115)         $name = trim($name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4116)         $value = (null === $value) ? null : trim($value);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4117) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4118)         foreach ($this->CustomHeader as $k => $pair) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4119)             if ($pair[0] == $name) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4120)                 // We remove the header if the value is not provided or it matches.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4121)                 if (null === $value ||  $pair[1] == $value) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4122)                     unset($this->CustomHeader[$k]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4123)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4124)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4125)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4126) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4127)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4128)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4129) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4130)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4131)      * Replace a custom header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4132)      * $name value can be overloaded to contain
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4133)      * both header name and value (name:value).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4134)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4135)      * @param string      $name  Custom header name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4136)      * @param string|null $value Header value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4137)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4138)      * @return bool True if a header was replaced successfully
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4139)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4140)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4141)     public function replaceCustomHeader($name, $value = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4142)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4143)         if (null === $value && strpos($name, ':') !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4144)             //Value passed in as name:value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4145)             list($name, $value) = explode(':', $name, 2);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4146)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4147)         $name = trim($name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4148)         $value = (null === $value) ? '' : trim($value);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4149) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4150)         $replaced = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4151)         foreach ($this->CustomHeader as $k => $pair) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4152)             if ($pair[0] == $name) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4153)                 if ($replaced) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4154)                     unset($this->CustomHeader[$k]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4155)                     continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4156)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4157)                 if (strpbrk($name . $value, "\r\n") !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4158)                     if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4159)                         throw new Exception($this->lang('invalid_header'));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4160)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4161) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4162)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4163)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4164)                 $this->CustomHeader[$k] = [$name, $value];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4165)                 $replaced = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4166)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4167)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4168) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4169)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4170)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4171) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4172)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4173)      * Add an error message to the error container.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4174)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4175)      * @param string $msg
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4176)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4177)     protected function setError($msg)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4178)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4179)         ++$this->error_count;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4180)         if ('smtp' === $this->Mailer && null !== $this->smtp) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4181)             $lasterror = $this->smtp->getError();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4182)             if (!empty($lasterror['error'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4183)                 $msg .= $this->lang('smtp_error') . $lasterror['error'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4184)                 if (!empty($lasterror['detail'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4185)                     $msg .= ' ' . $this->lang('smtp_detail') . $lasterror['detail'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4186)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4187)                 if (!empty($lasterror['smtp_code'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4188)                     $msg .= ' ' . $this->lang('smtp_code') . $lasterror['smtp_code'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4189)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4190)                 if (!empty($lasterror['smtp_code_ex'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4191)                     $msg .= ' ' . $this->lang('smtp_code_ex') . $lasterror['smtp_code_ex'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4192)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4193)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4194)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4195)         $this->ErrorInfo = $msg;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4196)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4197) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4198)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4199)      * Return an RFC 822 formatted date.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4200)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4201)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4202)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4203)     public static function rfcDate()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4204)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4205)         //Set the time zone to whatever the default is to avoid 500 errors
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4206)         //Will default to UTC if it's not set properly in php.ini
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4207)         date_default_timezone_set(@date_default_timezone_get());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4208) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4209)         return date('D, j M Y H:i:s O');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4210)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4211) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4212)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4213)      * Get the server hostname.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4214)      * Returns 'localhost.localdomain' if unknown.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4215)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4216)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4217)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4218)     protected function serverHostname()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4219)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4220)         $result = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4221)         if (!empty($this->Hostname)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4222)             $result = $this->Hostname;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4223)         } elseif (isset($_SERVER) && array_key_exists('SERVER_NAME', $_SERVER)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4224)             $result = $_SERVER['SERVER_NAME'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4225)         } elseif (function_exists('gethostname') && gethostname() !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4226)             $result = gethostname();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4227)         } elseif (php_uname('n') !== '') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4228)             $result = php_uname('n');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4229)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4230)         if (!static::isValidHost($result)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4231)             return 'localhost.localdomain';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4232)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4233) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4234)         return $result;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4235)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4236) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4237)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4238)      * Validate whether a string contains a valid value to use as a hostname or IP address.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4239)      * IPv6 addresses must include [], e.g. `[::1]`, not just `::1`.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4240)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4241)      * @param string $host The host name or IP address to check
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4242)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4243)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4244)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4245)     public static function isValidHost($host)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4246)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4247)         //Simple syntax limits
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4248)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4249)             empty($host)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4250)             || !is_string($host)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4251)             || strlen($host) > 256
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4252)             || !preg_match('/^([a-z\d.-]*|\[[a-f\d:]+\])$/i', $host)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4253)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4254)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4255)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4256)         //Looks like a bracketed IPv6 address
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4257)         if (strlen($host) > 2 && substr($host, 0, 1) === '[' && substr($host, -1, 1) === ']') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4258)             return filter_var(substr($host, 1, -1), FILTER_VALIDATE_IP, FILTER_FLAG_IPV6) !== false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4259)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4260)         //If removing all the dots results in a numeric string, it must be an IPv4 address.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4261)         //Need to check this first because otherwise things like `999.0.0.0` are considered valid host names
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4262)         if (is_numeric(str_replace('.', '', $host))) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4263)             //Is it a valid IPv4 address?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4264)             return filter_var($host, FILTER_VALIDATE_IP, FILTER_FLAG_IPV4) !== false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4265)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4266)         //Is it a syntactically valid hostname (when embedded in a URL)?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4267)         return filter_var('https://' . $host, FILTER_VALIDATE_URL) !== false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4268)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4269) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4270)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4271)      * Get an error message in the current language.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4272)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4273)      * @param string $key
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4274)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4275)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4276)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4277)     protected function lang($key)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4278)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4279)         if (count($this->language) < 1) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4280)             $this->setLanguage(); //Set the default language
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4281)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4282) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4283)         if (array_key_exists($key, $this->language)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4284)             if ('smtp_connect_failed' === $key) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4285)                 //Include a link to troubleshooting docs on SMTP connection failure.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4286)                 //This is by far the biggest cause of support questions
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4287)                 //but it's usually not PHPMailer's fault.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4288)                 return $this->language[$key] . ' https://github.com/PHPMailer/PHPMailer/wiki/Troubleshooting';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4289)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4290) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4291)             return $this->language[$key];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4292)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4293) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4294)         //Return the key as a fallback
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4295)         return $key;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4296)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4297) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4298)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4299)      * Build an error message starting with a generic one and adding details if possible.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4300)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4301)      * @param string $base_key
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4302)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4303)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4304)     private function getSmtpErrorMessage($base_key)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4305)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4306)         $message = $this->lang($base_key);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4307)         $error = $this->smtp->getError();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4308)         if (!empty($error['error'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4309)             $message .= ' ' . $error['error'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4310)             if (!empty($error['detail'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4311)                 $message .= ' ' . $error['detail'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4312)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4313)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4314) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4315)         return $message;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4316)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4317) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4318)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4319)      * Check if an error occurred.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4320)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4321)      * @return bool True if an error did occur
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4322)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4323)     public function isError()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4324)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4325)         return $this->error_count > 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4326)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4327) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4328)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4329)      * Add a custom header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4330)      * $name value can be overloaded to contain
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4331)      * both header name and value (name:value).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4332)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4333)      * @param string      $name  Custom header name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4334)      * @param string|null $value Header value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4335)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4336)      * @return bool True if a header was set successfully
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4337)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4338)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4339)     public function addCustomHeader($name, $value = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4340)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4341)         if (null === $value && strpos($name, ':') !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4342)             //Value passed in as name:value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4343)             list($name, $value) = explode(':', $name, 2);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4344)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4345)         $name = trim($name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4346)         $value = (null === $value) ? '' : trim($value);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4347)         //Ensure name is not empty, and that neither name nor value contain line breaks
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4348)         if (empty($name) || strpbrk($name . $value, "\r\n") !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4349)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4350)                 throw new Exception($this->lang('invalid_header'));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4351)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4352) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4353)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4354)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4355)         $this->CustomHeader[] = [$name, $value];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4356) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4357)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4358)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4359) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4360)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4361)      * Returns all custom headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4362)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4363)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4364)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4365)     public function getCustomHeaders()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4366)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4367)         return $this->CustomHeader;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4368)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4369) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4370)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4371)      * Create a message body from an HTML string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4372)      * Automatically inlines images and creates a plain-text version by converting the HTML,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4373)      * overwriting any existing values in Body and AltBody.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4374)      * Do not source $message content from user input!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4375)      * $basedir is prepended when handling relative URLs, e.g. <img src="/images/a.png"> and must not be empty
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4376)      * will look for an image file in $basedir/images/a.png and convert it to inline.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4377)      * If you don't provide a $basedir, relative paths will be left untouched (and thus probably break in email)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4378)      * Converts data-uri images into embedded attachments.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4379)      * If you don't want to apply these transformations to your HTML, just set Body and AltBody directly.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4380)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4381)      * @param string        $message  HTML message string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4382)      * @param string        $basedir  Absolute path to a base directory to prepend to relative paths to images
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4383)      * @param bool|callable $advanced Whether to use the internal HTML to text converter
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4384)      *                                or your own custom converter
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4385)      * @return string The transformed message body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4386)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4387)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4388)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4389)      * @see PHPMailer::html2text()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4390)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4391)     public function msgHTML($message, $basedir = '', $advanced = false)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4392)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4393)         preg_match_all('/(?<!-)(src|background)=["\'](.*)["\']/Ui', $message, $images);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4394)         if (array_key_exists(2, $images)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4395)             if (strlen($basedir) > 1 && '/' !== substr($basedir, -1)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4396)                 //Ensure $basedir has a trailing /
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4397)                 $basedir .= '/';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4398)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4399)             foreach ($images[2] as $imgindex => $url) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4400)                 //Convert data URIs into embedded images
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4401)                 //e.g. "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4402)                 $match = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4403)                 if (preg_match('#^data:(image/(?:jpe?g|gif|png));?(base64)?,(.+)#', $url, $match)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4404)                     if (count($match) === 4 && static::ENCODING_BASE64 === $match[2]) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4405)                         $data = base64_decode($match[3]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4406)                     } elseif ('' === $match[2]) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4407)                         $data = rawurldecode($match[3]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4408)                     } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4409)                         //Not recognised so leave it alone
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4410)                         continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4411)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4412)                     //Hash the decoded data, not the URL, so that the same data-URI image used in multiple places
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4413)                     //will only be embedded once, even if it used a different encoding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4414)                     $cid = substr(hash('sha256', $data), 0, 32) . '@phpmailer.0'; //RFC2392 S 2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4415) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4416)                     if (!$this->cidExists($cid)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4417)                         $this->addStringEmbeddedImage(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4418)                             $data,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4419)                             $cid,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4420)                             'embed' . $imgindex,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4421)                             static::ENCODING_BASE64,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4422)                             $match[1]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4423)                         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4424)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4425)                     $message = str_replace(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4426)                         $images[0][$imgindex],
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4427)                         $images[1][$imgindex] . '="cid:' . $cid . '"',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4428)                         $message
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4429)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4430)                     continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4431)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4432)                 if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4433)                     //Only process relative URLs if a basedir is provided (i.e. no absolute local paths)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4434)                     !empty($basedir)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4435)                     //Ignore URLs containing parent dir traversal (..)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4436)                     && (strpos($url, '..') === false)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4437)                     //Do not change urls that are already inline images
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4438)                     && 0 !== strpos($url, 'cid:')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4439)                     //Do not change absolute URLs, including anonymous protocol
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4440)                     && !preg_match('#^[a-z][a-z0-9+.-]*:?//#i', $url)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4441)                 ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4442)                     $filename = static::mb_pathinfo($url, PATHINFO_BASENAME);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4443)                     $directory = dirname($url);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4444)                     if ('.' === $directory) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4445)                         $directory = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4446)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4447)                     //RFC2392 S 2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4448)                     $cid = substr(hash('sha256', $url), 0, 32) . '@phpmailer.0';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4449)                     if (strlen($basedir) > 1 && '/' !== substr($basedir, -1)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4450)                         $basedir .= '/';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4451)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4452)                     if (strlen($directory) > 1 && '/' !== substr($directory, -1)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4453)                         $directory .= '/';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4454)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4455)                     if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4456)                         $this->addEmbeddedImage(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4457)                             $basedir . $directory . $filename,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4458)                             $cid,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4459)                             $filename,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4460)                             static::ENCODING_BASE64,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4461)                             static::_mime_types((string) static::mb_pathinfo($filename, PATHINFO_EXTENSION))
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4462)                         )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4463)                     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4464)                         $message = preg_replace(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4465)                             '/' . $images[1][$imgindex] . '=["\']' . preg_quote($url, '/') . '["\']/Ui',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4466)                             $images[1][$imgindex] . '="cid:' . $cid . '"',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4467)                             $message
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4468)                         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4469)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4470)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4471)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4472)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4473)         $this->isHTML();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4474)         //Convert all message body line breaks to LE, makes quoted-printable encoding work much better
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4475)         $this->Body = static::normalizeBreaks($message);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4476)         $this->AltBody = static::normalizeBreaks($this->html2text($message, $advanced));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4477)         if (!$this->alternativeExists()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4478)             $this->AltBody = 'This is an HTML-only message. To view it, activate HTML in your email application.'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4479)                 . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4480)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4481) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4482)         return $this->Body;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4483)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4484) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4485)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4486)      * Convert an HTML string into plain text.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4487)      * This is used by msgHTML().
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4488)      * Note - older versions of this function used a bundled advanced converter
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4489)      * which was removed for license reasons in #232.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4490)      * Example usage:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4491)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4492)      * ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4493)      * //Use default conversion
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4494)      * $plain = $mail->html2text($html);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4495)      * //Use your own custom converter
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4496)      * $plain = $mail->html2text($html, function($html) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4497)      *     $converter = new MyHtml2text($html);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4498)      *     return $converter->get_text();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4499)      * });
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4500)      * ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4501)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4502)      * @param string        $html     The HTML text to convert
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4503)      * @param bool|callable $advanced Any boolean value to use the internal converter,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4504)      *                                or provide your own callable for custom conversion.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4505)      *                                *Never* pass user-supplied data into this parameter
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4506)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4507)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4508)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4509)     public function html2text($html, $advanced = false)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4510)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4511)         if (is_callable($advanced)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4512)             return call_user_func($advanced, $html);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4513)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4514) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4515)         return html_entity_decode(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4516)             trim(strip_tags(preg_replace('/<(head|title|style|script)[^>]*>.*?<\/\\1>/si', '', $html))),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4517)             ENT_QUOTES,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4518)             $this->CharSet
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4519)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4520)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4521) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4522)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4523)      * Get the MIME type for a file extension.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4524)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4525)      * @param string $ext File extension
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4526)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4527)      * @return string MIME type of file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4528)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4529)     public static function _mime_types($ext = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4530)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4531)         $mimes = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4532)             'xl' => 'application/excel',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4533)             'js' => 'application/javascript',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4534)             'hqx' => 'application/mac-binhex40',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4535)             'cpt' => 'application/mac-compactpro',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4536)             'bin' => 'application/macbinary',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4537)             'doc' => 'application/msword',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4538)             'word' => 'application/msword',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4539)             'xlsx' => 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4540)             'xltx' => 'application/vnd.openxmlformats-officedocument.spreadsheetml.template',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4541)             'potx' => 'application/vnd.openxmlformats-officedocument.presentationml.template',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4542)             'ppsx' => 'application/vnd.openxmlformats-officedocument.presentationml.slideshow',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4543)             'pptx' => 'application/vnd.openxmlformats-officedocument.presentationml.presentation',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4544)             'sldx' => 'application/vnd.openxmlformats-officedocument.presentationml.slide',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4545)             'docx' => 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4546)             'dotx' => 'application/vnd.openxmlformats-officedocument.wordprocessingml.template',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4547)             'xlam' => 'application/vnd.ms-excel.addin.macroEnabled.12',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4548)             'xlsb' => 'application/vnd.ms-excel.sheet.binary.macroEnabled.12',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4549)             'class' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4550)             'dll' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4551)             'dms' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4552)             'exe' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4553)             'lha' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4554)             'lzh' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4555)             'psd' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4556)             'sea' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4557)             'so' => 'application/octet-stream',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4558)             'oda' => 'application/oda',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4559)             'pdf' => 'application/pdf',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4560)             'ai' => 'application/postscript',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4561)             'eps' => 'application/postscript',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4562)             'ps' => 'application/postscript',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4563)             'smi' => 'application/smil',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4564)             'smil' => 'application/smil',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4565)             'mif' => 'application/vnd.mif',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4566)             'xls' => 'application/vnd.ms-excel',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4567)             'ppt' => 'application/vnd.ms-powerpoint',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4568)             'wbxml' => 'application/vnd.wap.wbxml',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4569)             'wmlc' => 'application/vnd.wap.wmlc',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4570)             'dcr' => 'application/x-director',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4571)             'dir' => 'application/x-director',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4572)             'dxr' => 'application/x-director',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4573)             'dvi' => 'application/x-dvi',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4574)             'gtar' => 'application/x-gtar',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4575)             'php3' => 'application/x-httpd-php',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4576)             'php4' => 'application/x-httpd-php',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4577)             'php' => 'application/x-httpd-php',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4578)             'phtml' => 'application/x-httpd-php',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4579)             'phps' => 'application/x-httpd-php-source',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4580)             'swf' => 'application/x-shockwave-flash',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4581)             'sit' => 'application/x-stuffit',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4582)             'tar' => 'application/x-tar',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4583)             'tgz' => 'application/x-tar',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4584)             'xht' => 'application/xhtml+xml',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4585)             'xhtml' => 'application/xhtml+xml',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4586)             'zip' => 'application/zip',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4587)             'mid' => 'audio/midi',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4588)             'midi' => 'audio/midi',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4589)             'mp2' => 'audio/mpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4590)             'mp3' => 'audio/mpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4591)             'm4a' => 'audio/mp4',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4592)             'mpga' => 'audio/mpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4593)             'aif' => 'audio/x-aiff',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4594)             'aifc' => 'audio/x-aiff',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4595)             'aiff' => 'audio/x-aiff',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4596)             'ram' => 'audio/x-pn-realaudio',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4597)             'rm' => 'audio/x-pn-realaudio',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4598)             'rpm' => 'audio/x-pn-realaudio-plugin',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4599)             'ra' => 'audio/x-realaudio',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4600)             'wav' => 'audio/x-wav',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4601)             'mka' => 'audio/x-matroska',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4602)             'bmp' => 'image/bmp',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4603)             'gif' => 'image/gif',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4604)             'jpeg' => 'image/jpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4605)             'jpe' => 'image/jpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4606)             'jpg' => 'image/jpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4607)             'png' => 'image/png',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4608)             'tiff' => 'image/tiff',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4609)             'tif' => 'image/tiff',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4610)             'webp' => 'image/webp',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4611)             'avif' => 'image/avif',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4612)             'heif' => 'image/heif',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4613)             'heifs' => 'image/heif-sequence',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4614)             'heic' => 'image/heic',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4615)             'heics' => 'image/heic-sequence',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4616)             'eml' => 'message/rfc822',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4617)             'css' => 'text/css',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4618)             'html' => 'text/html',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4619)             'htm' => 'text/html',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4620)             'shtml' => 'text/html',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4621)             'log' => 'text/plain',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4622)             'text' => 'text/plain',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4623)             'txt' => 'text/plain',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4624)             'rtx' => 'text/richtext',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4625)             'rtf' => 'text/rtf',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4626)             'vcf' => 'text/vcard',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4627)             'vcard' => 'text/vcard',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4628)             'ics' => 'text/calendar',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4629)             'xml' => 'text/xml',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4630)             'xsl' => 'text/xml',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4631)             'csv' => 'text/csv',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4632)             'wmv' => 'video/x-ms-wmv',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4633)             'mpeg' => 'video/mpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4634)             'mpe' => 'video/mpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4635)             'mpg' => 'video/mpeg',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4636)             'mp4' => 'video/mp4',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4637)             'm4v' => 'video/mp4',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4638)             'mov' => 'video/quicktime',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4639)             'qt' => 'video/quicktime',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4640)             'rv' => 'video/vnd.rn-realvideo',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4641)             'avi' => 'video/x-msvideo',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4642)             'movie' => 'video/x-sgi-movie',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4643)             'webm' => 'video/webm',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4644)             'mkv' => 'video/x-matroska',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4645)         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4646)         $ext = strtolower($ext);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4647)         if (array_key_exists($ext, $mimes)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4648)             return $mimes[$ext];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4649)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4650) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4651)         return 'application/octet-stream';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4652)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4653) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4654)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4655)      * Map a file name to a MIME type.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4656)      * Defaults to 'application/octet-stream', i.e.. arbitrary binary data.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4657)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4658)      * @param string $filename A file name or full path, does not need to exist as a file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4659)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4660)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4661)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4662)     public static function filenameToType($filename)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4663)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4664)         //In case the path is a URL, strip any query string before getting extension
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4665)         $qpos = strpos($filename, '?');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4666)         if (false !== $qpos) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4667)             $filename = substr($filename, 0, $qpos);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4668)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4669)         $ext = static::mb_pathinfo($filename, PATHINFO_EXTENSION);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4670) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4671)         return static::_mime_types($ext);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4672)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4673) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4674)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4675)      * Multi-byte-safe pathinfo replacement.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4676)      * Drop-in replacement for pathinfo(), but multibyte- and cross-platform-safe.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4677)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4678)      * @see https://www.php.net/manual/en/function.pathinfo.php#107461
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4679)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4680)      * @param string     $path    A filename or path, does not need to exist as a file
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4681)      * @param int|string $options Either a PATHINFO_* constant,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4682)      *                            or a string name to return only the specified piece
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4683)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4684)      * @return string|array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4685)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4686)     public static function mb_pathinfo($path, $options = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4687)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4688)         $ret = ['dirname' => '', 'basename' => '', 'extension' => '', 'filename' => ''];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4689)         $pathinfo = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4690)         if (preg_match('#^(.*?)[\\\\/]*(([^/\\\\]*?)(\.([^.\\\\/]+?)|))[\\\\/.]*$#m', $path, $pathinfo)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4691)             if (array_key_exists(1, $pathinfo)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4692)                 $ret['dirname'] = $pathinfo[1];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4693)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4694)             if (array_key_exists(2, $pathinfo)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4695)                 $ret['basename'] = $pathinfo[2];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4696)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4697)             if (array_key_exists(5, $pathinfo)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4698)                 $ret['extension'] = $pathinfo[5];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4699)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4700)             if (array_key_exists(3, $pathinfo)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4701)                 $ret['filename'] = $pathinfo[3];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4702)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4703)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4704)         switch ($options) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4705)             case PATHINFO_DIRNAME:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4706)             case 'dirname':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4707)                 return $ret['dirname'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4708)             case PATHINFO_BASENAME:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4709)             case 'basename':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4710)                 return $ret['basename'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4711)             case PATHINFO_EXTENSION:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4712)             case 'extension':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4713)                 return $ret['extension'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4714)             case PATHINFO_FILENAME:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4715)             case 'filename':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4716)                 return $ret['filename'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4717)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4718)                 return $ret;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4719)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4720)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4721) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4722)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4723)      * Set or reset instance properties.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4724)      * You should avoid this function - it's more verbose, less efficient, more error-prone and
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4725)      * harder to debug than setting properties directly.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4726)      * Usage Example:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4727)      * `$mail->set('SMTPSecure', static::ENCRYPTION_STARTTLS);`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4728)      *   is the same as:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4729)      * `$mail->SMTPSecure = static::ENCRYPTION_STARTTLS;`.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4730)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4731)      * @param string $name  The property name to set
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4732)      * @param mixed  $value The value to set the property to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4733)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4734)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4735)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4736)     public function set($name, $value = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4737)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4738)         if (property_exists($this, $name)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4739)             $this->{$name} = $value;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4740) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4741)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4742)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4743)         $this->setError($this->lang('variable_set') . $name);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4744) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4745)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4746)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4747) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4748)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4749)      * Strip newlines to prevent header injection.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4750)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4751)      * @param string $str
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4752)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4753)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4754)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4755)     public function secureHeader($str)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4756)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4757)         return trim(str_replace(["\r", "\n"], '', $str));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4758)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4759) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4760)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4761)      * Normalize line breaks in a string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4762)      * Converts UNIX LF, Mac CR and Windows CRLF line breaks into a single line break format.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4763)      * Defaults to CRLF (for message bodies) and preserves consecutive breaks.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4764)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4765)      * @param string $text
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4766)      * @param string $breaktype What kind of line break to use; defaults to static::$LE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4767)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4768)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4769)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4770)     public static function normalizeBreaks($text, $breaktype = null)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4771)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4772)         if (null === $breaktype) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4773)             $breaktype = static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4774)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4775)         //Normalise to \n
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4776)         $text = str_replace([self::CRLF, "\r"], "\n", $text);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4777)         //Now convert LE as needed
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4778)         if ("\n" !== $breaktype) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4779)             $text = str_replace("\n", $breaktype, $text);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4780)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4781) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4782)         return $text;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4783)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4784) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4785)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4786)      * Remove trailing whitespace from a string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4787)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4788)      * @param string $text
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4789)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4790)      * @return string The text to remove whitespace from
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4791)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4792)     public static function stripTrailingWSP($text)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4793)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4794)         return rtrim($text, " \r\n\t");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4795)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4796) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4797)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4798)      * Strip trailing line breaks from a string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4799)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4800)      * @param string $text
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4801)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4802)      * @return string The text to remove breaks from
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4803)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4804)     public static function stripTrailingBreaks($text)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4805)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4806)         return rtrim($text, "\r\n");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4807)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4808) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4809)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4810)      * Return the current line break format string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4811)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4812)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4813)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4814)     public static function getLE()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4815)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4816)         return static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4817)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4818) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4819)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4820)      * Set the line break format string, e.g. "\r\n".
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4821)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4822)      * @param string $le
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4823)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4824)     protected static function setLE($le)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4825)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4826)         static::$LE = $le;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4827)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4828) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4829)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4830)      * Set the public and private key files and password for S/MIME signing.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4831)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4832)      * @param string $cert_filename
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4833)      * @param string $key_filename
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4834)      * @param string $key_pass            Password for private key
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4835)      * @param string $extracerts_filename Optional path to chain certificate
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4836)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4837)     public function sign($cert_filename, $key_filename, $key_pass, $extracerts_filename = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4838)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4839)         $this->sign_cert_file = $cert_filename;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4840)         $this->sign_key_file = $key_filename;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4841)         $this->sign_key_pass = $key_pass;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4842)         $this->sign_extracerts_file = $extracerts_filename;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4843)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4844) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4845)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4846)      * Quoted-Printable-encode a DKIM header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4847)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4848)      * @param string $txt
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4849)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4850)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4851)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4852)     public function DKIM_QP($txt)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4853)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4854)         $line = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4855)         $len = strlen($txt);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4856)         for ($i = 0; $i < $len; ++$i) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4857)             $ord = ord($txt[$i]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4858)             if (((0x21 <= $ord) && ($ord <= 0x3A)) || $ord === 0x3C || ((0x3E <= $ord) && ($ord <= 0x7E))) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4859)                 $line .= $txt[$i];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4860)             } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4861)                 $line .= '=' . sprintf('%02X', $ord);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4862)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4863)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4864) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4865)         return $line;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4866)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4867) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4868)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4869)      * Generate a DKIM signature.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4870)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4871)      * @param string $signHeader
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4872)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4873)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4874)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4875)      * @return string The DKIM signature value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4876)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4877)     public function DKIM_Sign($signHeader)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4878)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4879)         if (!defined('PKCS7_TEXT')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4880)             if ($this->exceptions) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4881)                 throw new Exception($this->lang('extension_missing') . 'openssl');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4882)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4883) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4884)             return '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4885)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4886)         $privKeyStr = !empty($this->DKIM_private_string) ?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4887)             $this->DKIM_private_string :
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4888)             file_get_contents($this->DKIM_private);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4889)         if ('' !== $this->DKIM_passphrase) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4890)             $privKey = openssl_pkey_get_private($privKeyStr, $this->DKIM_passphrase);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4891)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4892)             $privKey = openssl_pkey_get_private($privKeyStr);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4893)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4894)         if (openssl_sign($signHeader, $signature, $privKey, 'sha256WithRSAEncryption')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4895)             if (\PHP_MAJOR_VERSION < 8) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4896)                 openssl_pkey_free($privKey);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4897)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4898) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4899)             return base64_encode($signature);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4900)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4901)         if (\PHP_MAJOR_VERSION < 8) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4902)             openssl_pkey_free($privKey);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4903)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4904) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4905)         return '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4906)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4907) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4908)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4909)      * Generate a DKIM canonicalization header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4910)      * Uses the 'relaxed' algorithm from RFC6376 section 3.4.2.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4911)      * Canonicalized headers should *always* use CRLF, regardless of mailer setting.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4912)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4913)      * @see https://tools.ietf.org/html/rfc6376#section-3.4.2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4914)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4915)      * @param string $signHeader Header
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4916)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4917)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4918)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4919)     public function DKIM_HeaderC($signHeader)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4920)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4921)         //Normalize breaks to CRLF (regardless of the mailer)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4922)         $signHeader = static::normalizeBreaks($signHeader, self::CRLF);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4923)         //Unfold header lines
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4924)         //Note PCRE \s is too broad a definition of whitespace; RFC5322 defines it as `[ \t]`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4925)         //@see https://tools.ietf.org/html/rfc5322#section-2.2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4926)         //That means this may break if you do something daft like put vertical tabs in your headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4927)         $signHeader = preg_replace('/\r\n[ \t]+/', ' ', $signHeader);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4928)         //Break headers out into an array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4929)         $lines = explode(self::CRLF, $signHeader);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4930)         foreach ($lines as $key => $line) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4931)             //If the header is missing a :, skip it as it's invalid
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4932)             //This is likely to happen because the explode() above will also split
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4933)             //on the trailing LE, leaving an empty line
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4934)             if (strpos($line, ':') === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4935)                 continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4936)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4937)             list($heading, $value) = explode(':', $line, 2);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4938)             //Lower-case header name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4939)             $heading = strtolower($heading);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4940)             //Collapse white space within the value, also convert WSP to space
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4941)             $value = preg_replace('/[ \t]+/', ' ', $value);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4942)             //RFC6376 is slightly unclear here - it says to delete space at the *end* of each value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4943)             //But then says to delete space before and after the colon.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4944)             //Net result is the same as trimming both ends of the value.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4945)             //By elimination, the same applies to the field name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4946)             $lines[$key] = trim($heading, " \t") . ':' . trim($value, " \t");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4947)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4948) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4949)         return implode(self::CRLF, $lines);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4950)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4951) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4952)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4953)      * Generate a DKIM canonicalization body.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4954)      * Uses the 'simple' algorithm from RFC6376 section 3.4.3.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4955)      * Canonicalized bodies should *always* use CRLF, regardless of mailer setting.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4956)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4957)      * @see https://tools.ietf.org/html/rfc6376#section-3.4.3
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4958)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4959)      * @param string $body Message Body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4960)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4961)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4962)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4963)     public function DKIM_BodyC($body)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4964)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4965)         if (empty($body)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4966)             return self::CRLF;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4967)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4968)         //Normalize line endings to CRLF
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4969)         $body = static::normalizeBreaks($body, self::CRLF);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4970) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4971)         //Reduce multiple trailing line breaks to a single one
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4972)         return static::stripTrailingBreaks($body) . self::CRLF;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4973)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4974) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4975)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4976)      * Create the DKIM header and body in a new message header.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4977)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4978)      * @param string $headers_line Header lines
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4979)      * @param string $subject      Subject
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4980)      * @param string $body         Body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4981)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4982)      * @throws Exception
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4983)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4984)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4985)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4986)     public function DKIM_Add($headers_line, $subject, $body)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4987)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4988)         $DKIMsignatureType = 'rsa-sha256'; //Signature & hash algorithms
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4989)         $DKIMcanonicalization = 'relaxed/simple'; //Canonicalization methods of header & body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4990)         $DKIMquery = 'dns/txt'; //Query method
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4991)         $DKIMtime = time();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4992)         //Always sign these headers without being asked
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4993)         //Recommended list from https://tools.ietf.org/html/rfc6376#section-5.4.1
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4994)         $autoSignHeaders = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4995)             'from',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4996)             'to',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4997)             'cc',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4998)             'date',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 4999)             'subject',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5000)             'reply-to',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5001)             'message-id',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5002)             'content-type',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5003)             'mime-version',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5004)             'x-mailer',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5005)         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5006)         if (stripos($headers_line, 'Subject') === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5007)             $headers_line .= 'Subject: ' . $subject . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5008)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5009)         $headerLines = explode(static::$LE, $headers_line);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5010)         $currentHeaderLabel = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5011)         $currentHeaderValue = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5012)         $parsedHeaders = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5013)         $headerLineIndex = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5014)         $headerLineCount = count($headerLines);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5015)         foreach ($headerLines as $headerLine) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5016)             $matches = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5017)             if (preg_match('/^([^ \t]*?)(?::[ \t]*)(.*)$/', $headerLine, $matches)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5018)                 if ($currentHeaderLabel !== '') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5019)                     //We were previously in another header; This is the start of a new header, so save the previous one
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5020)                     $parsedHeaders[] = ['label' => $currentHeaderLabel, 'value' => $currentHeaderValue];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5021)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5022)                 $currentHeaderLabel = $matches[1];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5023)                 $currentHeaderValue = $matches[2];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5024)             } elseif (preg_match('/^[ \t]+(.*)$/', $headerLine, $matches)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5025)                 //This is a folded continuation of the current header, so unfold it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5026)                 $currentHeaderValue .= ' ' . $matches[1];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5027)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5028)             ++$headerLineIndex;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5029)             if ($headerLineIndex >= $headerLineCount) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5030)                 //This was the last line, so finish off this header
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5031)                 $parsedHeaders[] = ['label' => $currentHeaderLabel, 'value' => $currentHeaderValue];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5032)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5033)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5034)         $copiedHeaders = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5035)         $headersToSignKeys = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5036)         $headersToSign = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5037)         foreach ($parsedHeaders as $header) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5038)             //Is this header one that must be included in the DKIM signature?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5039)             if (in_array(strtolower($header['label']), $autoSignHeaders, true)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5040)                 $headersToSignKeys[] = $header['label'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5041)                 $headersToSign[] = $header['label'] . ': ' . $header['value'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5042)                 if ($this->DKIM_copyHeaderFields) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5043)                     $copiedHeaders[] = $header['label'] . ':' . //Note no space after this, as per RFC
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5044)                         str_replace('|', '=7C', $this->DKIM_QP($header['value']));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5045)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5046)                 continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5047)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5048)             //Is this an extra custom header we've been asked to sign?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5049)             if (in_array($header['label'], $this->DKIM_extraHeaders, true)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5050)                 //Find its value in custom headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5051)                 foreach ($this->CustomHeader as $customHeader) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5052)                     if ($customHeader[0] === $header['label']) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5053)                         $headersToSignKeys[] = $header['label'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5054)                         $headersToSign[] = $header['label'] . ': ' . $header['value'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5055)                         if ($this->DKIM_copyHeaderFields) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5056)                             $copiedHeaders[] = $header['label'] . ':' . //Note no space after this, as per RFC
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5057)                                 str_replace('|', '=7C', $this->DKIM_QP($header['value']));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5058)                         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5059)                         //Skip straight to the next header
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5060)                         continue 2;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5061)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5062)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5063)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5064)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5065)         $copiedHeaderFields = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5066)         if ($this->DKIM_copyHeaderFields && count($copiedHeaders) > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5067)             //Assemble a DKIM 'z' tag
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5068)             $copiedHeaderFields = ' z=';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5069)             $first = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5070)             foreach ($copiedHeaders as $copiedHeader) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5071)                 if (!$first) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5072)                     $copiedHeaderFields .= static::$LE . ' |';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5073)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5074)                 //Fold long values
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5075)                 if (strlen($copiedHeader) > self::STD_LINE_LENGTH - 3) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5076)                     $copiedHeaderFields .= substr(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5077)                         chunk_split($copiedHeader, self::STD_LINE_LENGTH - 3, static::$LE . self::FWS),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5078)                         0,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5079)                         -strlen(static::$LE . self::FWS)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5080)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5081)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5082)                     $copiedHeaderFields .= $copiedHeader;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5083)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5084)                 $first = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5085)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5086)             $copiedHeaderFields .= ';' . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5087)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5088)         $headerKeys = ' h=' . implode(':', $headersToSignKeys) . ';' . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5089)         $headerValues = implode(static::$LE, $headersToSign);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5090)         $body = $this->DKIM_BodyC($body);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5091)         //Base64 of packed binary SHA-256 hash of body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5092)         $DKIMb64 = base64_encode(pack('H*', hash('sha256', $body)));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5093)         $ident = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5094)         if ('' !== $this->DKIM_identity) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5095)             $ident = ' i=' . $this->DKIM_identity . ';' . static::$LE;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5096)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5097)         //The DKIM-Signature header is included in the signature *except for* the value of the `b` tag
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5098)         //which is appended after calculating the signature
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5099)         //https://tools.ietf.org/html/rfc6376#section-3.5
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5100)         $dkimSignatureHeader = 'DKIM-Signature: v=1;' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5101)             ' d=' . $this->DKIM_domain . ';' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5102)             ' s=' . $this->DKIM_selector . ';' . static::$LE .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5103)             ' a=' . $DKIMsignatureType . ';' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5104)             ' q=' . $DKIMquery . ';' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5105)             ' t=' . $DKIMtime . ';' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5106)             ' c=' . $DKIMcanonicalization . ';' . static::$LE .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5107)             $headerKeys .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5108)             $ident .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5109)             $copiedHeaderFields .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5110)             ' bh=' . $DKIMb64 . ';' . static::$LE .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5111)             ' b=';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5112)         //Canonicalize the set of headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5113)         $canonicalizedHeaders = $this->DKIM_HeaderC(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5114)             $headerValues . static::$LE . $dkimSignatureHeader
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5115)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5116)         $signature = $this->DKIM_Sign($canonicalizedHeaders);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5117)         $signature = trim(chunk_split($signature, self::STD_LINE_LENGTH - 3, static::$LE . self::FWS));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5118) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5119)         return static::normalizeBreaks($dkimSignatureHeader . $signature);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5120)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5121) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5122)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5123)      * Detect if a string contains a line longer than the maximum line length
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5124)      * allowed by RFC 2822 section 2.1.1.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5125)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5126)      * @param string $str
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5127)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5128)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5129)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5130)     public static function hasLineLongerThanMax($str)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5131)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5132)         return (bool) preg_match('/^(.{' . (self::MAX_LINE_LENGTH + strlen(static::$LE)) . ',})/m', $str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5133)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5134) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5135)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5136)      * If a string contains any "special" characters, double-quote the name,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5137)      * and escape any double quotes with a backslash.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5138)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5139)      * @param string $str
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5140)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5141)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5142)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5143)      * @see RFC822 3.4.1
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5144)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5145)     public static function quotedString($str)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5146)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5147)         if (preg_match('/[ ()<>@,;:"\/\[\]?=]/', $str)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5148)             //If the string contains any of these chars, it must be double-quoted
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5149)             //and any double quotes must be escaped with a backslash
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5150)             return '"' . str_replace('"', '\\"', $str) . '"';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5151)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5152) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5153)         //Return the string untouched, it doesn't need quoting
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5154)         return $str;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5155)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5156) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5157)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5158)      * Allows for public read access to 'to' property.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5159)      * Before the send() call, queued addresses (i.e. with IDN) are not yet included.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5160)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5161)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5162)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5163)     public function getToAddresses()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5164)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5165)         return $this->to;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5166)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5167) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5168)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5169)      * Allows for public read access to 'cc' property.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5170)      * Before the send() call, queued addresses (i.e. with IDN) are not yet included.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5171)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5172)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5173)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5174)     public function getCcAddresses()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5175)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5176)         return $this->cc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5177)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5178) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5179)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5180)      * Allows for public read access to 'bcc' property.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5181)      * Before the send() call, queued addresses (i.e. with IDN) are not yet included.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5182)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5183)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5184)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5185)     public function getBccAddresses()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5186)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5187)         return $this->bcc;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5188)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5189) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5190)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5191)      * Allows for public read access to 'ReplyTo' property.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5192)      * Before the send() call, queued addresses (i.e. with IDN) are not yet included.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5193)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5194)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5195)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5196)     public function getReplyToAddresses()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5197)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5198)         return $this->ReplyTo;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5199)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5200) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5201)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5202)      * Allows for public read access to 'all_recipients' property.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5203)      * Before the send() call, queued addresses (i.e. with IDN) are not yet included.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5204)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5205)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5206)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5207)     public function getAllRecipientAddresses()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5208)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5209)         return $this->all_recipients;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5210)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5211) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5212)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5213)      * Perform a callback.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5214)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5215)      * @param bool   $isSent
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5216)      * @param array  $to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5217)      * @param array  $cc
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5218)      * @param array  $bcc
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5219)      * @param string $subject
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5220)      * @param string $body
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5221)      * @param string $from
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5222)      * @param array  $extra
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5223)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5224)     protected function doCallback($isSent, $to, $cc, $bcc, $subject, $body, $from, $extra)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5225)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5226)         if (!empty($this->action_function) && is_callable($this->action_function)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5227)             call_user_func($this->action_function, $isSent, $to, $cc, $bcc, $subject, $body, $from, $extra);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5228)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5229)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5230) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5231)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5232)      * Get the OAuthTokenProvider instance.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5233)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5234)      * @return OAuthTokenProvider
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5235)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5236)     public function getOAuth()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5237)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5238)         return $this->oauth;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5239)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5240) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5241)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5242)      * Set an OAuthTokenProvider instance.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5243)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5244)     public function setOAuth(OAuthTokenProvider $oauth)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5245)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5246)         $this->oauth = $oauth;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5247)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 5248) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   4)  * PHPMailer POP-Before-SMTP Authentication Class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   5)  * PHP Version 5.5.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   6)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   7)  * @see https://github.com/PHPMailer/PHPMailer/ The PHPMailer GitHub project
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   8)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   9)  * @author    Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  10)  * @author    Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  11)  * @author    Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  12)  * @author    Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  13)  * @copyright 2012 - 2020 Marcus Bointon
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  14)  * @copyright 2010 - 2012 Jim Jagielski
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  15)  * @copyright 2004 - 2009 Andy Prevost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  16)  * @license   https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html GNU Lesser General Public License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  17)  * @note      This program is distributed in the hope that it will be useful - WITHOUT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  18)  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  19)  * FITNESS FOR A PARTICULAR PURPOSE.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  20)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  21) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  22) namespace PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  23) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  24) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  25)  * PHPMailer POP-Before-SMTP Authentication Class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  26)  * Specifically for PHPMailer to use for RFC1939 POP-before-SMTP authentication.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  27)  * 1) This class does not support APOP authentication.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  28)  * 2) Opening and closing lots of POP3 connections can be quite slow. If you need
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  29)  *   to send a batch of emails then just perform the authentication once at the start,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  30)  *   and then loop through your mail sending script. Providing this process doesn't
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  31)  *   take longer than the verification period lasts on your POP3 server, you should be fine.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  32)  * 3) This is really ancient technology; you should only need to use it to talk to very old systems.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  33)  * 4) This POP3 class is deliberately lightweight and incomplete, implementing just
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  34)  *   enough to do authentication.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  35)  *   If you want a more complete class there are other POP3 classes for PHP available.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  36)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  37)  * @author Richard Davey (original author) <rich@corephp.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  38)  * @author Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  39)  * @author Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  40)  * @author Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  41)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  42) class POP3
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  43) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  44)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  45)      * The POP3 PHPMailer Version number.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  46)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  47)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  48)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  49)     const VERSION = '6.9.2';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  50) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  51)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  52)      * Default POP3 port number.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  53)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  54)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  55)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  56)     const DEFAULT_PORT = 110;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  57) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  58)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  59)      * Default timeout in seconds.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  60)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  61)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  62)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  63)     const DEFAULT_TIMEOUT = 30;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  64) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  65)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  66)      * POP3 class debug output mode.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  67)      * Debug output level.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  68)      * Options:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  69)      * @see POP3::DEBUG_OFF: No output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  70)      * @see POP3::DEBUG_SERVER: Server messages, connection/server errors
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  71)      * @see POP3::DEBUG_CLIENT: Client and Server messages, connection/server errors
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  72)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  73)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  74)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  75)     public $do_debug = self::DEBUG_OFF;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  76) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  77)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  78)      * POP3 mail server hostname.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  79)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  80)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  81)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  82)     public $host;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  83) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  84)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  85)      * POP3 port number.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  86)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  87)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  88)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  89)     public $port;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  90) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  91)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  92)      * POP3 Timeout Value in seconds.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  93)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  94)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  95)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  96)     public $tval;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  97) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  98)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  99)      * POP3 username.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 100)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 101)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 102)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 103)     public $username;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 104) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 105)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 106)      * POP3 password.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 107)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 108)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 109)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 110)     public $password;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 111) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 112)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 113)      * Resource handle for the POP3 connection socket.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 114)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 115)      * @var resource
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 116)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 117)     protected $pop_conn;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 118) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 119)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 120)      * Are we connected?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 121)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 122)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 123)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 124)     protected $connected = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 125) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 126)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 127)      * Error container.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 128)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 129)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 130)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 131)     protected $errors = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 132) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 133)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 134)      * Line break constant.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 135)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 136)     const LE = "\r\n";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 137) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 138)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 139)      * Debug level for no output.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 140)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 141)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 142)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 143)     const DEBUG_OFF = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 144) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 145)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 146)      * Debug level to show server -> client messages
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 147)      * also shows clients connection errors or errors from server
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 148)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 149)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 150)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 151)     const DEBUG_SERVER = 1;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 152) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 153)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 154)      * Debug level to show client -> server and server -> client messages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 155)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 156)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 157)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 158)     const DEBUG_CLIENT = 2;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 159) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 160)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 161)      * Simple static wrapper for all-in-one POP before SMTP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 162)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 163)      * @param string   $host        The hostname to connect to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 164)      * @param int|bool $port        The port number to connect to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 165)      * @param int|bool $timeout     The timeout value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 166)      * @param string   $username
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 167)      * @param string   $password
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 168)      * @param int      $debug_level
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 169)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 170)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 171)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 172)     public static function popBeforeSmtp(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 173)         $host,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 174)         $port = false,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 175)         $timeout = false,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 176)         $username = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 177)         $password = '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 178)         $debug_level = 0
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 179)     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 180)         $pop = new self();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 181) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 182)         return $pop->authorise($host, $port, $timeout, $username, $password, $debug_level);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 183)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 184) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 185)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 186)      * Authenticate with a POP3 server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 187)      * A connect, login, disconnect sequence
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 188)      * appropriate for POP-before SMTP authorisation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 189)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 190)      * @param string   $host        The hostname to connect to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 191)      * @param int|bool $port        The port number to connect to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 192)      * @param int|bool $timeout     The timeout value
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 193)      * @param string   $username
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 194)      * @param string   $password
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 195)      * @param int      $debug_level
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 196)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 197)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 198)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 199)     public function authorise($host, $port = false, $timeout = false, $username = '', $password = '', $debug_level = 0)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 200)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 201)         $this->host = $host;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 202)         //If no port value provided, use default
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 203)         if (false === $port) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 204)             $this->port = static::DEFAULT_PORT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 205)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 206)             $this->port = (int) $port;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 207)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 208)         //If no timeout value provided, use default
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 209)         if (false === $timeout) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 210)             $this->tval = static::DEFAULT_TIMEOUT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 211)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 212)             $this->tval = (int) $timeout;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 213)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 214)         $this->do_debug = $debug_level;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 215)         $this->username = $username;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 216)         $this->password = $password;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 217)         //Reset the error log
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 218)         $this->errors = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 219)         //Connect
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 220)         $result = $this->connect($this->host, $this->port, $this->tval);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 221)         if ($result) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 222)             $login_result = $this->login($this->username, $this->password);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 223)             if ($login_result) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 224)                 $this->disconnect();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 225) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 226)                 return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 227)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 228)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 229)         //We need to disconnect regardless of whether the login succeeded
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 230)         $this->disconnect();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 231) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 232)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 233)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 234) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 235)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 236)      * Connect to a POP3 server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 237)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 238)      * @param string   $host
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 239)      * @param int|bool $port
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 240)      * @param int      $tval
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 241)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 242)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 243)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 244)     public function connect($host, $port = false, $tval = 30)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 245)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 246)         //Are we already connected?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 247)         if ($this->connected) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 248)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 249)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 250) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 251)         //On Windows this will raise a PHP Warning error if the hostname doesn't exist.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 252)         //Rather than suppress it with @fsockopen, capture it cleanly instead
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 253)         set_error_handler(function () {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 254)             call_user_func_array([$this, 'catchWarning'], func_get_args());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 255)         });
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 256) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 257)         if (false === $port) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 258)             $port = static::DEFAULT_PORT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 259)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 260) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 261)         //Connect to the POP3 server
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 262)         $errno = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 263)         $errstr = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 264)         $this->pop_conn = fsockopen(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 265)             $host, //POP3 Host
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 266)             $port, //Port #
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 267)             $errno, //Error Number
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 268)             $errstr, //Error Message
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 269)             $tval
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 270)         ); //Timeout (seconds)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 271)         //Restore the error handler
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 272)         restore_error_handler();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 273) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 274)         //Did we connect?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 275)         if (false === $this->pop_conn) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 276)             //It would appear not...
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 277)             $this->setError(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 278)                 "Failed to connect to server $host on port $port. errno: $errno; errstr: $errstr"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 279)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 280) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 281)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 282)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 283) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 284)         //Increase the stream time-out
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 285)         stream_set_timeout($this->pop_conn, $tval, 0);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 286) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 287)         //Get the POP3 server response
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 288)         $pop3_response = $this->getResponse();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 289)         //Check for the +OK
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 290)         if ($this->checkResponse($pop3_response)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 291)             //The connection is established and the POP3 server is talking
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 292)             $this->connected = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 293) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 294)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 295)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 296) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 297)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 298)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 299) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 300)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 301)      * Log in to the POP3 server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 302)      * Does not support APOP (RFC 2828, 4949).
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 303)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 304)      * @param string $username
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 305)      * @param string $password
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 306)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 307)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 308)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 309)     public function login($username = '', $password = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 310)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 311)         if (!$this->connected) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 312)             $this->setError('Not connected to POP3 server');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 313)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 314)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 315)         if (empty($username)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 316)             $username = $this->username;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 317)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 318)         if (empty($password)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 319)             $password = $this->password;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 320)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 321) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 322)         //Send the Username
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 323)         $this->sendString("USER $username" . static::LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 324)         $pop3_response = $this->getResponse();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 325)         if ($this->checkResponse($pop3_response)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 326)             //Send the Password
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 327)             $this->sendString("PASS $password" . static::LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 328)             $pop3_response = $this->getResponse();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 329)             if ($this->checkResponse($pop3_response)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 330)                 return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 331)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 332)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 333) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 334)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 335)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 336) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 337)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 338)      * Disconnect from the POP3 server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 339)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 340)     public function disconnect()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 341)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 342)         // If could not connect at all, no need to disconnect
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 343)         if ($this->pop_conn === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 344)             return;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 345)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 346) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 347)         $this->sendString('QUIT' . static::LE);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 348) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 349)         // RFC 1939 shows POP3 server sending a +OK response to the QUIT command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 350)         // Try to get it.  Ignore any failures here.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 351)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 352)             $this->getResponse();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 353)         } catch (Exception $e) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 354)             //Do nothing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 355)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 356) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 357)         //The QUIT command may cause the daemon to exit, which will kill our connection
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 358)         //So ignore errors here
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 359)         try {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 360)             @fclose($this->pop_conn);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 361)         } catch (Exception $e) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 362)             //Do nothing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 363)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 364) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 365)         // Clean up attributes.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 366)         $this->connected = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 367)         $this->pop_conn  = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 368)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 369) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 370)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 371)      * Get a response from the POP3 server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 372)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 373)      * @param int $size The maximum number of bytes to retrieve
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 374)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 375)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 376)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 377)     protected function getResponse($size = 128)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 378)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 379)         $response = fgets($this->pop_conn, $size);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 380)         if ($this->do_debug >= self::DEBUG_SERVER) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 381)             echo 'Server -> Client: ', $response;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 382)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 383) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 384)         return $response;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 385)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 386) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 387)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 388)      * Send raw data to the POP3 server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 389)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 390)      * @param string $string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 391)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 392)      * @return int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 393)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 394)     protected function sendString($string)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 395)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 396)         if ($this->pop_conn) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 397)             if ($this->do_debug >= self::DEBUG_CLIENT) { //Show client messages when debug >= 2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 398)                 echo 'Client -> Server: ', $string;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 399)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 400) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 401)             return fwrite($this->pop_conn, $string, strlen($string));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 402)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 403) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 404)         return 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 405)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 406) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 407)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 408)      * Checks the POP3 server response.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 409)      * Looks for for +OK or -ERR.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 410)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 411)      * @param string $string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 412)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 413)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 414)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 415)     protected function checkResponse($string)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 416)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 417)         if (strpos($string, '+OK') !== 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 418)             $this->setError("Server reported an error: $string");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 419) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 420)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 421)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 422) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 423)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 424)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 425) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 426)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 427)      * Add an error to the internal error store.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 428)      * Also display debug output if it's enabled.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 429)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 430)      * @param string $error
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 431)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 432)     protected function setError($error)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 433)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 434)         $this->errors[] = $error;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 435)         if ($this->do_debug >= self::DEBUG_SERVER) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 436)             echo '<pre>';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 437)             foreach ($this->errors as $e) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 438)                 print_r($e);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 439)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 440)             echo '</pre>';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 441)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 442)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 443) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 444)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 445)      * Get an array of error messages, if any.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 446)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 447)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 448)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 449)     public function getErrors()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 450)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 451)         return $this->errors;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 452)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 453) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 454)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 455)      * POP3 connection error handler.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 456)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 457)      * @param int    $errno
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 458)      * @param string $errstr
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 459)      * @param string $errfile
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 460)      * @param int    $errline
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 461)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 462)     protected function catchWarning($errno, $errstr, $errfile, $errline)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 463)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 464)         $this->setError(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 465)             'Connecting to the POP3 server raised a PHP warning:' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 466)             "errno: $errno errstr: $errstr; errfile: $errfile; errline: $errline"
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 467)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 468)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 469) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    1) <?php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    2) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    3) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    4)  * PHPMailer RFC821 SMTP email transport class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    5)  * PHP Version 5.5.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    6)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    7)  * @see       https://github.com/PHPMailer/PHPMailer/ The PHPMailer GitHub project
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    8)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400    9)  * @author    Marcus Bointon (Synchro/coolbru) <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   10)  * @author    Jim Jagielski (jimjag) <jimjag@gmail.com>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   11)  * @author    Andy Prevost (codeworxtech) <codeworxtech@users.sourceforge.net>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   12)  * @author    Brent R. Matzelle (original founder)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   13)  * @copyright 2012 - 2020 Marcus Bointon
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   14)  * @copyright 2010 - 2012 Jim Jagielski
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   15)  * @copyright 2004 - 2009 Andy Prevost
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   16)  * @license   https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html GNU Lesser General Public License
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   17)  * @note      This program is distributed in the hope that it will be useful - WITHOUT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   18)  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   19)  * FITNESS FOR A PARTICULAR PURPOSE.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   20)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   21) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   22) namespace PHPMailer\PHPMailer;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   23) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   24) /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   25)  * PHPMailer RFC821 SMTP email transport class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   26)  * Implements RFC 821 SMTP commands and provides some utility methods for sending mail to an SMTP server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   27)  *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   28)  * @author Chris Ryan
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   29)  * @author Marcus Bointon <phpmailer@synchromedia.co.uk>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   30)  */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   31) class SMTP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   32) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   33)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   34)      * The PHPMailer SMTP version number.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   35)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   36)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   37)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   38)     const VERSION = '6.9.2';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   39) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   40)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   41)      * SMTP line break constant.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   42)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   43)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   44)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   45)     const LE = "\r\n";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   46) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   47)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   48)      * The SMTP port to use if one is not specified.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   49)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   50)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   51)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   52)     const DEFAULT_PORT = 25;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   53) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   54)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   55)      * The SMTPs port to use if one is not specified.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   56)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   57)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   58)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   59)     const DEFAULT_SECURE_PORT = 465;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   60) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   61)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   62)      * The maximum line length allowed by RFC 5321 section 4.5.3.1.6,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   63)      * *excluding* a trailing CRLF break.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   64)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   65)      * @see https://tools.ietf.org/html/rfc5321#section-4.5.3.1.6
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   66)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   67)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   68)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   69)     const MAX_LINE_LENGTH = 998;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   70) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   71)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   72)      * The maximum line length allowed for replies in RFC 5321 section 4.5.3.1.5,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   73)      * *including* a trailing CRLF line break.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   74)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   75)      * @see https://tools.ietf.org/html/rfc5321#section-4.5.3.1.5
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   76)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   77)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   78)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   79)     const MAX_REPLY_LENGTH = 512;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   80) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   81)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   82)      * Debug level for no output.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   83)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   84)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   85)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   86)     const DEBUG_OFF = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   87) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   88)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   89)      * Debug level to show client -> server messages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   90)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   91)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   92)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   93)     const DEBUG_CLIENT = 1;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   94) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   95)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   96)      * Debug level to show client -> server and server -> client messages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   97)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   98)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400   99)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  100)     const DEBUG_SERVER = 2;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  101) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  102)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  103)      * Debug level to show connection status, client -> server and server -> client messages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  104)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  105)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  106)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  107)     const DEBUG_CONNECTION = 3;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  108) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  109)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  110)      * Debug level to show all messages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  111)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  112)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  113)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  114)     const DEBUG_LOWLEVEL = 4;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  115) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  116)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  117)      * Debug output level.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  118)      * Options:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  119)      * * self::DEBUG_OFF (`0`) No debug output, default
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  120)      * * self::DEBUG_CLIENT (`1`) Client commands
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  121)      * * self::DEBUG_SERVER (`2`) Client commands and server responses
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  122)      * * self::DEBUG_CONNECTION (`3`) As DEBUG_SERVER plus connection status
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  123)      * * self::DEBUG_LOWLEVEL (`4`) Low-level data output, all messages.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  124)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  125)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  126)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  127)     public $do_debug = self::DEBUG_OFF;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  128) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  129)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  130)      * How to handle debug output.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  131)      * Options:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  132)      * * `echo` Output plain-text as-is, appropriate for CLI
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  133)      * * `html` Output escaped, line breaks converted to `<br>`, appropriate for browser output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  134)      * * `error_log` Output to error log as configured in php.ini
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  135)      * Alternatively, you can provide a callable expecting two params: a message string and the debug level:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  136)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  137)      * ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  138)      * $smtp->Debugoutput = function($str, $level) {echo "debug level $level; message: $str";};
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  139)      * ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  140)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  141)      * Alternatively, you can pass in an instance of a PSR-3 compatible logger, though only `debug`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  142)      * level output is used:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  143)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  144)      * ```php
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  145)      * $mail->Debugoutput = new myPsr3Logger;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  146)      * ```
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  147)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  148)      * @var string|callable|\Psr\Log\LoggerInterface
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  149)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  150)     public $Debugoutput = 'echo';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  151) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  152)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  153)      * Whether to use VERP.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  154)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  155)      * @see https://en.wikipedia.org/wiki/Variable_envelope_return_path
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  156)      * @see https://www.postfix.org/VERP_README.html Info on VERP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  157)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  158)      * @var bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  159)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  160)     public $do_verp = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  161) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  162)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  163)      * The timeout value for connection, in seconds.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  164)      * Default of 5 minutes (300sec) is from RFC2821 section 4.5.3.2.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  165)      * This needs to be quite high to function correctly with hosts using greetdelay as an anti-spam measure.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  166)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  167)      * @see https://www.rfc-editor.org/rfc/rfc2821#section-4.5.3.2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  168)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  169)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  170)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  171)     public $Timeout = 300;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  172) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  173)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  174)      * How long to wait for commands to complete, in seconds.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  175)      * Default of 5 minutes (300sec) is from RFC2821 section 4.5.3.2.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  176)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  177)      * @var int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  178)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  179)     public $Timelimit = 300;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  180) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  181)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  182)      * Patterns to extract an SMTP transaction id from reply to a DATA command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  183)      * The first capture group in each regex will be used as the ID.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  184)      * MS ESMTP returns the message ID, which may not be correct for internal tracking.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  185)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  186)      * @var string[]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  187)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  188)     protected $smtp_transaction_id_patterns = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  189)         'exim' => '/[\d]{3} OK id=(.*)/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  190)         'sendmail' => '/[\d]{3} 2\.0\.0 (.*) Message/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  191)         'postfix' => '/[\d]{3} 2\.0\.0 Ok: queued as (.*)/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  192)         'Microsoft_ESMTP' => '/[0-9]{3} 2\.[\d]\.0 (.*)@(?:.*) Queued mail for delivery/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  193)         'Amazon_SES' => '/[\d]{3} Ok (.*)/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  194)         'SendGrid' => '/[\d]{3} Ok: queued as (.*)/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  195)         'CampaignMonitor' => '/[\d]{3} 2\.0\.0 OK:([a-zA-Z\d]{48})/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  196)         'Haraka' => '/[\d]{3} Message Queued \((.*)\)/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  197)         'ZoneMTA' => '/[\d]{3} Message queued as (.*)/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  198)         'Mailjet' => '/[\d]{3} OK queued as (.*)/',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  199)     ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  200) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  201)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  202)      * Allowed SMTP XCLIENT attributes.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  203)      * Must be allowed by the SMTP server. EHLO response is not checked.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  204)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  205)      * @see https://www.postfix.org/XCLIENT_README.html
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  206)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  207)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  208)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  209)     public static $xclient_allowed_attributes = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  210)         'NAME', 'ADDR', 'PORT', 'PROTO', 'HELO', 'LOGIN', 'DESTADDR', 'DESTPORT'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  211)     ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  212) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  213)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  214)      * The last transaction ID issued in response to a DATA command,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  215)      * if one was detected.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  216)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  217)      * @var string|bool|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  218)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  219)     protected $last_smtp_transaction_id;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  220) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  221)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  222)      * The socket for the server connection.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  223)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  224)      * @var ?resource
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  225)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  226)     protected $smtp_conn;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  227) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  228)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  229)      * Error information, if any, for the last SMTP command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  230)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  231)      * @var array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  232)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  233)     protected $error = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  234)         'error' => '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  235)         'detail' => '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  236)         'smtp_code' => '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  237)         'smtp_code_ex' => '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  238)     ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  239) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  240)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  241)      * The reply the server sent to us for HELO.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  242)      * If null, no HELO string has yet been received.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  243)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  244)      * @var string|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  245)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  246)     protected $helo_rply;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  247) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  248)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  249)      * The set of SMTP extensions sent in reply to EHLO command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  250)      * Indexes of the array are extension names.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  251)      * Value at index 'HELO' or 'EHLO' (according to command that was sent)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  252)      * represents the server name. In case of HELO it is the only element of the array.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  253)      * Other values can be boolean TRUE or an array containing extension options.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  254)      * If null, no HELO/EHLO string has yet been received.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  255)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  256)      * @var array|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  257)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  258)     protected $server_caps;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  259) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  260)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  261)      * The most recent reply received from the server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  262)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  263)      * @var string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  264)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  265)     protected $last_reply = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  266) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  267)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  268)      * Output debugging info via a user-selected method.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  269)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  270)      * @param string $str   Debug string to output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  271)      * @param int    $level The debug level of this message; see DEBUG_* constants
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  272)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  273)      * @see SMTP::$Debugoutput
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  274)      * @see SMTP::$do_debug
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  275)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  276)     protected function edebug($str, $level = 0)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  277)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  278)         if ($level > $this->do_debug) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  279)             return;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  280)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  281)         //Is this a PSR-3 logger?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  282)         if ($this->Debugoutput instanceof \Psr\Log\LoggerInterface) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  283)             //Remove trailing line breaks potentially added by calls to SMTP::client_send()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  284)             $this->Debugoutput->debug(rtrim($str, "\r\n"));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  285) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  286)             return;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  287)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  288)         //Avoid clash with built-in function names
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  289)         if (is_callable($this->Debugoutput) && !in_array($this->Debugoutput, ['error_log', 'html', 'echo'])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  290)             call_user_func($this->Debugoutput, $str, $level);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  291) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  292)             return;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  293)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  294)         switch ($this->Debugoutput) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  295)             case 'error_log':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  296)                 //Don't output, just log
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  297)                 /** @noinspection ForgottenDebugOutputInspection */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  298)                 error_log($str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  299)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  300)             case 'html':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  301)                 //Cleans up output a bit for a better looking, HTML-safe output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  302)                 echo gmdate('Y-m-d H:i:s'), ' ', htmlentities(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  303)                     preg_replace('/[\r\n]+/', '', $str),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  304)                     ENT_QUOTES,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  305)                     'UTF-8'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  306)                 ), "<br>\n";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  307)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  308)             case 'echo':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  309)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  310)                 //Normalize line breaks
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  311)                 $str = preg_replace('/\r\n|\r/m', "\n", $str);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  312)                 echo gmdate('Y-m-d H:i:s'),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  313)                 "\t",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  314)                     //Trim trailing space
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  315)                 trim(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  316)                     //Indent for readability, except for trailing break
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  317)                     str_replace(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  318)                         "\n",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  319)                         "\n                   \t                  ",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  320)                         trim($str)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  321)                     )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  322)                 ),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  323)                 "\n";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  324)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  325)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  326) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  327)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  328)      * Connect to an SMTP server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  329)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  330)      * @param string $host    SMTP server IP or host name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  331)      * @param int    $port    The port number to connect to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  332)      * @param int    $timeout How long to wait for the connection to open
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  333)      * @param array  $options An array of options for stream_context_create()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  334)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  335)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  336)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  337)     public function connect($host, $port = null, $timeout = 30, $options = [])
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  338)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  339)         //Clear errors to avoid confusion
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  340)         $this->setError('');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  341)         //Make sure we are __not__ connected
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  342)         if ($this->connected()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  343)             //Already connected, generate error
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  344)             $this->setError('Already connected to a server');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  345) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  346)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  347)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  348)         if (empty($port)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  349)             $port = self::DEFAULT_PORT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  350)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  351)         //Connect to the SMTP server
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  352)         $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  353)             "Connection: opening to $host:$port, timeout=$timeout, options=" .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  354)             (count($options) > 0 ? var_export($options, true) : 'array()'),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  355)             self::DEBUG_CONNECTION
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  356)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  357) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  358)         $this->smtp_conn = $this->getSMTPConnection($host, $port, $timeout, $options);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  359) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  360)         if ($this->smtp_conn === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  361)             //Error info already set inside `getSMTPConnection()`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  362)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  363)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  364) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  365)         $this->edebug('Connection: opened', self::DEBUG_CONNECTION);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  366) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  367)         //Get any announcement
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  368)         $this->last_reply = $this->get_lines();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  369)         $this->edebug('SERVER -> CLIENT: ' . $this->last_reply, self::DEBUG_SERVER);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  370)         $responseCode = (int)substr($this->last_reply, 0, 3);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  371)         if ($responseCode === 220) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  372)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  373)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  374)         //Anything other than a 220 response means something went wrong
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  375)         //RFC 5321 says the server will wait for us to send a QUIT in response to a 554 error
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  376)         //https://tools.ietf.org/html/rfc5321#section-3.1
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  377)         if ($responseCode === 554) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  378)             $this->quit();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  379)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  380)         //This will handle 421 responses which may not wait for a QUIT (e.g. if the server is being shut down)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  381)         $this->edebug('Connection: closing due to error', self::DEBUG_CONNECTION);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  382)         $this->close();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  383)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  384)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  385) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  386)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  387)      * Create connection to the SMTP server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  388)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  389)      * @param string $host    SMTP server IP or host name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  390)      * @param int    $port    The port number to connect to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  391)      * @param int    $timeout How long to wait for the connection to open
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  392)      * @param array  $options An array of options for stream_context_create()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  393)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  394)      * @return false|resource
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  395)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  396)     protected function getSMTPConnection($host, $port = null, $timeout = 30, $options = [])
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  397)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  398)         static $streamok;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  399)         //This is enabled by default since 5.0.0 but some providers disable it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  400)         //Check this once and cache the result
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  401)         if (null === $streamok) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  402)             $streamok = function_exists('stream_socket_client');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  403)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  404) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  405)         $errno = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  406)         $errstr = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  407)         if ($streamok) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  408)             $socket_context = stream_context_create($options);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  409)             set_error_handler(function () {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  410)                 call_user_func_array([$this, 'errorHandler'], func_get_args());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  411)             });
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  412)             $connection = stream_socket_client(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  413)                 $host . ':' . $port,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  414)                 $errno,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  415)                 $errstr,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  416)                 $timeout,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  417)                 STREAM_CLIENT_CONNECT,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  418)                 $socket_context
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  419)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  420)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  421)             //Fall back to fsockopen which should work in more places, but is missing some features
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  422)             $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  423)                 'Connection: stream_socket_client not available, falling back to fsockopen',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  424)                 self::DEBUG_CONNECTION
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  425)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  426)             set_error_handler(function () {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  427)                 call_user_func_array([$this, 'errorHandler'], func_get_args());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  428)             });
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  429)             $connection = fsockopen(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  430)                 $host,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  431)                 $port,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  432)                 $errno,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  433)                 $errstr,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  434)                 $timeout
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  435)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  436)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  437)         restore_error_handler();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  438) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  439)         //Verify we connected properly
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  440)         if (!is_resource($connection)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  441)             $this->setError(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  442)                 'Failed to connect to server',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  443)                 '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  444)                 (string) $errno,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  445)                 $errstr
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  446)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  447)             $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  448)                 'SMTP ERROR: ' . $this->error['error']
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  449)                 . ": $errstr ($errno)",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  450)                 self::DEBUG_CLIENT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  451)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  452) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  453)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  454)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  455) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  456)         //SMTP server can take longer to respond, give longer timeout for first read
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  457)         //Windows does not have support for this timeout function
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  458)         if (strpos(PHP_OS, 'WIN') !== 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  459)             $max = (int)ini_get('max_execution_time');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  460)             //Don't bother if unlimited, or if set_time_limit is disabled
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  461)             if (0 !== $max && $timeout > $max && strpos(ini_get('disable_functions'), 'set_time_limit') === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  462)                 @set_time_limit($timeout);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  463)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  464)             stream_set_timeout($connection, $timeout, 0);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  465)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  466) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  467)         return $connection;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  468)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  469) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  470)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  471)      * Initiate a TLS (encrypted) session.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  472)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  473)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  474)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  475)     public function startTLS()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  476)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  477)         if (!$this->sendCommand('STARTTLS', 'STARTTLS', 220)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  478)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  479)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  480) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  481)         //Allow the best TLS version(s) we can
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  482)         $crypto_method = STREAM_CRYPTO_METHOD_TLS_CLIENT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  483) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  484)         //PHP 5.6.7 dropped inclusion of TLS 1.1 and 1.2 in STREAM_CRYPTO_METHOD_TLS_CLIENT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  485)         //so add them back in manually if we can
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  486)         if (defined('STREAM_CRYPTO_METHOD_TLSv1_2_CLIENT')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  487)             $crypto_method |= STREAM_CRYPTO_METHOD_TLSv1_2_CLIENT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  488)             $crypto_method |= STREAM_CRYPTO_METHOD_TLSv1_1_CLIENT;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  489)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  490) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  491)         //Begin encrypted connection
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  492)             set_error_handler(function () {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  493)                 call_user_func_array([$this, 'errorHandler'], func_get_args());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  494)             });
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  495)         $crypto_ok = stream_socket_enable_crypto(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  496)             $this->smtp_conn,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  497)             true,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  498)             $crypto_method
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  499)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  500)         restore_error_handler();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  501) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  502)         return (bool) $crypto_ok;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  503)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  504) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  505)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  506)      * Perform SMTP authentication.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  507)      * Must be run after hello().
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  508)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  509)      * @see    hello()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  510)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  511)      * @param string $username The user name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  512)      * @param string $password The password
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  513)      * @param string $authtype The auth type (CRAM-MD5, PLAIN, LOGIN, XOAUTH2)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  514)      * @param OAuthTokenProvider $OAuth An optional OAuthTokenProvider instance for XOAUTH2 authentication
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  515)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  516)      * @return bool True if successfully authenticated
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  517)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  518)     public function authenticate(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  519)         $username,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  520)         $password,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  521)         $authtype = null,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  522)         $OAuth = null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  523)     ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  524)         if (!$this->server_caps) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  525)             $this->setError('Authentication is not allowed before HELO/EHLO');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  526) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  527)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  528)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  529) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  530)         if (array_key_exists('EHLO', $this->server_caps)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  531)             //SMTP extensions are available; try to find a proper authentication method
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  532)             if (!array_key_exists('AUTH', $this->server_caps)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  533)                 $this->setError('Authentication is not allowed at this stage');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  534)                 //'at this stage' means that auth may be allowed after the stage changes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  535)                 //e.g. after STARTTLS
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  536) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  537)                 return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  538)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  539) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  540)             $this->edebug('Auth method requested: ' . ($authtype ?: 'UNSPECIFIED'), self::DEBUG_LOWLEVEL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  541)             $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  542)                 'Auth methods available on the server: ' . implode(',', $this->server_caps['AUTH']),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  543)                 self::DEBUG_LOWLEVEL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  544)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  545) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  546)             //If we have requested a specific auth type, check the server supports it before trying others
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  547)             if (null !== $authtype && !in_array($authtype, $this->server_caps['AUTH'], true)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  548)                 $this->edebug('Requested auth method not available: ' . $authtype, self::DEBUG_LOWLEVEL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  549)                 $authtype = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  550)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  551) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  552)             if (empty($authtype)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  553)                 //If no auth mechanism is specified, attempt to use these, in this order
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  554)                 //Try CRAM-MD5 first as it's more secure than the others
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  555)                 foreach (['CRAM-MD5', 'LOGIN', 'PLAIN', 'XOAUTH2'] as $method) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  556)                     if (in_array($method, $this->server_caps['AUTH'], true)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  557)                         $authtype = $method;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  558)                         break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  559)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  560)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  561)                 if (empty($authtype)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  562)                     $this->setError('No supported authentication methods found');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  563) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  564)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  565)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  566)                 $this->edebug('Auth method selected: ' . $authtype, self::DEBUG_LOWLEVEL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  567)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  568) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  569)             if (!in_array($authtype, $this->server_caps['AUTH'], true)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  570)                 $this->setError("The requested authentication method \"$authtype\" is not supported by the server");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  571) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  572)                 return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  573)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  574)         } elseif (empty($authtype)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  575)             $authtype = 'LOGIN';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  576)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  577)         switch ($authtype) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  578)             case 'PLAIN':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  579)                 //Start authentication
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  580)                 if (!$this->sendCommand('AUTH', 'AUTH PLAIN', 334)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  581)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  582)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  583)                 //Send encoded username and password
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  584)                 if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  585)                     //Format from https://tools.ietf.org/html/rfc4616#section-2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  586)                     //We skip the first field (it's forgery), so the string starts with a null byte
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  587)                     !$this->sendCommand(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  588)                         'User & Password',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  589)                         base64_encode("\0" . $username . "\0" . $password),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  590)                         235
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  591)                     )
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  592)                 ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  593)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  594)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  595)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  596)             case 'LOGIN':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  597)                 //Start authentication
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  598)                 if (!$this->sendCommand('AUTH', 'AUTH LOGIN', 334)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  599)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  600)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  601)                 if (!$this->sendCommand('Username', base64_encode($username), 334)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  602)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  603)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  604)                 if (!$this->sendCommand('Password', base64_encode($password), 235)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  605)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  606)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  607)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  608)             case 'CRAM-MD5':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  609)                 //Start authentication
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  610)                 if (!$this->sendCommand('AUTH CRAM-MD5', 'AUTH CRAM-MD5', 334)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  611)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  612)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  613)                 //Get the challenge
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  614)                 $challenge = base64_decode(substr($this->last_reply, 4));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  615) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  616)                 //Build the response
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  617)                 $response = $username . ' ' . $this->hmac($challenge, $password);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  618) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  619)                 //send encoded credentials
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  620)                 return $this->sendCommand('Username', base64_encode($response), 235);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  621)             case 'XOAUTH2':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  622)                 //The OAuth instance must be set up prior to requesting auth.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  623)                 if (null === $OAuth) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  624)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  625)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  626)                 $oauth = $OAuth->getOauth64();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  627) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  628)                 //Start authentication
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  629)                 if (!$this->sendCommand('AUTH', 'AUTH XOAUTH2 ' . $oauth, 235)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  630)                     return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  631)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  632)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  633)             default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  634)                 $this->setError("Authentication method \"$authtype\" is not supported");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  635) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  636)                 return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  637)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  638) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  639)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  640)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  641) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  642)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  643)      * Calculate an MD5 HMAC hash.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  644)      * Works like hash_hmac('md5', $data, $key)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  645)      * in case that function is not available.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  646)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  647)      * @param string $data The data to hash
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  648)      * @param string $key  The key to hash with
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  649)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  650)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  651)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  652)     protected function hmac($data, $key)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  653)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  654)         if (function_exists('hash_hmac')) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  655)             return hash_hmac('md5', $data, $key);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  656)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  657) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  658)         //The following borrowed from
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  659)         //https://www.php.net/manual/en/function.mhash.php#27225
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  660) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  661)         //RFC 2104 HMAC implementation for php.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  662)         //Creates an md5 HMAC.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  663)         //Eliminates the need to install mhash to compute a HMAC
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  664)         //by Lance Rushing
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  665) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  666)         $bytelen = 64; //byte length for md5
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  667)         if (strlen($key) > $bytelen) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  668)             $key = pack('H*', md5($key));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  669)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  670)         $key = str_pad($key, $bytelen, chr(0x00));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  671)         $ipad = str_pad('', $bytelen, chr(0x36));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  672)         $opad = str_pad('', $bytelen, chr(0x5c));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  673)         $k_ipad = $key ^ $ipad;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  674)         $k_opad = $key ^ $opad;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  675) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  676)         return md5($k_opad . pack('H*', md5($k_ipad . $data)));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  677)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  678) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  679)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  680)      * Check connection state.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  681)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  682)      * @return bool True if connected
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  683)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  684)     public function connected()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  685)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  686)         if (is_resource($this->smtp_conn)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  687)             $sock_status = stream_get_meta_data($this->smtp_conn);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  688)             if ($sock_status['eof']) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  689)                 //The socket is valid but we are not connected
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  690)                 $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  691)                     'SMTP NOTICE: EOF caught while checking if connected',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  692)                     self::DEBUG_CLIENT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  693)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  694)                 $this->close();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  695) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  696)                 return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  697)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  698) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  699)             return true; //everything looks good
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  700)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  701) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  702)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  703)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  704) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  705)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  706)      * Close the socket and clean up the state of the class.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  707)      * Don't use this function without first trying to use QUIT.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  708)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  709)      * @see quit()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  710)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  711)     public function close()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  712)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  713)         $this->server_caps = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  714)         $this->helo_rply = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  715)         if (is_resource($this->smtp_conn)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  716)             //Close the connection and cleanup
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  717)             fclose($this->smtp_conn);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  718)             $this->smtp_conn = null; //Makes for cleaner serialization
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  719)             $this->edebug('Connection: closed', self::DEBUG_CONNECTION);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  720)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  721)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  722) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  723)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  724)      * Send an SMTP DATA command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  725)      * Issues a data command and sends the msg_data to the server,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  726)      * finalizing the mail transaction. $msg_data is the message
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  727)      * that is to be sent with the headers. Each header needs to be
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  728)      * on a single line followed by a <CRLF> with the message headers
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  729)      * and the message body being separated by an additional <CRLF>.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  730)      * Implements RFC 821: DATA <CRLF>.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  731)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  732)      * @param string $msg_data Message data to send
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  733)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  734)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  735)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  736)     public function data($msg_data)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  737)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  738)         //This will use the standard timelimit
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  739)         if (!$this->sendCommand('DATA', 'DATA', 354)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  740)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  741)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  742) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  743)         /* The server is ready to accept data!
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  744)          * According to rfc821 we should not send more than 1000 characters on a single line (including the LE)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  745)          * so we will break the data up into lines by \r and/or \n then if needed we will break each of those into
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  746)          * smaller lines to fit within the limit.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  747)          * We will also look for lines that start with a '.' and prepend an additional '.'.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  748)          * NOTE: this does not count towards line-length limit.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  749)          */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  750) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  751)         //Normalize line breaks before exploding
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  752)         $lines = explode("\n", str_replace(["\r\n", "\r"], "\n", $msg_data));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  753) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  754)         /* To distinguish between a complete RFC822 message and a plain message body, we check if the first field
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  755)          * of the first line (':' separated) does not contain a space then it _should_ be a header, and we will
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  756)          * process all lines before a blank line as headers.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  757)          */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  758) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  759)         $field = substr($lines[0], 0, strpos($lines[0], ':'));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  760)         $in_headers = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  761)         if (!empty($field) && strpos($field, ' ') === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  762)             $in_headers = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  763)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  764) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  765)         foreach ($lines as $line) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  766)             $lines_out = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  767)             if ($in_headers && $line === '') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  768)                 $in_headers = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  769)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  770)             //Break this line up into several smaller lines if it's too long
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  771)             //Micro-optimisation: isset($str[$len]) is faster than (strlen($str) > $len),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  772)             while (isset($line[self::MAX_LINE_LENGTH])) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  773)                 //Working backwards, try to find a space within the last MAX_LINE_LENGTH chars of the line to break on
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  774)                 //so as to avoid breaking in the middle of a word
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  775)                 $pos = strrpos(substr($line, 0, self::MAX_LINE_LENGTH), ' ');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  776)                 //Deliberately matches both false and 0
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  777)                 if (!$pos) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  778)                     //No nice break found, add a hard break
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  779)                     $pos = self::MAX_LINE_LENGTH - 1;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  780)                     $lines_out[] = substr($line, 0, $pos);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  781)                     $line = substr($line, $pos);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  782)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  783)                     //Break at the found point
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  784)                     $lines_out[] = substr($line, 0, $pos);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  785)                     //Move along by the amount we dealt with
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  786)                     $line = substr($line, $pos + 1);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  787)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  788)                 //If processing headers add a LWSP-char to the front of new line RFC822 section 3.1.1
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  789)                 if ($in_headers) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  790)                     $line = "\t" . $line;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  791)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  792)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  793)             $lines_out[] = $line;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  794) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  795)             //Send the lines to the server
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  796)             foreach ($lines_out as $line_out) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  797)                 //Dot-stuffing as per RFC5321 section 4.5.2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  798)                 //https://tools.ietf.org/html/rfc5321#section-4.5.2
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  799)                 if (!empty($line_out) && $line_out[0] === '.') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  800)                     $line_out = '.' . $line_out;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  801)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  802)                 $this->client_send($line_out . static::LE, 'DATA');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  803)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  804)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  805) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  806)         //Message data has been sent, complete the command
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  807)         //Increase timelimit for end of DATA command
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  808)         $savetimelimit = $this->Timelimit;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  809)         $this->Timelimit *= 2;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  810)         $result = $this->sendCommand('DATA END', '.', 250);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  811)         $this->recordLastTransactionID();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  812)         //Restore timelimit
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  813)         $this->Timelimit = $savetimelimit;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  814) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  815)         return $result;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  816)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  817) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  818)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  819)      * Send an SMTP HELO or EHLO command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  820)      * Used to identify the sending server to the receiving server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  821)      * This makes sure that client and server are in a known state.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  822)      * Implements RFC 821: HELO <SP> <domain> <CRLF>
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  823)      * and RFC 2821 EHLO.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  824)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  825)      * @param string $host The host name or IP to connect to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  826)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  827)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  828)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  829)     public function hello($host = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  830)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  831)         //Try extended hello first (RFC 2821)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  832)         if ($this->sendHello('EHLO', $host)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  833)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  834)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  835) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  836)         //Some servers shut down the SMTP service here (RFC 5321)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  837)         if (substr($this->helo_rply, 0, 3) == '421') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  838)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  839)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  840) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  841)         return $this->sendHello('HELO', $host);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  842)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  843) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  844)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  845)      * Send an SMTP HELO or EHLO command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  846)      * Low-level implementation used by hello().
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  847)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  848)      * @param string $hello The HELO string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  849)      * @param string $host  The hostname to say we are
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  850)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  851)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  852)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  853)      * @see hello()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  854)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  855)     protected function sendHello($hello, $host)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  856)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  857)         $noerror = $this->sendCommand($hello, $hello . ' ' . $host, 250);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  858)         $this->helo_rply = $this->last_reply;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  859)         if ($noerror) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  860)             $this->parseHelloFields($hello);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  861)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  862)             $this->server_caps = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  863)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  864) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  865)         return $noerror;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  866)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  867) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  868)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  869)      * Parse a reply to HELO/EHLO command to discover server extensions.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  870)      * In case of HELO, the only parameter that can be discovered is a server name.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  871)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  872)      * @param string $type `HELO` or `EHLO`
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  873)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  874)     protected function parseHelloFields($type)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  875)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  876)         $this->server_caps = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  877)         $lines = explode("\n", $this->helo_rply);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  878) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  879)         foreach ($lines as $n => $s) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  880)             //First 4 chars contain response code followed by - or space
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  881)             $s = trim(substr($s, 4));
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  882)             if (empty($s)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  883)                 continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  884)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  885)             $fields = explode(' ', $s);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  886)             if (!empty($fields)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  887)                 if (!$n) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  888)                     $name = $type;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  889)                     $fields = $fields[0];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  890)                 } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  891)                     $name = array_shift($fields);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  892)                     switch ($name) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  893)                         case 'SIZE':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  894)                             $fields = ($fields ? $fields[0] : 0);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  895)                             break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  896)                         case 'AUTH':
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  897)                             if (!is_array($fields)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  898)                                 $fields = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  899)                             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  900)                             break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  901)                         default:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  902)                             $fields = true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  903)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  904)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  905)                 $this->server_caps[$name] = $fields;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  906)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  907)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  908)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  909) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  910)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  911)      * Send an SMTP MAIL command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  912)      * Starts a mail transaction from the email address specified in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  913)      * $from. Returns true if successful or false otherwise. If True
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  914)      * the mail transaction is started and then one or more recipient
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  915)      * commands may be called followed by a data command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  916)      * Implements RFC 821: MAIL <SP> FROM:<reverse-path> <CRLF>.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  917)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  918)      * @param string $from Source address of this message
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  919)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  920)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  921)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  922)     public function mail($from)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  923)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  924)         $useVerp = ($this->do_verp ? ' XVERP' : '');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  925) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  926)         return $this->sendCommand(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  927)             'MAIL FROM',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  928)             'MAIL FROM:<' . $from . '>' . $useVerp,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  929)             250
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  930)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  931)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  932) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  933)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  934)      * Send an SMTP QUIT command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  935)      * Closes the socket if there is no error or the $close_on_error argument is true.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  936)      * Implements from RFC 821: QUIT <CRLF>.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  937)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  938)      * @param bool $close_on_error Should the connection close if an error occurs?
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  939)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  940)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  941)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  942)     public function quit($close_on_error = true)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  943)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  944)         $noerror = $this->sendCommand('QUIT', 'QUIT', 221);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  945)         $err = $this->error; //Save any error
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  946)         if ($noerror || $close_on_error) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  947)             $this->close();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  948)             $this->error = $err; //Restore any error from the quit command
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  949)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  950) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  951)         return $noerror;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  952)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  953) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  954)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  955)      * Send an SMTP RCPT command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  956)      * Sets the TO argument to $toaddr.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  957)      * Returns true if the recipient was accepted false if it was rejected.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  958)      * Implements from RFC 821: RCPT <SP> TO:<forward-path> <CRLF>.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  959)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  960)      * @param string $address The address the message is being sent to
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  961)      * @param string $dsn     Comma separated list of DSN notifications. NEVER, SUCCESS, FAILURE
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  962)      *                        or DELAY. If you specify NEVER all other notifications are ignored.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  963)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  964)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  965)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  966)     public function recipient($address, $dsn = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  967)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  968)         if (empty($dsn)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  969)             $rcpt = 'RCPT TO:<' . $address . '>';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  970)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  971)             $dsn = strtoupper($dsn);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  972)             $notify = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  973) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  974)             if (strpos($dsn, 'NEVER') !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  975)                 $notify[] = 'NEVER';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  976)             } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  977)                 foreach (['SUCCESS', 'FAILURE', 'DELAY'] as $value) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  978)                     if (strpos($dsn, $value) !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  979)                         $notify[] = $value;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  980)                     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  981)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  982)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  983) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  984)             $rcpt = 'RCPT TO:<' . $address . '> NOTIFY=' . implode(',', $notify);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  985)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  986) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  987)         return $this->sendCommand(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  988)             'RCPT TO',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  989)             $rcpt,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  990)             [250, 251]
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  991)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  992)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  993) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  994)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  995)      * Send SMTP XCLIENT command to server and check its return code.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  996)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  997)      * @return bool True on success
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  998)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400  999)     public function xclient(array $vars)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1000)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1001)         $xclient_options = "";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1002)         foreach ($vars as $key => $value) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1003)             if (in_array($key, SMTP::$xclient_allowed_attributes)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1004)                 $xclient_options .= " {$key}={$value}";
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1005)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1006)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1007)         if (!$xclient_options) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1008)             return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1009)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1010)         return $this->sendCommand('XCLIENT', 'XCLIENT' . $xclient_options, 250);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1011)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1012) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1013)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1014)      * Send an SMTP RSET command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1015)      * Abort any transaction that is currently in progress.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1016)      * Implements RFC 821: RSET <CRLF>.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1017)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1018)      * @return bool True on success
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1019)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1020)     public function reset()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1021)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1022)         return $this->sendCommand('RSET', 'RSET', 250);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1023)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1024) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1025)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1026)      * Send a command to an SMTP server and check its return code.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1027)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1028)      * @param string    $command       The command name - not sent to the server
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1029)      * @param string    $commandstring The actual command to send
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1030)      * @param int|array $expect        One or more expected integer success codes
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1031)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1032)      * @return bool True on success
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1033)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1034)     protected function sendCommand($command, $commandstring, $expect)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1035)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1036)         if (!$this->connected()) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1037)             $this->setError("Called $command without being connected");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1038) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1039)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1040)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1041)         //Reject line breaks in all commands
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1042)         if ((strpos($commandstring, "\n") !== false) || (strpos($commandstring, "\r") !== false)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1043)             $this->setError("Command '$command' contained line breaks");
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1044) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1045)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1046)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1047)         $this->client_send($commandstring . static::LE, $command);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1048) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1049)         $this->last_reply = $this->get_lines();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1050)         //Fetch SMTP code and possible error code explanation
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1051)         $matches = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1052)         if (preg_match('/^([\d]{3})[ -](?:([\d]\\.[\d]\\.[\d]{1,2}) )?/', $this->last_reply, $matches)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1053)             $code = (int) $matches[1];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1054)             $code_ex = (count($matches) > 2 ? $matches[2] : null);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1055)             //Cut off error code from each response line
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1056)             $detail = preg_replace(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1057)                 "/{$code}[ -]" .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1058)                 ($code_ex ? str_replace('.', '\\.', $code_ex) . ' ' : '') . '/m',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1059)                 '',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1060)                 $this->last_reply
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1061)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1062)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1063)             //Fall back to simple parsing if regex fails
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1064)             $code = (int) substr($this->last_reply, 0, 3);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1065)             $code_ex = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1066)             $detail = substr($this->last_reply, 4);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1067)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1068) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1069)         $this->edebug('SERVER -> CLIENT: ' . $this->last_reply, self::DEBUG_SERVER);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1070) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1071)         if (!in_array($code, (array) $expect, true)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1072)             $this->setError(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1073)                 "$command command failed",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1074)                 $detail,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1075)                 $code,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1076)                 $code_ex
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1077)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1078)             $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1079)                 'SMTP ERROR: ' . $this->error['error'] . ': ' . $this->last_reply,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1080)                 self::DEBUG_CLIENT
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1081)             );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1082) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1083)             return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1084)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1085) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1086)         //Don't clear the error store when using keepalive
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1087)         if ($command !== 'RSET') {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1088)             $this->setError('');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1089)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1090) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1091)         return true;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1092)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1093) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1094)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1095)      * Send an SMTP SAML command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1096)      * Starts a mail transaction from the email address specified in $from.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1097)      * Returns true if successful or false otherwise. If True
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1098)      * the mail transaction is started and then one or more recipient
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1099)      * commands may be called followed by a data command. This command
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1100)      * will send the message to the users terminal if they are logged
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1101)      * in and send them an email.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1102)      * Implements RFC 821: SAML <SP> FROM:<reverse-path> <CRLF>.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1103)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1104)      * @param string $from The address the message is from
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1105)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1106)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1107)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1108)     public function sendAndMail($from)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1109)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1110)         return $this->sendCommand('SAML', "SAML FROM:$from", 250);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1111)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1112) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1113)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1114)      * Send an SMTP VRFY command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1115)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1116)      * @param string $name The name to verify
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1117)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1118)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1119)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1120)     public function verify($name)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1121)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1122)         return $this->sendCommand('VRFY', "VRFY $name", [250, 251]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1123)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1124) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1125)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1126)      * Send an SMTP NOOP command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1127)      * Used to keep keep-alives alive, doesn't actually do anything.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1128)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1129)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1130)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1131)     public function noop()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1132)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1133)         return $this->sendCommand('NOOP', 'NOOP', 250);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1134)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1135) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1136)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1137)      * Send an SMTP TURN command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1138)      * This is an optional command for SMTP that this class does not support.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1139)      * This method is here to make the RFC821 Definition complete for this class
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1140)      * and _may_ be implemented in future.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1141)      * Implements from RFC 821: TURN <CRLF>.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1142)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1143)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1144)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1145)     public function turn()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1146)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1147)         $this->setError('The SMTP TURN command is not implemented');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1148)         $this->edebug('SMTP NOTICE: ' . $this->error['error'], self::DEBUG_CLIENT);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1149) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1150)         return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1151)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1152) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1153)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1154)      * Send raw data to the server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1155)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1156)      * @param string $data    The data to send
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1157)      * @param string $command Optionally, the command this is part of, used only for controlling debug output
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1158)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1159)      * @return int|bool The number of bytes sent to the server or false on error
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1160)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1161)     public function client_send($data, $command = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1162)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1163)         //If SMTP transcripts are left enabled, or debug output is posted online
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1164)         //it can leak credentials, so hide credentials in all but lowest level
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1165)         if (
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1166)             self::DEBUG_LOWLEVEL > $this->do_debug &&
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1167)             in_array($command, ['User & Password', 'Username', 'Password'], true)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1168)         ) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1169)             $this->edebug('CLIENT -> SERVER: [credentials hidden]', self::DEBUG_CLIENT);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1170)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1171)             $this->edebug('CLIENT -> SERVER: ' . $data, self::DEBUG_CLIENT);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1172)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1173)         set_error_handler(function () {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1174)             call_user_func_array([$this, 'errorHandler'], func_get_args());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1175)         });
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1176)         $result = fwrite($this->smtp_conn, $data);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1177)         restore_error_handler();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1178) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1179)         return $result;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1180)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1181) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1182)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1183)      * Get the latest error.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1184)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1185)      * @return array
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1186)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1187)     public function getError()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1188)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1189)         return $this->error;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1190)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1191) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1192)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1193)      * Get SMTP extensions available on the server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1194)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1195)      * @return array|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1196)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1197)     public function getServerExtList()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1198)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1199)         return $this->server_caps;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1200)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1201) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1202)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1203)      * Get metadata about the SMTP server from its HELO/EHLO response.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1204)      * The method works in three ways, dependent on argument value and current state:
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1205)      *   1. HELO/EHLO has not been sent - returns null and populates $this->error.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1206)      *   2. HELO has been sent -
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1207)      *     $name == 'HELO': returns server name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1208)      *     $name == 'EHLO': returns boolean false
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1209)      *     $name == any other string: returns null and populates $this->error
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1210)      *   3. EHLO has been sent -
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1211)      *     $name == 'HELO'|'EHLO': returns the server name
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1212)      *     $name == any other string: if extension $name exists, returns True
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1213)      *       or its options (e.g. AUTH mechanisms supported). Otherwise returns False.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1214)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1215)      * @param string $name Name of SMTP extension or 'HELO'|'EHLO'
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1216)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1217)      * @return string|bool|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1218)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1219)     public function getServerExt($name)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1220)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1221)         if (!$this->server_caps) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1222)             $this->setError('No HELO/EHLO was sent');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1223) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1224)             return null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1225)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1226) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1227)         if (!array_key_exists($name, $this->server_caps)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1228)             if ('HELO' === $name) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1229)                 return $this->server_caps['EHLO'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1230)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1231)             if ('EHLO' === $name || array_key_exists('EHLO', $this->server_caps)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1232)                 return false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1233)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1234)             $this->setError('HELO handshake was used; No information about server extensions available');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1235) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1236)             return null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1237)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1238) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1239)         return $this->server_caps[$name];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1240)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1241) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1242)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1243)      * Get the last reply from the server.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1244)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1245)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1246)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1247)     public function getLastReply()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1248)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1249)         return $this->last_reply;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1250)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1251) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1252)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1253)      * Read the SMTP server's response.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1254)      * Either before eof or socket timeout occurs on the operation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1255)      * With SMTP we can tell if we have more lines to read if the
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1256)      * 4th character is '-' symbol. If it is a space then we don't
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1257)      * need to read anything else.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1258)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1259)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1260)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1261)     protected function get_lines()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1262)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1263)         //If the connection is bad, give up straight away
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1264)         if (!is_resource($this->smtp_conn)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1265)             return '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1266)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1267)         $data = '';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1268)         $endtime = 0;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1269)         stream_set_timeout($this->smtp_conn, $this->Timeout);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1270)         if ($this->Timelimit > 0) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1271)             $endtime = time() + $this->Timelimit;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1272)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1273)         $selR = [$this->smtp_conn];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1274)         $selW = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1275)         while (is_resource($this->smtp_conn) && !feof($this->smtp_conn)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1276)             //Must pass vars in here as params are by reference
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1277)             //solution for signals inspired by https://github.com/symfony/symfony/pull/6540
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1278)             set_error_handler(function () {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1279)                 call_user_func_array([$this, 'errorHandler'], func_get_args());
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1280)             });
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1281)             $n = stream_select($selR, $selW, $selW, $this->Timelimit);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1282)             restore_error_handler();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1283) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1284)             if ($n === false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1285)                 $message = $this->getError()['detail'];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1286) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1287)                 $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1288)                     'SMTP -> get_lines(): select failed (' . $message . ')',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1289)                     self::DEBUG_LOWLEVEL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1290)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1291) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1292)                 //stream_select returns false when the `select` system call is interrupted
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1293)                 //by an incoming signal, try the select again
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1294)                 if (stripos($message, 'interrupted system call') !== false) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1295)                     $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1296)                         'SMTP -> get_lines(): retrying stream_select',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1297)                         self::DEBUG_LOWLEVEL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1298)                     );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1299)                     $this->setError('');
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1300)                     continue;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1301)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1302) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1303)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1304)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1305) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1306)             if (!$n) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1307)                 $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1308)                     'SMTP -> get_lines(): select timed-out in (' . $this->Timelimit . ' sec)',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1309)                     self::DEBUG_LOWLEVEL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1310)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1311)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1312)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1313) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1314)             //Deliberate noise suppression - errors are handled afterwards
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1315)             $str = @fgets($this->smtp_conn, self::MAX_REPLY_LENGTH);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1316)             $this->edebug('SMTP INBOUND: "' . trim($str) . '"', self::DEBUG_LOWLEVEL);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1317)             $data .= $str;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1318)             //If response is only 3 chars (not valid, but RFC5321 S4.2 says it must be handled),
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1319)             //or 4th character is a space or a line break char, we are done reading, break the loop.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1320)             //String array access is a significant micro-optimisation over strlen
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1321)             if (!isset($str[3]) || $str[3] === ' ' || $str[3] === "\r" || $str[3] === "\n") {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1322)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1323)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1324)             //Timed-out? Log and break
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1325)             $info = stream_get_meta_data($this->smtp_conn);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1326)             if ($info['timed_out']) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1327)                 $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1328)                     'SMTP -> get_lines(): stream timed-out (' . $this->Timeout . ' sec)',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1329)                     self::DEBUG_LOWLEVEL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1330)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1331)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1332)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1333)             //Now check if reads took too long
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1334)             if ($endtime && time() > $endtime) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1335)                 $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1336)                     'SMTP -> get_lines(): timelimit reached (' .
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1337)                     $this->Timelimit . ' sec)',
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1338)                     self::DEBUG_LOWLEVEL
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1339)                 );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1340)                 break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1341)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1342)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1343) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1344)         return $data;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1345)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1346) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1347)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1348)      * Enable or disable VERP address generation.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1349)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1350)      * @param bool $enabled
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1351)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1352)     public function setVerp($enabled = false)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1353)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1354)         $this->do_verp = $enabled;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1355)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1356) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1357)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1358)      * Get VERP address generation mode.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1359)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1360)      * @return bool
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1361)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1362)     public function getVerp()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1363)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1364)         return $this->do_verp;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1365)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1366) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1367)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1368)      * Set error messages and codes.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1369)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1370)      * @param string $message      The error message
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1371)      * @param string $detail       Further detail on the error
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1372)      * @param string $smtp_code    An associated SMTP error code
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1373)      * @param string $smtp_code_ex Extended SMTP code
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1374)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1375)     protected function setError($message, $detail = '', $smtp_code = '', $smtp_code_ex = '')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1376)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1377)         $this->error = [
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1378)             'error' => $message,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1379)             'detail' => $detail,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1380)             'smtp_code' => $smtp_code,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1381)             'smtp_code_ex' => $smtp_code_ex,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1382)         ];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1383)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1384) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1385)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1386)      * Set debug output method.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1387)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1388)      * @param string|callable $method The name of the mechanism to use for debugging output, or a callable to handle it
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1389)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1390)     public function setDebugOutput($method = 'echo')
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1391)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1392)         $this->Debugoutput = $method;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1393)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1394) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1395)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1396)      * Get debug output method.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1397)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1398)      * @return string
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1399)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1400)     public function getDebugOutput()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1401)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1402)         return $this->Debugoutput;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1403)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1404) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1405)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1406)      * Set debug output level.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1407)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1408)      * @param int $level
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1409)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1410)     public function setDebugLevel($level = 0)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1411)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1412)         $this->do_debug = $level;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1413)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1414) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1415)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1416)      * Get debug output level.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1417)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1418)      * @return int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1419)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1420)     public function getDebugLevel()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1421)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1422)         return $this->do_debug;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1423)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1424) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1425)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1426)      * Set SMTP timeout.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1427)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1428)      * @param int $timeout The timeout duration in seconds
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1429)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1430)     public function setTimeout($timeout = 0)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1431)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1432)         $this->Timeout = $timeout;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1433)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1434) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1435)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1436)      * Get SMTP timeout.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1437)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1438)      * @return int
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1439)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1440)     public function getTimeout()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1441)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1442)         return $this->Timeout;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1443)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1444) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1445)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1446)      * Reports an error number and string.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1447)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1448)      * @param int    $errno   The error number returned by PHP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1449)      * @param string $errmsg  The error message returned by PHP
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1450)      * @param string $errfile The file the error occurred in
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1451)      * @param int    $errline The line number the error occurred on
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1452)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1453)     protected function errorHandler($errno, $errmsg, $errfile = '', $errline = 0)
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1454)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1455)         $notice = 'Connection failed.';
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1456)         $this->setError(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1457)             $notice,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1458)             $errmsg,
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1459)             (string) $errno
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1460)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1461)         $this->edebug(
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1462)             "$notice Error #$errno: $errmsg [$errfile line $errline]",
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1463)             self::DEBUG_CONNECTION
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1464)         );
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1465)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1466) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1467)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1468)      * Extract and return the ID of the last SMTP transaction based on
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1469)      * a list of patterns provided in SMTP::$smtp_transaction_id_patterns.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1470)      * Relies on the host providing the ID in response to a DATA command.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1471)      * If no reply has been received yet, it will return null.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1472)      * If no pattern was matched, it will return false.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1473)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1474)      * @return bool|string|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1475)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1476)     protected function recordLastTransactionID()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1477)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1478)         $reply = $this->getLastReply();
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1479) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1480)         if (empty($reply)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1481)             $this->last_smtp_transaction_id = null;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1482)         } else {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1483)             $this->last_smtp_transaction_id = false;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1484)             foreach ($this->smtp_transaction_id_patterns as $smtp_transaction_id_pattern) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1485)                 $matches = [];
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1486)                 if (preg_match($smtp_transaction_id_pattern, $reply, $matches)) {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1487)                     $this->last_smtp_transaction_id = trim($matches[1]);
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1488)                     break;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1489)                 }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1490)             }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1491)         }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1492) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1493)         return $this->last_smtp_transaction_id;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1494)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1495) 
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1496)     /**
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1497)      * Get the queue/transaction ID of the last SMTP transaction
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1498)      * If no reply has been received yet, it will return null.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1499)      * If no pattern was matched, it will return false.
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1500)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1501)      * @return bool|string|null
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1502)      *
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1503)      * @see recordLastTransactionID()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1504)      */
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1505)     public function getLastTransactionID()
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1506)     {
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1507)         return $this->last_smtp_transaction_id;
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1508)     }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1509) }
a9dc06ad (Bella Matasic 2024-10-13 23:23:32 -0400 1) 6.9.2
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  1) ### Gmail Account Information
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  2) 
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  3) login: PickUrPlace904@gmail.com
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  4) password: PickUrPl@ce904!
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  5) 
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  6) ### AWS Account Information
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  7) 
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  8) email: PickUrPlace904@gmail.com
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  9) account name: PickUrPlace904
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 10) password: PickUrPl@ce904!
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  1) <!-- 
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  2)  SMTP endpoint address: 
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  3)  email-smtp.us-east-2.amazonaws.com
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  4)  email-smtp-fips.us-east-2.amazonaws.com  
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  5) 
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  6) Amazon SES SMTP interface port number:
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  7) STARTTLS Port
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  8) 25, 587 or 2587
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400  9) -->
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 10) 
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 11) <?php
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 12) //Import PHPMailer classes into the global namespace
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 13) //These must be at the top of your script, not inside a function
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 14) use PHPMailer\PHPMailer\PHPMailer;
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 15) use PHPMailer\PHPMailer\SMTP;
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 16) use PHPMailer\PHPMailer\Exception;
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 17) 
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 18) //Load Composer's autoloader
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 19) require 'path/to/PHPMailer/src/Exception.php';
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 20) require 'path/to/PHPMailer/src/PHPMailer.php';
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 21) require 'path/to/PHPMailer/src/SMTP.php';
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 22) require 'vendor/autoload.php';
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 23) 
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 24) //Create an instance; passing `true` enables exceptions
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 25) $mail = new PHPMailer(true);
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 26) 
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 27) try {
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 28)     // Server settings
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 29)     $mail->SMTPDebug = SMTP::DEBUG_SERVER;                      // Enable verbose debug output
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 30)     $mail->isSMTP();                           // Send using SMTP
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 31)     $mail->Host       = 'smtp.gmail.com';    // Set the SMTP server to send through
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 32)     $mail->SMTPAuth   = true;                  // Enable SMTP authentication
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 33)     $mail->Username   = 'your_email@example.com'; // SMTP username
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 34)     $mail->Password   = 'your_email_password';   // SMTP password
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 35)     $mail->SMTPSecure = PHPMailer::ENCRYPTION_STARTTLS; // Enable TLS encryption; `PHPMailer::ENCRYPTION_SMTPS` also accepted
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 36)     $mail->Port       = 587;                   // TCP port to connect to
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 37) 
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 38)     // Recipients
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 39)     $mail->setFrom('your_email@example.com', 'Your Name');
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 40)     $mail->addAddress('recipient@example.com', 'Recipient Name');  // Add a recipient
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 41) 
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 42)     // Content
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 43)     $mail->isHTML(true);  // Set email format to HTML
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 44)     $mail->Subject = 'Test Email using PHPMailer';
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 45)     $mail->Body    = 'This is the HTML message body <b>in bold!</b>';
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 46)     $mail->AltBody = 'This is the plain text body for non-HTML email clients';
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 47) 
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 48)     // Send email
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 49)     $mail->send();
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 50)     echo 'Message has been sent';
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 51) } catch (Exception $e) {
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 52)     echo "Message could not be sent. Mailer Error: {$mail->ErrorInfo}";
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 53) }
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 54) 
b6c63755 (Bella Matasic 2024-09-30 15:07:15 -0400 55) ?>
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 1) ﻿IAM user name,SMTP user name,SMTP password
9d616c35 (Bella Matasic 2024-10-14 09:32:15 -0400 2) ses-smtp-user.20241014-090135,AKIAU5LH5V5QZPX7Z7IG,BM1CSFmMkzlRqyK+oX74XIGneD3Hg1BLrZ7Oej6vjw+X
